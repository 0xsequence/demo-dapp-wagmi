import{r as gm,c as tr,g as ym,a as vm,_ as _m}from"./index-f3fbe707.js";var Wt={},mm={get exports(){return Wt},set exports(n){Wt=n}},Pn=typeof Reflect=="object"?Reflect:null,Rf=Pn&&typeof Pn.apply=="function"?Pn.apply:function(e,r,s){return Function.prototype.apply.call(e,r,s)},Po;Pn&&typeof Pn.ownKeys=="function"?Po=Pn.ownKeys:Object.getOwnPropertySymbols?Po=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Po=function(e){return Object.getOwnPropertyNames(e)};function bm(n){console&&console.warn&&console.warn(n)}var gd=Number.isNaN||function(e){return e!==e};function ot(){ot.init.call(this)}mm.exports=ot;Wt.once=Sm;ot.EventEmitter=ot;ot.prototype._events=void 0;ot.prototype._eventsCount=0;ot.prototype._maxListeners=void 0;var Tf=10;function qo(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(ot,"defaultMaxListeners",{enumerable:!0,get:function(){return Tf},set:function(n){if(typeof n!="number"||n<0||gd(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");Tf=n}});ot.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ot.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||gd(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function yd(n){return n._maxListeners===void 0?ot.defaultMaxListeners:n._maxListeners}ot.prototype.getMaxListeners=function(){return yd(this)};ot.prototype.emit=function(e){for(var r=[],s=1;s<arguments.length;s++)r.push(arguments[s]);var a=e==="error",f=this._events;if(f!==void 0)a=a&&f.error===void 0;else if(!a)return!1;if(a){var p;if(r.length>0&&(p=r[0]),p instanceof Error)throw p;var l=new Error("Unhandled error."+(p?" ("+p.message+")":""));throw l.context=p,l}var y=f[e];if(y===void 0)return!1;if(typeof y=="function")Rf(y,this,r);else for(var D=y.length,x=wd(y,D),s=0;s<D;++s)Rf(x[s],this,r);return!0};function vd(n,e,r,s){var a,f,p;if(qo(r),f=n._events,f===void 0?(f=n._events=Object.create(null),n._eventsCount=0):(f.newListener!==void 0&&(n.emit("newListener",e,r.listener?r.listener:r),f=n._events),p=f[e]),p===void 0)p=f[e]=r,++n._eventsCount;else if(typeof p=="function"?p=f[e]=s?[r,p]:[p,r]:s?p.unshift(r):p.push(r),a=yd(n),a>0&&p.length>a&&!p.warned){p.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+p.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=n,l.type=e,l.count=p.length,bm(l)}return n}ot.prototype.addListener=function(e,r){return vd(this,e,r,!1)};ot.prototype.on=ot.prototype.addListener;ot.prototype.prependListener=function(e,r){return vd(this,e,r,!0)};function wm(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _d(n,e,r){var s={fired:!1,wrapFn:void 0,target:n,type:e,listener:r},a=wm.bind(s);return a.listener=r,s.wrapFn=a,a}ot.prototype.once=function(e,r){return qo(r),this.on(e,_d(this,e,r)),this};ot.prototype.prependOnceListener=function(e,r){return qo(r),this.prependListener(e,_d(this,e,r)),this};ot.prototype.removeListener=function(e,r){var s,a,f,p,l;if(qo(r),a=this._events,a===void 0)return this;if(s=a[e],s===void 0)return this;if(s===r||s.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete a[e],a.removeListener&&this.emit("removeListener",e,s.listener||r));else if(typeof s!="function"){for(f=-1,p=s.length-1;p>=0;p--)if(s[p]===r||s[p].listener===r){l=s[p].listener,f=p;break}if(f<0)return this;f===0?s.shift():Em(s,f),s.length===1&&(a[e]=s[0]),a.removeListener!==void 0&&this.emit("removeListener",e,l||r)}return this};ot.prototype.off=ot.prototype.removeListener;ot.prototype.removeAllListeners=function(e){var r,s,a;if(s=this._events,s===void 0)return this;if(s.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):s[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete s[e]),this;if(arguments.length===0){var f=Object.keys(s),p;for(a=0;a<f.length;++a)p=f[a],p!=="removeListener"&&this.removeAllListeners(p);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=s[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(a=r.length-1;a>=0;a--)this.removeListener(e,r[a]);return this};function md(n,e,r){var s=n._events;if(s===void 0)return[];var a=s[e];return a===void 0?[]:typeof a=="function"?r?[a.listener||a]:[a]:r?Dm(a):wd(a,a.length)}ot.prototype.listeners=function(e){return md(this,e,!0)};ot.prototype.rawListeners=function(e){return md(this,e,!1)};ot.listenerCount=function(n,e){return typeof n.listenerCount=="function"?n.listenerCount(e):bd.call(n,e)};ot.prototype.listenerCount=bd;function bd(n){var e=this._events;if(e!==void 0){var r=e[n];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}ot.prototype.eventNames=function(){return this._eventsCount>0?Po(this._events):[]};function wd(n,e){for(var r=new Array(e),s=0;s<e;++s)r[s]=n[s];return r}function Em(n,e){for(;e+1<n.length;e++)n[e]=n[e+1];n.pop()}function Dm(n){for(var e=new Array(n.length),r=0;r<e.length;++r)e[r]=n[r].listener||n[r];return e}function Sm(n,e){return new Promise(function(r,s){function a(p){n.removeListener(e,f),s(p)}function f(){typeof n.removeListener=="function"&&n.removeListener("error",a),r([].slice.call(arguments))}Ed(n,e,f,{once:!0}),e!=="error"&&Im(n,a,{once:!0})})}function Im(n,e,r){typeof n.on=="function"&&Ed(n,"error",e,r)}function Ed(n,e,r,s){if(typeof n.on=="function")s.once?n.once(e,r):n.on(e,r);else if(typeof n.addEventListener=="function")n.addEventListener(e,function a(f){s.once&&n.removeEventListener(e,a),r(f)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}var cu={},zo={},Ue={},Dd={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});function e(l,y){var D=l>>>16&65535,x=l&65535,N=y>>>16&65535,V=y&65535;return x*V+(D*V+x*N<<16>>>0)|0}n.mul=Math.imul||e;function r(l,y){return l+y|0}n.add=r;function s(l,y){return l-y|0}n.sub=s;function a(l,y){return l<<y|l>>>32-y}n.rotl=a;function f(l,y){return l<<32-y|l>>>y}n.rotr=f;function p(l){return typeof l=="number"&&isFinite(l)&&Math.floor(l)===l}n.isInteger=Number.isInteger||p,n.MAX_SAFE_INTEGER=9007199254740991,n.isSafeInteger=function(l){return n.isInteger(l)&&l>=-n.MAX_SAFE_INTEGER&&l<=n.MAX_SAFE_INTEGER}})(Dd);Object.defineProperty(Ue,"__esModule",{value:!0});var Sd=Dd;function xm(n,e){return e===void 0&&(e=0),(n[e+0]<<8|n[e+1])<<16>>16}Ue.readInt16BE=xm;function Om(n,e){return e===void 0&&(e=0),(n[e+0]<<8|n[e+1])>>>0}Ue.readUint16BE=Om;function Am(n,e){return e===void 0&&(e=0),(n[e+1]<<8|n[e])<<16>>16}Ue.readInt16LE=Am;function Cm(n,e){return e===void 0&&(e=0),(n[e+1]<<8|n[e])>>>0}Ue.readUint16LE=Cm;function Id(n,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=n>>>8,e[r+1]=n>>>0,e}Ue.writeUint16BE=Id;Ue.writeInt16BE=Id;function xd(n,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=n>>>0,e[r+1]=n>>>8,e}Ue.writeUint16LE=xd;Ue.writeInt16LE=xd;function zc(n,e){return e===void 0&&(e=0),n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]}Ue.readInt32BE=zc;function Kc(n,e){return e===void 0&&(e=0),(n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3])>>>0}Ue.readUint32BE=Kc;function Vc(n,e){return e===void 0&&(e=0),n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e]}Ue.readInt32LE=Vc;function kc(n,e){return e===void 0&&(e=0),(n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e])>>>0}Ue.readUint32LE=kc;function Lo(n,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=n>>>24,e[r+1]=n>>>16,e[r+2]=n>>>8,e[r+3]=n>>>0,e}Ue.writeUint32BE=Lo;Ue.writeInt32BE=Lo;function Fo(n,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=n>>>0,e[r+1]=n>>>8,e[r+2]=n>>>16,e[r+3]=n>>>24,e}Ue.writeUint32LE=Fo;Ue.writeInt32LE=Fo;function Pm(n,e){e===void 0&&(e=0);var r=zc(n,e),s=zc(n,e+4);return r*4294967296+s-(s>>31)*4294967296}Ue.readInt64BE=Pm;function Rm(n,e){e===void 0&&(e=0);var r=Kc(n,e),s=Kc(n,e+4);return r*4294967296+s}Ue.readUint64BE=Rm;function Tm(n,e){e===void 0&&(e=0);var r=Vc(n,e),s=Vc(n,e+4);return s*4294967296+r-(r>>31)*4294967296}Ue.readInt64LE=Tm;function Nm(n,e){e===void 0&&(e=0);var r=kc(n,e),s=kc(n,e+4);return s*4294967296+r}Ue.readUint64LE=Nm;function Od(n,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Lo(n/4294967296>>>0,e,r),Lo(n>>>0,e,r+4),e}Ue.writeUint64BE=Od;Ue.writeInt64BE=Od;function Ad(n,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Fo(n>>>0,e,r),Fo(n/4294967296>>>0,e,r+4),e}Ue.writeUint64LE=Ad;Ue.writeInt64LE=Ad;function Lm(n,e,r){if(r===void 0&&(r=0),n%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(n/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var s=0,a=1,f=n/8+r-1;f>=r;f--)s+=e[f]*a,a*=256;return s}Ue.readUintBE=Lm;function Fm(n,e,r){if(r===void 0&&(r=0),n%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(n/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var s=0,a=1,f=r;f<r+n/8;f++)s+=e[f]*a,a*=256;return s}Ue.readUintLE=Fm;function Um(n,e,r,s){if(r===void 0&&(r=new Uint8Array(n/8)),s===void 0&&(s=0),n%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Sd.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var a=1,f=n/8+s-1;f>=s;f--)r[f]=e/a&255,a*=256;return r}Ue.writeUintBE=Um;function $m(n,e,r,s){if(r===void 0&&(r=new Uint8Array(n/8)),s===void 0&&(s=0),n%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Sd.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var a=1,f=s;f<s+n/8;f++)r[f]=e/a&255,a*=256;return r}Ue.writeUintLE=$m;function Mm(n,e){e===void 0&&(e=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat32(e)}Ue.readFloat32BE=Mm;function jm(n,e){e===void 0&&(e=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat32(e,!0)}Ue.readFloat32LE=jm;function Bm(n,e){e===void 0&&(e=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat64(e)}Ue.readFloat64BE=Bm;function Hm(n,e){e===void 0&&(e=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat64(e,!0)}Ue.readFloat64LE=Hm;function qm(n,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(r,n),e}Ue.writeFloat32BE=qm;function zm(n,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(r,n,!0),e}Ue.writeFloat32LE=zm;function Km(n,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(r,n),e}Ue.writeFloat64BE=Km;function Vm(n,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(r,n,!0),e}Ue.writeFloat64LE=Vm;var Or={};Object.defineProperty(Or,"__esModule",{value:!0});function km(n){for(var e=0;e<n.length;e++)n[e]=0;return n}Or.wipe=km;Object.defineProperty(zo,"__esModule",{value:!0});var er=Ue,Gc=Or,Gm=20;function Wm(n,e,r){for(var s=1634760805,a=857760878,f=2036477234,p=1797285236,l=r[3]<<24|r[2]<<16|r[1]<<8|r[0],y=r[7]<<24|r[6]<<16|r[5]<<8|r[4],D=r[11]<<24|r[10]<<16|r[9]<<8|r[8],x=r[15]<<24|r[14]<<16|r[13]<<8|r[12],N=r[19]<<24|r[18]<<16|r[17]<<8|r[16],V=r[23]<<24|r[22]<<16|r[21]<<8|r[20],F=r[27]<<24|r[26]<<16|r[25]<<8|r[24],R=r[31]<<24|r[30]<<16|r[29]<<8|r[28],k=e[3]<<24|e[2]<<16|e[1]<<8|e[0],Y=e[7]<<24|e[6]<<16|e[5]<<8|e[4],ae=e[11]<<24|e[10]<<16|e[9]<<8|e[8],T=e[15]<<24|e[14]<<16|e[13]<<8|e[12],U=s,S=a,O=f,b=p,c=l,v=y,Z=D,A=x,M=N,z=V,ee=F,g=R,w=k,G=Y,X=ae,W=T,H=0;H<Gm;H+=2)U=U+c|0,w^=U,w=w>>>32-16|w<<16,M=M+w|0,c^=M,c=c>>>32-12|c<<12,S=S+v|0,G^=S,G=G>>>32-16|G<<16,z=z+G|0,v^=z,v=v>>>32-12|v<<12,O=O+Z|0,X^=O,X=X>>>32-16|X<<16,ee=ee+X|0,Z^=ee,Z=Z>>>32-12|Z<<12,b=b+A|0,W^=b,W=W>>>32-16|W<<16,g=g+W|0,A^=g,A=A>>>32-12|A<<12,O=O+Z|0,X^=O,X=X>>>32-8|X<<8,ee=ee+X|0,Z^=ee,Z=Z>>>32-7|Z<<7,b=b+A|0,W^=b,W=W>>>32-8|W<<8,g=g+W|0,A^=g,A=A>>>32-7|A<<7,S=S+v|0,G^=S,G=G>>>32-8|G<<8,z=z+G|0,v^=z,v=v>>>32-7|v<<7,U=U+c|0,w^=U,w=w>>>32-8|w<<8,M=M+w|0,c^=M,c=c>>>32-7|c<<7,U=U+v|0,W^=U,W=W>>>32-16|W<<16,ee=ee+W|0,v^=ee,v=v>>>32-12|v<<12,S=S+Z|0,w^=S,w=w>>>32-16|w<<16,g=g+w|0,Z^=g,Z=Z>>>32-12|Z<<12,O=O+A|0,G^=O,G=G>>>32-16|G<<16,M=M+G|0,A^=M,A=A>>>32-12|A<<12,b=b+c|0,X^=b,X=X>>>32-16|X<<16,z=z+X|0,c^=z,c=c>>>32-12|c<<12,O=O+A|0,G^=O,G=G>>>32-8|G<<8,M=M+G|0,A^=M,A=A>>>32-7|A<<7,b=b+c|0,X^=b,X=X>>>32-8|X<<8,z=z+X|0,c^=z,c=c>>>32-7|c<<7,S=S+Z|0,w^=S,w=w>>>32-8|w<<8,g=g+w|0,Z^=g,Z=Z>>>32-7|Z<<7,U=U+v|0,W^=U,W=W>>>32-8|W<<8,ee=ee+W|0,v^=ee,v=v>>>32-7|v<<7;er.writeUint32LE(U+s|0,n,0),er.writeUint32LE(S+a|0,n,4),er.writeUint32LE(O+f|0,n,8),er.writeUint32LE(b+p|0,n,12),er.writeUint32LE(c+l|0,n,16),er.writeUint32LE(v+y|0,n,20),er.writeUint32LE(Z+D|0,n,24),er.writeUint32LE(A+x|0,n,28),er.writeUint32LE(M+N|0,n,32),er.writeUint32LE(z+V|0,n,36),er.writeUint32LE(ee+F|0,n,40),er.writeUint32LE(g+R|0,n,44),er.writeUint32LE(w+k|0,n,48),er.writeUint32LE(G+Y|0,n,52),er.writeUint32LE(X+ae|0,n,56),er.writeUint32LE(W+T|0,n,60)}function Cd(n,e,r,s,a){if(a===void 0&&(a=0),n.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(s.length<r.length)throw new Error("ChaCha: destination is shorter than source");var f,p;if(a===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");f=new Uint8Array(16),p=f.length-e.length,f.set(e,p)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");f=e,p=a}for(var l=new Uint8Array(64),y=0;y<r.length;y+=64){Wm(l,f,n);for(var D=y;D<y+64&&D<r.length;D++)s[D]=r[D]^l[D-y];Jm(f,0,p)}return Gc.wipe(l),a===0&&Gc.wipe(f),s}zo.streamXOR=Cd;function Ym(n,e,r,s){return s===void 0&&(s=0),Gc.wipe(r),Cd(n,e,r,r,s)}zo.stream=Ym;function Jm(n,e,r){for(var s=1;r--;)s=s+(n[e]&255)|0,n[e]=s&255,s>>>=8,e++;if(s>0)throw new Error("ChaCha: counter overflow")}var Pd={},Ti={};Object.defineProperty(Ti,"__esModule",{value:!0});function Xm(n,e,r){return~(n-1)&e|n-1&r}Ti.select=Xm;function Qm(n,e){return(n|0)-(e|0)-1>>>31&1}Ti.lessOrEqual=Qm;function Rd(n,e){if(n.length!==e.length)return 0;for(var r=0,s=0;s<n.length;s++)r|=n[s]^e[s];return 1&r-1>>>8}Ti.compare=Rd;function Zm(n,e){return n.length===0||e.length===0?!1:Rd(n,e)!==0}Ti.equal=Zm;(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Ti,r=Or;n.DIGEST_LENGTH=16;var s=function(){function p(l){this.digestLength=n.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var y=l[0]|l[1]<<8;this._r[0]=y&8191;var D=l[2]|l[3]<<8;this._r[1]=(y>>>13|D<<3)&8191;var x=l[4]|l[5]<<8;this._r[2]=(D>>>10|x<<6)&7939;var N=l[6]|l[7]<<8;this._r[3]=(x>>>7|N<<9)&8191;var V=l[8]|l[9]<<8;this._r[4]=(N>>>4|V<<12)&255,this._r[5]=V>>>1&8190;var F=l[10]|l[11]<<8;this._r[6]=(V>>>14|F<<2)&8191;var R=l[12]|l[13]<<8;this._r[7]=(F>>>11|R<<5)&8065;var k=l[14]|l[15]<<8;this._r[8]=(R>>>8|k<<8)&8191,this._r[9]=k>>>5&127,this._pad[0]=l[16]|l[17]<<8,this._pad[1]=l[18]|l[19]<<8,this._pad[2]=l[20]|l[21]<<8,this._pad[3]=l[22]|l[23]<<8,this._pad[4]=l[24]|l[25]<<8,this._pad[5]=l[26]|l[27]<<8,this._pad[6]=l[28]|l[29]<<8,this._pad[7]=l[30]|l[31]<<8}return p.prototype._blocks=function(l,y,D){for(var x=this._fin?0:2048,N=this._h[0],V=this._h[1],F=this._h[2],R=this._h[3],k=this._h[4],Y=this._h[5],ae=this._h[6],T=this._h[7],U=this._h[8],S=this._h[9],O=this._r[0],b=this._r[1],c=this._r[2],v=this._r[3],Z=this._r[4],A=this._r[5],M=this._r[6],z=this._r[7],ee=this._r[8],g=this._r[9];D>=16;){var w=l[y+0]|l[y+1]<<8;N+=w&8191;var G=l[y+2]|l[y+3]<<8;V+=(w>>>13|G<<3)&8191;var X=l[y+4]|l[y+5]<<8;F+=(G>>>10|X<<6)&8191;var W=l[y+6]|l[y+7]<<8;R+=(X>>>7|W<<9)&8191;var H=l[y+8]|l[y+9]<<8;k+=(W>>>4|H<<12)&8191,Y+=H>>>1&8191;var Q=l[y+10]|l[y+11]<<8;ae+=(H>>>14|Q<<2)&8191;var ne=l[y+12]|l[y+13]<<8;T+=(Q>>>11|ne<<5)&8191;var ge=l[y+14]|l[y+15]<<8;U+=(ne>>>8|ge<<8)&8191,S+=ge>>>5|x;var ce=0,_e=ce;_e+=N*O,_e+=V*(5*g),_e+=F*(5*ee),_e+=R*(5*z),_e+=k*(5*M),ce=_e>>>13,_e&=8191,_e+=Y*(5*A),_e+=ae*(5*Z),_e+=T*(5*v),_e+=U*(5*c),_e+=S*(5*b),ce+=_e>>>13,_e&=8191;var he=ce;he+=N*b,he+=V*O,he+=F*(5*g),he+=R*(5*ee),he+=k*(5*z),ce=he>>>13,he&=8191,he+=Y*(5*M),he+=ae*(5*A),he+=T*(5*Z),he+=U*(5*v),he+=S*(5*c),ce+=he>>>13,he&=8191;var me=ce;me+=N*c,me+=V*b,me+=F*O,me+=R*(5*g),me+=k*(5*ee),ce=me>>>13,me&=8191,me+=Y*(5*z),me+=ae*(5*M),me+=T*(5*A),me+=U*(5*Z),me+=S*(5*v),ce+=me>>>13,me&=8191;var K=ce;K+=N*v,K+=V*c,K+=F*b,K+=R*O,K+=k*(5*g),ce=K>>>13,K&=8191,K+=Y*(5*ee),K+=ae*(5*z),K+=T*(5*M),K+=U*(5*A),K+=S*(5*Z),ce+=K>>>13,K&=8191;var q=ce;q+=N*Z,q+=V*v,q+=F*c,q+=R*b,q+=k*O,ce=q>>>13,q&=8191,q+=Y*(5*g),q+=ae*(5*ee),q+=T*(5*z),q+=U*(5*M),q+=S*(5*A),ce+=q>>>13,q&=8191;var L=ce;L+=N*A,L+=V*Z,L+=F*v,L+=R*c,L+=k*b,ce=L>>>13,L&=8191,L+=Y*O,L+=ae*(5*g),L+=T*(5*ee),L+=U*(5*z),L+=S*(5*M),ce+=L>>>13,L&=8191;var h=ce;h+=N*M,h+=V*A,h+=F*Z,h+=R*v,h+=k*c,ce=h>>>13,h&=8191,h+=Y*b,h+=ae*O,h+=T*(5*g),h+=U*(5*ee),h+=S*(5*z),ce+=h>>>13,h&=8191;var C=ce;C+=N*z,C+=V*M,C+=F*A,C+=R*Z,C+=k*v,ce=C>>>13,C&=8191,C+=Y*c,C+=ae*b,C+=T*O,C+=U*(5*g),C+=S*(5*ee),ce+=C>>>13,C&=8191;var ue=ce;ue+=N*ee,ue+=V*z,ue+=F*M,ue+=R*A,ue+=k*Z,ce=ue>>>13,ue&=8191,ue+=Y*v,ue+=ae*c,ue+=T*b,ue+=U*O,ue+=S*(5*g),ce+=ue>>>13,ue&=8191;var de=ce;de+=N*g,de+=V*ee,de+=F*z,de+=R*M,de+=k*A,ce=de>>>13,de&=8191,de+=Y*Z,de+=ae*v,de+=T*c,de+=U*b,de+=S*O,ce+=de>>>13,de&=8191,ce=(ce<<2)+ce|0,ce=ce+_e|0,_e=ce&8191,ce=ce>>>13,he+=ce,N=_e,V=he,F=me,R=K,k=q,Y=L,ae=h,T=C,U=ue,S=de,y+=16,D-=16}this._h[0]=N,this._h[1]=V,this._h[2]=F,this._h[3]=R,this._h[4]=k,this._h[5]=Y,this._h[6]=ae,this._h[7]=T,this._h[8]=U,this._h[9]=S},p.prototype.finish=function(l,y){y===void 0&&(y=0);var D=new Uint16Array(10),x,N,V,F;if(this._leftover){for(F=this._leftover,this._buffer[F++]=1;F<16;F++)this._buffer[F]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(x=this._h[1]>>>13,this._h[1]&=8191,F=2;F<10;F++)this._h[F]+=x,x=this._h[F]>>>13,this._h[F]&=8191;for(this._h[0]+=x*5,x=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=x,x=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=x,D[0]=this._h[0]+5,x=D[0]>>>13,D[0]&=8191,F=1;F<10;F++)D[F]=this._h[F]+x,x=D[F]>>>13,D[F]&=8191;for(D[9]-=1<<13,N=(x^1)-1,F=0;F<10;F++)D[F]&=N;for(N=~N,F=0;F<10;F++)this._h[F]=this._h[F]&N|D[F];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,V=this._h[0]+this._pad[0],this._h[0]=V&65535,F=1;F<8;F++)V=(this._h[F]+this._pad[F]|0)+(V>>>16)|0,this._h[F]=V&65535;return l[y+0]=this._h[0]>>>0,l[y+1]=this._h[0]>>>8,l[y+2]=this._h[1]>>>0,l[y+3]=this._h[1]>>>8,l[y+4]=this._h[2]>>>0,l[y+5]=this._h[2]>>>8,l[y+6]=this._h[3]>>>0,l[y+7]=this._h[3]>>>8,l[y+8]=this._h[4]>>>0,l[y+9]=this._h[4]>>>8,l[y+10]=this._h[5]>>>0,l[y+11]=this._h[5]>>>8,l[y+12]=this._h[6]>>>0,l[y+13]=this._h[6]>>>8,l[y+14]=this._h[7]>>>0,l[y+15]=this._h[7]>>>8,this._finished=!0,this},p.prototype.update=function(l){var y=0,D=l.length,x;if(this._leftover){x=16-this._leftover,x>D&&(x=D);for(var N=0;N<x;N++)this._buffer[this._leftover+N]=l[y+N];if(D-=x,y+=x,this._leftover+=x,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(D>=16&&(x=D-D%16,this._blocks(l,y,x),y+=x,D-=x),D){for(var N=0;N<D;N++)this._buffer[this._leftover+N]=l[y+N];this._leftover+=D}return this},p.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var l=new Uint8Array(16);return this.finish(l),l},p.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},p}();n.Poly1305=s;function a(p,l){var y=new s(p);y.update(l);var D=y.digest();return y.clean(),D}n.oneTimeAuth=a;function f(p,l){return p.length!==n.DIGEST_LENGTH||l.length!==n.DIGEST_LENGTH?!1:e.equal(p,l)}n.equal=f})(Pd);(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=zo,r=Pd,s=Or,a=Ue,f=Ti;n.KEY_LENGTH=32,n.NONCE_LENGTH=12,n.TAG_LENGTH=16;var p=new Uint8Array(16),l=function(){function y(D){if(this.nonceLength=n.NONCE_LENGTH,this.tagLength=n.TAG_LENGTH,D.length!==n.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(D)}return y.prototype.seal=function(D,x,N,V){if(D.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var F=new Uint8Array(16);F.set(D,F.length-D.length);var R=new Uint8Array(32);e.stream(this._key,F,R,4);var k=x.length+this.tagLength,Y;if(V){if(V.length!==k)throw new Error("ChaCha20Poly1305: incorrect destination length");Y=V}else Y=new Uint8Array(k);return e.streamXOR(this._key,F,x,Y,4),this._authenticate(Y.subarray(Y.length-this.tagLength,Y.length),R,Y.subarray(0,Y.length-this.tagLength),N),s.wipe(F),Y},y.prototype.open=function(D,x,N,V){if(D.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(x.length<this.tagLength)return null;var F=new Uint8Array(16);F.set(D,F.length-D.length);var R=new Uint8Array(32);e.stream(this._key,F,R,4);var k=new Uint8Array(this.tagLength);if(this._authenticate(k,R,x.subarray(0,x.length-this.tagLength),N),!f.equal(k,x.subarray(x.length-this.tagLength,x.length)))return null;var Y=x.length-this.tagLength,ae;if(V){if(V.length!==Y)throw new Error("ChaCha20Poly1305: incorrect destination length");ae=V}else ae=new Uint8Array(Y);return e.streamXOR(this._key,F,x.subarray(0,x.length-this.tagLength),ae,4),s.wipe(F),ae},y.prototype.clean=function(){return s.wipe(this._key),this},y.prototype._authenticate=function(D,x,N,V){var F=new r.Poly1305(x);V&&(F.update(V),V.length%16>0&&F.update(p.subarray(V.length%16))),F.update(N),N.length%16>0&&F.update(p.subarray(N.length%16));var R=new Uint8Array(8);V&&a.writeUint64LE(V.length,R),F.update(R),a.writeUint64LE(N.length,R),F.update(R);for(var k=F.digest(),Y=0;Y<k.length;Y++)D[Y]=k[Y];F.clean(),s.wipe(k),s.wipe(R)},y}();n.ChaCha20Poly1305=l})(cu);var Td={},ys={},uu={};Object.defineProperty(uu,"__esModule",{value:!0});function eb(n){return typeof n.saveState<"u"&&typeof n.restoreState<"u"&&typeof n.cleanSavedState<"u"}uu.isSerializableHash=eb;Object.defineProperty(ys,"__esModule",{value:!0});var ei=uu,tb=Ti,rb=Or,Nd=function(){function n(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var s=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(s).clean():s.set(r);for(var a=0;a<s.length;a++)s[a]^=54;this._inner.update(s);for(var a=0;a<s.length;a++)s[a]^=106;this._outer.update(s),ei.isSerializableHash(this._inner)&&ei.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),rb.wipe(s)}return n.prototype.reset=function(){if(!ei.isSerializableHash(this._inner)||!ei.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},n.prototype.clean=function(){ei.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),ei.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},n.prototype.update=function(e){return this._inner.update(e),this},n.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},n.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},n.prototype.saveState=function(){if(!ei.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},n.prototype.restoreState=function(e){if(!ei.isSerializableHash(this._inner)||!ei.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},n.prototype.cleanSavedState=function(e){if(!ei.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},n}();ys.HMAC=Nd;function ib(n,e,r){var s=new Nd(n,e);s.update(r);var a=s.digest();return s.clean(),a}ys.hmac=ib;ys.equal=tb.equal;Object.defineProperty(Td,"__esModule",{value:!0});var Nf=ys,Lf=Or,nb=function(){function n(e,r,s,a){s===void 0&&(s=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=a;var f=Nf.hmac(this._hash,s,r);this._hmac=new Nf.HMAC(e,f),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return n.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},n.prototype.expand=function(e){for(var r=new Uint8Array(e),s=0;s<r.length;s++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[s]=this._buffer[this._bufpos++];return r},n.prototype.clean=function(){this._hmac.clean(),Lf.wipe(this._buffer),Lf.wipe(this._counter),this._bufpos=0},n}(),sb=Td.HKDF=nb,Tn={},Ko={},Vo={};Object.defineProperty(Vo,"__esModule",{value:!0});Vo.BrowserRandomSource=void 0;const Ff=65536;class ob{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let s=0;s<r.length;s+=Ff)this._crypto.getRandomValues(r.subarray(s,s+Math.min(r.length-s,Ff)));return r}}Vo.BrowserRandomSource=ob;function ab(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ko={};Object.defineProperty(ko,"__esModule",{value:!0});ko.NodeRandomSource=void 0;const cb=Or;class ub{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof ab<"u"){const e=gm;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const s=new Uint8Array(e);for(let a=0;a<s.length;a++)s[a]=r[a];return(0,cb.wipe)(r),s}}ko.NodeRandomSource=ub;Object.defineProperty(Ko,"__esModule",{value:!0});Ko.SystemRandomSource=void 0;const hb=Vo,fb=ko;class lb{constructor(){if(this.isAvailable=!1,this.name="",this._source=new hb.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new fb.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}Ko.SystemRandomSource=lb;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.randomStringForEntropy=n.randomString=n.randomUint32=n.randomBytes=n.defaultRandomSource=void 0;const e=Ko,r=Ue,s=Or;n.defaultRandomSource=new e.SystemRandomSource;function a(D,x=n.defaultRandomSource){return x.randomBytes(D)}n.randomBytes=a;function f(D=n.defaultRandomSource){const x=a(4,D),N=(0,r.readUint32LE)(x);return(0,s.wipe)(x),N}n.randomUint32=f;const p="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function l(D,x=p,N=n.defaultRandomSource){if(x.length<2)throw new Error("randomString charset is too short");if(x.length>256)throw new Error("randomString charset is too long");let V="";const F=x.length,R=256-256%F;for(;D>0;){const k=a(Math.ceil(D*256/R),N);for(let Y=0;Y<k.length&&D>0;Y++){const ae=k[Y];ae<R&&(V+=x.charAt(ae%F),D--)}(0,s.wipe)(k)}return V}n.randomString=l;function y(D,x=p,N=n.defaultRandomSource){const V=Math.ceil(D/(Math.log(x.length)/Math.LN2));return l(V,x,N)}n.randomStringForEntropy=y})(Tn);var Go={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Ue,r=Or;n.DIGEST_LENGTH=32,n.BLOCK_SIZE=64;var s=function(){function l(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return l.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},l.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},l.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},l.prototype.update=function(y,D){if(D===void 0&&(D=y.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var x=0;if(this._bytesHashed+=D,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&D>0;)this._buffer[this._bufferLength++]=y[x++],D--;this._bufferLength===this.blockSize&&(f(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(D>=this.blockSize&&(x=f(this._temp,this._state,y,x,D),D%=this.blockSize);D>0;)this._buffer[this._bufferLength++]=y[x++],D--;return this},l.prototype.finish=function(y){if(!this._finished){var D=this._bytesHashed,x=this._bufferLength,N=D/536870912|0,V=D<<3,F=D%64<56?64:128;this._buffer[x]=128;for(var R=x+1;R<F-8;R++)this._buffer[R]=0;e.writeUint32BE(N,this._buffer,F-8),e.writeUint32BE(V,this._buffer,F-4),f(this._temp,this._state,this._buffer,0,F),this._finished=!0}for(var R=0;R<this.digestLength/4;R++)e.writeUint32BE(this._state[R],y,R*4);return this},l.prototype.digest=function(){var y=new Uint8Array(this.digestLength);return this.finish(y),y},l.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},l.prototype.restoreState=function(y){return this._state.set(y.state),this._bufferLength=y.bufferLength,y.buffer&&this._buffer.set(y.buffer),this._bytesHashed=y.bytesHashed,this._finished=!1,this},l.prototype.cleanSavedState=function(y){r.wipe(y.state),y.buffer&&r.wipe(y.buffer),y.bufferLength=0,y.bytesHashed=0},l}();n.SHA256=s;var a=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function f(l,y,D,x,N){for(;N>=64;){for(var V=y[0],F=y[1],R=y[2],k=y[3],Y=y[4],ae=y[5],T=y[6],U=y[7],S=0;S<16;S++){var O=x+S*4;l[S]=e.readUint32BE(D,O)}for(var S=16;S<64;S++){var b=l[S-2],c=(b>>>17|b<<32-17)^(b>>>19|b<<32-19)^b>>>10;b=l[S-15];var v=(b>>>7|b<<32-7)^(b>>>18|b<<32-18)^b>>>3;l[S]=(c+l[S-7]|0)+(v+l[S-16]|0)}for(var S=0;S<64;S++){var c=(((Y>>>6|Y<<26)^(Y>>>11|Y<<21)^(Y>>>25|Y<<7))+(Y&ae^~Y&T)|0)+(U+(a[S]+l[S]|0)|0)|0,v=((V>>>2|V<<32-2)^(V>>>13|V<<32-13)^(V>>>22|V<<32-22))+(V&F^V&R^F&R)|0;U=T,T=ae,ae=Y,Y=k+c|0,k=R,R=F,F=V,V=c+v|0}y[0]+=V,y[1]+=F,y[2]+=R,y[3]+=k,y[4]+=Y,y[5]+=ae,y[6]+=T,y[7]+=U,x+=64,N-=64}return x}function p(l){var y=new s;y.update(l);var D=y.digest();return y.clean(),D}n.hash=p})(Go);var hu={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.sharedKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.scalarMultBase=n.scalarMult=n.SHARED_KEY_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=void 0;const e=Tn,r=Or;n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=32,n.SHARED_KEY_LENGTH=32;function s(S){const O=new Float64Array(16);if(S)for(let b=0;b<S.length;b++)O[b]=S[b];return O}const a=new Uint8Array(32);a[0]=9;const f=s([56129,1]);function p(S){let O=1;for(let b=0;b<16;b++){let c=S[b]+O+65535;O=Math.floor(c/65536),S[b]=c-O*65536}S[0]+=O-1+37*(O-1)}function l(S,O,b){const c=~(b-1);for(let v=0;v<16;v++){const Z=c&(S[v]^O[v]);S[v]^=Z,O[v]^=Z}}function y(S,O){const b=s(),c=s();for(let v=0;v<16;v++)c[v]=O[v];p(c),p(c),p(c);for(let v=0;v<2;v++){b[0]=c[0]-65517;for(let A=1;A<15;A++)b[A]=c[A]-65535-(b[A-1]>>16&1),b[A-1]&=65535;b[15]=c[15]-32767-(b[14]>>16&1);const Z=b[15]>>16&1;b[14]&=65535,l(c,b,1-Z)}for(let v=0;v<16;v++)S[2*v]=c[v]&255,S[2*v+1]=c[v]>>8}function D(S,O){for(let b=0;b<16;b++)S[b]=O[2*b]+(O[2*b+1]<<8);S[15]&=32767}function x(S,O,b){for(let c=0;c<16;c++)S[c]=O[c]+b[c]}function N(S,O,b){for(let c=0;c<16;c++)S[c]=O[c]-b[c]}function V(S,O,b){let c,v,Z=0,A=0,M=0,z=0,ee=0,g=0,w=0,G=0,X=0,W=0,H=0,Q=0,ne=0,ge=0,ce=0,_e=0,he=0,me=0,K=0,q=0,L=0,h=0,C=0,ue=0,de=0,Ie=0,qe=0,Ve=0,$e=0,gt=0,yt=0,je=b[0],xe=b[1],Ne=b[2],Le=b[3],Be=b[4],Ae=b[5],Fe=b[6],Se=b[7],Ce=b[8],ze=b[9],Oe=b[10],ke=b[11],We=b[12],et=b[13],tt=b[14],Je=b[15];c=O[0],Z+=c*je,A+=c*xe,M+=c*Ne,z+=c*Le,ee+=c*Be,g+=c*Ae,w+=c*Fe,G+=c*Se,X+=c*Ce,W+=c*ze,H+=c*Oe,Q+=c*ke,ne+=c*We,ge+=c*et,ce+=c*tt,_e+=c*Je,c=O[1],A+=c*je,M+=c*xe,z+=c*Ne,ee+=c*Le,g+=c*Be,w+=c*Ae,G+=c*Fe,X+=c*Se,W+=c*Ce,H+=c*ze,Q+=c*Oe,ne+=c*ke,ge+=c*We,ce+=c*et,_e+=c*tt,he+=c*Je,c=O[2],M+=c*je,z+=c*xe,ee+=c*Ne,g+=c*Le,w+=c*Be,G+=c*Ae,X+=c*Fe,W+=c*Se,H+=c*Ce,Q+=c*ze,ne+=c*Oe,ge+=c*ke,ce+=c*We,_e+=c*et,he+=c*tt,me+=c*Je,c=O[3],z+=c*je,ee+=c*xe,g+=c*Ne,w+=c*Le,G+=c*Be,X+=c*Ae,W+=c*Fe,H+=c*Se,Q+=c*Ce,ne+=c*ze,ge+=c*Oe,ce+=c*ke,_e+=c*We,he+=c*et,me+=c*tt,K+=c*Je,c=O[4],ee+=c*je,g+=c*xe,w+=c*Ne,G+=c*Le,X+=c*Be,W+=c*Ae,H+=c*Fe,Q+=c*Se,ne+=c*Ce,ge+=c*ze,ce+=c*Oe,_e+=c*ke,he+=c*We,me+=c*et,K+=c*tt,q+=c*Je,c=O[5],g+=c*je,w+=c*xe,G+=c*Ne,X+=c*Le,W+=c*Be,H+=c*Ae,Q+=c*Fe,ne+=c*Se,ge+=c*Ce,ce+=c*ze,_e+=c*Oe,he+=c*ke,me+=c*We,K+=c*et,q+=c*tt,L+=c*Je,c=O[6],w+=c*je,G+=c*xe,X+=c*Ne,W+=c*Le,H+=c*Be,Q+=c*Ae,ne+=c*Fe,ge+=c*Se,ce+=c*Ce,_e+=c*ze,he+=c*Oe,me+=c*ke,K+=c*We,q+=c*et,L+=c*tt,h+=c*Je,c=O[7],G+=c*je,X+=c*xe,W+=c*Ne,H+=c*Le,Q+=c*Be,ne+=c*Ae,ge+=c*Fe,ce+=c*Se,_e+=c*Ce,he+=c*ze,me+=c*Oe,K+=c*ke,q+=c*We,L+=c*et,h+=c*tt,C+=c*Je,c=O[8],X+=c*je,W+=c*xe,H+=c*Ne,Q+=c*Le,ne+=c*Be,ge+=c*Ae,ce+=c*Fe,_e+=c*Se,he+=c*Ce,me+=c*ze,K+=c*Oe,q+=c*ke,L+=c*We,h+=c*et,C+=c*tt,ue+=c*Je,c=O[9],W+=c*je,H+=c*xe,Q+=c*Ne,ne+=c*Le,ge+=c*Be,ce+=c*Ae,_e+=c*Fe,he+=c*Se,me+=c*Ce,K+=c*ze,q+=c*Oe,L+=c*ke,h+=c*We,C+=c*et,ue+=c*tt,de+=c*Je,c=O[10],H+=c*je,Q+=c*xe,ne+=c*Ne,ge+=c*Le,ce+=c*Be,_e+=c*Ae,he+=c*Fe,me+=c*Se,K+=c*Ce,q+=c*ze,L+=c*Oe,h+=c*ke,C+=c*We,ue+=c*et,de+=c*tt,Ie+=c*Je,c=O[11],Q+=c*je,ne+=c*xe,ge+=c*Ne,ce+=c*Le,_e+=c*Be,he+=c*Ae,me+=c*Fe,K+=c*Se,q+=c*Ce,L+=c*ze,h+=c*Oe,C+=c*ke,ue+=c*We,de+=c*et,Ie+=c*tt,qe+=c*Je,c=O[12],ne+=c*je,ge+=c*xe,ce+=c*Ne,_e+=c*Le,he+=c*Be,me+=c*Ae,K+=c*Fe,q+=c*Se,L+=c*Ce,h+=c*ze,C+=c*Oe,ue+=c*ke,de+=c*We,Ie+=c*et,qe+=c*tt,Ve+=c*Je,c=O[13],ge+=c*je,ce+=c*xe,_e+=c*Ne,he+=c*Le,me+=c*Be,K+=c*Ae,q+=c*Fe,L+=c*Se,h+=c*Ce,C+=c*ze,ue+=c*Oe,de+=c*ke,Ie+=c*We,qe+=c*et,Ve+=c*tt,$e+=c*Je,c=O[14],ce+=c*je,_e+=c*xe,he+=c*Ne,me+=c*Le,K+=c*Be,q+=c*Ae,L+=c*Fe,h+=c*Se,C+=c*Ce,ue+=c*ze,de+=c*Oe,Ie+=c*ke,qe+=c*We,Ve+=c*et,$e+=c*tt,gt+=c*Je,c=O[15],_e+=c*je,he+=c*xe,me+=c*Ne,K+=c*Le,q+=c*Be,L+=c*Ae,h+=c*Fe,C+=c*Se,ue+=c*Ce,de+=c*ze,Ie+=c*Oe,qe+=c*ke,Ve+=c*We,$e+=c*et,gt+=c*tt,yt+=c*Je,Z+=38*he,A+=38*me,M+=38*K,z+=38*q,ee+=38*L,g+=38*h,w+=38*C,G+=38*ue,X+=38*de,W+=38*Ie,H+=38*qe,Q+=38*Ve,ne+=38*$e,ge+=38*gt,ce+=38*yt,v=1,c=Z+v+65535,v=Math.floor(c/65536),Z=c-v*65536,c=A+v+65535,v=Math.floor(c/65536),A=c-v*65536,c=M+v+65535,v=Math.floor(c/65536),M=c-v*65536,c=z+v+65535,v=Math.floor(c/65536),z=c-v*65536,c=ee+v+65535,v=Math.floor(c/65536),ee=c-v*65536,c=g+v+65535,v=Math.floor(c/65536),g=c-v*65536,c=w+v+65535,v=Math.floor(c/65536),w=c-v*65536,c=G+v+65535,v=Math.floor(c/65536),G=c-v*65536,c=X+v+65535,v=Math.floor(c/65536),X=c-v*65536,c=W+v+65535,v=Math.floor(c/65536),W=c-v*65536,c=H+v+65535,v=Math.floor(c/65536),H=c-v*65536,c=Q+v+65535,v=Math.floor(c/65536),Q=c-v*65536,c=ne+v+65535,v=Math.floor(c/65536),ne=c-v*65536,c=ge+v+65535,v=Math.floor(c/65536),ge=c-v*65536,c=ce+v+65535,v=Math.floor(c/65536),ce=c-v*65536,c=_e+v+65535,v=Math.floor(c/65536),_e=c-v*65536,Z+=v-1+37*(v-1),v=1,c=Z+v+65535,v=Math.floor(c/65536),Z=c-v*65536,c=A+v+65535,v=Math.floor(c/65536),A=c-v*65536,c=M+v+65535,v=Math.floor(c/65536),M=c-v*65536,c=z+v+65535,v=Math.floor(c/65536),z=c-v*65536,c=ee+v+65535,v=Math.floor(c/65536),ee=c-v*65536,c=g+v+65535,v=Math.floor(c/65536),g=c-v*65536,c=w+v+65535,v=Math.floor(c/65536),w=c-v*65536,c=G+v+65535,v=Math.floor(c/65536),G=c-v*65536,c=X+v+65535,v=Math.floor(c/65536),X=c-v*65536,c=W+v+65535,v=Math.floor(c/65536),W=c-v*65536,c=H+v+65535,v=Math.floor(c/65536),H=c-v*65536,c=Q+v+65535,v=Math.floor(c/65536),Q=c-v*65536,c=ne+v+65535,v=Math.floor(c/65536),ne=c-v*65536,c=ge+v+65535,v=Math.floor(c/65536),ge=c-v*65536,c=ce+v+65535,v=Math.floor(c/65536),ce=c-v*65536,c=_e+v+65535,v=Math.floor(c/65536),_e=c-v*65536,Z+=v-1+37*(v-1),S[0]=Z,S[1]=A,S[2]=M,S[3]=z,S[4]=ee,S[5]=g,S[6]=w,S[7]=G,S[8]=X,S[9]=W,S[10]=H,S[11]=Q,S[12]=ne,S[13]=ge,S[14]=ce,S[15]=_e}function F(S,O){V(S,O,O)}function R(S,O){const b=s();for(let c=0;c<16;c++)b[c]=O[c];for(let c=253;c>=0;c--)F(b,b),c!==2&&c!==4&&V(b,b,O);for(let c=0;c<16;c++)S[c]=b[c]}function k(S,O){const b=new Uint8Array(32),c=new Float64Array(80),v=s(),Z=s(),A=s(),M=s(),z=s(),ee=s();for(let X=0;X<31;X++)b[X]=S[X];b[31]=S[31]&127|64,b[0]&=248,D(c,O);for(let X=0;X<16;X++)Z[X]=c[X];v[0]=M[0]=1;for(let X=254;X>=0;--X){const W=b[X>>>3]>>>(X&7)&1;l(v,Z,W),l(A,M,W),x(z,v,A),N(v,v,A),x(A,Z,M),N(Z,Z,M),F(M,z),F(ee,v),V(v,A,v),V(A,Z,z),x(z,v,A),N(v,v,A),F(Z,v),N(A,M,ee),V(v,A,f),x(v,v,M),V(A,A,v),V(v,M,ee),V(M,Z,c),F(Z,z),l(v,Z,W),l(A,M,W)}for(let X=0;X<16;X++)c[X+16]=v[X],c[X+32]=A[X],c[X+48]=Z[X],c[X+64]=M[X];const g=c.subarray(32),w=c.subarray(16);R(g,g),V(w,w,g);const G=new Uint8Array(32);return y(G,w),G}n.scalarMult=k;function Y(S){return k(S,a)}n.scalarMultBase=Y;function ae(S){if(S.length!==n.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${n.SECRET_KEY_LENGTH} bytes`);const O=new Uint8Array(S);return{publicKey:Y(O),secretKey:O}}n.generateKeyPairFromSeed=ae;function T(S){const O=(0,e.randomBytes)(32,S),b=ae(O);return(0,r.wipe)(O),b}n.generateKeyPair=T;function U(S,O,b=!1){if(S.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(O.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const c=k(S,O);if(b){let v=0;for(let Z=0;Z<c.length;Z++)v|=c[Z];if(v===0)throw new Error("X25519: invalid shared key")}return c}n.sharedKey=U})(hu);function fu(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function Ld(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?fu(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function Wc(n,e){e||(e=n.reduce((a,f)=>a+f.length,0));const r=Ld(e);let s=0;for(const a of n)r.set(a,s),s+=a.length;return fu(r)}function db(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var a=0;a<n.length;a++){var f=n.charAt(a),p=f.charCodeAt(0);if(r[p]!==255)throw new TypeError(f+" is ambiguous");r[p]=a}var l=n.length,y=n.charAt(0),D=Math.log(l)/Math.log(256),x=Math.log(256)/Math.log(l);function N(R){if(R instanceof Uint8Array||(ArrayBuffer.isView(R)?R=new Uint8Array(R.buffer,R.byteOffset,R.byteLength):Array.isArray(R)&&(R=Uint8Array.from(R))),!(R instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(R.length===0)return"";for(var k=0,Y=0,ae=0,T=R.length;ae!==T&&R[ae]===0;)ae++,k++;for(var U=(T-ae)*x+1>>>0,S=new Uint8Array(U);ae!==T;){for(var O=R[ae],b=0,c=U-1;(O!==0||b<Y)&&c!==-1;c--,b++)O+=256*S[c]>>>0,S[c]=O%l>>>0,O=O/l>>>0;if(O!==0)throw new Error("Non-zero carry");Y=b,ae++}for(var v=U-Y;v!==U&&S[v]===0;)v++;for(var Z=y.repeat(k);v<U;++v)Z+=n.charAt(S[v]);return Z}function V(R){if(typeof R!="string")throw new TypeError("Expected String");if(R.length===0)return new Uint8Array;var k=0;if(R[k]!==" "){for(var Y=0,ae=0;R[k]===y;)Y++,k++;for(var T=(R.length-k)*D+1>>>0,U=new Uint8Array(T);R[k];){var S=r[R.charCodeAt(k)];if(S===255)return;for(var O=0,b=T-1;(S!==0||O<ae)&&b!==-1;b--,O++)S+=l*U[b]>>>0,U[b]=S%256>>>0,S=S/256>>>0;if(S!==0)throw new Error("Non-zero carry");ae=O,k++}if(R[k]!==" "){for(var c=T-ae;c!==T&&U[c]===0;)c++;for(var v=new Uint8Array(Y+(T-c)),Z=Y;c!==T;)v[Z++]=U[c++];return v}}}function F(R){var k=V(R);if(k)return k;throw new Error(`Non-${e} character`)}return{encode:N,decodeUnsafe:V,decode:F}}var pb=db,gb=pb;const yb=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},vb=n=>new TextEncoder().encode(n),_b=n=>new TextDecoder().decode(n);class mb{constructor(e,r,s){this.name=e,this.prefix=r,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class bb{constructor(e,r,s){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Fd(this,e)}}class wb{constructor(e){this.decoders=e}or(e){return Fd(this,e)}decode(e){const r=e[0],s=this.decoders[r];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Fd=(n,e)=>new wb({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});class Eb{constructor(e,r,s,a){this.name=e,this.prefix=r,this.baseEncode=s,this.baseDecode=a,this.encoder=new mb(e,r,s),this.decoder=new bb(e,r,a)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Wo=({name:n,prefix:e,encode:r,decode:s})=>new Eb(n,e,r,s),vs=({prefix:n,name:e,alphabet:r})=>{const{encode:s,decode:a}=gb(r,e);return Wo({prefix:n,name:e,encode:s,decode:f=>yb(a(f))})},Db=(n,e,r,s)=>{const a={};for(let x=0;x<e.length;++x)a[e[x]]=x;let f=n.length;for(;n[f-1]==="=";)--f;const p=new Uint8Array(f*r/8|0);let l=0,y=0,D=0;for(let x=0;x<f;++x){const N=a[n[x]];if(N===void 0)throw new SyntaxError(`Non-${s} character`);y=y<<r|N,l+=r,l>=8&&(l-=8,p[D++]=255&y>>l)}if(l>=r||255&y<<8-l)throw new SyntaxError("Unexpected end of data");return p},Sb=(n,e,r)=>{const s=e[e.length-1]==="=",a=(1<<r)-1;let f="",p=0,l=0;for(let y=0;y<n.length;++y)for(l=l<<8|n[y],p+=8;p>r;)p-=r,f+=e[a&l>>p];if(p&&(f+=e[a&l<<r-p]),s)for(;f.length*r&7;)f+="=";return f},Jt=({name:n,prefix:e,bitsPerChar:r,alphabet:s})=>Wo({prefix:e,name:n,encode(a){return Sb(a,s,r)},decode(a){return Db(a,s,r,n)}}),Ib=Wo({prefix:"\0",name:"identity",encode:n=>_b(n),decode:n=>vb(n)}),xb=Object.freeze(Object.defineProperty({__proto__:null,identity:Ib},Symbol.toStringTag,{value:"Module"})),Ob=Jt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Ab=Object.freeze(Object.defineProperty({__proto__:null,base2:Ob},Symbol.toStringTag,{value:"Module"})),Cb=Jt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Pb=Object.freeze(Object.defineProperty({__proto__:null,base8:Cb},Symbol.toStringTag,{value:"Module"})),Rb=vs({prefix:"9",name:"base10",alphabet:"0123456789"}),Tb=Object.freeze(Object.defineProperty({__proto__:null,base10:Rb},Symbol.toStringTag,{value:"Module"})),Nb=Jt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Lb=Jt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Fb=Object.freeze(Object.defineProperty({__proto__:null,base16:Nb,base16upper:Lb},Symbol.toStringTag,{value:"Module"})),Ub=Jt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),$b=Jt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Mb=Jt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),jb=Jt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Bb=Jt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Hb=Jt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),qb=Jt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),zb=Jt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Kb=Jt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Vb=Object.freeze(Object.defineProperty({__proto__:null,base32:Ub,base32hex:Bb,base32hexpad:qb,base32hexpadupper:zb,base32hexupper:Hb,base32pad:Mb,base32padupper:jb,base32upper:$b,base32z:Kb},Symbol.toStringTag,{value:"Module"})),kb=vs({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Gb=vs({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Wb=Object.freeze(Object.defineProperty({__proto__:null,base36:kb,base36upper:Gb},Symbol.toStringTag,{value:"Module"})),Yb=vs({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Jb=vs({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Xb=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Yb,base58flickr:Jb},Symbol.toStringTag,{value:"Module"})),Qb=Jt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Zb=Jt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ew=Jt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),tw=Jt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),rw=Object.freeze(Object.defineProperty({__proto__:null,base64:Qb,base64pad:Zb,base64url:ew,base64urlpad:tw},Symbol.toStringTag,{value:"Module"})),Ud=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),iw=Ud.reduce((n,e,r)=>(n[r]=e,n),[]),nw=Ud.reduce((n,e,r)=>(n[e.codePointAt(0)]=r,n),[]);function sw(n){return n.reduce((e,r)=>(e+=iw[r],e),"")}function ow(n){const e=[];for(const r of n){const s=nw[r.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(s)}return new Uint8Array(e)}const aw=Wo({prefix:"ðŸš€",name:"base256emoji",encode:sw,decode:ow}),cw=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:aw},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const Uf={...xb,...Ab,...Pb,...Tb,...Fb,...Vb,...Wb,...Xb,...rw,...cw};function $d(n,e,r,s){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:r},decoder:{decode:s}}}const $f=$d("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),Dc=$d("ascii","a",n=>{let e="a";for(let r=0;r<n.length;r++)e+=String.fromCharCode(n[r]);return e},n=>{n=n.substring(1);const e=Ld(n.length);for(let r=0;r<n.length;r++)e[r]=n.charCodeAt(r);return e}),Md={utf8:$f,"utf-8":$f,hex:Uf.base16,latin1:Dc,ascii:Dc,binary:Dc,...Uf};function mr(n,e="utf8"){const r=Md[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?fu(globalThis.Buffer.from(n,"utf-8")):r.decoder.decode(`${r.prefix}${n}`)}function fr(n,e="utf8"){const r=Md[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):r.encoder.encode(n).substring(1)}var Mf=globalThis&&globalThis.__spreadArray||function(n,e,r){if(r||arguments.length===2)for(var s=0,a=e.length,f;s<a;s++)(f||!(s in e))&&(f||(f=Array.prototype.slice.call(e,0,s)),f[s]=e[s]);return n.concat(f||Array.prototype.slice.call(e))},uw=function(){function n(e,r,s){this.name=e,this.version=r,this.os=s,this.type="browser"}return n}(),hw=function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return n}(),fw=function(){function n(e,r,s,a){this.name=e,this.version=r,this.os=s,this.bot=a,this.type="bot-device"}return n}(),lw=function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n}(),dw=function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n}(),pw=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,gw=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,jf=3,yw=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",pw]],Bf=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function vw(n){return n?Hf(n):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new dw:typeof navigator<"u"?Hf(navigator.userAgent):bw()}function _w(n){return n!==""&&yw.reduce(function(e,r){var s=r[0],a=r[1];if(e)return e;var f=a.exec(n);return!!f&&[s,f]},!1)}function Hf(n){var e=_w(n);if(!e)return null;var r=e[0],s=e[1];if(r==="searchbot")return new lw;var a=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);a?a.length<jf&&(a=Mf(Mf([],a,!0),ww(jf-a.length),!0)):a=[];var f=a.join("."),p=mw(n),l=gw.exec(n);return l&&l[1]?new fw(r,f,p,l[1]):new uw(r,f,p)}function mw(n){for(var e=0,r=Bf.length;e<r;e++){var s=Bf[e],a=s[0],f=s[1],p=f.exec(n);if(p)return a}return null}function bw(){var n=typeof process<"u"&&process.version;return n?new hw(process.version.slice(1)):null}function ww(n){for(var e=[],r=0;r<n;r++)e.push("0");return e}var De={},br={},Ew={get exports(){return br},set exports(n){br=n}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(n){var e,r,s,a,f,p,l,y,D,x,N,V,F,R,k,Y,ae,T,U,S,O,b,c;(function(v){var Z=typeof tr=="object"?tr:typeof self=="object"?self:typeof this=="object"?this:{};v(A(Z,A(n.exports)));function A(M,z){return M!==Z&&(typeof Object.create=="function"?Object.defineProperty(M,"__esModule",{value:!0}):M.__esModule=!0),function(ee,g){return M[ee]=z?z(ee,g):g}}})(function(v){var Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,M){A.__proto__=M}||function(A,M){for(var z in M)M.hasOwnProperty(z)&&(A[z]=M[z])};e=function(A,M){Z(A,M);function z(){this.constructor=A}A.prototype=M===null?Object.create(M):(z.prototype=M.prototype,new z)},r=Object.assign||function(A){for(var M,z=1,ee=arguments.length;z<ee;z++){M=arguments[z];for(var g in M)Object.prototype.hasOwnProperty.call(M,g)&&(A[g]=M[g])}return A},s=function(A,M){var z={};for(var ee in A)Object.prototype.hasOwnProperty.call(A,ee)&&M.indexOf(ee)<0&&(z[ee]=A[ee]);if(A!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,ee=Object.getOwnPropertySymbols(A);g<ee.length;g++)M.indexOf(ee[g])<0&&Object.prototype.propertyIsEnumerable.call(A,ee[g])&&(z[ee[g]]=A[ee[g]]);return z},a=function(A,M,z,ee){var g=arguments.length,w=g<3?M:ee===null?ee=Object.getOwnPropertyDescriptor(M,z):ee,G;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(A,M,z,ee);else for(var X=A.length-1;X>=0;X--)(G=A[X])&&(w=(g<3?G(w):g>3?G(M,z,w):G(M,z))||w);return g>3&&w&&Object.defineProperty(M,z,w),w},f=function(A,M){return function(z,ee){M(z,ee,A)}},p=function(A,M){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(A,M)},l=function(A,M,z,ee){function g(w){return w instanceof z?w:new z(function(G){G(w)})}return new(z||(z=Promise))(function(w,G){function X(Q){try{H(ee.next(Q))}catch(ne){G(ne)}}function W(Q){try{H(ee.throw(Q))}catch(ne){G(ne)}}function H(Q){Q.done?w(Q.value):g(Q.value).then(X,W)}H((ee=ee.apply(A,M||[])).next())})},y=function(A,M){var z={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},ee,g,w,G;return G={next:X(0),throw:X(1),return:X(2)},typeof Symbol=="function"&&(G[Symbol.iterator]=function(){return this}),G;function X(H){return function(Q){return W([H,Q])}}function W(H){if(ee)throw new TypeError("Generator is already executing.");for(;z;)try{if(ee=1,g&&(w=H[0]&2?g.return:H[0]?g.throw||((w=g.return)&&w.call(g),0):g.next)&&!(w=w.call(g,H[1])).done)return w;switch(g=0,w&&(H=[H[0]&2,w.value]),H[0]){case 0:case 1:w=H;break;case 4:return z.label++,{value:H[1],done:!1};case 5:z.label++,g=H[1],H=[0];continue;case 7:H=z.ops.pop(),z.trys.pop();continue;default:if(w=z.trys,!(w=w.length>0&&w[w.length-1])&&(H[0]===6||H[0]===2)){z=0;continue}if(H[0]===3&&(!w||H[1]>w[0]&&H[1]<w[3])){z.label=H[1];break}if(H[0]===6&&z.label<w[1]){z.label=w[1],w=H;break}if(w&&z.label<w[2]){z.label=w[2],z.ops.push(H);break}w[2]&&z.ops.pop(),z.trys.pop();continue}H=M.call(A,z)}catch(Q){H=[6,Q],g=0}finally{ee=w=0}if(H[0]&5)throw H[1];return{value:H[0]?H[1]:void 0,done:!0}}},c=function(A,M,z,ee){ee===void 0&&(ee=z),A[ee]=M[z]},D=function(A,M){for(var z in A)z!=="default"&&!M.hasOwnProperty(z)&&(M[z]=A[z])},x=function(A){var M=typeof Symbol=="function"&&Symbol.iterator,z=M&&A[M],ee=0;if(z)return z.call(A);if(A&&typeof A.length=="number")return{next:function(){return A&&ee>=A.length&&(A=void 0),{value:A&&A[ee++],done:!A}}};throw new TypeError(M?"Object is not iterable.":"Symbol.iterator is not defined.")},N=function(A,M){var z=typeof Symbol=="function"&&A[Symbol.iterator];if(!z)return A;var ee=z.call(A),g,w=[],G;try{for(;(M===void 0||M-- >0)&&!(g=ee.next()).done;)w.push(g.value)}catch(X){G={error:X}}finally{try{g&&!g.done&&(z=ee.return)&&z.call(ee)}finally{if(G)throw G.error}}return w},V=function(){for(var A=[],M=0;M<arguments.length;M++)A=A.concat(N(arguments[M]));return A},F=function(){for(var A=0,M=0,z=arguments.length;M<z;M++)A+=arguments[M].length;for(var ee=Array(A),g=0,M=0;M<z;M++)for(var w=arguments[M],G=0,X=w.length;G<X;G++,g++)ee[g]=w[G];return ee},R=function(A){return this instanceof R?(this.v=A,this):new R(A)},k=function(A,M,z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee=z.apply(A,M||[]),g,w=[];return g={},G("next"),G("throw"),G("return"),g[Symbol.asyncIterator]=function(){return this},g;function G(ge){ee[ge]&&(g[ge]=function(ce){return new Promise(function(_e,he){w.push([ge,ce,_e,he])>1||X(ge,ce)})})}function X(ge,ce){try{W(ee[ge](ce))}catch(_e){ne(w[0][3],_e)}}function W(ge){ge.value instanceof R?Promise.resolve(ge.value.v).then(H,Q):ne(w[0][2],ge)}function H(ge){X("next",ge)}function Q(ge){X("throw",ge)}function ne(ge,ce){ge(ce),w.shift(),w.length&&X(w[0][0],w[0][1])}},Y=function(A){var M,z;return M={},ee("next"),ee("throw",function(g){throw g}),ee("return"),M[Symbol.iterator]=function(){return this},M;function ee(g,w){M[g]=A[g]?function(G){return(z=!z)?{value:R(A[g](G)),done:g==="return"}:w?w(G):G}:w}},ae=function(A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var M=A[Symbol.asyncIterator],z;return M?M.call(A):(A=typeof x=="function"?x(A):A[Symbol.iterator](),z={},ee("next"),ee("throw"),ee("return"),z[Symbol.asyncIterator]=function(){return this},z);function ee(w){z[w]=A[w]&&function(G){return new Promise(function(X,W){G=A[w](G),g(X,W,G.done,G.value)})}}function g(w,G,X,W){Promise.resolve(W).then(function(H){w({value:H,done:X})},G)}},T=function(A,M){return Object.defineProperty?Object.defineProperty(A,"raw",{value:M}):A.raw=M,A},U=function(A){if(A&&A.__esModule)return A;var M={};if(A!=null)for(var z in A)Object.hasOwnProperty.call(A,z)&&(M[z]=A[z]);return M.default=A,M},S=function(A){return A&&A.__esModule?A:{default:A}},O=function(A,M){if(!M.has(A))throw new TypeError("attempted to get private field on non-instance");return M.get(A)},b=function(A,M,z){if(!M.has(A))throw new TypeError("attempted to set private field on non-instance");return M.set(A,z),z},v("__extends",e),v("__assign",r),v("__rest",s),v("__decorate",a),v("__param",f),v("__metadata",p),v("__awaiter",l),v("__generator",y),v("__exportStar",D),v("__createBinding",c),v("__values",x),v("__read",N),v("__spread",V),v("__spreadArrays",F),v("__await",R),v("__asyncGenerator",k),v("__asyncDelegator",Y),v("__asyncValues",ae),v("__makeTemplateObject",T),v("__importStar",U),v("__importDefault",S),v("__classPrivateFieldGet",O),v("__classPrivateFieldSet",b)})})(Ew);var Sc={},es={},qf;function Dw(){if(qf)return es;qf=1,Object.defineProperty(es,"__esModule",{value:!0}),es.delay=void 0;function n(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return es.delay=n,es}var Yi={},Ic={},Ji={},zf;function Sw(){return zf||(zf=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.ONE_THOUSAND=Ji.ONE_HUNDRED=void 0,Ji.ONE_HUNDRED=100,Ji.ONE_THOUSAND=1e3),Ji}var xc={},Kf;function Iw(){return Kf||(Kf=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ONE_YEAR=n.FOUR_WEEKS=n.THREE_WEEKS=n.TWO_WEEKS=n.ONE_WEEK=n.THIRTY_DAYS=n.SEVEN_DAYS=n.FIVE_DAYS=n.THREE_DAYS=n.ONE_DAY=n.TWENTY_FOUR_HOURS=n.TWELVE_HOURS=n.SIX_HOURS=n.THREE_HOURS=n.ONE_HOUR=n.SIXTY_MINUTES=n.THIRTY_MINUTES=n.TEN_MINUTES=n.FIVE_MINUTES=n.ONE_MINUTE=n.SIXTY_SECONDS=n.THIRTY_SECONDS=n.TEN_SECONDS=n.FIVE_SECONDS=n.ONE_SECOND=void 0,n.ONE_SECOND=1,n.FIVE_SECONDS=5,n.TEN_SECONDS=10,n.THIRTY_SECONDS=30,n.SIXTY_SECONDS=60,n.ONE_MINUTE=n.SIXTY_SECONDS,n.FIVE_MINUTES=n.ONE_MINUTE*5,n.TEN_MINUTES=n.ONE_MINUTE*10,n.THIRTY_MINUTES=n.ONE_MINUTE*30,n.SIXTY_MINUTES=n.ONE_MINUTE*60,n.ONE_HOUR=n.SIXTY_MINUTES,n.THREE_HOURS=n.ONE_HOUR*3,n.SIX_HOURS=n.ONE_HOUR*6,n.TWELVE_HOURS=n.ONE_HOUR*12,n.TWENTY_FOUR_HOURS=n.ONE_HOUR*24,n.ONE_DAY=n.TWENTY_FOUR_HOURS,n.THREE_DAYS=n.ONE_DAY*3,n.FIVE_DAYS=n.ONE_DAY*5,n.SEVEN_DAYS=n.ONE_DAY*7,n.THIRTY_DAYS=n.ONE_DAY*30,n.ONE_WEEK=n.SEVEN_DAYS,n.TWO_WEEKS=n.ONE_WEEK*2,n.THREE_WEEKS=n.ONE_WEEK*3,n.FOUR_WEEKS=n.ONE_WEEK*4,n.ONE_YEAR=n.ONE_DAY*365}(xc)),xc}var Vf;function jd(){return Vf||(Vf=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=br;e.__exportStar(Sw(),n),e.__exportStar(Iw(),n)}(Ic)),Ic}var kf;function xw(){if(kf)return Yi;kf=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.fromMiliseconds=Yi.toMiliseconds=void 0;const n=jd();function e(s){return s*n.ONE_THOUSAND}Yi.toMiliseconds=e;function r(s){return Math.floor(s/n.ONE_THOUSAND)}return Yi.fromMiliseconds=r,Yi}var Gf;function Ow(){return Gf||(Gf=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=br;e.__exportStar(Dw(),n),e.__exportStar(xw(),n)}(Sc)),Sc}var On={},Wf;function Aw(){if(Wf)return On;Wf=1,Object.defineProperty(On,"__esModule",{value:!0}),On.Watch=void 0;class n{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const s=this.get(r);if(typeof s.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const a=Date.now()-s.started;this.timestamps.set(r,{started:s.started,elapsed:a})}get(r){const s=this.timestamps.get(r);if(typeof s>"u")throw new Error(`No timestamp found for label: ${r}`);return s}elapsed(r){const s=this.get(r);return s.elapsed||Date.now()-s.started}}return On.Watch=n,On.default=n,On}var Oc={},ts={},Yf;function Cw(){if(Yf)return ts;Yf=1,Object.defineProperty(ts,"__esModule",{value:!0}),ts.IWatch=void 0;class n{}return ts.IWatch=n,ts}var Jf;function Pw(){return Jf||(Jf=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),br.__exportStar(Cw(),n)}(Oc)),Oc}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=br;e.__exportStar(Ow(),n),e.__exportStar(Aw(),n),e.__exportStar(Pw(),n),e.__exportStar(jd(),n)})(De);var lt={};Object.defineProperty(lt,"__esModule",{value:!0});lt.getLocalStorage=lt.getLocalStorageOrThrow=lt.getCrypto=lt.getCryptoOrThrow=Hd=lt.getLocation=lt.getLocationOrThrow=lu=lt.getNavigator=lt.getNavigatorOrThrow=Bd=lt.getDocument=lt.getDocumentOrThrow=lt.getFromWindowOrThrow=lt.getFromWindow=void 0;function tn(n){let e;return typeof window<"u"&&typeof window[n]<"u"&&(e=window[n]),e}lt.getFromWindow=tn;function Nn(n){const e=tn(n);if(!e)throw new Error(`${n} is not defined in Window`);return e}lt.getFromWindowOrThrow=Nn;function Rw(){return Nn("document")}lt.getDocumentOrThrow=Rw;function Tw(){return tn("document")}var Bd=lt.getDocument=Tw;function Nw(){return Nn("navigator")}lt.getNavigatorOrThrow=Nw;function Lw(){return tn("navigator")}var lu=lt.getNavigator=Lw;function Fw(){return Nn("location")}lt.getLocationOrThrow=Fw;function Uw(){return tn("location")}var Hd=lt.getLocation=Uw;function $w(){return Nn("crypto")}lt.getCryptoOrThrow=$w;function Mw(){return tn("crypto")}lt.getCrypto=Mw;function jw(){return Nn("localStorage")}lt.getLocalStorageOrThrow=jw;function Bw(){return tn("localStorage")}lt.getLocalStorage=Bw;var du={};Object.defineProperty(du,"__esModule",{value:!0});var qd=du.getWindowMetadata=void 0;const Xf=lt;function Hw(){let n,e;try{n=Xf.getDocumentOrThrow(),e=Xf.getLocationOrThrow()}catch{return null}function r(){const N=n.getElementsByTagName("link"),V=[];for(let F=0;F<N.length;F++){const R=N[F],k=R.getAttribute("rel");if(k&&k.toLowerCase().indexOf("icon")>-1){const Y=R.getAttribute("href");if(Y)if(Y.toLowerCase().indexOf("https:")===-1&&Y.toLowerCase().indexOf("http:")===-1&&Y.indexOf("//")!==0){let ae=e.protocol+"//"+e.host;if(Y.indexOf("/")===0)ae+=Y;else{const T=e.pathname.split("/");T.pop();const U=T.join("/");ae+=U+"/"+Y}V.push(ae)}else if(Y.indexOf("//")===0){const ae=e.protocol+Y;V.push(ae)}else V.push(Y)}}return V}function s(...N){const V=n.getElementsByTagName("meta");for(let F=0;F<V.length;F++){const R=V[F],k=["itemprop","property","name"].map(Y=>R.getAttribute(Y)).filter(Y=>Y?N.includes(Y):!1);if(k.length&&k){const Y=R.getAttribute("content");if(Y)return Y}}return""}function a(){let N=s("name","og:site_name","og:title","twitter:title");return N||(N=n.title),N}function f(){return s("description","og:description","twitter:description","keywords")}const p=a(),l=f(),y=e.origin,D=r();return{description:l,url:y,icons:D,name:p}}qd=du.getWindowMetadata=Hw;var gs={},qw=n=>encodeURIComponent(n).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),zd="%[a-f0-9]{2}",Qf=new RegExp("("+zd+")|([^%]+?)","gi"),Zf=new RegExp("("+zd+")+","gi");function Yc(n,e){try{return[decodeURIComponent(n.join(""))]}catch{}if(n.length===1)return n;e=e||1;var r=n.slice(0,e),s=n.slice(e);return Array.prototype.concat.call([],Yc(r),Yc(s))}function zw(n){try{return decodeURIComponent(n)}catch{for(var e=n.match(Qf)||[],r=1;r<e.length;r++)n=Yc(e,r).join(""),e=n.match(Qf)||[];return n}}function Kw(n){for(var e={"%FE%FF":"ï¿½ï¿½","%FF%FE":"ï¿½ï¿½"},r=Zf.exec(n);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var s=zw(r[0]);s!==r[0]&&(e[r[0]]=s)}r=Zf.exec(n)}e["%C2"]="ï¿½";for(var a=Object.keys(e),f=0;f<a.length;f++){var p=a[f];n=n.replace(new RegExp(p,"g"),e[p])}return n}var Vw=function(n){if(typeof n!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof n+"`");try{return n=n.replace(/\+/g," "),decodeURIComponent(n)}catch{return Kw(n)}},kw=(n,e)=>{if(!(typeof n=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[n];const r=n.indexOf(e);return r===-1?[n]:[n.slice(0,r),n.slice(r+e.length)]},Gw=function(n,e){for(var r={},s=Object.keys(n),a=Array.isArray(e),f=0;f<s.length;f++){var p=s[f],l=n[p];(a?e.indexOf(p)!==-1:e(p,l,n))&&(r[p]=l)}return r};(function(n){const e=qw,r=Vw,s=kw,a=Gw,f=T=>T==null,p=Symbol("encodeFragmentIdentifier");function l(T){switch(T.arrayFormat){case"index":return U=>(S,O)=>{const b=S.length;return O===void 0||T.skipNull&&O===null||T.skipEmptyString&&O===""?S:O===null?[...S,[x(U,T),"[",b,"]"].join("")]:[...S,[x(U,T),"[",x(b,T),"]=",x(O,T)].join("")]};case"bracket":return U=>(S,O)=>O===void 0||T.skipNull&&O===null||T.skipEmptyString&&O===""?S:O===null?[...S,[x(U,T),"[]"].join("")]:[...S,[x(U,T),"[]=",x(O,T)].join("")];case"colon-list-separator":return U=>(S,O)=>O===void 0||T.skipNull&&O===null||T.skipEmptyString&&O===""?S:O===null?[...S,[x(U,T),":list="].join("")]:[...S,[x(U,T),":list=",x(O,T)].join("")];case"comma":case"separator":case"bracket-separator":{const U=T.arrayFormat==="bracket-separator"?"[]=":"=";return S=>(O,b)=>b===void 0||T.skipNull&&b===null||T.skipEmptyString&&b===""?O:(b=b===null?"":b,O.length===0?[[x(S,T),U,x(b,T)].join("")]:[[O,x(b,T)].join(T.arrayFormatSeparator)])}default:return U=>(S,O)=>O===void 0||T.skipNull&&O===null||T.skipEmptyString&&O===""?S:O===null?[...S,x(U,T)]:[...S,[x(U,T),"=",x(O,T)].join("")]}}function y(T){let U;switch(T.arrayFormat){case"index":return(S,O,b)=>{if(U=/\[(\d*)\]$/.exec(S),S=S.replace(/\[\d*\]$/,""),!U){b[S]=O;return}b[S]===void 0&&(b[S]={}),b[S][U[1]]=O};case"bracket":return(S,O,b)=>{if(U=/(\[\])$/.exec(S),S=S.replace(/\[\]$/,""),!U){b[S]=O;return}if(b[S]===void 0){b[S]=[O];return}b[S]=[].concat(b[S],O)};case"colon-list-separator":return(S,O,b)=>{if(U=/(:list)$/.exec(S),S=S.replace(/:list$/,""),!U){b[S]=O;return}if(b[S]===void 0){b[S]=[O];return}b[S]=[].concat(b[S],O)};case"comma":case"separator":return(S,O,b)=>{const c=typeof O=="string"&&O.includes(T.arrayFormatSeparator),v=typeof O=="string"&&!c&&N(O,T).includes(T.arrayFormatSeparator);O=v?N(O,T):O;const Z=c||v?O.split(T.arrayFormatSeparator).map(A=>N(A,T)):O===null?O:N(O,T);b[S]=Z};case"bracket-separator":return(S,O,b)=>{const c=/(\[\])$/.test(S);if(S=S.replace(/\[\]$/,""),!c){b[S]=O&&N(O,T);return}const v=O===null?[]:O.split(T.arrayFormatSeparator).map(Z=>N(Z,T));if(b[S]===void 0){b[S]=v;return}b[S]=[].concat(b[S],v)};default:return(S,O,b)=>{if(b[S]===void 0){b[S]=O;return}b[S]=[].concat(b[S],O)}}}function D(T){if(typeof T!="string"||T.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function x(T,U){return U.encode?U.strict?e(T):encodeURIComponent(T):T}function N(T,U){return U.decode?r(T):T}function V(T){return Array.isArray(T)?T.sort():typeof T=="object"?V(Object.keys(T)).sort((U,S)=>Number(U)-Number(S)).map(U=>T[U]):T}function F(T){const U=T.indexOf("#");return U!==-1&&(T=T.slice(0,U)),T}function R(T){let U="";const S=T.indexOf("#");return S!==-1&&(U=T.slice(S)),U}function k(T){T=F(T);const U=T.indexOf("?");return U===-1?"":T.slice(U+1)}function Y(T,U){return U.parseNumbers&&!Number.isNaN(Number(T))&&typeof T=="string"&&T.trim()!==""?T=Number(T):U.parseBooleans&&T!==null&&(T.toLowerCase()==="true"||T.toLowerCase()==="false")&&(T=T.toLowerCase()==="true"),T}function ae(T,U){U=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},U),D(U.arrayFormatSeparator);const S=y(U),O=Object.create(null);if(typeof T!="string"||(T=T.trim().replace(/^[?#&]/,""),!T))return O;for(const b of T.split("&")){if(b==="")continue;let[c,v]=s(U.decode?b.replace(/\+/g," "):b,"=");v=v===void 0?null:["comma","separator","bracket-separator"].includes(U.arrayFormat)?v:N(v,U),S(N(c,U),v,O)}for(const b of Object.keys(O)){const c=O[b];if(typeof c=="object"&&c!==null)for(const v of Object.keys(c))c[v]=Y(c[v],U);else O[b]=Y(c,U)}return U.sort===!1?O:(U.sort===!0?Object.keys(O).sort():Object.keys(O).sort(U.sort)).reduce((b,c)=>{const v=O[c];return Boolean(v)&&typeof v=="object"&&!Array.isArray(v)?b[c]=V(v):b[c]=v,b},Object.create(null))}n.extract=k,n.parse=ae,n.stringify=(T,U)=>{if(!T)return"";U=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},U),D(U.arrayFormatSeparator);const S=v=>U.skipNull&&f(T[v])||U.skipEmptyString&&T[v]==="",O=l(U),b={};for(const v of Object.keys(T))S(v)||(b[v]=T[v]);const c=Object.keys(b);return U.sort!==!1&&c.sort(U.sort),c.map(v=>{const Z=T[v];return Z===void 0?"":Z===null?x(v,U):Array.isArray(Z)?Z.length===0&&U.arrayFormat==="bracket-separator"?x(v,U)+"[]":Z.reduce(O(v),[]).join("&"):x(v,U)+"="+x(Z,U)}).filter(v=>v.length>0).join("&")},n.parseUrl=(T,U)=>{U=Object.assign({decode:!0},U);const[S,O]=s(T,"#");return Object.assign({url:S.split("?")[0]||"",query:ae(k(T),U)},U&&U.parseFragmentIdentifier&&O?{fragmentIdentifier:N(O,U)}:{})},n.stringifyUrl=(T,U)=>{U=Object.assign({encode:!0,strict:!0,[p]:!0},U);const S=F(T.url).split("?")[0]||"",O=n.extract(T.url),b=n.parse(O,{sort:!1}),c=Object.assign(b,T.query);let v=n.stringify(c,U);v&&(v=`?${v}`);let Z=R(T.url);return T.fragmentIdentifier&&(Z=`#${U[p]?x(T.fragmentIdentifier,U):T.fragmentIdentifier}`),`${S}${v}${Z}`},n.pick=(T,U,S)=>{S=Object.assign({parseFragmentIdentifier:!0,[p]:!1},S);const{url:O,query:b,fragmentIdentifier:c}=n.parseUrl(T,S);return n.stringifyUrl({url:O,query:a(b,U),fragmentIdentifier:c},S)},n.exclude=(T,U,S)=>{const O=Array.isArray(U)?b=>!U.includes(b):(b,c)=>!U(b,c);return n.pick(T,O,S)}})(gs);const Ww={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function Yw(n,e=[]){const r=[];return Object.keys(n).forEach(s=>{if(e.length&&!e.includes(s))return;const a=n[s];r.push(...a.accounts)}),r}function Kd(n,e){return n.includes(":")?[n]:e.chains||[]}const Vd="base10",hr="base16",Jc="base64pad",pu="utf8",kd=0,rn=1,Jw=0,el=1,Xc=12,gu=32;function Xw(){const n=hu.generateKeyPair();return{privateKey:fr(n.secretKey,hr),publicKey:fr(n.publicKey,hr)}}function Qc(){const n=Tn.randomBytes(gu);return fr(n,hr)}function Qw(n,e){const r=hu.sharedKey(mr(n,hr),mr(e,hr)),s=new sb(Go.SHA256,r).expand(gu);return fr(s,hr)}function Zw(n){const e=Go.hash(mr(n,hr));return fr(e,hr)}function en(n){const e=Go.hash(mr(n,pu));return fr(e,hr)}function eE(n){return mr(`${n}`,Vd)}function _s(n){return Number(fr(n,Vd))}function tE(n){const e=eE(typeof n.type<"u"?n.type:kd);if(_s(e)===rn&&typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof n.senderPublicKey<"u"?mr(n.senderPublicKey,hr):void 0,s=typeof n.iv<"u"?mr(n.iv,hr):Tn.randomBytes(Xc),a=new cu.ChaCha20Poly1305(mr(n.symKey,hr)).seal(s,mr(n.message,pu));return iE({type:e,sealed:a,iv:s,senderPublicKey:r})}function rE(n){const e=new cu.ChaCha20Poly1305(mr(n.symKey,hr)),{sealed:r,iv:s}=Uo(n.encoded),a=e.open(s,r);if(a===null)throw new Error("Failed to decrypt");return fr(a,pu)}function iE(n){if(_s(n.type)===rn){if(typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return fr(Wc([n.type,n.senderPublicKey,n.iv,n.sealed]),Jc)}return fr(Wc([n.type,n.iv,n.sealed]),Jc)}function Uo(n){const e=mr(n,Jc),r=e.slice(Jw,el),s=el;if(_s(r)===rn){const l=s+gu,y=l+Xc,D=e.slice(s,l),x=e.slice(l,y),N=e.slice(y);return{type:r,sealed:N,iv:x,senderPublicKey:D}}const a=s+Xc,f=e.slice(s,a),p=e.slice(a);return{type:r,sealed:p,iv:f}}function nE(n,e){const r=Uo(n);return Gd({type:_s(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?fr(r.senderPublicKey,hr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function Gd(n){const e=(n==null?void 0:n.type)||kd;if(e===rn){if(typeof(n==null?void 0:n.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(n==null?void 0:n.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:n==null?void 0:n.senderPublicKey,receiverPublicKey:n==null?void 0:n.receiverPublicKey}}function tl(n){return n.type===rn&&typeof n.senderPublicKey=="string"&&typeof n.receiverPublicKey=="string"}var sE=Object.defineProperty,rl=Object.getOwnPropertySymbols,oE=Object.prototype.hasOwnProperty,aE=Object.prototype.propertyIsEnumerable,il=(n,e,r)=>e in n?sE(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,nl=(n,e)=>{for(var r in e||(e={}))oE.call(e,r)&&il(n,r,e[r]);if(rl)for(var r of rl(e))aE.call(e,r)&&il(n,r,e[r]);return n};const cE="ReactNative",fs={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},uE="js";function yu(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function hE(){return!Bd()&&!!lu()&&navigator.product===cE}function vu(){return!yu()&&!!lu()}function fE(){return hE()?fs.reactNative:yu()?fs.node:vu()?fs.browser:fs.unknown}function lE(n,e){let r=gs.parse(n);return r=nl(nl({},r),e),n=gs.stringify(r),n}function dE(){return qd()||{name:"",description:"",url:"",icons:[""]}}function pE(){const n=vw();if(n===null)return"unknown";const e=n.os?n.os.replace(" ","").toLowerCase():"unknown";return n.type==="browser"?[e,n.name,n.version].join("-"):[e,n.version].join("-")}function gE(){var n;const e=fE();return e===fs.browser?[e,((n=Hd())==null?void 0:n.host)||"unknown"].join(":"):e}function yE(n,e,r){const s=pE(),a=gE();return[[n,e].join("-"),[uE,r].join("-"),s,a].join("/")}function vE({protocol:n,version:e,relayUrl:r,sdkVersion:s,auth:a,projectId:f,useOnCloseEvent:p}){const l=r.split("?"),y=yE(n,e,s),D={auth:a,ua:y,projectId:f,useOnCloseEvent:p||void 0},x=lE(l[1]||"",D);return l[0]+"?"+x}function Zi(n,e){return n.filter(r=>e.includes(r)).length===n.length}function Wd(n){return Object.fromEntries(n.entries())}function Yd(n){return new Map(Object.entries(n))}function An(n=De.FIVE_MINUTES,e){const r=De.toMiliseconds(n||De.FIVE_MINUTES);let s,a,f;return{resolve:p=>{f&&s&&(clearTimeout(f),s(p))},reject:p=>{f&&a&&(clearTimeout(f),a(p))},done:()=>new Promise((p,l)=>{f=setTimeout(()=>{l(new Error(e))},r),s=p,a=l})}}function $o(n,e,r){return new Promise(async(s,a)=>{const f=setTimeout(()=>a(new Error(r)),e);try{const p=await n;s(p)}catch(p){a(p)}clearTimeout(f)})}function Jd(n,e){if(typeof e=="string"&&e.startsWith(`${n}:`))return e;if(n.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(n.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${n}`)}function _E(n){return Jd("topic",n)}function mE(n){return Jd("id",n)}function Xd(n){const[e,r]=n.split(":"),s={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")s.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))s.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return s}function kr(n,e){return De.fromMiliseconds((e||Date.now())+De.toMiliseconds(n))}function Pi(n){return Date.now()>=De.toMiliseconds(n)}function Ht(n,e){return`${n}${e?`:${e}`:""}`}function Ac(n=[],e=[]){return[...new Set([...n,...e])]}const bE="irn";function Zc(n){return(n==null?void 0:n.relay)||{protocol:bE}}function Ro(n){const e=Ww[n];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${n}`);return e}var wE=Object.defineProperty,sl=Object.getOwnPropertySymbols,EE=Object.prototype.hasOwnProperty,DE=Object.prototype.propertyIsEnumerable,ol=(n,e,r)=>e in n?wE(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,SE=(n,e)=>{for(var r in e||(e={}))EE.call(e,r)&&ol(n,r,e[r]);if(sl)for(var r of sl(e))DE.call(e,r)&&ol(n,r,e[r]);return n};function IE(n,e="-"){const r={},s="relay"+e;return Object.keys(n).forEach(a=>{if(a.startsWith(s)){const f=a.replace(s,""),p=n[a];r[f]=p}}),r}function xE(n){const e=n.indexOf(":"),r=n.indexOf("?")!==-1?n.indexOf("?"):void 0,s=n.substring(0,e),a=n.substring(e+1,r).split("@"),f=typeof r<"u"?n.substring(r):"",p=gs.parse(f);return{protocol:s,topic:a[0],version:parseInt(a[1],10),symKey:p.symKey,relay:IE(p)}}function OE(n,e="-"){const r="relay",s={};return Object.keys(n).forEach(a=>{const f=r+e+a;n[a]&&(s[f]=n[a])}),s}function AE(n){return`${n.protocol}:${n.topic}@${n.version}?`+gs.stringify(SE({symKey:n.symKey},OE(n.relay)))}function Ln(n){const e=[];return n.forEach(r=>{const[s,a]=r.split(":");e.push(`${s}:${a}`)}),e}function CE(n){const e=[];return Object.values(n).forEach(r=>{e.push(...Ln(r.accounts))}),e}function PE(n,e){const r=[];return Object.values(n).forEach(s=>{Ln(s.accounts).includes(e)&&r.push(...s.methods)}),r}function RE(n,e){const r=[];return Object.values(n).forEach(s=>{Ln(s.accounts).includes(e)&&r.push(...s.events)}),r}function TE(n,e){const r=No(n,e);if(r)throw new Error(r.message);const s={};for(const[a,f]of Object.entries(n))s[a]={methods:f.methods,events:f.events,chains:f.accounts.map(p=>`${p.split(":")[0]}:${p.split(":")[1]}`)};return s}function Qd(n){return n.includes(":")}function To(n){return Qd(n)?n.split(":")[0]:n}const NE={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},LE={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function le(n,e){const{message:r,code:s}=LE[n];return{message:e?`${r} ${e}`:r,code:s}}function Nt(n,e){const{message:r,code:s}=NE[n];return{message:e?`${r} ${e}`:r,code:s}}function _i(n,e){return Array.isArray(n)?typeof e<"u"&&n.length?n.every(e):!0:!1}function Rn(n){return Object.getPrototypeOf(n)===Object.prototype&&Object.keys(n).length}function ur(n){return typeof n>"u"}function Gt(n,e){return e&&ur(n)?!0:typeof n=="string"&&Boolean(n.trim().length)}function _u(n,e){return e&&ur(n)?!0:typeof n=="number"&&!isNaN(n)}function FE(n,e){const{requiredNamespaces:r}=e,s=Object.keys(n.namespaces),a=Object.keys(r);let f=!0;return Zi(a,s)?(s.forEach(p=>{const{accounts:l,methods:y,events:D}=n.namespaces[p],x=Ln(l),N=r[p];(!Zi(Kd(p,N),x)||!Zi(N.methods,y)||!Zi(N.events,D))&&(f=!1)}),f):!1}function mu(n){return Gt(n,!1)&&n.includes(":")?n.split(":").length===2:!1}function UE(n){if(Gt(n,!1)&&n.includes(":")){const e=n.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&mu(r)}}return!1}function $E(n){if(Gt(n,!1))try{return typeof new URL(n)<"u"}catch{return!1}return!1}function ME(n){var e;return(e=n==null?void 0:n.proposer)==null?void 0:e.publicKey}function jE(n){return n==null?void 0:n.topic}function BE(n,e){let r=null;return Gt(n==null?void 0:n.publicKey,!1)||(r=le("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function al(n){let e=!0;return _i(n)?n.length&&(e=n.every(r=>Gt(r,!1))):e=!1,e}function HE(n,e,r){let s=null;return _i(e)?e.forEach(a=>{s||(!mu(a)||!a.includes(n))&&(s=Nt("UNSUPPORTED_CHAINS",`${r}, chain ${a} should be a string and conform to "namespace:chainId" format`))}):s=Nt("UNSUPPORTED_CHAINS",`${r}, chains ${e} should be an array of strings conforming to "namespace:chainId" format`),s}function qE(n,e){let r=null;return Object.entries(n).forEach(([s,a])=>{if(r)return;const f=HE(s,Kd(s,a),`${e} requiredNamespace`);f&&(r=f)}),r}function zE(n,e){let r=null;return _i(n)?n.forEach(s=>{r||UE(s)||(r=Nt("UNSUPPORTED_ACCOUNTS",`${e}, account ${s} should be a string and conform to "namespace:chainId:address" format`))}):r=Nt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function KE(n,e){let r=null;return Object.values(n).forEach(s=>{if(r)return;const a=zE(s==null?void 0:s.accounts,`${e} namespace`);a&&(r=a)}),r}function VE(n,e){let r=null;return al(n==null?void 0:n.methods)?al(n==null?void 0:n.events)||(r=Nt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=Nt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function Zd(n,e){let r=null;return Object.values(n).forEach(s=>{if(r)return;const a=VE(s,`${e}, namespace`);a&&(r=a)}),r}function kE(n,e,r){let s=null;if(n&&Rn(n)){const a=Zd(n,e);a&&(s=a);const f=qE(n,e);f&&(s=f)}else s=le("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return s}function No(n,e){let r=null;if(n&&Rn(n)){const s=Zd(n,e);s&&(r=s);const a=KE(n,e);a&&(r=a)}else r=le("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function ep(n){return Gt(n.protocol,!0)}function GE(n,e){let r=!1;return e&&!n?r=!0:n&&_i(n)&&n.length&&n.forEach(s=>{r=ep(s)}),r}function WE(n){return typeof n=="number"}function _r(n){return typeof n<"u"&&typeof n!==null}function YE(n){return!(!n||typeof n!="object"||!n.code||!_u(n.code,!1)||!n.message||!Gt(n.message,!1))}function JE(n){return!(ur(n)||!Gt(n.method,!1))}function XE(n){return!(ur(n)||ur(n.result)&&ur(n.error)||!_u(n.id,!1)||!Gt(n.jsonrpc,!1))}function QE(n){return!(ur(n)||!Gt(n.name,!1))}function cl(n,e){return!(!mu(e)||!CE(n).includes(e))}function ZE(n,e,r){return Gt(r,!1)?PE(n,e).includes(r):!1}function e3(n,e,r){return Gt(r,!1)?RE(n,e).includes(r):!1}function ul(n,e,r){let s=null;const a=t3(n),f=r3(e),p=Object.keys(a),l=Object.keys(f),y=hl(Object.keys(n)),D=hl(Object.keys(e)),x=y.filter(N=>!D.includes(N));return x.length&&(s=le("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${x.toString()}
      Received: ${Object.keys(e).toString()}`)),Zi(p,l)||(s=le("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${p.toString()}
      Approved: ${l.toString()}`)),Object.keys(e).forEach(N=>{if(!N.includes(":")||s)return;const V=Ln(e[N].accounts);V.includes(N)||(s=le("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${N}
        Required: ${N}
        Approved: ${V.toString()}`))}),p.forEach(N=>{s||(Zi(a[N].methods,f[N].methods)?Zi(a[N].events,f[N].events)||(s=le("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${N}`)):s=le("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${N}`))}),s}function t3(n){const e={};return Object.keys(n).forEach(r=>{var s;r.includes(":")?e[r]=n[r]:(s=n[r].chains)==null||s.forEach(a=>{e[a]={methods:n[r].methods,events:n[r].events}})}),e}function hl(n){return[...new Set(n.map(e=>e.includes(":")?e.split(":")[0]:e))]}function r3(n){const e={};return Object.keys(n).forEach(r=>{if(r.includes(":"))e[r]=n[r];else{const s=Ln(n[r].accounts);s==null||s.forEach(a=>{e[a]={accounts:n[r].accounts.filter(f=>f.includes(`${a}:`)),methods:n[r].methods,events:n[r].events}})}}),e}function i3(n,e){return _u(n,!1)&&n<=e.max&&n>=e.min}var Yo={},ms={};Object.defineProperty(ms,"__esModule",{value:!0});function n3(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return JSON.parse(n)}catch{return n}}ms.safeJsonParse=n3;function s3(n){return typeof n=="string"?n:JSON.stringify(n,(e,r)=>typeof r>"u"?null:r)}ms.safeJsonStringify=s3;var Mo={},Cc={get exports(){return Mo},set exports(n){Mo=n}},fl;function o3(){return fl||(fl=1,function(){let n;function e(){}n=e,n.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},n.prototype.setItem=function(r,s){this[r]=String(s)},n.prototype.removeItem=function(r){delete this[r]},n.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(s){r[s]=void 0,delete r[s]})},n.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},n.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof tr<"u"&&tr.localStorage?Cc.exports=tr.localStorage:typeof window<"u"&&window.localStorage?Cc.exports=window.localStorage:Cc.exports=new e}()),Mo}var Pc={},rs={},ll;function a3(){if(ll)return rs;ll=1,Object.defineProperty(rs,"__esModule",{value:!0}),rs.IKeyValueStorage=void 0;class n{}return rs.IKeyValueStorage=n,rs}var is={},dl;function c3(){if(dl)return is;dl=1,Object.defineProperty(is,"__esModule",{value:!0}),is.parseEntry=void 0;const n=ms;function e(r){var s;return[r[0],n.safeJsonParse((s=r[1])!==null&&s!==void 0?s:"")]}return is.parseEntry=e,is}var pl;function u3(){return pl||(pl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=br;e.__exportStar(a3(),n),e.__exportStar(c3(),n)}(Pc)),Pc}Object.defineProperty(Yo,"__esModule",{value:!0});Yo.KeyValueStorage=void 0;const Cn=br,gl=ms,h3=Cn.__importDefault(o3()),f3=u3();class tp{constructor(){this.localStorage=h3.default}getKeys(){return Cn.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return Cn.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(f3.parseEntry)})}getItem(e){return Cn.__awaiter(this,void 0,void 0,function*(){const r=this.localStorage.getItem(e);if(r!==null)return gl.safeJsonParse(r)})}setItem(e,r){return Cn.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,gl.safeJsonStringify(r))})}removeItem(e){return Cn.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}Yo.KeyValueStorage=tp;var l3=Yo.default=tp,bs={},ns={},Rc={},ss={};let nn=class{};const d3=Object.freeze(Object.defineProperty({__proto__:null,IEvents:nn},Symbol.toStringTag,{value:"Module"})),p3=ym(d3);var yl;function g3(){if(yl)return ss;yl=1,Object.defineProperty(ss,"__esModule",{value:!0}),ss.IHeartBeat=void 0;const n=p3;class e extends n.IEvents{constructor(s){super()}}return ss.IHeartBeat=e,ss}var vl;function rp(){return vl||(vl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),br.__exportStar(g3(),n)}(Rc)),Rc}var Tc={},Xi={},_l;function y3(){if(_l)return Xi;_l=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.HEARTBEAT_EVENTS=Xi.HEARTBEAT_INTERVAL=void 0;const n=De;return Xi.HEARTBEAT_INTERVAL=n.FIVE_SECONDS,Xi.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Xi}var ml;function ip(){return ml||(ml=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),br.__exportStar(y3(),n)}(Tc)),Tc}var bl;function v3(){if(bl)return ns;bl=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.HeartBeat=void 0;const n=br,e=Wt,r=De,s=rp(),a=ip();class f extends s.IHeartBeat{constructor(l){super(l),this.events=new e.EventEmitter,this.interval=a.HEARTBEAT_INTERVAL,this.interval=(l==null?void 0:l.interval)||a.HEARTBEAT_INTERVAL}static init(l){return n.__awaiter(this,void 0,void 0,function*(){const y=new f(l);return yield y.init(),y})}init(){return n.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(l,y){this.events.on(l,y)}once(l,y){this.events.once(l,y)}off(l,y){this.events.off(l,y)}removeListener(l,y){this.events.removeListener(l,y)}initialize(){return n.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(a.HEARTBEAT_EVENTS.pulse)}}return ns.HeartBeat=f,ns}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=br;e.__exportStar(v3(),n),e.__exportStar(rp(),n),e.__exportStar(ip(),n)})(bs);var Ze={},Nc,wl;function _3(){if(wl)return Nc;wl=1;function n(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}Nc=e;function e(r,s,a){var f=a&&a.stringify||n,p=1;if(typeof r=="object"&&r!==null){var l=s.length+p;if(l===1)return r;var y=new Array(l);y[0]=f(r);for(var D=1;D<l;D++)y[D]=f(s[D]);return y.join(" ")}if(typeof r!="string")return r;var x=s.length;if(x===0)return r;for(var N="",V=1-p,F=-1,R=r&&r.length||0,k=0;k<R;){if(r.charCodeAt(k)===37&&k+1<R){switch(F=F>-1?F:0,r.charCodeAt(k+1)){case 100:case 102:if(V>=x||s[V]==null)break;F<k&&(N+=r.slice(F,k)),N+=Number(s[V]),F=k+2,k++;break;case 105:if(V>=x||s[V]==null)break;F<k&&(N+=r.slice(F,k)),N+=Math.floor(Number(s[V])),F=k+2,k++;break;case 79:case 111:case 106:if(V>=x||s[V]===void 0)break;F<k&&(N+=r.slice(F,k));var Y=typeof s[V];if(Y==="string"){N+="'"+s[V]+"'",F=k+2,k++;break}if(Y==="function"){N+=s[V].name||"<anonymous>",F=k+2,k++;break}N+=f(s[V]),F=k+2,k++;break;case 115:if(V>=x)break;F<k&&(N+=r.slice(F,k)),N+=String(s[V]),F=k+2,k++;break;case 37:F<k&&(N+=r.slice(F,k)),N+="%",F=k+2,k++,V--;break}++V}++k}return F===-1?r:(F<R&&(N+=r.slice(F)),N)}return Nc}var Lc,El;function m3(){if(El)return Lc;El=1;const n=_3();Lc=a;const e=O().console||{},r={mapHttpRequest:R,mapHttpResponse:R,wrapRequestSerializer:k,wrapResponseSerializer:k,wrapErrorSerializer:k,req:R,res:R,err:V};function s(b,c){return Array.isArray(b)?b.filter(function(Z){return Z!=="!stdSerializers.err"}):b===!0?Object.keys(c):!1}function a(b){b=b||{},b.browser=b.browser||{};const c=b.browser.transmit;if(c&&typeof c.send!="function")throw Error("pino: transmit option must have a send function");const v=b.browser.write||e;b.browser.write&&(b.browser.asObject=!0);const Z=b.serializers||{},A=s(b.browser.serialize,Z);let M=b.browser.serialize;Array.isArray(b.browser.serialize)&&b.browser.serialize.indexOf("!stdSerializers.err")>-1&&(M=!1);const z=["error","fatal","warn","info","debug","trace"];typeof v=="function"&&(v.error=v.fatal=v.warn=v.info=v.debug=v.trace=v),b.enabled===!1&&(b.level="silent");const ee=b.level||"info",g=Object.create(v);g.log||(g.log=Y),Object.defineProperty(g,"levelVal",{get:G}),Object.defineProperty(g,"level",{get:X,set:W});const w={transmit:c,serialize:A,asObject:b.browser.asObject,levels:z,timestamp:F(b)};g.levels=a.levels,g.level=ee,g.setMaxListeners=g.getMaxListeners=g.emit=g.addListener=g.on=g.prependListener=g.once=g.prependOnceListener=g.removeListener=g.removeAllListeners=g.listeners=g.listenerCount=g.eventNames=g.write=g.flush=Y,g.serializers=Z,g._serialize=A,g._stdErrSerialize=M,g.child=H,c&&(g._logEvent=N());function G(){return this.level==="silent"?1/0:this.levels.values[this.level]}function X(){return this._level}function W(Q){if(Q!=="silent"&&!this.levels.values[Q])throw Error("unknown level "+Q);this._level=Q,f(w,g,"error","log"),f(w,g,"fatal","error"),f(w,g,"warn","error"),f(w,g,"info","log"),f(w,g,"debug","log"),f(w,g,"trace","log")}function H(Q,ne){if(!Q)throw new Error("missing bindings for child Pino");ne=ne||{},A&&Q.serializers&&(ne.serializers=Q.serializers);const ge=ne.serializers;if(A&&ge){var ce=Object.assign({},Z,ge),_e=b.browser.serialize===!0?Object.keys(ce):A;delete Q.serializers,y([Q],_e,ce,this._stdErrSerialize)}function he(me){this._childLevel=(me._childLevel|0)+1,this.error=D(me,Q,"error"),this.fatal=D(me,Q,"fatal"),this.warn=D(me,Q,"warn"),this.info=D(me,Q,"info"),this.debug=D(me,Q,"debug"),this.trace=D(me,Q,"trace"),ce&&(this.serializers=ce,this._serialize=_e),c&&(this._logEvent=N([].concat(me._logEvent.bindings,Q)))}return he.prototype=this,new he(this)}return g}a.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},a.stdSerializers=r,a.stdTimeFunctions=Object.assign({},{nullTime:ae,epochTime:T,unixTime:U,isoTime:S});function f(b,c,v,Z){const A=Object.getPrototypeOf(c);c[v]=c.levelVal>c.levels.values[v]?Y:A[v]?A[v]:e[v]||e[Z]||Y,p(b,c,v)}function p(b,c,v){!b.transmit&&c[v]===Y||(c[v]=function(Z){return function(){const M=b.timestamp(),z=new Array(arguments.length),ee=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var g=0;g<z.length;g++)z[g]=arguments[g];if(b.serialize&&!b.asObject&&y(z,this._serialize,this.serializers,this._stdErrSerialize),b.asObject?Z.call(ee,l(this,v,z,M)):Z.apply(ee,z),b.transmit){const w=b.transmit.level||c.level,G=a.levels.values[w],X=a.levels.values[v];if(X<G)return;x(this,{ts:M,methodLevel:v,methodValue:X,transmitLevel:w,transmitValue:a.levels.values[b.transmit.level||c.level],send:b.transmit.send,val:c.levelVal},z)}}}(c[v]))}function l(b,c,v,Z){b._serialize&&y(v,b._serialize,b.serializers,b._stdErrSerialize);const A=v.slice();let M=A[0];const z={};Z&&(z.time=Z),z.level=a.levels.values[c];let ee=(b._childLevel|0)+1;if(ee<1&&(ee=1),M!==null&&typeof M=="object"){for(;ee--&&typeof A[0]=="object";)Object.assign(z,A.shift());M=A.length?n(A.shift(),A):void 0}else typeof M=="string"&&(M=n(A.shift(),A));return M!==void 0&&(z.msg=M),z}function y(b,c,v,Z){for(const A in b)if(Z&&b[A]instanceof Error)b[A]=a.stdSerializers.err(b[A]);else if(typeof b[A]=="object"&&!Array.isArray(b[A]))for(const M in b[A])c&&c.indexOf(M)>-1&&M in v&&(b[A][M]=v[M](b[A][M]))}function D(b,c,v){return function(){const Z=new Array(1+arguments.length);Z[0]=c;for(var A=1;A<Z.length;A++)Z[A]=arguments[A-1];return b[v].apply(this,Z)}}function x(b,c,v){const Z=c.send,A=c.ts,M=c.methodLevel,z=c.methodValue,ee=c.val,g=b._logEvent.bindings;y(v,b._serialize||Object.keys(b.serializers),b.serializers,b._stdErrSerialize===void 0?!0:b._stdErrSerialize),b._logEvent.ts=A,b._logEvent.messages=v.filter(function(w){return g.indexOf(w)===-1}),b._logEvent.level.label=M,b._logEvent.level.value=z,Z(M,b._logEvent,ee),b._logEvent=N(g)}function N(b){return{ts:0,messages:[],bindings:b||[],level:{label:"",value:0}}}function V(b){const c={type:b.constructor.name,msg:b.message,stack:b.stack};for(const v in b)c[v]===void 0&&(c[v]=b[v]);return c}function F(b){return typeof b.timestamp=="function"?b.timestamp:b.timestamp===!1?ae:T}function R(){return{}}function k(b){return b}function Y(){}function ae(){return!1}function T(){return Date.now()}function U(){return Math.round(Date.now()/1e3)}function S(){return new Date(Date.now()).toISOString()}function O(){function b(c){return typeof c<"u"&&c}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return b(self)||b(window)||b(this)||{}}}return Lc}var Qi={},Dl;function np(){return Dl||(Dl=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.PINO_CUSTOM_CONTEXT_KEY=Qi.PINO_LOGGER_DEFAULTS=void 0,Qi.PINO_LOGGER_DEFAULTS={level:"info"},Qi.PINO_CUSTOM_CONTEXT_KEY="custom_context"),Qi}var cr={},Sl;function b3(){if(Sl)return cr;Sl=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.generateChildLogger=cr.formatChildLoggerContext=cr.getLoggerContext=cr.setBrowserLoggerContext=cr.getBrowserLoggerContext=cr.getDefaultLoggerOptions=void 0;const n=np();function e(l){return Object.assign(Object.assign({},l),{level:(l==null?void 0:l.level)||n.PINO_LOGGER_DEFAULTS.level})}cr.getDefaultLoggerOptions=e;function r(l,y=n.PINO_CUSTOM_CONTEXT_KEY){return l[y]||""}cr.getBrowserLoggerContext=r;function s(l,y,D=n.PINO_CUSTOM_CONTEXT_KEY){return l[D]=y,l}cr.setBrowserLoggerContext=s;function a(l,y=n.PINO_CUSTOM_CONTEXT_KEY){let D="";return typeof l.bindings>"u"?D=r(l,y):D=l.bindings().context||"",D}cr.getLoggerContext=a;function f(l,y,D=n.PINO_CUSTOM_CONTEXT_KEY){const x=a(l,D);return x.trim()?`${x}/${y}`:y}cr.formatChildLoggerContext=f;function p(l,y,D=n.PINO_CUSTOM_CONTEXT_KEY){const x=f(l,y,D),N=l.child({context:x});return s(N,x,D)}return cr.generateChildLogger=p,cr}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.pino=void 0;const e=br,r=e.__importDefault(m3());Object.defineProperty(n,"pino",{enumerable:!0,get:function(){return r.default}}),e.__exportStar(np(),n),e.__exportStar(b3(),n)})(Ze);class w3 extends nn{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class E3 extends nn{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}}class D3{constructor(e,r){this.logger=e,this.core=r}}let S3=class extends nn{constructor(e,r){super(),this.relayer=e,this.logger=r}};class I3 extends nn{constructor(e){super()}}let x3=class{constructor(e,r,s,a){this.core=e,this.logger=r,this.name=s}};class O3 extends nn{constructor(e,r){super(),this.relayer=e,this.logger=r}}class A3 extends nn{constructor(e,r){super(),this.core=e,this.logger=r}}let C3=class{constructor(e,r){this.projectId=e,this.logger=r}},P3=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}};class R3{constructor(e){this.client=e}}const T3=n=>JSON.stringify(n,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),N3=n=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=n.replace(e,'$1"$2n"$3');return JSON.parse(r,(s,a)=>typeof a=="string"&&a.match(/^\d+n$/)?BigInt(a.substring(0,a.length-1)):a)};function L3(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return N3(n)}catch{return n}}function F3(n){return typeof n=="string"?n:T3(n)||""}var bu={},sp={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Ue,r=Or;n.DIGEST_LENGTH=64,n.BLOCK_SIZE=128;var s=function(){function l(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return l.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},l.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},l.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},l.prototype.update=function(y,D){if(D===void 0&&(D=y.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var x=0;if(this._bytesHashed+=D,this._bufferLength>0){for(;this._bufferLength<n.BLOCK_SIZE&&D>0;)this._buffer[this._bufferLength++]=y[x++],D--;this._bufferLength===this.blockSize&&(f(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(D>=this.blockSize&&(x=f(this._tempHi,this._tempLo,this._stateHi,this._stateLo,y,x,D),D%=this.blockSize);D>0;)this._buffer[this._bufferLength++]=y[x++],D--;return this},l.prototype.finish=function(y){if(!this._finished){var D=this._bytesHashed,x=this._bufferLength,N=D/536870912|0,V=D<<3,F=D%128<112?128:256;this._buffer[x]=128;for(var R=x+1;R<F-8;R++)this._buffer[R]=0;e.writeUint32BE(N,this._buffer,F-8),e.writeUint32BE(V,this._buffer,F-4),f(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,F),this._finished=!0}for(var R=0;R<this.digestLength/8;R++)e.writeUint32BE(this._stateHi[R],y,R*8),e.writeUint32BE(this._stateLo[R],y,R*8+4);return this},l.prototype.digest=function(){var y=new Uint8Array(this.digestLength);return this.finish(y),y},l.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},l.prototype.restoreState=function(y){return this._stateHi.set(y.stateHi),this._stateLo.set(y.stateLo),this._bufferLength=y.bufferLength,y.buffer&&this._buffer.set(y.buffer),this._bytesHashed=y.bytesHashed,this._finished=!1,this},l.prototype.cleanSavedState=function(y){r.wipe(y.stateHi),r.wipe(y.stateLo),y.buffer&&r.wipe(y.buffer),y.bufferLength=0,y.bytesHashed=0},l}();n.SHA512=s;var a=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function f(l,y,D,x,N,V,F){for(var R=D[0],k=D[1],Y=D[2],ae=D[3],T=D[4],U=D[5],S=D[6],O=D[7],b=x[0],c=x[1],v=x[2],Z=x[3],A=x[4],M=x[5],z=x[6],ee=x[7],g,w,G,X,W,H,Q,ne;F>=128;){for(var ge=0;ge<16;ge++){var ce=8*ge+V;l[ge]=e.readUint32BE(N,ce),y[ge]=e.readUint32BE(N,ce+4)}for(var ge=0;ge<80;ge++){var _e=R,he=k,me=Y,K=ae,q=T,L=U,h=S,C=O,ue=b,de=c,Ie=v,qe=Z,Ve=A,$e=M,gt=z,yt=ee;if(g=O,w=ee,W=w&65535,H=w>>>16,Q=g&65535,ne=g>>>16,g=(T>>>14|A<<32-14)^(T>>>18|A<<32-18)^(A>>>41-32|T<<32-(41-32)),w=(A>>>14|T<<32-14)^(A>>>18|T<<32-18)^(T>>>41-32|A<<32-(41-32)),W+=w&65535,H+=w>>>16,Q+=g&65535,ne+=g>>>16,g=T&U^~T&S,w=A&M^~A&z,W+=w&65535,H+=w>>>16,Q+=g&65535,ne+=g>>>16,g=a[ge*2],w=a[ge*2+1],W+=w&65535,H+=w>>>16,Q+=g&65535,ne+=g>>>16,g=l[ge%16],w=y[ge%16],W+=w&65535,H+=w>>>16,Q+=g&65535,ne+=g>>>16,H+=W>>>16,Q+=H>>>16,ne+=Q>>>16,G=Q&65535|ne<<16,X=W&65535|H<<16,g=G,w=X,W=w&65535,H=w>>>16,Q=g&65535,ne=g>>>16,g=(R>>>28|b<<32-28)^(b>>>34-32|R<<32-(34-32))^(b>>>39-32|R<<32-(39-32)),w=(b>>>28|R<<32-28)^(R>>>34-32|b<<32-(34-32))^(R>>>39-32|b<<32-(39-32)),W+=w&65535,H+=w>>>16,Q+=g&65535,ne+=g>>>16,g=R&k^R&Y^k&Y,w=b&c^b&v^c&v,W+=w&65535,H+=w>>>16,Q+=g&65535,ne+=g>>>16,H+=W>>>16,Q+=H>>>16,ne+=Q>>>16,C=Q&65535|ne<<16,yt=W&65535|H<<16,g=K,w=qe,W=w&65535,H=w>>>16,Q=g&65535,ne=g>>>16,g=G,w=X,W+=w&65535,H+=w>>>16,Q+=g&65535,ne+=g>>>16,H+=W>>>16,Q+=H>>>16,ne+=Q>>>16,K=Q&65535|ne<<16,qe=W&65535|H<<16,k=_e,Y=he,ae=me,T=K,U=q,S=L,O=h,R=C,c=ue,v=de,Z=Ie,A=qe,M=Ve,z=$e,ee=gt,b=yt,ge%16===15)for(var ce=0;ce<16;ce++)g=l[ce],w=y[ce],W=w&65535,H=w>>>16,Q=g&65535,ne=g>>>16,g=l[(ce+9)%16],w=y[(ce+9)%16],W+=w&65535,H+=w>>>16,Q+=g&65535,ne+=g>>>16,G=l[(ce+1)%16],X=y[(ce+1)%16],g=(G>>>1|X<<32-1)^(G>>>8|X<<32-8)^G>>>7,w=(X>>>1|G<<32-1)^(X>>>8|G<<32-8)^(X>>>7|G<<32-7),W+=w&65535,H+=w>>>16,Q+=g&65535,ne+=g>>>16,G=l[(ce+14)%16],X=y[(ce+14)%16],g=(G>>>19|X<<32-19)^(X>>>61-32|G<<32-(61-32))^G>>>6,w=(X>>>19|G<<32-19)^(G>>>61-32|X<<32-(61-32))^(X>>>6|G<<32-6),W+=w&65535,H+=w>>>16,Q+=g&65535,ne+=g>>>16,H+=W>>>16,Q+=H>>>16,ne+=Q>>>16,l[ce]=Q&65535|ne<<16,y[ce]=W&65535|H<<16}g=R,w=b,W=w&65535,H=w>>>16,Q=g&65535,ne=g>>>16,g=D[0],w=x[0],W+=w&65535,H+=w>>>16,Q+=g&65535,ne+=g>>>16,H+=W>>>16,Q+=H>>>16,ne+=Q>>>16,D[0]=R=Q&65535|ne<<16,x[0]=b=W&65535|H<<16,g=k,w=c,W=w&65535,H=w>>>16,Q=g&65535,ne=g>>>16,g=D[1],w=x[1],W+=w&65535,H+=w>>>16,Q+=g&65535,ne+=g>>>16,H+=W>>>16,Q+=H>>>16,ne+=Q>>>16,D[1]=k=Q&65535|ne<<16,x[1]=c=W&65535|H<<16,g=Y,w=v,W=w&65535,H=w>>>16,Q=g&65535,ne=g>>>16,g=D[2],w=x[2],W+=w&65535,H+=w>>>16,Q+=g&65535,ne+=g>>>16,H+=W>>>16,Q+=H>>>16,ne+=Q>>>16,D[2]=Y=Q&65535|ne<<16,x[2]=v=W&65535|H<<16,g=ae,w=Z,W=w&65535,H=w>>>16,Q=g&65535,ne=g>>>16,g=D[3],w=x[3],W+=w&65535,H+=w>>>16,Q+=g&65535,ne+=g>>>16,H+=W>>>16,Q+=H>>>16,ne+=Q>>>16,D[3]=ae=Q&65535|ne<<16,x[3]=Z=W&65535|H<<16,g=T,w=A,W=w&65535,H=w>>>16,Q=g&65535,ne=g>>>16,g=D[4],w=x[4],W+=w&65535,H+=w>>>16,Q+=g&65535,ne+=g>>>16,H+=W>>>16,Q+=H>>>16,ne+=Q>>>16,D[4]=T=Q&65535|ne<<16,x[4]=A=W&65535|H<<16,g=U,w=M,W=w&65535,H=w>>>16,Q=g&65535,ne=g>>>16,g=D[5],w=x[5],W+=w&65535,H+=w>>>16,Q+=g&65535,ne+=g>>>16,H+=W>>>16,Q+=H>>>16,ne+=Q>>>16,D[5]=U=Q&65535|ne<<16,x[5]=M=W&65535|H<<16,g=S,w=z,W=w&65535,H=w>>>16,Q=g&65535,ne=g>>>16,g=D[6],w=x[6],W+=w&65535,H+=w>>>16,Q+=g&65535,ne+=g>>>16,H+=W>>>16,Q+=H>>>16,ne+=Q>>>16,D[6]=S=Q&65535|ne<<16,x[6]=z=W&65535|H<<16,g=O,w=ee,W=w&65535,H=w>>>16,Q=g&65535,ne=g>>>16,g=D[7],w=x[7],W+=w&65535,H+=w>>>16,Q+=g&65535,ne+=g>>>16,H+=W>>>16,Q+=H>>>16,ne+=Q>>>16,D[7]=O=Q&65535|ne<<16,x[7]=ee=W&65535|H<<16,V+=128,F-=128}return V}function p(l){var y=new s;y.update(l);var D=y.digest();return y.clean(),D}n.hash=p})(sp);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.convertSecretKeyToX25519=n.convertPublicKeyToX25519=n.verify=n.sign=n.extractPublicKeyFromSecretKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.SEED_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=n.SIGNATURE_LENGTH=void 0;const e=Tn,r=sp,s=Or;n.SIGNATURE_LENGTH=64,n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=64,n.SEED_LENGTH=32;function a(K){const q=new Float64Array(16);if(K)for(let L=0;L<K.length;L++)q[L]=K[L];return q}const f=new Uint8Array(32);f[0]=9;const p=a(),l=a([1]),y=a([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),D=a([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),x=a([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),N=a([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),V=a([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function F(K,q){for(let L=0;L<16;L++)K[L]=q[L]|0}function R(K){let q=1;for(let L=0;L<16;L++){let h=K[L]+q+65535;q=Math.floor(h/65536),K[L]=h-q*65536}K[0]+=q-1+37*(q-1)}function k(K,q,L){const h=~(L-1);for(let C=0;C<16;C++){const ue=h&(K[C]^q[C]);K[C]^=ue,q[C]^=ue}}function Y(K,q){const L=a(),h=a();for(let C=0;C<16;C++)h[C]=q[C];R(h),R(h),R(h);for(let C=0;C<2;C++){L[0]=h[0]-65517;for(let de=1;de<15;de++)L[de]=h[de]-65535-(L[de-1]>>16&1),L[de-1]&=65535;L[15]=h[15]-32767-(L[14]>>16&1);const ue=L[15]>>16&1;L[14]&=65535,k(h,L,1-ue)}for(let C=0;C<16;C++)K[2*C]=h[C]&255,K[2*C+1]=h[C]>>8}function ae(K,q){let L=0;for(let h=0;h<32;h++)L|=K[h]^q[h];return(1&L-1>>>8)-1}function T(K,q){const L=new Uint8Array(32),h=new Uint8Array(32);return Y(L,K),Y(h,q),ae(L,h)}function U(K){const q=new Uint8Array(32);return Y(q,K),q[0]&1}function S(K,q){for(let L=0;L<16;L++)K[L]=q[2*L]+(q[2*L+1]<<8);K[15]&=32767}function O(K,q,L){for(let h=0;h<16;h++)K[h]=q[h]+L[h]}function b(K,q,L){for(let h=0;h<16;h++)K[h]=q[h]-L[h]}function c(K,q,L){let h,C,ue=0,de=0,Ie=0,qe=0,Ve=0,$e=0,gt=0,yt=0,je=0,xe=0,Ne=0,Le=0,Be=0,Ae=0,Fe=0,Se=0,Ce=0,ze=0,Oe=0,ke=0,We=0,et=0,tt=0,Je=0,rr=0,lr=0,Wr=0,ir=0,ii=0,mi=0,Fi=0,Et=L[0],vt=L[1],Dt=L[2],St=L[3],bt=L[4],_t=L[5],Lt=L[6],Ft=L[7],It=L[8],Ut=L[9],xt=L[10],Ct=L[11],Ot=L[12],ft=L[13],$t=L[14],Mt=L[15];h=q[0],ue+=h*Et,de+=h*vt,Ie+=h*Dt,qe+=h*St,Ve+=h*bt,$e+=h*_t,gt+=h*Lt,yt+=h*Ft,je+=h*It,xe+=h*Ut,Ne+=h*xt,Le+=h*Ct,Be+=h*Ot,Ae+=h*ft,Fe+=h*$t,Se+=h*Mt,h=q[1],de+=h*Et,Ie+=h*vt,qe+=h*Dt,Ve+=h*St,$e+=h*bt,gt+=h*_t,yt+=h*Lt,je+=h*Ft,xe+=h*It,Ne+=h*Ut,Le+=h*xt,Be+=h*Ct,Ae+=h*Ot,Fe+=h*ft,Se+=h*$t,Ce+=h*Mt,h=q[2],Ie+=h*Et,qe+=h*vt,Ve+=h*Dt,$e+=h*St,gt+=h*bt,yt+=h*_t,je+=h*Lt,xe+=h*Ft,Ne+=h*It,Le+=h*Ut,Be+=h*xt,Ae+=h*Ct,Fe+=h*Ot,Se+=h*ft,Ce+=h*$t,ze+=h*Mt,h=q[3],qe+=h*Et,Ve+=h*vt,$e+=h*Dt,gt+=h*St,yt+=h*bt,je+=h*_t,xe+=h*Lt,Ne+=h*Ft,Le+=h*It,Be+=h*Ut,Ae+=h*xt,Fe+=h*Ct,Se+=h*Ot,Ce+=h*ft,ze+=h*$t,Oe+=h*Mt,h=q[4],Ve+=h*Et,$e+=h*vt,gt+=h*Dt,yt+=h*St,je+=h*bt,xe+=h*_t,Ne+=h*Lt,Le+=h*Ft,Be+=h*It,Ae+=h*Ut,Fe+=h*xt,Se+=h*Ct,Ce+=h*Ot,ze+=h*ft,Oe+=h*$t,ke+=h*Mt,h=q[5],$e+=h*Et,gt+=h*vt,yt+=h*Dt,je+=h*St,xe+=h*bt,Ne+=h*_t,Le+=h*Lt,Be+=h*Ft,Ae+=h*It,Fe+=h*Ut,Se+=h*xt,Ce+=h*Ct,ze+=h*Ot,Oe+=h*ft,ke+=h*$t,We+=h*Mt,h=q[6],gt+=h*Et,yt+=h*vt,je+=h*Dt,xe+=h*St,Ne+=h*bt,Le+=h*_t,Be+=h*Lt,Ae+=h*Ft,Fe+=h*It,Se+=h*Ut,Ce+=h*xt,ze+=h*Ct,Oe+=h*Ot,ke+=h*ft,We+=h*$t,et+=h*Mt,h=q[7],yt+=h*Et,je+=h*vt,xe+=h*Dt,Ne+=h*St,Le+=h*bt,Be+=h*_t,Ae+=h*Lt,Fe+=h*Ft,Se+=h*It,Ce+=h*Ut,ze+=h*xt,Oe+=h*Ct,ke+=h*Ot,We+=h*ft,et+=h*$t,tt+=h*Mt,h=q[8],je+=h*Et,xe+=h*vt,Ne+=h*Dt,Le+=h*St,Be+=h*bt,Ae+=h*_t,Fe+=h*Lt,Se+=h*Ft,Ce+=h*It,ze+=h*Ut,Oe+=h*xt,ke+=h*Ct,We+=h*Ot,et+=h*ft,tt+=h*$t,Je+=h*Mt,h=q[9],xe+=h*Et,Ne+=h*vt,Le+=h*Dt,Be+=h*St,Ae+=h*bt,Fe+=h*_t,Se+=h*Lt,Ce+=h*Ft,ze+=h*It,Oe+=h*Ut,ke+=h*xt,We+=h*Ct,et+=h*Ot,tt+=h*ft,Je+=h*$t,rr+=h*Mt,h=q[10],Ne+=h*Et,Le+=h*vt,Be+=h*Dt,Ae+=h*St,Fe+=h*bt,Se+=h*_t,Ce+=h*Lt,ze+=h*Ft,Oe+=h*It,ke+=h*Ut,We+=h*xt,et+=h*Ct,tt+=h*Ot,Je+=h*ft,rr+=h*$t,lr+=h*Mt,h=q[11],Le+=h*Et,Be+=h*vt,Ae+=h*Dt,Fe+=h*St,Se+=h*bt,Ce+=h*_t,ze+=h*Lt,Oe+=h*Ft,ke+=h*It,We+=h*Ut,et+=h*xt,tt+=h*Ct,Je+=h*Ot,rr+=h*ft,lr+=h*$t,Wr+=h*Mt,h=q[12],Be+=h*Et,Ae+=h*vt,Fe+=h*Dt,Se+=h*St,Ce+=h*bt,ze+=h*_t,Oe+=h*Lt,ke+=h*Ft,We+=h*It,et+=h*Ut,tt+=h*xt,Je+=h*Ct,rr+=h*Ot,lr+=h*ft,Wr+=h*$t,ir+=h*Mt,h=q[13],Ae+=h*Et,Fe+=h*vt,Se+=h*Dt,Ce+=h*St,ze+=h*bt,Oe+=h*_t,ke+=h*Lt,We+=h*Ft,et+=h*It,tt+=h*Ut,Je+=h*xt,rr+=h*Ct,lr+=h*Ot,Wr+=h*ft,ir+=h*$t,ii+=h*Mt,h=q[14],Fe+=h*Et,Se+=h*vt,Ce+=h*Dt,ze+=h*St,Oe+=h*bt,ke+=h*_t,We+=h*Lt,et+=h*Ft,tt+=h*It,Je+=h*Ut,rr+=h*xt,lr+=h*Ct,Wr+=h*Ot,ir+=h*ft,ii+=h*$t,mi+=h*Mt,h=q[15],Se+=h*Et,Ce+=h*vt,ze+=h*Dt,Oe+=h*St,ke+=h*bt,We+=h*_t,et+=h*Lt,tt+=h*Ft,Je+=h*It,rr+=h*Ut,lr+=h*xt,Wr+=h*Ct,ir+=h*Ot,ii+=h*ft,mi+=h*$t,Fi+=h*Mt,ue+=38*Ce,de+=38*ze,Ie+=38*Oe,qe+=38*ke,Ve+=38*We,$e+=38*et,gt+=38*tt,yt+=38*Je,je+=38*rr,xe+=38*lr,Ne+=38*Wr,Le+=38*ir,Be+=38*ii,Ae+=38*mi,Fe+=38*Fi,C=1,h=ue+C+65535,C=Math.floor(h/65536),ue=h-C*65536,h=de+C+65535,C=Math.floor(h/65536),de=h-C*65536,h=Ie+C+65535,C=Math.floor(h/65536),Ie=h-C*65536,h=qe+C+65535,C=Math.floor(h/65536),qe=h-C*65536,h=Ve+C+65535,C=Math.floor(h/65536),Ve=h-C*65536,h=$e+C+65535,C=Math.floor(h/65536),$e=h-C*65536,h=gt+C+65535,C=Math.floor(h/65536),gt=h-C*65536,h=yt+C+65535,C=Math.floor(h/65536),yt=h-C*65536,h=je+C+65535,C=Math.floor(h/65536),je=h-C*65536,h=xe+C+65535,C=Math.floor(h/65536),xe=h-C*65536,h=Ne+C+65535,C=Math.floor(h/65536),Ne=h-C*65536,h=Le+C+65535,C=Math.floor(h/65536),Le=h-C*65536,h=Be+C+65535,C=Math.floor(h/65536),Be=h-C*65536,h=Ae+C+65535,C=Math.floor(h/65536),Ae=h-C*65536,h=Fe+C+65535,C=Math.floor(h/65536),Fe=h-C*65536,h=Se+C+65535,C=Math.floor(h/65536),Se=h-C*65536,ue+=C-1+37*(C-1),C=1,h=ue+C+65535,C=Math.floor(h/65536),ue=h-C*65536,h=de+C+65535,C=Math.floor(h/65536),de=h-C*65536,h=Ie+C+65535,C=Math.floor(h/65536),Ie=h-C*65536,h=qe+C+65535,C=Math.floor(h/65536),qe=h-C*65536,h=Ve+C+65535,C=Math.floor(h/65536),Ve=h-C*65536,h=$e+C+65535,C=Math.floor(h/65536),$e=h-C*65536,h=gt+C+65535,C=Math.floor(h/65536),gt=h-C*65536,h=yt+C+65535,C=Math.floor(h/65536),yt=h-C*65536,h=je+C+65535,C=Math.floor(h/65536),je=h-C*65536,h=xe+C+65535,C=Math.floor(h/65536),xe=h-C*65536,h=Ne+C+65535,C=Math.floor(h/65536),Ne=h-C*65536,h=Le+C+65535,C=Math.floor(h/65536),Le=h-C*65536,h=Be+C+65535,C=Math.floor(h/65536),Be=h-C*65536,h=Ae+C+65535,C=Math.floor(h/65536),Ae=h-C*65536,h=Fe+C+65535,C=Math.floor(h/65536),Fe=h-C*65536,h=Se+C+65535,C=Math.floor(h/65536),Se=h-C*65536,ue+=C-1+37*(C-1),K[0]=ue,K[1]=de,K[2]=Ie,K[3]=qe,K[4]=Ve,K[5]=$e,K[6]=gt,K[7]=yt,K[8]=je,K[9]=xe,K[10]=Ne,K[11]=Le,K[12]=Be,K[13]=Ae,K[14]=Fe,K[15]=Se}function v(K,q){c(K,q,q)}function Z(K,q){const L=a();let h;for(h=0;h<16;h++)L[h]=q[h];for(h=253;h>=0;h--)v(L,L),h!==2&&h!==4&&c(L,L,q);for(h=0;h<16;h++)K[h]=L[h]}function A(K,q){const L=a();let h;for(h=0;h<16;h++)L[h]=q[h];for(h=250;h>=0;h--)v(L,L),h!==1&&c(L,L,q);for(h=0;h<16;h++)K[h]=L[h]}function M(K,q){const L=a(),h=a(),C=a(),ue=a(),de=a(),Ie=a(),qe=a(),Ve=a(),$e=a();b(L,K[1],K[0]),b($e,q[1],q[0]),c(L,L,$e),O(h,K[0],K[1]),O($e,q[0],q[1]),c(h,h,$e),c(C,K[3],q[3]),c(C,C,D),c(ue,K[2],q[2]),O(ue,ue,ue),b(de,h,L),b(Ie,ue,C),O(qe,ue,C),O(Ve,h,L),c(K[0],de,Ie),c(K[1],Ve,qe),c(K[2],qe,Ie),c(K[3],de,Ve)}function z(K,q,L){for(let h=0;h<4;h++)k(K[h],q[h],L)}function ee(K,q){const L=a(),h=a(),C=a();Z(C,q[2]),c(L,q[0],C),c(h,q[1],C),Y(K,h),K[31]^=U(L)<<7}function g(K,q,L){F(K[0],p),F(K[1],l),F(K[2],l),F(K[3],p);for(let h=255;h>=0;--h){const C=L[h/8|0]>>(h&7)&1;z(K,q,C),M(q,K),M(K,K),z(K,q,C)}}function w(K,q){const L=[a(),a(),a(),a()];F(L[0],x),F(L[1],N),F(L[2],l),c(L[3],x,N),g(K,L,q)}function G(K){if(K.length!==n.SEED_LENGTH)throw new Error(`ed25519: seed must be ${n.SEED_LENGTH} bytes`);const q=(0,r.hash)(K);q[0]&=248,q[31]&=127,q[31]|=64;const L=new Uint8Array(32),h=[a(),a(),a(),a()];w(h,q),ee(L,h);const C=new Uint8Array(64);return C.set(K),C.set(L,32),{publicKey:L,secretKey:C}}n.generateKeyPairFromSeed=G;function X(K){const q=(0,e.randomBytes)(32,K),L=G(q);return(0,s.wipe)(q),L}n.generateKeyPair=X;function W(K){if(K.length!==n.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${n.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(K.subarray(32))}n.extractPublicKeyFromSecretKey=W;const H=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Q(K,q){let L,h,C,ue;for(h=63;h>=32;--h){for(L=0,C=h-32,ue=h-12;C<ue;++C)q[C]+=L-16*q[h]*H[C-(h-32)],L=Math.floor((q[C]+128)/256),q[C]-=L*256;q[C]+=L,q[h]=0}for(L=0,C=0;C<32;C++)q[C]+=L-(q[31]>>4)*H[C],L=q[C]>>8,q[C]&=255;for(C=0;C<32;C++)q[C]-=L*H[C];for(h=0;h<32;h++)q[h+1]+=q[h]>>8,K[h]=q[h]&255}function ne(K){const q=new Float64Array(64);for(let L=0;L<64;L++)q[L]=K[L];for(let L=0;L<64;L++)K[L]=0;Q(K,q)}function ge(K,q){const L=new Float64Array(64),h=[a(),a(),a(),a()],C=(0,r.hash)(K.subarray(0,32));C[0]&=248,C[31]&=127,C[31]|=64;const ue=new Uint8Array(64);ue.set(C.subarray(32),32);const de=new r.SHA512;de.update(ue.subarray(32)),de.update(q);const Ie=de.digest();de.clean(),ne(Ie),w(h,Ie),ee(ue,h),de.reset(),de.update(ue.subarray(0,32)),de.update(K.subarray(32)),de.update(q);const qe=de.digest();ne(qe);for(let Ve=0;Ve<32;Ve++)L[Ve]=Ie[Ve];for(let Ve=0;Ve<32;Ve++)for(let $e=0;$e<32;$e++)L[Ve+$e]+=qe[Ve]*C[$e];return Q(ue.subarray(32),L),ue}n.sign=ge;function ce(K,q){const L=a(),h=a(),C=a(),ue=a(),de=a(),Ie=a(),qe=a();return F(K[2],l),S(K[1],q),v(C,K[1]),c(ue,C,y),b(C,C,K[2]),O(ue,K[2],ue),v(de,ue),v(Ie,de),c(qe,Ie,de),c(L,qe,C),c(L,L,ue),A(L,L),c(L,L,C),c(L,L,ue),c(L,L,ue),c(K[0],L,ue),v(h,K[0]),c(h,h,ue),T(h,C)&&c(K[0],K[0],V),v(h,K[0]),c(h,h,ue),T(h,C)?-1:(U(K[0])===q[31]>>7&&b(K[0],p,K[0]),c(K[3],K[0],K[1]),0)}function _e(K,q,L){const h=new Uint8Array(32),C=[a(),a(),a(),a()],ue=[a(),a(),a(),a()];if(L.length!==n.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${n.SIGNATURE_LENGTH} bytes`);if(ce(ue,K))return!1;const de=new r.SHA512;de.update(L.subarray(0,32)),de.update(K),de.update(q);const Ie=de.digest();return ne(Ie),g(C,ue,Ie),w(ue,L.subarray(32)),M(C,ue),ee(h,C),!ae(L,h)}n.verify=_e;function he(K){let q=[a(),a(),a(),a()];if(ce(q,K))throw new Error("Ed25519: invalid public key");let L=a(),h=a(),C=q[1];O(L,l,C),b(h,l,C),Z(h,h),c(L,L,h);let ue=new Uint8Array(32);return Y(ue,L),ue}n.convertPublicKeyToX25519=he;function me(K){const q=(0,r.hash)(K.subarray(0,32));q[0]&=248,q[31]&=127,q[31]|=64;const L=new Uint8Array(q.subarray(0,32));return(0,s.wipe)(q),L}n.convertSecretKeyToX25519=me})(bu);const U3="EdDSA",$3="JWT",op=".",ap="base64url",M3="utf8",j3="utf8",B3=":",H3="did",q3="key",Il="base58btc",z3="z",K3="K36",V3=32;function k3(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return JSON.parse(n)}catch{return n}}function eu(n){return typeof n=="string"?n:JSON.stringify(n)}function jo(n){return fr(mr(eu(n),M3),ap)}function cp(n){const e=mr(K3,Il),r=z3+fr(Wc([e,n]),Il);return[H3,q3,r].join(B3)}function G3(n){return fr(n,ap)}function W3(n){return mr([jo(n.header),jo(n.payload)].join(op),j3)}function Y3(n){return[jo(n.header),jo(n.payload),G3(n.signature)].join(op)}function xl(n=Tn.randomBytes(V3)){return bu.generateKeyPairFromSeed(n)}async function J3(n,e,r,s,a=De.fromMiliseconds(Date.now())){const f={alg:U3,typ:$3},p=cp(s.publicKey),l=a+r,y={iss:p,sub:n,aud:e,iat:a,exp:l},D=W3({header:f,payload:y}),x=bu.sign(s.secretKey,D);return Y3({header:f,payload:y,signature:x})}const X3="PARSE_ERROR",Q3="INVALID_REQUEST",Z3="METHOD_NOT_FOUND",e6="INVALID_PARAMS",up="INTERNAL_ERROR",wu="SERVER_ERROR",t6=[-32700,-32600,-32601,-32602,-32603],ls={[X3]:{code:-32700,message:"Parse error"},[Q3]:{code:-32600,message:"Invalid Request"},[Z3]:{code:-32601,message:"Method not found"},[e6]:{code:-32602,message:"Invalid params"},[up]:{code:-32603,message:"Internal error"},[wu]:{code:-32e3,message:"Server error"}},hp=wu;function r6(n){return t6.includes(n)}function Ol(n){return Object.keys(ls).includes(n)?ls[n]:ls[hp]}function i6(n){const e=Object.values(ls).find(r=>r.code===n);return e||ls[hp]}var fp={},gi={},Al;function n6(){if(Al)return gi;Al=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.isBrowserCryptoAvailable=gi.getSubtleCrypto=gi.getBrowerCrypto=void 0;function n(){return(tr===null||tr===void 0?void 0:tr.crypto)||(tr===null||tr===void 0?void 0:tr.msCrypto)||{}}gi.getBrowerCrypto=n;function e(){const s=n();return s.subtle||s.webkitSubtle}gi.getSubtleCrypto=e;function r(){return!!n()&&!!e()}return gi.isBrowserCryptoAvailable=r,gi}var yi={},Cl;function s6(){if(Cl)return yi;Cl=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.isBrowser=yi.isNode=yi.isReactNative=void 0;function n(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}yi.isReactNative=n;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}yi.isNode=e;function r(){return!n()&&!e()}return yi.isBrowser=r,yi}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=br;e.__exportStar(n6(),n),e.__exportStar(s6(),n)})(fp);function lp(n=3){const e=Date.now()*Math.pow(10,n),r=Math.floor(Math.random()*Math.pow(10,n));return e+r}function o6(n=6){return BigInt(lp(n))}function Jo(n,e,r){return{id:r||lp(),jsonrpc:"2.0",method:n,params:e}}function Eu(n,e){return{id:n,jsonrpc:"2.0",result:e}}function dp(n,e,r){return{id:n,jsonrpc:"2.0",error:a6(e,r)}}function a6(n,e){return typeof n>"u"?Ol(up):(typeof n=="string"&&(n=Object.assign(Object.assign({},Ol(wu)),{message:n})),typeof e<"u"&&(n.data=e),r6(n.code)&&(n=i6(n.code)),n)}class c6{}class u6 extends c6{constructor(){super()}}class h6 extends u6{constructor(e){super()}}function pp(n){return typeof n=="object"&&"id"in n&&"jsonrpc"in n&&n.jsonrpc==="2.0"}function Du(n){return pp(n)&&"method"in n}function Su(n){return pp(n)&&(vi(n)||Gr(n))}function vi(n){return"result"in n}function Gr(n){return"error"in n}class Ni extends h6{constructor(e){super(e),this.events=new Wt.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(Jo(e.method,e.params||[],o6().toString()),r)}async requestStrict(e,r){return new Promise(async(s,a)=>{if(!this.connection.connected)try{await this.open()}catch(f){a(f)}this.events.on(`${e.id}`,f=>{Gr(f)?a(f.error):s(f.result)});try{await this.connection.send(e,r)}catch(f){a(f)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Su(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const f6=n=>JSON.stringify(n,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),l6=n=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=n.replace(e,'$1"$2n"$3');return JSON.parse(r,(s,a)=>typeof a=="string"&&a.match(/^\d+n$/)?BigInt(a.substring(0,a.length-1)):a)};function d6(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return l6(n)}catch{return n}}function p6(n){return typeof n=="string"?n:f6(n)||""}const g6="PARSE_ERROR",y6="INVALID_REQUEST",v6="METHOD_NOT_FOUND",_6="INVALID_PARAMS",gp="INTERNAL_ERROR",Iu="SERVER_ERROR",m6=[-32700,-32600,-32601,-32602,-32603],ds={[g6]:{code:-32700,message:"Parse error"},[y6]:{code:-32600,message:"Invalid Request"},[v6]:{code:-32601,message:"Method not found"},[_6]:{code:-32602,message:"Invalid params"},[gp]:{code:-32603,message:"Internal error"},[Iu]:{code:-32e3,message:"Server error"}},yp=Iu;function b6(n){return m6.includes(n)}function Pl(n){return Object.keys(ds).includes(n)?ds[n]:ds[yp]}function w6(n){const e=Object.values(ds).find(r=>r.code===n);return e||ds[yp]}function E6(n,e,r){return n.message.includes("getaddrinfo ENOTFOUND")||n.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):n}function D6(n,e,r){return{id:n,jsonrpc:"2.0",error:S6(e,r)}}function S6(n,e){return typeof n>"u"?Pl(gp):(typeof n=="string"&&(n=Object.assign(Object.assign({},Pl(Iu)),{message:n})),typeof e<"u"&&(n.data=e),b6(n.code)&&(n=w6(n.code)),n)}const I6="^wss?:";function x6(n){const e=n.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function O6(n,e){const r=x6(n);return typeof r>"u"?!1:new RegExp(e).test(r)}function Rl(n){return O6(n,I6)}function A6(n){return new RegExp("wss?://localhost(:d{2,5})?").test(n)}const Tl=10,C6=()=>typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:require("ws"),P6=()=>typeof window<"u",R6=C6();class T6{constructor(e){if(this.url=e,this.events=new Wt.EventEmitter,this.registering=!1,!Rl(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=s=>{this.onClose(s),e()},this.socket.close()})}async send(e,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(p6(e))}catch(s){this.onError(e.id,s)}}register(e=this.url){if(!Rl(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((s,a)=>{this.events.once("register_error",f=>{this.resetMaxListeners(),a(f)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return a(new Error("WebSocket connection is missing or invalid"));s(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,s)=>{const a=fp.isReactNative()?void 0:{rejectUnauthorized:!A6(e)},f=new R6(e,[],a);P6()?f.onerror=p=>{const l=p;s(this.emitError(l.error))}:f.on("error",p=>{s(this.emitError(p))}),f.onopen=()=>{this.onOpen(f),r(f)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?d6(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const s=this.parseError(r),a=s.message||s.toString(),f=D6(e,a);this.events.emit("payload",f)}parseError(e,r=this.url){return E6(e,r,"WS")}resetMaxListeners(){this.events.getMaxListeners()>Tl&&this.events.setMaxListeners(Tl)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for URL: ${this.url}`));return this.events.emit("register_error",r),r}}var Bo={},N6={get exports(){return Bo},set exports(n){Bo=n}};(function(n,e){var r=200,s="__lodash_hash_undefined__",a=1,f=2,p=9007199254740991,l="[object Arguments]",y="[object Array]",D="[object AsyncFunction]",x="[object Boolean]",N="[object Date]",V="[object Error]",F="[object Function]",R="[object GeneratorFunction]",k="[object Map]",Y="[object Number]",ae="[object Null]",T="[object Object]",U="[object Promise]",S="[object Proxy]",O="[object RegExp]",b="[object Set]",c="[object String]",v="[object Symbol]",Z="[object Undefined]",A="[object WeakMap]",M="[object ArrayBuffer]",z="[object DataView]",ee="[object Float32Array]",g="[object Float64Array]",w="[object Int8Array]",G="[object Int16Array]",X="[object Int32Array]",W="[object Uint8Array]",H="[object Uint8ClampedArray]",Q="[object Uint16Array]",ne="[object Uint32Array]",ge=/[\\^$.*+?()[\]{}|]/g,ce=/^\[object .+?Constructor\]$/,_e=/^(?:0|[1-9]\d*)$/,he={};he[ee]=he[g]=he[w]=he[G]=he[X]=he[W]=he[H]=he[Q]=he[ne]=!0,he[l]=he[y]=he[M]=he[x]=he[z]=he[N]=he[V]=he[F]=he[k]=he[Y]=he[T]=he[O]=he[b]=he[c]=he[A]=!1;var me=typeof tr=="object"&&tr&&tr.Object===Object&&tr,K=typeof self=="object"&&self&&self.Object===Object&&self,q=me||K||Function("return this")(),L=e&&!e.nodeType&&e,h=L&&!0&&n&&!n.nodeType&&n,C=h&&h.exports===L,ue=C&&me.process,de=function(){try{return ue&&ue.binding&&ue.binding("util")}catch{}}(),Ie=de&&de.isTypedArray;function qe(E,$){for(var se=-1,pe=E==null?0:E.length,ct=0,Re=[];++se<pe;){var dt=E[se];$(dt,se,E)&&(Re[ct++]=dt)}return Re}function Ve(E,$){for(var se=-1,pe=$.length,ct=E.length;++se<pe;)E[ct+se]=$[se];return E}function $e(E,$){for(var se=-1,pe=E==null?0:E.length;++se<pe;)if($(E[se],se,E))return!0;return!1}function gt(E,$){for(var se=-1,pe=Array(E);++se<E;)pe[se]=$(se);return pe}function yt(E){return function($){return E($)}}function je(E,$){return E.has($)}function xe(E,$){return E==null?void 0:E[$]}function Ne(E){var $=-1,se=Array(E.size);return E.forEach(function(pe,ct){se[++$]=[ct,pe]}),se}function Le(E,$){return function(se){return E($(se))}}function Be(E){var $=-1,se=Array(E.size);return E.forEach(function(pe){se[++$]=pe}),se}var Ae=Array.prototype,Fe=Function.prototype,Se=Object.prototype,Ce=q["__core-js_shared__"],ze=Fe.toString,Oe=Se.hasOwnProperty,ke=function(){var E=/[^.]+$/.exec(Ce&&Ce.keys&&Ce.keys.IE_PROTO||"");return E?"Symbol(src)_1."+E:""}(),We=Se.toString,et=RegExp("^"+ze.call(Oe).replace(ge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=C?q.Buffer:void 0,Je=q.Symbol,rr=q.Uint8Array,lr=Se.propertyIsEnumerable,Wr=Ae.splice,ir=Je?Je.toStringTag:void 0,ii=Object.getOwnPropertySymbols,mi=tt?tt.isBuffer:void 0,Fi=Le(Object.keys,Object),Et=wr(q,"DataView"),vt=wr(q,"Map"),Dt=wr(q,"Promise"),St=wr(q,"Set"),bt=wr(q,"WeakMap"),_t=wr(Object,"create"),Lt=si(Et),Ft=si(vt),It=si(Dt),Ut=si(St),xt=si(bt),Ct=Je?Je.prototype:void 0,Ot=Ct?Ct.valueOf:void 0;function ft(E){var $=-1,se=E==null?0:E.length;for(this.clear();++$<se;){var pe=E[$];this.set(pe[0],pe[1])}}function $t(){this.__data__=_t?_t(null):{},this.size=0}function Mt(E){var $=this.has(E)&&delete this.__data__[E];return this.size-=$?1:0,$}function Zo(E){var $=this.__data__;if(_t){var se=$[E];return se===s?void 0:se}return Oe.call($,E)?$[E]:void 0}function ea(E){var $=this.__data__;return _t?$[E]!==void 0:Oe.call($,E)}function ta(E,$){var se=this.__data__;return this.size+=this.has(E)?0:1,se[E]=_t&&$===void 0?s:$,this}ft.prototype.clear=$t,ft.prototype.delete=Mt,ft.prototype.get=Zo,ft.prototype.has=ea,ft.prototype.set=ta;function Ar(E){var $=-1,se=E==null?0:E.length;for(this.clear();++$<se;){var pe=E[$];this.set(pe[0],pe[1])}}function ra(){this.__data__=[],this.size=0}function ia(E){var $=this.__data__,se=Ui($,E);if(se<0)return!1;var pe=$.length-1;return se==pe?$.pop():Wr.call($,se,1),--this.size,!0}function na(E){var $=this.__data__,se=Ui($,E);return se<0?void 0:$[se][1]}function sa(E){return Ui(this.__data__,E)>-1}function oa(E,$){var se=this.__data__,pe=Ui(se,E);return pe<0?(++this.size,se.push([E,$])):se[pe][1]=$,this}Ar.prototype.clear=ra,Ar.prototype.delete=ia,Ar.prototype.get=na,Ar.prototype.has=sa,Ar.prototype.set=oa;function ni(E){var $=-1,se=E==null?0:E.length;for(this.clear();++$<se;){var pe=E[$];this.set(pe[0],pe[1])}}function an(){this.size=0,this.__data__={hash:new ft,map:new(vt||Ar),string:new ft}}function aa(E){var $=bi(this,E).delete(E);return this.size-=$?1:0,$}function cn(E){return bi(this,E).get(E)}function ca(E){return bi(this,E).has(E)}function ua(E,$){var se=bi(this,E),pe=se.size;return se.set(E,$),this.size+=se.size==pe?0:1,this}ni.prototype.clear=an,ni.prototype.delete=aa,ni.prototype.get=cn,ni.prototype.has=ca,ni.prototype.set=ua;function un(E){var $=-1,se=E==null?0:E.length;for(this.__data__=new ni;++$<se;)this.add(E[$])}function Es(E){return this.__data__.set(E,s),this}function Ds(E){return this.__data__.has(E)}un.prototype.add=un.prototype.push=Es,un.prototype.has=Ds;function Br(E){var $=this.__data__=new Ar(E);this.size=$.size}function ha(){this.__data__=new Ar,this.size=0}function fa(E){var $=this.__data__,se=$.delete(E);return this.size=$.size,se}function la(E){return this.__data__.get(E)}function da(E){return this.__data__.has(E)}function Ss(E,$){var se=this.__data__;if(se instanceof Ar){var pe=se.__data__;if(!vt||pe.length<r-1)return pe.push([E,$]),this.size=++se.size,this;se=this.__data__=new ni(pe)}return se.set(E,$),this.size=se.size,this}Br.prototype.clear=ha,Br.prototype.delete=fa,Br.prototype.get=la,Br.prototype.has=da,Br.prototype.set=Ss;function Is(E,$){var se=ln(E),pe=!se&&$s(E),ct=!se&&!pe&&$n(E),Re=!se&&!pe&&!ct&&Bs(E),dt=se||pe||ct||Re,jt=dt?gt(E.length,String):[],Xe=jt.length;for(var ut in E)($||Oe.call(E,ut))&&!(dt&&(ut=="length"||ct&&(ut=="offset"||ut=="parent")||Re&&(ut=="buffer"||ut=="byteLength"||ut=="byteOffset")||Ts(ut,Xe)))&&jt.push(ut);return jt}function Ui(E,$){for(var se=E.length;se--;)if(Us(E[se][0],$))return se;return-1}function Fn(E,$,se){var pe=$(E);return ln(E)?pe:Ve(pe,se(E))}function $i(E){return E==null?E===void 0?Z:ae:ir&&ir in Object(E)?Ps(E):ya(E)}function Un(E){return ji(E)&&$i(E)==l}function Mi(E,$,se,pe,ct){return E===$?!0:E==null||$==null||!ji(E)&&!ji($)?E!==E&&$!==$:xs(E,$,se,pe,Mi,ct)}function xs(E,$,se,pe,ct,Re){var dt=ln(E),jt=ln($),Xe=dt?y:Yr(E),ut=jt?y:Yr($);Xe=Xe==l?T:Xe,ut=ut==l?T:ut;var Pt=Xe==T,dr=ut==T,Bt=Xe==ut;if(Bt&&$n(E)){if(!$n($))return!1;dt=!0,Pt=!1}if(Bt&&!Pt)return Re||(Re=new Br),dt||Bs(E)?hn(E,$,se,pe,ct,Re):ga(E,$,Xe,se,pe,ct,Re);if(!(se&a)){var pt=Pt&&Oe.call(E,"__wrapped__"),nr=dr&&Oe.call($,"__wrapped__");if(pt||nr){var Hr=pt?E.value():E,Cr=nr?$.value():$;return Re||(Re=new Br),ct(Hr,Cr,se,pe,Re)}}return Bt?(Re||(Re=new Br),Cs(E,$,se,pe,ct,Re)):!1}function pa(E){if(!js(E)||Ls(E))return!1;var $=dn(E)?et:ce;return $.test(si(E))}function Os(E){return ji(E)&&Ms(E.length)&&!!he[$i(E)]}function As(E){if(!Fs(E))return Fi(E);var $=[];for(var se in Object(E))Oe.call(E,se)&&se!="constructor"&&$.push(se);return $}function hn(E,$,se,pe,ct,Re){var dt=se&a,jt=E.length,Xe=$.length;if(jt!=Xe&&!(dt&&Xe>jt))return!1;var ut=Re.get(E);if(ut&&Re.get($))return ut==$;var Pt=-1,dr=!0,Bt=se&f?new un:void 0;for(Re.set(E,$),Re.set($,E);++Pt<jt;){var pt=E[Pt],nr=$[Pt];if(pe)var Hr=dt?pe(nr,pt,Pt,$,E,Re):pe(pt,nr,Pt,E,$,Re);if(Hr!==void 0){if(Hr)continue;dr=!1;break}if(Bt){if(!$e($,function(Cr,Jr){if(!je(Bt,Jr)&&(pt===Cr||ct(pt,Cr,se,pe,Re)))return Bt.push(Jr)})){dr=!1;break}}else if(!(pt===nr||ct(pt,nr,se,pe,Re))){dr=!1;break}}return Re.delete(E),Re.delete($),dr}function ga(E,$,se,pe,ct,Re,dt){switch(se){case z:if(E.byteLength!=$.byteLength||E.byteOffset!=$.byteOffset)return!1;E=E.buffer,$=$.buffer;case M:return!(E.byteLength!=$.byteLength||!Re(new rr(E),new rr($)));case x:case N:case Y:return Us(+E,+$);case V:return E.name==$.name&&E.message==$.message;case O:case c:return E==$+"";case k:var jt=Ne;case b:var Xe=pe&a;if(jt||(jt=Be),E.size!=$.size&&!Xe)return!1;var ut=dt.get(E);if(ut)return ut==$;pe|=f,dt.set(E,$);var Pt=hn(jt(E),jt($),pe,ct,Re,dt);return dt.delete(E),Pt;case v:if(Ot)return Ot.call(E)==Ot.call($)}return!1}function Cs(E,$,se,pe,ct,Re){var dt=se&a,jt=fn(E),Xe=jt.length,ut=fn($),Pt=ut.length;if(Xe!=Pt&&!dt)return!1;for(var dr=Xe;dr--;){var Bt=jt[dr];if(!(dt?Bt in $:Oe.call($,Bt)))return!1}var pt=Re.get(E);if(pt&&Re.get($))return pt==$;var nr=!0;Re.set(E,$),Re.set($,E);for(var Hr=dt;++dr<Xe;){Bt=jt[dr];var Cr=E[Bt],Jr=$[Bt];if(pe)var Mn=dt?pe(Jr,Cr,Bt,$,E,Re):pe(Cr,Jr,Bt,E,$,Re);if(!(Mn===void 0?Cr===Jr||ct(Cr,Jr,se,pe,Re):Mn)){nr=!1;break}Hr||(Hr=Bt=="constructor")}if(nr&&!Hr){var Bi=E.constructor,Kt=$.constructor;Bi!=Kt&&"constructor"in E&&"constructor"in $&&!(typeof Bi=="function"&&Bi instanceof Bi&&typeof Kt=="function"&&Kt instanceof Kt)&&(nr=!1)}return Re.delete(E),Re.delete($),nr}function fn(E){return Fn(E,ma,Rs)}function bi(E,$){var se=E.__data__;return Ns($)?se[typeof $=="string"?"string":"hash"]:se.map}function wr(E,$){var se=xe(E,$);return pa(se)?se:void 0}function Ps(E){var $=Oe.call(E,ir),se=E[ir];try{E[ir]=void 0;var pe=!0}catch{}var ct=We.call(E);return pe&&($?E[ir]=se:delete E[ir]),ct}var Rs=ii?function(E){return E==null?[]:(E=Object(E),qe(ii(E),function($){return lr.call(E,$)}))}:at,Yr=$i;(Et&&Yr(new Et(new ArrayBuffer(1)))!=z||vt&&Yr(new vt)!=k||Dt&&Yr(Dt.resolve())!=U||St&&Yr(new St)!=b||bt&&Yr(new bt)!=A)&&(Yr=function(E){var $=$i(E),se=$==T?E.constructor:void 0,pe=se?si(se):"";if(pe)switch(pe){case Lt:return z;case Ft:return k;case It:return U;case Ut:return b;case xt:return A}return $});function Ts(E,$){return $=$??p,!!$&&(typeof E=="number"||_e.test(E))&&E>-1&&E%1==0&&E<$}function Ns(E){var $=typeof E;return $=="string"||$=="number"||$=="symbol"||$=="boolean"?E!=="__proto__":E===null}function Ls(E){return!!ke&&ke in E}function Fs(E){var $=E&&E.constructor,se=typeof $=="function"&&$.prototype||Se;return E===se}function ya(E){return We.call(E)}function si(E){if(E!=null){try{return ze.call(E)}catch{}try{return E+""}catch{}}return""}function Us(E,$){return E===$||E!==E&&$!==$}var $s=Un(function(){return arguments}())?Un:function(E){return ji(E)&&Oe.call(E,"callee")&&!lr.call(E,"callee")},ln=Array.isArray;function va(E){return E!=null&&Ms(E.length)&&!dn(E)}var $n=mi||st;function _a(E,$){return Mi(E,$)}function dn(E){if(!js(E))return!1;var $=$i(E);return $==F||$==R||$==D||$==S}function Ms(E){return typeof E=="number"&&E>-1&&E%1==0&&E<=p}function js(E){var $=typeof E;return E!=null&&($=="object"||$=="function")}function ji(E){return E!=null&&typeof E=="object"}var Bs=Ie?yt(Ie):Os;function ma(E){return va(E)?Is(E):As(E)}function at(){return[]}function st(){return!1}n.exports=_a})(N6,Bo);function L6(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var a=0;a<n.length;a++){var f=n.charAt(a),p=f.charCodeAt(0);if(r[p]!==255)throw new TypeError(f+" is ambiguous");r[p]=a}var l=n.length,y=n.charAt(0),D=Math.log(l)/Math.log(256),x=Math.log(256)/Math.log(l);function N(R){if(R instanceof Uint8Array||(ArrayBuffer.isView(R)?R=new Uint8Array(R.buffer,R.byteOffset,R.byteLength):Array.isArray(R)&&(R=Uint8Array.from(R))),!(R instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(R.length===0)return"";for(var k=0,Y=0,ae=0,T=R.length;ae!==T&&R[ae]===0;)ae++,k++;for(var U=(T-ae)*x+1>>>0,S=new Uint8Array(U);ae!==T;){for(var O=R[ae],b=0,c=U-1;(O!==0||b<Y)&&c!==-1;c--,b++)O+=256*S[c]>>>0,S[c]=O%l>>>0,O=O/l>>>0;if(O!==0)throw new Error("Non-zero carry");Y=b,ae++}for(var v=U-Y;v!==U&&S[v]===0;)v++;for(var Z=y.repeat(k);v<U;++v)Z+=n.charAt(S[v]);return Z}function V(R){if(typeof R!="string")throw new TypeError("Expected String");if(R.length===0)return new Uint8Array;var k=0;if(R[k]!==" "){for(var Y=0,ae=0;R[k]===y;)Y++,k++;for(var T=(R.length-k)*D+1>>>0,U=new Uint8Array(T);R[k];){var S=r[R.charCodeAt(k)];if(S===255)return;for(var O=0,b=T-1;(S!==0||O<ae)&&b!==-1;b--,O++)S+=l*U[b]>>>0,U[b]=S%256>>>0,S=S/256>>>0;if(S!==0)throw new Error("Non-zero carry");ae=O,k++}if(R[k]!==" "){for(var c=T-ae;c!==T&&U[c]===0;)c++;for(var v=new Uint8Array(Y+(T-c)),Z=Y;c!==T;)v[Z++]=U[c++];return v}}}function F(R){var k=V(R);if(k)return k;throw new Error(`Non-${e} character`)}return{encode:N,decodeUnsafe:V,decode:F}}var F6=L6,U6=F6;const vp=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},$6=n=>new TextEncoder().encode(n),M6=n=>new TextDecoder().decode(n);let j6=class{constructor(e,r,s){this.name=e,this.prefix=r,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}};class B6{constructor(e,r,s){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return _p(this,e)}}class H6{constructor(e){this.decoders=e}or(e){return _p(this,e)}decode(e){const r=e[0],s=this.decoders[r];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const _p=(n,e)=>new H6({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});let q6=class{constructor(e,r,s,a){this.name=e,this.prefix=r,this.baseEncode=s,this.baseDecode=a,this.encoder=new j6(e,r,s),this.decoder=new B6(e,r,a)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const Xo=({name:n,prefix:e,encode:r,decode:s})=>new q6(n,e,r,s),ws=({prefix:n,name:e,alphabet:r})=>{const{encode:s,decode:a}=U6(r,e);return Xo({prefix:n,name:e,encode:s,decode:f=>vp(a(f))})},z6=(n,e,r,s)=>{const a={};for(let x=0;x<e.length;++x)a[e[x]]=x;let f=n.length;for(;n[f-1]==="=";)--f;const p=new Uint8Array(f*r/8|0);let l=0,y=0,D=0;for(let x=0;x<f;++x){const N=a[n[x]];if(N===void 0)throw new SyntaxError(`Non-${s} character`);y=y<<r|N,l+=r,l>=8&&(l-=8,p[D++]=255&y>>l)}if(l>=r||255&y<<8-l)throw new SyntaxError("Unexpected end of data");return p},K6=(n,e,r)=>{const s=e[e.length-1]==="=",a=(1<<r)-1;let f="",p=0,l=0;for(let y=0;y<n.length;++y)for(l=l<<8|n[y],p+=8;p>r;)p-=r,f+=e[a&l>>p];if(p&&(f+=e[a&l<<r-p]),s)for(;f.length*r&7;)f+="=";return f},Xt=({name:n,prefix:e,bitsPerChar:r,alphabet:s})=>Xo({prefix:e,name:n,encode(a){return K6(a,s,r)},decode(a){return z6(a,s,r,n)}}),V6=Xo({prefix:"\0",name:"identity",encode:n=>M6(n),decode:n=>$6(n)});var k6=Object.freeze({__proto__:null,identity:V6});const G6=Xt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var W6=Object.freeze({__proto__:null,base2:G6});const Y6=Xt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var J6=Object.freeze({__proto__:null,base8:Y6});const X6=ws({prefix:"9",name:"base10",alphabet:"0123456789"});var Q6=Object.freeze({__proto__:null,base10:X6});const Z6=Xt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),e2=Xt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var t2=Object.freeze({__proto__:null,base16:Z6,base16upper:e2});const r2=Xt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),i2=Xt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),n2=Xt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),s2=Xt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),o2=Xt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),a2=Xt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),c2=Xt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),u2=Xt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),h2=Xt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var f2=Object.freeze({__proto__:null,base32:r2,base32upper:i2,base32pad:n2,base32padupper:s2,base32hex:o2,base32hexupper:a2,base32hexpad:c2,base32hexpadupper:u2,base32z:h2});const l2=ws({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),d2=ws({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var p2=Object.freeze({__proto__:null,base36:l2,base36upper:d2});const g2=ws({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),y2=ws({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var v2=Object.freeze({__proto__:null,base58btc:g2,base58flickr:y2});const _2=Xt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),m2=Xt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),b2=Xt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),w2=Xt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var E2=Object.freeze({__proto__:null,base64:_2,base64pad:m2,base64url:b2,base64urlpad:w2});const mp=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),D2=mp.reduce((n,e,r)=>(n[r]=e,n),[]),S2=mp.reduce((n,e,r)=>(n[e.codePointAt(0)]=r,n),[]);function I2(n){return n.reduce((e,r)=>(e+=D2[r],e),"")}function x2(n){const e=[];for(const r of n){const s=S2[r.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(s)}return new Uint8Array(e)}const O2=Xo({prefix:"ðŸš€",name:"base256emoji",encode:I2,decode:x2});var A2=Object.freeze({__proto__:null,base256emoji:O2}),C2=bp,Nl=128,P2=127,R2=~P2,T2=Math.pow(2,31);function bp(n,e,r){e=e||[],r=r||0;for(var s=r;n>=T2;)e[r++]=n&255|Nl,n/=128;for(;n&R2;)e[r++]=n&255|Nl,n>>>=7;return e[r]=n|0,bp.bytes=r-s+1,e}var N2=tu,L2=128,Ll=127;function tu(n,s){var r=0,s=s||0,a=0,f=s,p,l=n.length;do{if(f>=l)throw tu.bytes=0,new RangeError("Could not decode varint");p=n[f++],r+=a<28?(p&Ll)<<a:(p&Ll)*Math.pow(2,a),a+=7}while(p>=L2);return tu.bytes=f-s,r}var F2=Math.pow(2,7),U2=Math.pow(2,14),$2=Math.pow(2,21),M2=Math.pow(2,28),j2=Math.pow(2,35),B2=Math.pow(2,42),H2=Math.pow(2,49),q2=Math.pow(2,56),z2=Math.pow(2,63),K2=function(n){return n<F2?1:n<U2?2:n<$2?3:n<M2?4:n<j2?5:n<B2?6:n<H2?7:n<q2?8:n<z2?9:10},V2={encode:C2,decode:N2,encodingLength:K2},wp=V2;const Fl=(n,e,r=0)=>(wp.encode(n,e,r),e),Ul=n=>wp.encodingLength(n),ru=(n,e)=>{const r=e.byteLength,s=Ul(n),a=s+Ul(r),f=new Uint8Array(a+r);return Fl(n,f,0),Fl(r,f,s),f.set(e,a),new k2(n,r,e,f)};class k2{constructor(e,r,s,a){this.code=e,this.size=r,this.digest=s,this.bytes=a}}const Ep=({name:n,code:e,encode:r})=>new G2(n,e,r);class G2{constructor(e,r,s){this.name=e,this.code=r,this.encode=s}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?ru(this.code,r):r.then(s=>ru(this.code,s))}else throw Error("Unknown type, must be binary type")}}const Dp=n=>async e=>new Uint8Array(await crypto.subtle.digest(n,e)),W2=Ep({name:"sha2-256",code:18,encode:Dp("SHA-256")}),Y2=Ep({name:"sha2-512",code:19,encode:Dp("SHA-512")});var J2=Object.freeze({__proto__:null,sha256:W2,sha512:Y2});const Sp=0,X2="identity",Ip=vp,Q2=n=>ru(Sp,Ip(n)),Z2={code:Sp,name:X2,encode:Ip,digest:Q2};var eD=Object.freeze({__proto__:null,identity:Z2});new TextEncoder,new TextDecoder;const $l={...k6,...W6,...J6,...Q6,...t2,...f2,...p2,...v2,...E2,...A2};({...J2,...eD});function tD(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(n):new Uint8Array(n)}function xp(n,e,r,s){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:r},decoder:{decode:s}}}const Ml=xp("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),Fc=xp("ascii","a",n=>{let e="a";for(let r=0;r<n.length;r++)e+=String.fromCharCode(n[r]);return e},n=>{n=n.substring(1);const e=tD(n.length);for(let r=0;r<n.length;r++)e[r]=n.charCodeAt(r);return e}),rD={utf8:Ml,"utf-8":Ml,hex:$l.base16,latin1:Fc,ascii:Fc,binary:Fc,...$l};function iD(n,e="utf8"){const r=rD[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n,"utf8"):r.decoder.decode(`${r.prefix}${n}`)}const Op="wc",nD=2,xu="core",Ri=`${Op}@${2}:${xu}:`,sD={name:xu,logger:"error"},oD={database:":memory:"},aD="crypto",jl="client_ed25519_seed",cD=De.ONE_DAY,uD="keychain",hD="0.3",fD="messages",lD="0.3",dD=De.SIX_HOURS,pD="publisher",Ap="irn",gD="error",Cp="wss://relay.walletconnect.com",yD="relayer",kt={message:"relayer_message",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},vD="_subscription",os={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},_D=De.ONE_SECOND,mD="2.7.0",bD="0.3",ri={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},wD="subscription",ED="0.3",DD=De.FIVE_SECONDS*1e3,SD="pairing",ID="0.3",as={wc_pairingDelete:{req:{ttl:De.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:De.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:De.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:De.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:De.ONE_DAY,prompt:!1,tag:0},res:{ttl:De.ONE_DAY,prompt:!1,tag:0}}},ti={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},xD="history",OD="0.3",AD="expirer",Mr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},CD="0.3",Bl="verify-api",Hl="https://verify.walletconnect.com";class PD{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=uD,this.version=hD,this.initialized=!1,this.storagePrefix=Ri,this.init=async()=>{if(!this.initialized){const s=await this.getKeyChain();typeof s<"u"&&(this.keychain=s),this.initialized=!0}},this.has=s=>(this.isInitialized(),this.keychain.has(s)),this.set=async(s,a)=>{this.isInitialized(),this.keychain.set(s,a),await this.persist()},this.get=s=>{this.isInitialized();const a=this.keychain.get(s);if(typeof a>"u"){const{message:f}=le("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(f)}return a},this.del=async s=>{this.isInitialized(),this.keychain.delete(s),await this.persist()},this.core=e,this.logger=Ze.generateChildLogger(r,this.name)}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Wd(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Yd(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}}class RD{constructor(e,r,s){this.core=e,this.logger=r,this.name=aD,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=a=>(this.isInitialized(),this.keychain.has(a)),this.getClientId=async()=>{this.isInitialized();const a=await this.getClientSeed(),f=xl(a);return cp(f.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const a=Xw();return this.setPrivateKey(a.publicKey,a.privateKey)},this.signJWT=async a=>{this.isInitialized();const f=await this.getClientSeed(),p=xl(f),l=Qc();return await J3(l,a,cD,p)},this.generateSharedKey=(a,f,p)=>{this.isInitialized();const l=this.getPrivateKey(a),y=Qw(l,f);return this.setSymKey(y,p)},this.setSymKey=async(a,f)=>{this.isInitialized();const p=f||Zw(a);return await this.keychain.set(p,a),p},this.deleteKeyPair=async a=>{this.isInitialized(),await this.keychain.del(a)},this.deleteSymKey=async a=>{this.isInitialized(),await this.keychain.del(a)},this.encode=async(a,f,p)=>{this.isInitialized();const l=Gd(p),y=F3(f);if(tl(l)){const V=l.senderPublicKey,F=l.receiverPublicKey;a=await this.generateSharedKey(V,F)}const D=this.getSymKey(a),{type:x,senderPublicKey:N}=l;return tE({type:x,symKey:D,message:y,senderPublicKey:N})},this.decode=async(a,f,p)=>{this.isInitialized();const l=nE(f,p);if(tl(l)){const x=l.receiverPublicKey,N=l.senderPublicKey;a=await this.generateSharedKey(x,N)}const y=this.getSymKey(a),D=rE({symKey:y,encoded:f});return L3(D)},this.getPayloadType=a=>{const f=Uo(a);return _s(f.type)},this.getPayloadSenderPublicKey=a=>{const f=Uo(a);return f.senderPublicKey?fr(f.senderPublicKey,hr):void 0},this.core=e,this.logger=Ze.generateChildLogger(r,this.name),this.keychain=s||new PD(this.core,this.logger)}get context(){return Ze.getLoggerContext(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(jl)}catch{e=Qc(),await this.keychain.set(jl,e)}return iD(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}}class TD extends D3{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=fD,this.version=lD,this.initialized=!1,this.storagePrefix=Ri,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const s=await this.getRelayerMessages();typeof s<"u"&&(this.messages=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(s){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(s)}finally{this.initialized=!0}}},this.set=async(s,a)=>{this.isInitialized();const f=en(a);let p=this.messages.get(s);return typeof p>"u"&&(p={}),typeof p[f]<"u"||(p[f]=a,this.messages.set(s,p),await this.persist()),f},this.get=s=>{this.isInitialized();let a=this.messages.get(s);return typeof a>"u"&&(a={}),a},this.has=(s,a)=>{this.isInitialized();const f=this.get(s),p=en(a);return typeof f[p]<"u"},this.del=async s=>{this.isInitialized(),this.messages.delete(s),await this.persist()},this.logger=Ze.generateChildLogger(e,this.name),this.core=r}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Wd(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Yd(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}}class ND extends S3{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new Wt.EventEmitter,this.name=pD,this.queue=new Map,this.publishTimeout=1e4,this.publish=async(s,a,f)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:a,opts:f}});try{const p=(f==null?void 0:f.ttl)||dD,l=Zc(f),y=(f==null?void 0:f.prompt)||!1,D=(f==null?void 0:f.tag)||0,x={topic:s,message:a,opts:{ttl:p,relay:l,prompt:y,tag:D}},N=en(a);this.queue.set(N,x);try{await await $o(this.rpcPublish(s,a,p,l,y,D),this.publishTimeout),this.relayer.events.emit(kt.publish,x)}catch{this.logger.debug("Publishing Payload stalled"),this.relayer.events.emit(kt.connection_stalled);return}this.onPublish(N,x),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:a,opts:f}})}catch(p){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(p),p}},this.on=(s,a)=>{this.events.on(s,a)},this.once=(s,a)=>{this.events.once(s,a)},this.off=(s,a)=>{this.events.off(s,a)},this.removeListener=(s,a)=>{this.events.removeListener(s,a)},this.relayer=e,this.logger=Ze.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return Ze.getLoggerContext(this.logger)}rpcPublish(e,r,s,a,f,p){var l,y,D,x;const N={method:Ro(a.protocol).publish,params:{topic:e,message:r,ttl:s,prompt:f,tag:p}};return ur((l=N.params)==null?void 0:l.prompt)&&((y=N.params)==null||delete y.prompt),ur((D=N.params)==null?void 0:D.tag)&&((x=N.params)==null||delete x.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:N}),this.relayer.request(N)}onPublish(e,r){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:r,message:s,opts:a}=e;await this.publish(r,s,a)})}registerEventListeners(){this.relayer.core.heartbeat.on(bs.HEARTBEAT_EVENTS.pulse,()=>{this.checkQueue()})}}class LD{constructor(){this.map=new Map,this.set=(e,r)=>{const s=this.get(e);this.exists(e,r)||this.map.set(e,[...s,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const s=this.get(e);if(!this.exists(e,r))return;const a=s.filter(f=>f!==r);if(!a.length){this.map.delete(e);return}this.map.set(e,a)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var FD=Object.defineProperty,UD=Object.defineProperties,$D=Object.getOwnPropertyDescriptors,ql=Object.getOwnPropertySymbols,MD=Object.prototype.hasOwnProperty,jD=Object.prototype.propertyIsEnumerable,zl=(n,e,r)=>e in n?FD(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,cs=(n,e)=>{for(var r in e||(e={}))MD.call(e,r)&&zl(n,r,e[r]);if(ql)for(var r of ql(e))jD.call(e,r)&&zl(n,r,e[r]);return n},Uc=(n,e)=>UD(n,$D(e));class BD extends O3{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new LD,this.events=new Wt.EventEmitter,this.name=wD,this.version=ED,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Ri,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(s,a)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:a}});try{const f=Zc(a),p={topic:s,relay:f};this.pending.set(s,p);const l=await this.rpcSubscribe(s,f);return this.onSubscribe(l,p),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:a}}),l}catch(f){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(f),f}},this.unsubscribe=async(s,a)=>{await this.restartToComplete(),this.isInitialized(),typeof(a==null?void 0:a.id)<"u"?await this.unsubscribeById(s,a.id,a):await this.unsubscribeByTopic(s,a)},this.isSubscribed=async s=>this.topics.includes(s)?!0:await new Promise((a,f)=>{const p=new De.Watch;p.start(this.pendingSubscriptionWatchLabel);const l=setInterval(()=>{!this.pending.has(s)&&this.topics.includes(s)&&(clearInterval(l),p.stop(this.pendingSubscriptionWatchLabel),a(!0)),p.elapsed(this.pendingSubscriptionWatchLabel)>=DD&&(clearInterval(l),p.stop(this.pendingSubscriptionWatchLabel),f(!1))},this.pollingInterval)}),this.on=(s,a)=>{this.events.on(s,a)},this.once=(s,a)=>{this.events.once(s,a)},this.off=(s,a)=>{this.events.off(s,a)},this.removeListener=(s,a)=>{this.events.removeListener(s,a)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Ze.generateChildLogger(r,this.name),this.clientId=""}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let s=!1;try{s=this.getSubscription(e).topic===r}catch{}return s}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const s=this.topicMap.get(e);await Promise.all(s.map(async a=>await this.unsubscribeById(e,a,r)))}async unsubscribeById(e,r,s){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:s}});try{const a=Zc(s);await this.rpcUnsubscribe(e,r,a);const f=Nt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,f),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:s}})}catch(a){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(a),a}}async rpcSubscribe(e,r){const s={method:Ro(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{await await $o(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(kt.connection_stalled)}return en(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,s={method:Ro(r.protocol).batchSubscribe,params:{topics:e.map(a=>a.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{return await await $o(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(kt.connection_stalled)}}rpcUnsubscribe(e,r,s){const a={method:Ro(s.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a}),this.relayer.request(a)}onSubscribe(e,r){this.setSubscription(e,Uc(cs({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,cs({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,s){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,s),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r))}addSubscription(e,r){this.subscriptions.set(e,cs({},r)),this.topicMap.set(r.topic,e),this.events.emit(ri.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:s}=le("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const s=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(s.topic,e),this.events.emit(ri.deleted,Uc(cs({},s),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(ri.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<e;r++){const s=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(ri.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=le("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const r=await this.rpcBatchSubscribe(e);_i(r)&&this.onBatchSubscribe(r.map((s,a)=>Uc(cs({},e[a]),{id:s})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(r=>{e.push(r)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(bs.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(kt.connect,async()=>{await this.onConnect()}),this.relayer.on(kt.disconnect,()=>{this.onDisconnect()}),this.events.on(ri.created,async e=>{const r=ri.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(ri.deleted,async e=>{const r=ri.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}}var HD=Object.defineProperty,Kl=Object.getOwnPropertySymbols,qD=Object.prototype.hasOwnProperty,zD=Object.prototype.propertyIsEnumerable,Vl=(n,e,r)=>e in n?HD(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,KD=(n,e)=>{for(var r in e||(e={}))qD.call(e,r)&&Vl(n,r,e[r]);if(Kl)for(var r of Kl(e))zD.call(e,r)&&Vl(n,r,e[r]);return n};class VD extends I3{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new Wt.EventEmitter,this.name=yD,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(s){throw this.logger.debug("Failed to Publish Request"),this.logger.error(s),s}},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Ze.generateChildLogger(e.logger,this.name):Ze.pino(Ze.getDefaultLoggerOptions({level:e.logger||gD})),this.messages=new TD(this.logger,e.core),this.subscriber=new BD(this,this.logger),this.publisher=new ND(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||Cp,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.transportOpen(),this.subscriber.init()]),this.registerEventListeners(),this.initialized=!0}get context(){return Ze.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,r,s){this.isInitialized(),await this.publisher.publish(e,r,s),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now()})}async subscribe(e,r){this.isInitialized();let s="";return await Promise.all([new Promise(a=>{this.subscriber.once(ri.created,f=>{f.topic===e&&a()})}),new Promise(async a=>{s=await this.subscriber.subscribe(e,r),a()})]),s}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(kt.transport_closed))}async transportOpen(e){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=e||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(r=>{this.initialized||r(),this.subscriber.once(ri.resubscribed,()=>{r()})}),await Promise.race([new Promise(async(r,s)=>{await $o(this.provider.connect(),5e3,"socket stalled").catch(a=>s(a)).then(()=>r()).finally(()=>this.removeListener(kt.transport_closed,this.rejectTransportOpen))}),new Promise(r=>this.once(kt.transport_closed,this.rejectTransportOpen))])])}catch(r){this.logger.error(r);const s=r;if(!this.isConnectionStalled(s.message))throw r;this.events.emit(kt.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(e){this.transportExplicitlyClosed||(this.relayUrl=e||this.relayUrl,await Promise.all([new Promise(r=>{this.provider.once(os.disconnect,()=>{r()})}),this.transportClose()]),await new Promise(r=>setTimeout(r,1e3)),await this.createProvider(),await this.transportOpen())}isConnectionStalled(e){return this.staleConnectionErrors.some(r=>e.includes(r))}rejectTransportOpen(){throw new Error("closeTransport called before connection was established")}async createProvider(){const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Ni(new T6(vE({sdkVersion:mD,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:s}=e;await this.messages.set(r,s)}async shouldIgnoreMessageEvent(e){const{topic:r,message:s}=e;return await this.subscriber.isSubscribed(r)?this.messages.has(r,s):!0}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Du(e)){if(!e.method.endsWith(vD))return;const r=e.params,{topic:s,message:a,publishedAt:f}=r.data,p={topic:s,message:a,publishedAt:f};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(KD({type:"event",event:r.id},p)),this.events.emit(r.id,p),await this.acknowledgePayload(e),await this.onMessageEvent(p)}}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(kt.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=Eu(e.id,!0);await this.provider.connection.send(r)}registerProviderListeners(){this.provider.on(os.payload,e=>this.onProviderPayload(e)),this.provider.on(os.connect,()=>{this.events.emit(kt.connect)}),this.provider.on(os.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(os.error,e=>{this.logger.error(e),this.events.emit(kt.error,e)})}registerEventListeners(){this.events.on(kt.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(kt.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},De.toMiliseconds(_D))}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(e=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var kD=Object.defineProperty,kl=Object.getOwnPropertySymbols,GD=Object.prototype.hasOwnProperty,WD=Object.prototype.propertyIsEnumerable,Gl=(n,e,r)=>e in n?kD(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Wl=(n,e)=>{for(var r in e||(e={}))GD.call(e,r)&&Gl(n,r,e[r]);if(kl)for(var r of kl(e))WD.call(e,r)&&Gl(n,r,e[r]);return n};class Qo extends x3{constructor(e,r,s,a=Ri,f=void 0){super(e,r,s,a),this.core=e,this.logger=r,this.name=s,this.map=new Map,this.version=bD,this.cached=[],this.initialized=!1,this.storagePrefix=Ri,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(p=>{this.getKey&&p!==null&&!ur(p)?this.map.set(this.getKey(p),p):ME(p)?this.map.set(p.id,p):jE(p)&&this.map.set(p.topic,p)}),this.cached=[],this.initialized=!0)},this.set=async(p,l)=>{this.isInitialized(),this.map.has(p)?await this.update(p,l):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:p,value:l}),this.map.set(p,l),await this.persist())},this.get=p=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:p}),this.getData(p)),this.getAll=p=>(this.isInitialized(),p?this.values.filter(l=>Object.keys(p).every(y=>Bo(l[y],p[y]))):this.values),this.update=async(p,l)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:p,update:l});const y=Wl(Wl({},this.getData(p)),l);this.map.set(p,y),await this.persist()},this.delete=async(p,l)=>{this.isInitialized(),this.map.has(p)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:p,reason:l}),this.map.delete(p),await this.persist())},this.logger=Ze.generateChildLogger(r,this.name),this.storagePrefix=a,this.getKey=f}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){const{message:s}=le("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=le("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}}class YD{constructor(e,r){this.core=e,this.logger=r,this.name=SD,this.version=ID,this.events=new Wt,this.initialized=!1,this.storagePrefix=Ri,this.ignoredPayloadTypes=[rn],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]},this.create=async()=>{this.isInitialized();const s=Qc(),a=await this.core.crypto.setSymKey(s),f=kr(De.FIVE_MINUTES),p={protocol:Ap},l={topic:a,expiry:f,relay:p,active:!1},y=AE({protocol:this.core.protocol,version:this.core.version,topic:a,symKey:s,relay:p});return await this.pairings.set(a,l),await this.core.relayer.subscribe(a),this.core.expirer.set(a,f),{topic:a,uri:y}},this.pair=async s=>{this.isInitialized(),this.isValidPair(s);const{topic:a,symKey:f,relay:p}=xE(s.uri);if(this.pairings.keys.includes(a))throw new Error(`Pairing already exists: ${a}`);if(this.core.crypto.hasKeys(a))throw new Error(`Keychain already exists: ${a}`);const l=kr(De.FIVE_MINUTES),y={topic:a,relay:p,expiry:l,active:!1};return await this.pairings.set(a,y),await this.core.crypto.setSymKey(f,a),await this.core.relayer.subscribe(a,{relay:p}),this.core.expirer.set(a,l),s.activatePairing&&await this.activate({topic:a}),y},this.activate=async({topic:s})=>{this.isInitialized();const a=kr(De.THIRTY_DAYS);await this.pairings.update(s,{active:!0,expiry:a}),this.core.expirer.set(s,a)},this.ping=async s=>{this.isInitialized(),await this.isValidPing(s);const{topic:a}=s;if(this.pairings.keys.includes(a)){const f=await this.sendRequest(a,"wc_pairingPing",{}),{done:p,resolve:l,reject:y}=An();this.events.once(Ht("pairing_ping",f),({error:D})=>{D?y(D):l()}),await p()}},this.updateExpiry=async({topic:s,expiry:a})=>{this.isInitialized(),await this.pairings.update(s,{expiry:a})},this.updateMetadata=async({topic:s,metadata:a})=>{this.isInitialized(),await this.pairings.update(s,{peerMetadata:a})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async s=>{this.isInitialized(),await this.isValidDisconnect(s);const{topic:a}=s;this.pairings.keys.includes(a)&&(await this.sendRequest(a,"wc_pairingDelete",Nt("USER_DISCONNECTED")),await this.deletePairing(a))},this.sendRequest=async(s,a,f)=>{const p=Jo(a,f),l=await this.core.crypto.encode(s,p),y=as[a].req;return this.core.history.set(s,p),await this.core.relayer.publish(s,l,y),p.id},this.sendResult=async(s,a,f)=>{const p=Eu(s,f),l=await this.core.crypto.encode(a,p),y=await this.core.history.get(a,s),D=as[y.request.method].res;await this.core.relayer.publish(a,l,D),await this.core.history.resolve(p)},this.sendError=async(s,a,f)=>{const p=dp(s,f),l=await this.core.crypto.encode(a,p),y=await this.core.history.get(a,s),D=as[y.request.method]?as[y.request.method].res:as.unregistered_method.res;await this.core.relayer.publish(a,l,D),await this.core.history.resolve(p)},this.deletePairing=async(s,a)=>{await this.core.relayer.unsubscribe(s),await Promise.all([this.pairings.delete(s,Nt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(s),a?Promise.resolve():this.core.expirer.del(s)])},this.cleanup=async()=>{const s=this.pairings.getAll().filter(a=>Pi(a.expiry));await Promise.all(s.map(a=>this.deletePairing(a.topic)))},this.onRelayEventRequest=s=>{const{topic:a,payload:f}=s,p=f.method;if(this.pairings.keys.includes(a))switch(p){case"wc_pairingPing":return this.onPairingPingRequest(a,f);case"wc_pairingDelete":return this.onPairingDeleteRequest(a,f);default:return this.onUnknownRpcMethodRequest(a,f)}},this.onRelayEventResponse=async s=>{const{topic:a,payload:f}=s,p=(await this.core.history.get(a,f.id)).request.method;if(this.pairings.keys.includes(a))switch(p){case"wc_pairingPing":return this.onPairingPingResponse(a,f);default:return this.onUnknownRpcMethodResponse(p)}},this.onPairingPingRequest=async(s,a)=>{const{id:f}=a;try{this.isValidPing({topic:s}),await this.sendResult(f,s,!0),this.events.emit("pairing_ping",{id:f,topic:s})}catch(p){await this.sendError(f,s,p),this.logger.error(p)}},this.onPairingPingResponse=(s,a)=>{const{id:f}=a;setTimeout(()=>{vi(a)?this.events.emit(Ht("pairing_ping",f),{}):Gr(a)&&this.events.emit(Ht("pairing_ping",f),{error:a.error})},500)},this.onPairingDeleteRequest=async(s,a)=>{const{id:f}=a;try{this.isValidDisconnect({topic:s}),await this.deletePairing(s),this.events.emit("pairing_delete",{id:f,topic:s})}catch(p){await this.sendError(f,s,p),this.logger.error(p)}},this.onUnknownRpcMethodRequest=async(s,a)=>{const{id:f,method:p}=a;try{if(this.registeredMethods.includes(p))return;const l=Nt("WC_METHOD_UNSUPPORTED",p);await this.sendError(f,s,l),this.logger.error(l)}catch(l){await this.sendError(f,s,l),this.logger.error(l)}},this.onUnknownRpcMethodResponse=s=>{this.registeredMethods.includes(s)||this.logger.error(Nt("WC_METHOD_UNSUPPORTED",s))},this.isValidPair=s=>{if(!_r(s)){const{message:a}=le("MISSING_OR_INVALID",`pair() params: ${s}`);throw new Error(a)}if(!$E(s.uri)){const{message:a}=le("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw new Error(a)}},this.isValidPing=async s=>{if(!_r(s)){const{message:f}=le("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(f)}const{topic:a}=s;await this.isValidPairingTopic(a)},this.isValidDisconnect=async s=>{if(!_r(s)){const{message:f}=le("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(f)}const{topic:a}=s;await this.isValidPairingTopic(a)},this.isValidPairingTopic=async s=>{if(!Gt(s,!1)){const{message:a}=le("MISSING_OR_INVALID",`pairing topic should be a string: ${s}`);throw new Error(a)}if(!this.pairings.keys.includes(s)){const{message:a}=le("NO_MATCHING_KEY",`pairing topic doesn't exist: ${s}`);throw new Error(a)}if(Pi(this.pairings.get(s).expiry)){await this.deletePairing(s);const{message:a}=le("EXPIRED",`pairing topic: ${s}`);throw new Error(a)}},this.core=e,this.logger=Ze.generateChildLogger(r,this.name),this.pairings=new Qo(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Ze.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(kt.message,async e=>{const{topic:r,message:s}=e;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(s)))return;const a=await this.core.crypto.decode(r,s);Du(a)?(this.core.history.set(r,a),this.onRelayEventRequest({topic:r,payload:a})):Su(a)&&(await this.core.history.resolve(a),this.onRelayEventResponse({topic:r,payload:a}))})}registerExpirerEvents(){this.core.expirer.on(Mr.expired,async e=>{const{topic:r}=Xd(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}}class JD extends E3{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new Wt.EventEmitter,this.name=xD,this.version=OD,this.cached=[],this.initialized=!1,this.storagePrefix=Ri,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.records.set(s.id,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(s,a,f)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:a,chainId:f}),this.records.has(a.id))return;const p={id:a.id,topic:s,request:{method:a.method,params:a.params||null},chainId:f};this.records.set(p.id,p),this.events.emit(ti.created,p)},this.resolve=async s=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:s}),!this.records.has(s.id))return;const a=await this.getRecord(s.id);typeof a.response>"u"&&(a.response=Gr(s)?{error:s.error}:{result:s.result},this.records.set(a.id,a),this.events.emit(ti.updated,a))},this.get=async(s,a)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:s,id:a}),await this.getRecord(a)),this.delete=(s,a)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:a}),this.values.forEach(f=>{if(f.topic===s){if(typeof a<"u"&&f.id!==a)return;this.records.delete(f.id),this.events.emit(ti.deleted,f)}})},this.exists=async(s,a)=>(this.isInitialized(),this.records.has(a)?(await this.getRecord(a)).topic===s:!1),this.on=(s,a)=>{this.events.on(s,a)},this.once=(s,a)=>{this.events.once(s,a)},this.off=(s,a)=>{this.events.off(s,a)},this.removeListener=(s,a)=>{this.events.removeListener(s,a)},this.logger=Ze.generateChildLogger(r,this.name)}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const s={topic:r.topic,request:Jo(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(s)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:s}=le("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(ti.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=le("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(ti.created,e=>{const r=ti.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(ti.updated,e=>{const r=ti.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(ti.deleted,e=>{const r=ti.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}}class XD extends A3{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new Wt.EventEmitter,this.name=AD,this.version=CD,this.cached=[],this.initialized=!1,this.storagePrefix=Ri,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.expirations.set(s.target,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=s=>{try{const a=this.formatTarget(s);return typeof this.getExpiration(a)<"u"}catch{return!1}},this.set=(s,a)=>{this.isInitialized();const f=this.formatTarget(s),p={target:f,expiry:a};this.expirations.set(f,p),this.checkExpiry(f,p),this.events.emit(Mr.created,{target:f,expiration:p})},this.get=s=>{this.isInitialized();const a=this.formatTarget(s);return this.getExpiration(a)},this.del=s=>{if(this.isInitialized(),this.has(s)){const a=this.formatTarget(s),f=this.getExpiration(a);this.expirations.delete(a),this.events.emit(Mr.deleted,{target:a,expiration:f})}},this.on=(s,a)=>{this.events.on(s,a)},this.once=(s,a)=>{this.events.once(s,a)},this.off=(s,a)=>{this.events.off(s,a)},this.removeListener=(s,a)=>{this.events.removeListener(s,a)},this.logger=Ze.generateChildLogger(r,this.name)}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return _E(e);if(typeof e=="number")return mE(e);const{message:r}=le("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Mr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=le("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:s}=le("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return r}checkExpiry(e,r){const{expiry:s}=r;De.toMiliseconds(s)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Mr.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(bs.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Mr.created,e=>{const r=Mr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Mr.expired,e=>{const r=Mr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Mr.deleted,e=>{const r=Mr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}}let QD=class extends C3{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.name=Bl,this.initialized=!1,this.init=async s=>{!vu()||!document||(this.verifyUrl=(s==null?void 0:s.verifyUrl)||Hl,await this.createIframe())},this.register=async s=>{var a;this.initialized||await this.init(),this.iframe&&((a=this.iframe.contentWindow)==null||a.postMessage(s.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${s.attestationId} ${this.verifyUrl}`))},this.resolve=async s=>{var a;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${s.attestationId}`);const f=this.startAbortTimer(De.FIVE_SECONDS),p=await fetch(`${this.verifyUrl}/attestation/${s.attestationId}`,{signal:this.abortController.signal});return clearTimeout(f),((a=await p.json())==null?void 0:a.origin)||""},this.createIframe=async()=>{try{const s=this.startAbortTimer(De.FIVE_SECONDS);await Promise.race([new Promise((a,f)=>{const p=document.createElement("iframe");p.setAttribute("id",Bl),p.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),p.style.display="none",p.addEventListener("load",()=>{this.initialized=!0,clearTimeout(s),a()}),p.addEventListener("error",l=>{f(l)}),document.body.append(p),this.iframe=p}),new Promise(a=>{this.abortController.signal.addEventListener("abort",()=>{a("iframe load timeout")})})])}catch(s){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(s)}},this.logger=Ze.generateChildLogger(r,this.name),this.verifyUrl=Hl,this.abortController=new AbortController,this.isDevEnv=yu()&&{}.IS_VITEST}get context(){return Ze.getLoggerContext(this.logger)}startAbortTimer(e){return setTimeout(()=>this.abortController.abort(),kr(e))}};var ZD=Object.defineProperty,Yl=Object.getOwnPropertySymbols,eS=Object.prototype.hasOwnProperty,tS=Object.prototype.propertyIsEnumerable,Jl=(n,e,r)=>e in n?ZD(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Xl=(n,e)=>{for(var r in e||(e={}))eS.call(e,r)&&Jl(n,r,e[r]);if(Yl)for(var r of Yl(e))tS.call(e,r)&&Jl(n,r,e[r]);return n};let rS=class Pp extends w3{constructor(e){super(e),this.protocol=Op,this.version=nD,this.name=xu,this.events=new Wt.EventEmitter,this.initialized=!1,this.on=(s,a)=>this.events.on(s,a),this.once=(s,a)=>this.events.once(s,a),this.off=(s,a)=>this.events.off(s,a),this.removeListener=(s,a)=>this.events.removeListener(s,a),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||Cp;const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Ze.pino(Ze.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||sD.logger}));this.logger=Ze.generateChildLogger(r,this.name),this.heartbeat=new bs.HeartBeat,this.crypto=new RD(this,this.logger,e==null?void 0:e.keychain),this.history=new JD(this,this.logger),this.expirer=new XD(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new l3(Xl(Xl({},oD),e==null?void 0:e.storageOptions)),this.relayer=new VD({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new YD(this,this.logger),this.verify=new QD(this.projectId||"",this.logger)}static async init(e){const r=new Pp(e);return await r.initialize(),r}get context(){return Ze.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}};const iS=rS,Rp="wc",Tp=2,Np="client",Ou=`${Rp}@${Tp}:${Np}:`,$c={name:Np,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},nS="proposal",Lp="Proposal expired",sS="session",Oo=De.SEVEN_DAYS,oS="engine",us={wc_sessionPropose:{req:{ttl:De.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:De.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:De.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:De.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:De.ONE_DAY,prompt:!1,tag:1104},res:{ttl:De.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:De.ONE_DAY,prompt:!1,tag:1106},res:{ttl:De.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:De.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:De.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:De.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:De.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:De.ONE_DAY,prompt:!1,tag:1112},res:{ttl:De.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:De.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:De.THIRTY_SECONDS,prompt:!1,tag:1115}}},Mc={min:De.FIVE_MINUTES,max:De.SEVEN_DAYS},aS="request",cS=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var uS=Object.defineProperty,hS=Object.defineProperties,fS=Object.getOwnPropertyDescriptors,Ql=Object.getOwnPropertySymbols,lS=Object.prototype.hasOwnProperty,dS=Object.prototype.propertyIsEnumerable,Zl=(n,e,r)=>e in n?uS(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,$r=(n,e)=>{for(var r in e||(e={}))lS.call(e,r)&&Zl(n,r,e[r]);if(Ql)for(var r of Ql(e))dS.call(e,r)&&Zl(n,r,e[r]);return n},jc=(n,e)=>hS(n,fS(e));class pS extends R3{constructor(e){super(e),this.name=oS,this.events=new Wt,this.initialized=!1,this.ignoredPayloadTypes=[rn],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(us)}),this.initialized=!0)},this.connect=async r=>{this.isInitialized();const s=jc($r({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:a,requiredNamespaces:f,optionalNamespaces:p,sessionProperties:l,relays:y}=s;let D=a,x,N=!1;if(D&&(N=this.client.core.pairing.pairings.get(D).active),!D||!N){const{topic:U,uri:S}=await this.client.core.pairing.create();D=U,x=S}const V=await this.client.core.crypto.generateKeyPair(),F=$r({requiredNamespaces:f,optionalNamespaces:p,relays:y??[{protocol:Ap}],proposer:{publicKey:V,metadata:this.client.metadata}},l&&{sessionProperties:l}),{reject:R,resolve:k,done:Y}=An(De.FIVE_MINUTES,Lp);if(this.events.once(Ht("session_connect"),async({error:U,session:S})=>{if(U)R(U);else if(S){S.self.publicKey=V;const O=jc($r({},S),{requiredNamespaces:S.requiredNamespaces,optionalNamespaces:S.optionalNamespaces});await this.client.session.set(S.topic,O),await this.setExpiry(S.topic,S.expiry),D&&await this.client.core.pairing.updateMetadata({topic:D,metadata:S.peer.metadata}),k(O)}}),!D){const{message:U}=le("NO_MATCHING_KEY",`connect() pairing topic: ${D}`);throw new Error(U)}const ae=await this.sendRequest(D,"wc_sessionPropose",F),T=kr(De.FIVE_MINUTES);return await this.setProposal(ae,$r({id:ae,expiry:T},F)),{uri:x,approval:Y}},this.pair=async r=>(this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{this.isInitialized(),await this.isValidApprove(r);const{id:s,relayProtocol:a,namespaces:f,sessionProperties:p}=r,l=this.client.proposal.get(s);let{pairingTopic:y,proposer:D,requiredNamespaces:x,optionalNamespaces:N}=l;y=y||"",Rn(x)||(x=TE(f,"approve()"));const V=await this.client.core.crypto.generateKeyPair(),F=D.publicKey,R=await this.client.core.crypto.generateSharedKey(V,F);y&&s&&(await this.client.core.pairing.updateMetadata({topic:y,metadata:D.metadata}),await this.sendResult(s,y,{relay:{protocol:a??"irn"},responderPublicKey:V}),await this.client.proposal.delete(s,Nt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:y}));const k=$r({relay:{protocol:a??"irn"},namespaces:f,requiredNamespaces:x,optionalNamespaces:N,pairingTopic:y,controller:{publicKey:V,metadata:this.client.metadata},expiry:kr(Oo)},p&&{sessionProperties:p});await this.client.core.relayer.subscribe(R),await this.sendRequest(R,"wc_sessionSettle",k);const Y=jc($r({},k),{topic:R,pairingTopic:y,acknowledged:!1,self:k.controller,peer:{publicKey:D.publicKey,metadata:D.metadata},controller:V});return await this.client.session.set(R,Y),await this.setExpiry(R,kr(Oo)),{topic:R,acknowledged:()=>new Promise(ae=>ae(this.client.session.get(R)))}},this.reject=async r=>{this.isInitialized(),await this.isValidReject(r);const{id:s,reason:a}=r,{pairingTopic:f}=this.client.proposal.get(s);f&&(await this.sendError(s,f,a),await this.client.proposal.delete(s,Nt("USER_DISCONNECTED")))},this.update=async r=>{this.isInitialized(),await this.isValidUpdate(r);const{topic:s,namespaces:a}=r,f=await this.sendRequest(s,"wc_sessionUpdate",{namespaces:a}),{done:p,resolve:l,reject:y}=An();return this.events.once(Ht("session_update",f),({error:D})=>{D?y(D):l()}),await this.client.session.update(s,{namespaces:a}),{acknowledged:p}},this.extend=async r=>{this.isInitialized(),await this.isValidExtend(r);const{topic:s}=r,a=await this.sendRequest(s,"wc_sessionExtend",{}),{done:f,resolve:p,reject:l}=An();return this.events.once(Ht("session_extend",a),({error:y})=>{y?l(y):p()}),await this.setExpiry(s,kr(Oo)),{acknowledged:f}},this.request=async r=>{this.isInitialized(),await this.isValidRequest(r);const{chainId:s,request:a,topic:f,expiry:p}=r,l=await this.sendRequest(f,"wc_sessionRequest",{request:a,chainId:s},p),{done:y,resolve:D,reject:x}=An(p);return this.events.once(Ht("session_request",l),({error:N,result:V})=>{N?x(N):D(V)}),this.client.events.emit("session_request_sent",{topic:f,request:a,chainId:s,id:l}),await y()},this.respond=async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:s,response:a}=r,{id:f}=a;vi(a)?await this.sendResult(f,s,a.result):Gr(a)&&await this.sendError(f,s,a.error),this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0})},this.ping=async r=>{this.isInitialized(),await this.isValidPing(r);const{topic:s}=r;if(this.client.session.keys.includes(s)){const a=await this.sendRequest(s,"wc_sessionPing",{}),{done:f,resolve:p,reject:l}=An();this.events.once(Ht("session_ping",a),({error:y})=>{y?l(y):p()}),await f()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async r=>{this.isInitialized(),await this.isValidEmit(r);const{topic:s,event:a,chainId:f}=r;await this.sendRequest(s,"wc_sessionEvent",{event:a,chainId:f})},this.disconnect=async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.client.session.keys.includes(s)?(await this.sendRequest(s,"wc_sessionDelete",Nt("USER_DISCONNECTED")),await this.deleteSession(s)):await this.client.core.pairing.disconnect({topic:s})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(s=>FE(s,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.deleteSession=async(r,s)=>{const{self:a}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),await Promise.all([this.client.session.delete(r,Nt("USER_DISCONNECTED")),this.client.core.crypto.deleteKeyPair(a.publicKey),this.client.core.crypto.deleteSymKey(r),s?Promise.resolve():this.client.core.expirer.del(r)])},this.deleteProposal=async(r,s)=>{await Promise.all([this.client.proposal.delete(r,Nt("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,s,a=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,s),a?Promise.resolve():this.client.core.expirer.del(r)])},this.setExpiry=async(r,s)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:s}),this.client.core.expirer.set(r,s)},this.setProposal=async(r,s)=>{await this.client.proposal.set(r,s),this.client.core.expirer.set(r,s.expiry)},this.setPendingSessionRequest=async r=>{const s=us.wc_sessionRequest.req.ttl,{id:a,topic:f,params:p}=r;await this.client.pendingRequest.set(a,{id:a,topic:f,params:p}),s&&this.client.core.expirer.set(a,kr(s))},this.sendRequest=async(r,s,a,f)=>{const p=Jo(s,a);if(vu()&&cS.includes(s)){const D=en(JSON.stringify(p));await this.client.core.verify.register({attestationId:D})}const l=await this.client.core.crypto.encode(r,p),y=us[s].req;return f&&(y.ttl=f),this.client.core.history.set(r,p),this.client.core.relayer.publish(r,l,y),p.id},this.sendResult=async(r,s,a)=>{const f=Eu(r,a),p=await this.client.core.crypto.encode(s,f),l=await this.client.core.history.get(s,r),y=us[l.request.method].res;this.client.core.relayer.publish(s,p,y),await this.client.core.history.resolve(f)},this.sendError=async(r,s,a)=>{const f=dp(r,a),p=await this.client.core.crypto.encode(s,f),l=await this.client.core.history.get(s,r),y=us[l.request.method].res;this.client.core.relayer.publish(s,p,y),await this.client.core.history.resolve(f)},this.cleanup=async()=>{const r=[],s=[];this.client.session.getAll().forEach(a=>{Pi(a.expiry)&&r.push(a.topic)}),this.client.proposal.getAll().forEach(a=>{Pi(a.expiry)&&s.push(a.id)}),await Promise.all([...r.map(a=>this.deleteSession(a)),...s.map(a=>this.deleteProposal(a))])},this.onRelayEventRequest=r=>{const{topic:s,payload:a}=r,f=a.method;switch(f){case"wc_sessionPropose":return this.onSessionProposeRequest(s,a);case"wc_sessionSettle":return this.onSessionSettleRequest(s,a);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,a);case"wc_sessionExtend":return this.onSessionExtendRequest(s,a);case"wc_sessionPing":return this.onSessionPingRequest(s,a);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,a);case"wc_sessionRequest":return this.onSessionRequest(s,a);case"wc_sessionEvent":return this.onSessionEventRequest(s,a);default:return this.client.logger.info(`Unsupported request method ${f}`)}},this.onRelayEventResponse=async r=>{const{topic:s,payload:a}=r,f=(await this.client.core.history.get(s,a.id)).request.method;switch(f){case"wc_sessionPropose":return this.onSessionProposeResponse(s,a);case"wc_sessionSettle":return this.onSessionSettleResponse(s,a);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,a);case"wc_sessionExtend":return this.onSessionExtendResponse(s,a);case"wc_sessionPing":return this.onSessionPingResponse(s,a);case"wc_sessionRequest":return this.onSessionRequestResponse(s,a);default:return this.client.logger.info(`Unsupported response method ${f}`)}},this.onSessionProposeRequest=async(r,s)=>{const{params:a,id:f}=s;try{this.isValidConnect($r({},s.params));const p=kr(De.FIVE_MINUTES),l=$r({id:f,pairingTopic:r,expiry:p},a);await this.setProposal(f,l);const y=en(JSON.stringify(s)),D=await this.getVerifyContext(y,l.proposer.metadata);this.client.events.emit("session_proposal",{id:f,params:l,context:D})}catch(p){await this.sendError(f,r,p),this.client.logger.error(p)}},this.onSessionProposeResponse=async(r,s)=>{const{id:a}=s;if(vi(s)){const{result:f}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:f});const p=this.client.proposal.get(a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:p});const l=p.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:l});const y=f.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:y});const D=await this.client.core.crypto.generateSharedKey(l,y);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:D});const x=await this.client.core.relayer.subscribe(D);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:x}),await this.client.core.pairing.activate({topic:r})}else Gr(s)&&(await this.client.proposal.delete(a,Nt("USER_DISCONNECTED")),this.events.emit(Ht("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(r,s)=>{const{id:a,params:f}=s;try{this.isValidSessionSettleRequest(f);const{relay:p,controller:l,expiry:y,namespaces:D,requiredNamespaces:x,optionalNamespaces:N,sessionProperties:V,pairingTopic:F}=s.params,R=$r({topic:r,relay:p,expiry:y,namespaces:D,acknowledged:!0,pairingTopic:F,requiredNamespaces:x,optionalNamespaces:N,controller:l.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:l.publicKey,metadata:l.metadata}},V&&{sessionProperties:V});await this.sendResult(s.id,r,!0),this.events.emit(Ht("session_connect"),{session:R})}catch(p){await this.sendError(a,r,p),this.client.logger.error(p)}},this.onSessionSettleResponse=async(r,s)=>{const{id:a}=s;vi(s)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(Ht("session_approve",a),{})):Gr(s)&&(await this.client.session.delete(r,Nt("USER_DISCONNECTED")),this.events.emit(Ht("session_approve",a),{error:s.error}))},this.onSessionUpdateRequest=async(r,s)=>{const{params:a,id:f}=s;try{this.isValidUpdate($r({topic:r},a)),await this.client.session.update(r,{namespaces:a.namespaces}),await this.sendResult(f,r,!0),this.client.events.emit("session_update",{id:f,topic:r,params:a})}catch(p){await this.sendError(f,r,p),this.client.logger.error(p)}},this.onSessionUpdateResponse=(r,s)=>{const{id:a}=s;vi(s)?this.events.emit(Ht("session_update",a),{}):Gr(s)&&this.events.emit(Ht("session_update",a),{error:s.error})},this.onSessionExtendRequest=async(r,s)=>{const{id:a}=s;try{this.isValidExtend({topic:r}),await this.setExpiry(r,kr(Oo)),await this.sendResult(a,r,!0),this.client.events.emit("session_extend",{id:a,topic:r})}catch(f){await this.sendError(a,r,f),this.client.logger.error(f)}},this.onSessionExtendResponse=(r,s)=>{const{id:a}=s;vi(s)?this.events.emit(Ht("session_extend",a),{}):Gr(s)&&this.events.emit(Ht("session_extend",a),{error:s.error})},this.onSessionPingRequest=async(r,s)=>{const{id:a}=s;try{this.isValidPing({topic:r}),await this.sendResult(a,r,!0),this.client.events.emit("session_ping",{id:a,topic:r})}catch(f){await this.sendError(a,r,f),this.client.logger.error(f)}},this.onSessionPingResponse=(r,s)=>{const{id:a}=s;setTimeout(()=>{vi(s)?this.events.emit(Ht("session_ping",a),{}):Gr(s)&&this.events.emit(Ht("session_ping",a),{error:s.error})},500)},this.onSessionDeleteRequest=async(r,s)=>{const{id:a}=s;try{this.isValidDisconnect({topic:r,reason:s.params}),await Promise.all([new Promise(f=>{this.client.core.relayer.once(kt.publish,async()=>{f(await this.deleteSession(r))})}),this.sendResult(a,r,!0)]),this.client.events.emit("session_delete",{id:a,topic:r})}catch(f){await this.sendError(a,r,f),this.client.logger.error(f)}},this.onSessionRequest=async(r,s)=>{const{id:a,params:f}=s;try{this.isValidRequest($r({topic:r},f)),await this.setPendingSessionRequest({id:a,topic:r,params:f});const p=en(JSON.stringify(s)),l=this.client.session.get(r),y=await this.getVerifyContext(p,l.peer.metadata);this.client.events.emit("session_request",{id:a,topic:r,params:f,context:y})}catch(p){await this.sendError(a,r,p),this.client.logger.error(p)}},this.onSessionRequestResponse=(r,s)=>{const{id:a}=s;vi(s)?this.events.emit(Ht("session_request",a),{result:s.result}):Gr(s)&&this.events.emit(Ht("session_request",a),{error:s.error})},this.onSessionEventRequest=async(r,s)=>{const{id:a,params:f}=s;try{this.isValidEmit($r({topic:r},f)),this.client.events.emit("session_event",{id:a,topic:r,params:f})}catch(p){await this.sendError(a,r,p),this.client.logger.error(p)}},this.isValidConnect=async r=>{if(!_r(r)){const{message:y}=le("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(y)}const{pairingTopic:s,requiredNamespaces:a,optionalNamespaces:f,sessionProperties:p,relays:l}=r;if(ur(s)||await this.isValidPairingTopic(s),!GE(l,!0)){const{message:y}=le("MISSING_OR_INVALID",`connect() relays: ${l}`);throw new Error(y)}!ur(a)&&Rn(a)!==0&&this.validateNamespaces(a,"requiredNamespaces"),!ur(f)&&Rn(f)!==0&&this.validateNamespaces(f,"optionalNamespaces"),ur(p)||this.validateSessionProps(p,"sessionProperties")},this.validateNamespaces=(r,s)=>{const a=kE(r,"connect()",s);if(a)throw new Error(a.message)},this.isValidApprove=async r=>{if(!_r(r))throw new Error(le("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:s,namespaces:a,relayProtocol:f,sessionProperties:p}=r;await this.isValidProposalId(s);const l=this.client.proposal.get(s),y=No(a,"approve()");if(y)throw new Error(y.message);const D=ul(l.requiredNamespaces,a,"approve()");if(D)throw new Error(D.message);if(!Gt(f,!0)){const{message:x}=le("MISSING_OR_INVALID",`approve() relayProtocol: ${f}`);throw new Error(x)}ur(p)||this.validateSessionProps(p,"sessionProperties")},this.isValidReject=async r=>{if(!_r(r)){const{message:f}=le("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(f)}const{id:s,reason:a}=r;if(await this.isValidProposalId(s),!YE(a)){const{message:f}=le("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(a)}`);throw new Error(f)}},this.isValidSessionSettleRequest=r=>{if(!_r(r)){const{message:D}=le("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(D)}const{relay:s,controller:a,namespaces:f,expiry:p}=r;if(!ep(s)){const{message:D}=le("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(D)}const l=BE(a,"onSessionSettleRequest()");if(l)throw new Error(l.message);const y=No(f,"onSessionSettleRequest()");if(y)throw new Error(y.message);if(Pi(p)){const{message:D}=le("EXPIRED","onSessionSettleRequest()");throw new Error(D)}},this.isValidUpdate=async r=>{if(!_r(r)){const{message:y}=le("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(y)}const{topic:s,namespaces:a}=r;await this.isValidSessionTopic(s);const f=this.client.session.get(s),p=No(a,"update()");if(p)throw new Error(p.message);const l=ul(f.requiredNamespaces,a,"update()");if(l)throw new Error(l.message)},this.isValidExtend=async r=>{if(!_r(r)){const{message:a}=le("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(a)}const{topic:s}=r;await this.isValidSessionTopic(s)},this.isValidRequest=async r=>{if(!_r(r)){const{message:y}=le("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(y)}const{topic:s,request:a,chainId:f,expiry:p}=r;await this.isValidSessionTopic(s);const{namespaces:l}=this.client.session.get(s);if(!cl(l,f)){const{message:y}=le("MISSING_OR_INVALID",`request() chainId: ${f}`);throw new Error(y)}if(!JE(a)){const{message:y}=le("MISSING_OR_INVALID",`request() ${JSON.stringify(a)}`);throw new Error(y)}if(!ZE(l,f,a.method)){const{message:y}=le("MISSING_OR_INVALID",`request() method: ${a.method}`);throw new Error(y)}if(p&&!i3(p,Mc)){const{message:y}=le("MISSING_OR_INVALID",`request() expiry: ${p}. Expiry must be a number (in seconds) between ${Mc.min} and ${Mc.max}`);throw new Error(y)}},this.isValidRespond=async r=>{if(!_r(r)){const{message:f}=le("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(f)}const{topic:s,response:a}=r;if(await this.isValidSessionTopic(s),!XE(a)){const{message:f}=le("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(a)}`);throw new Error(f)}},this.isValidPing=async r=>{if(!_r(r)){const{message:a}=le("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(a)}const{topic:s}=r;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async r=>{if(!_r(r)){const{message:l}=le("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(l)}const{topic:s,event:a,chainId:f}=r;await this.isValidSessionTopic(s);const{namespaces:p}=this.client.session.get(s);if(!cl(p,f)){const{message:l}=le("MISSING_OR_INVALID",`emit() chainId: ${f}`);throw new Error(l)}if(!QE(a)){const{message:l}=le("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(a)}`);throw new Error(l)}if(!e3(p,f,a.name)){const{message:l}=le("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(a)}`);throw new Error(l)}},this.isValidDisconnect=async r=>{if(!_r(r)){const{message:a}=le("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(a)}const{topic:s}=r;await this.isValidSessionOrPairingTopic(s)},this.getVerifyContext=async(r,s)=>{const a={verified:{verifyUrl:s.verifyUrl||"",validation:"UNKNOWN",origin:s.url||""}};try{const f=await this.client.core.verify.resolve({attestationId:r,verifyUrl:s.verifyUrl});a.verified.origin=f,a.verified.validation=f===s.url?"VALID":"INVALID"}catch(f){this.client.logger.error(f)}return this.client.logger.info(`Verify context: ${JSON.stringify(a)}`),a},this.validateSessionProps=(r,s)=>{Object.values(r).forEach(a=>{if(!Gt(a,!1)){const{message:f}=le("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(a)}`);throw new Error(f)}})}}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.client.core.relayer.on(kt.message,async e=>{const{topic:r,message:s}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const a=await this.client.core.crypto.decode(r,s);Du(a)?(this.client.core.history.set(r,a),this.onRelayEventRequest({topic:r,payload:a})):Su(a)&&(await this.client.core.history.resolve(a),this.onRelayEventResponse({topic:r,payload:a}))})}registerExpirerEvents(){this.client.core.expirer.on(Mr.expired,async e=>{const{topic:r,id:s}=Xd(e.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,le("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}isValidPairingTopic(e){if(!Gt(e,!1)){const{message:r}=le("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=le("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(Pi(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=le("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!Gt(e,!1)){const{message:r}=le("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(!this.client.session.keys.includes(e)){const{message:r}=le("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(Pi(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:r}=le("EXPIRED",`session topic: ${e}`);throw new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Gt(e,!1)){const{message:r}=le("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=le("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!WE(e)){const{message:r}=le("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=le("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(Pi(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:r}=le("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class gS extends Qo{constructor(e,r){super(e,r,nS,Ou),this.core=e,this.logger=r}}class yS extends Qo{constructor(e,r){super(e,r,sS,Ou),this.core=e,this.logger=r}}class vS extends Qo{constructor(e,r){super(e,r,aS,Ou,s=>s.id),this.core=e,this.logger=r}}let _S=class Fp extends P3{constructor(e){super(e),this.protocol=Rp,this.version=Tp,this.name=$c.name,this.events=new Wt.EventEmitter,this.on=(s,a)=>this.events.on(s,a),this.once=(s,a)=>this.events.once(s,a),this.off=(s,a)=>this.events.off(s,a),this.removeListener=(s,a)=>this.events.removeListener(s,a),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(a){throw this.logger.error(a.message),a}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(a){throw this.logger.error(a.message),a}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(a){throw this.logger.error(a.message),a}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(a){throw this.logger.error(a.message),a}},this.update=async s=>{try{return await this.engine.update(s)}catch(a){throw this.logger.error(a.message),a}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(a){throw this.logger.error(a.message),a}},this.request=async s=>{try{return await this.engine.request(s)}catch(a){throw this.logger.error(a.message),a}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(a){throw this.logger.error(a.message),a}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(a){throw this.logger.error(a.message),a}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(a){throw this.logger.error(a.message),a}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(a){throw this.logger.error(a.message),a}},this.find=s=>{try{return this.engine.find(s)}catch(a){throw this.logger.error(a.message),a}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=(e==null?void 0:e.name)||$c.name,this.metadata=(e==null?void 0:e.metadata)||dE();const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Ze.pino(Ze.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||$c.logger}));this.core=(e==null?void 0:e.core)||new iS(e),this.logger=Ze.generateChildLogger(r,this.name),this.session=new yS(this.core,this.logger),this.proposal=new gS(this.core,this.logger),this.pendingRequest=new vS(this.core,this.logger),this.engine=new pS(this)}static async init(e){const r=new Fp(e);return await r.initialize(),r}get context(){return Ze.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var Ho={},mS={get exports(){return Ho},set exports(n){Ho=n}};(function(n,e){var r=typeof self<"u"?self:tr,s=function(){function f(){this.fetch=!1,this.DOMException=r.DOMException}return f.prototype=r,new f}();(function(f){(function(p){var l={searchParams:"URLSearchParams"in f,iterable:"Symbol"in f&&"iterator"in Symbol,blob:"FileReader"in f&&"Blob"in f&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in f,arrayBuffer:"ArrayBuffer"in f};function y(g){return g&&DataView.prototype.isPrototypeOf(g)}if(l.arrayBuffer)var D=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],x=ArrayBuffer.isView||function(g){return g&&D.indexOf(Object.prototype.toString.call(g))>-1};function N(g){if(typeof g!="string"&&(g=String(g)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(g))throw new TypeError("Invalid character in header field name");return g.toLowerCase()}function V(g){return typeof g!="string"&&(g=String(g)),g}function F(g){var w={next:function(){var G=g.shift();return{done:G===void 0,value:G}}};return l.iterable&&(w[Symbol.iterator]=function(){return w}),w}function R(g){this.map={},g instanceof R?g.forEach(function(w,G){this.append(G,w)},this):Array.isArray(g)?g.forEach(function(w){this.append(w[0],w[1])},this):g&&Object.getOwnPropertyNames(g).forEach(function(w){this.append(w,g[w])},this)}R.prototype.append=function(g,w){g=N(g),w=V(w);var G=this.map[g];this.map[g]=G?G+", "+w:w},R.prototype.delete=function(g){delete this.map[N(g)]},R.prototype.get=function(g){return g=N(g),this.has(g)?this.map[g]:null},R.prototype.has=function(g){return this.map.hasOwnProperty(N(g))},R.prototype.set=function(g,w){this.map[N(g)]=V(w)},R.prototype.forEach=function(g,w){for(var G in this.map)this.map.hasOwnProperty(G)&&g.call(w,this.map[G],G,this)},R.prototype.keys=function(){var g=[];return this.forEach(function(w,G){g.push(G)}),F(g)},R.prototype.values=function(){var g=[];return this.forEach(function(w){g.push(w)}),F(g)},R.prototype.entries=function(){var g=[];return this.forEach(function(w,G){g.push([G,w])}),F(g)},l.iterable&&(R.prototype[Symbol.iterator]=R.prototype.entries);function k(g){if(g.bodyUsed)return Promise.reject(new TypeError("Already read"));g.bodyUsed=!0}function Y(g){return new Promise(function(w,G){g.onload=function(){w(g.result)},g.onerror=function(){G(g.error)}})}function ae(g){var w=new FileReader,G=Y(w);return w.readAsArrayBuffer(g),G}function T(g){var w=new FileReader,G=Y(w);return w.readAsText(g),G}function U(g){for(var w=new Uint8Array(g),G=new Array(w.length),X=0;X<w.length;X++)G[X]=String.fromCharCode(w[X]);return G.join("")}function S(g){if(g.slice)return g.slice(0);var w=new Uint8Array(g.byteLength);return w.set(new Uint8Array(g)),w.buffer}function O(){return this.bodyUsed=!1,this._initBody=function(g){this._bodyInit=g,g?typeof g=="string"?this._bodyText=g:l.blob&&Blob.prototype.isPrototypeOf(g)?this._bodyBlob=g:l.formData&&FormData.prototype.isPrototypeOf(g)?this._bodyFormData=g:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(g)?this._bodyText=g.toString():l.arrayBuffer&&l.blob&&y(g)?(this._bodyArrayBuffer=S(g.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(g)||x(g))?this._bodyArrayBuffer=S(g):this._bodyText=g=Object.prototype.toString.call(g):this._bodyText="",this.headers.get("content-type")||(typeof g=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(g)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var g=k(this);if(g)return g;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?k(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(ae)}),this.text=function(){var g=k(this);if(g)return g;if(this._bodyBlob)return T(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(U(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(Z)}),this.json=function(){return this.text().then(JSON.parse)},this}var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function c(g){var w=g.toUpperCase();return b.indexOf(w)>-1?w:g}function v(g,w){w=w||{};var G=w.body;if(g instanceof v){if(g.bodyUsed)throw new TypeError("Already read");this.url=g.url,this.credentials=g.credentials,w.headers||(this.headers=new R(g.headers)),this.method=g.method,this.mode=g.mode,this.signal=g.signal,!G&&g._bodyInit!=null&&(G=g._bodyInit,g.bodyUsed=!0)}else this.url=String(g);if(this.credentials=w.credentials||this.credentials||"same-origin",(w.headers||!this.headers)&&(this.headers=new R(w.headers)),this.method=c(w.method||this.method||"GET"),this.mode=w.mode||this.mode||null,this.signal=w.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&G)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(G)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})};function Z(g){var w=new FormData;return g.trim().split("&").forEach(function(G){if(G){var X=G.split("="),W=X.shift().replace(/\+/g," "),H=X.join("=").replace(/\+/g," ");w.append(decodeURIComponent(W),decodeURIComponent(H))}}),w}function A(g){var w=new R,G=g.replace(/\r?\n[\t ]+/g," ");return G.split(/\r?\n/).forEach(function(X){var W=X.split(":"),H=W.shift().trim();if(H){var Q=W.join(":").trim();w.append(H,Q)}}),w}O.call(v.prototype);function M(g,w){w||(w={}),this.type="default",this.status=w.status===void 0?200:w.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in w?w.statusText:"OK",this.headers=new R(w.headers),this.url=w.url||"",this._initBody(g)}O.call(M.prototype),M.prototype.clone=function(){return new M(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new R(this.headers),url:this.url})},M.error=function(){var g=new M(null,{status:0,statusText:""});return g.type="error",g};var z=[301,302,303,307,308];M.redirect=function(g,w){if(z.indexOf(w)===-1)throw new RangeError("Invalid status code");return new M(null,{status:w,headers:{location:g}})},p.DOMException=f.DOMException;try{new p.DOMException}catch{p.DOMException=function(w,G){this.message=w,this.name=G;var X=Error(w);this.stack=X.stack},p.DOMException.prototype=Object.create(Error.prototype),p.DOMException.prototype.constructor=p.DOMException}function ee(g,w){return new Promise(function(G,X){var W=new v(g,w);if(W.signal&&W.signal.aborted)return X(new p.DOMException("Aborted","AbortError"));var H=new XMLHttpRequest;function Q(){H.abort()}H.onload=function(){var ne={status:H.status,statusText:H.statusText,headers:A(H.getAllResponseHeaders()||"")};ne.url="responseURL"in H?H.responseURL:ne.headers.get("X-Request-URL");var ge="response"in H?H.response:H.responseText;G(new M(ge,ne))},H.onerror=function(){X(new TypeError("Network request failed"))},H.ontimeout=function(){X(new TypeError("Network request failed"))},H.onabort=function(){X(new p.DOMException("Aborted","AbortError"))},H.open(W.method,W.url,!0),W.credentials==="include"?H.withCredentials=!0:W.credentials==="omit"&&(H.withCredentials=!1),"responseType"in H&&l.blob&&(H.responseType="blob"),W.headers.forEach(function(ne,ge){H.setRequestHeader(ge,ne)}),W.signal&&(W.signal.addEventListener("abort",Q),H.onreadystatechange=function(){H.readyState===4&&W.signal.removeEventListener("abort",Q)}),H.send(typeof W._bodyInit>"u"?null:W._bodyInit)})}return ee.polyfill=!0,f.fetch||(f.fetch=ee,f.Headers=R,f.Request=v,f.Response=M),p.Headers=R,p.Request=v,p.Response=M,p.fetch=ee,Object.defineProperty(p,"__esModule",{value:!0}),p})({})})(s),s.fetch.ponyfill=!0,delete s.fetch.polyfill;var a=s;e=a.fetch,e.default=a.fetch,e.fetch=a.fetch,e.Headers=a.Headers,e.Request=a.Request,e.Response=a.Response,n.exports=e})(mS,Ho);const ed=vm(Ho),bS="PARSE_ERROR",wS="INVALID_REQUEST",ES="METHOD_NOT_FOUND",DS="INVALID_PARAMS",Up="INTERNAL_ERROR",Au="SERVER_ERROR",SS=[-32700,-32600,-32601,-32602,-32603],ps={[bS]:{code:-32700,message:"Parse error"},[wS]:{code:-32600,message:"Invalid Request"},[ES]:{code:-32601,message:"Method not found"},[DS]:{code:-32602,message:"Invalid params"},[Up]:{code:-32603,message:"Internal error"},[Au]:{code:-32e3,message:"Server error"}},$p=Au;function IS(n){return SS.includes(n)}function td(n){return Object.keys(ps).includes(n)?ps[n]:ps[$p]}function xS(n){const e=Object.values(ps).find(r=>r.code===n);return e||ps[$p]}function OS(n,e,r){return n.message.includes("getaddrinfo ENOTFOUND")||n.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):n}function AS(n,e,r){return{id:n,jsonrpc:"2.0",error:CS(e,r)}}function CS(n,e){return typeof n>"u"?td(Up):(typeof n=="string"&&(n=Object.assign(Object.assign({},td(Au)),{message:n})),typeof e<"u"&&(n.data=e),IS(n.code)&&(n=xS(n.code)),n)}const PS="^https?:";function RS(n){const e=n.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function TS(n,e){const r=RS(n);return typeof r>"u"?!1:new RegExp(e).test(r)}function rd(n){return TS(n,PS)}const NS={Accept:"application/json","Content-Type":"application/json"},LS="POST",id={headers:NS,method:LS},nd=10;class sn{constructor(e){if(this.url=e,this.events=new Wt.EventEmitter,this.isAvailable=!1,this.registering=!1,!rd(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e,r){this.isAvailable||await this.register();try{const s=eu(e),f=await(await ed(this.url,Object.assign(Object.assign({},id),{body:s}))).json();this.onPayload({data:f})}catch(s){this.onError(e.id,s)}}async register(e=this.url){if(!rd(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((s,a)=>{this.events.once("register_error",f=>{this.resetMaxListeners(),a(f)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return a(new Error("HTTP connection is missing or invalid"));s()})})}this.url=e,this.registering=!0;try{const r=eu({id:1,jsonrpc:"2.0",method:"test",params:[]});await ed(e,Object.assign(Object.assign({},id),{body:r})),this.onOpen()}catch(r){const s=this.parseError(r);throw this.events.emit("register_error",s),this.onClose(),s}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?k3(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const s=this.parseError(r),a=s.message||s.toString(),f=AS(e,a);this.events.emit("payload",f)}parseError(e,r=this.url){return OS(e,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>nd&&this.events.setMaxListeners(nd)}}const sd="error",FS="wss://relay.walletconnect.com",US="wc",$S="universal_provider",od=`${US}@${2}:${$S}:`,MS="https://rpc.walletconnect.com/v1",Li={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var hs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},iu={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(n,e){(function(){var r,s="4.17.21",a=200,f="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",p="Expected a function",l="Invalid `variable` option passed into `_.template`",y="__lodash_hash_undefined__",D=500,x="__lodash_placeholder__",N=1,V=2,F=4,R=1,k=2,Y=1,ae=2,T=4,U=8,S=16,O=32,b=64,c=128,v=256,Z=512,A=30,M="...",z=800,ee=16,g=1,w=2,G=3,X=1/0,W=9007199254740991,H=17976931348623157e292,Q=0/0,ne=4294967295,ge=ne-1,ce=ne>>>1,_e=[["ary",c],["bind",Y],["bindKey",ae],["curry",U],["curryRight",S],["flip",Z],["partial",O],["partialRight",b],["rearg",v]],he="[object Arguments]",me="[object Array]",K="[object AsyncFunction]",q="[object Boolean]",L="[object Date]",h="[object DOMException]",C="[object Error]",ue="[object Function]",de="[object GeneratorFunction]",Ie="[object Map]",qe="[object Number]",Ve="[object Null]",$e="[object Object]",gt="[object Promise]",yt="[object Proxy]",je="[object RegExp]",xe="[object Set]",Ne="[object String]",Le="[object Symbol]",Be="[object Undefined]",Ae="[object WeakMap]",Fe="[object WeakSet]",Se="[object ArrayBuffer]",Ce="[object DataView]",ze="[object Float32Array]",Oe="[object Float64Array]",ke="[object Int8Array]",We="[object Int16Array]",et="[object Int32Array]",tt="[object Uint8Array]",Je="[object Uint8ClampedArray]",rr="[object Uint16Array]",lr="[object Uint32Array]",Wr=/\b__p \+= '';/g,ir=/\b(__p \+=) '' \+/g,ii=/(__e\(.*?\)|\b__t\)) \+\n'';/g,mi=/&(?:amp|lt|gt|quot|#39);/g,Fi=/[&<>"']/g,Et=RegExp(mi.source),vt=RegExp(Fi.source),Dt=/<%-([\s\S]+?)%>/g,St=/<%([\s\S]+?)%>/g,bt=/<%=([\s\S]+?)%>/g,_t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Lt=/^\w*$/,Ft=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,It=/[\\^$.*+?()[\]{}|]/g,Ut=RegExp(It.source),xt=/^\s+/,Ct=/\s/,Ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ft=/\{\n\/\* \[wrapped with (.+)\] \*/,$t=/,? & /,Mt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Zo=/[()=,{}\[\]\/\s]/,ea=/\\(\\)?/g,ta=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ar=/\w*$/,ra=/^[-+]0x[0-9a-f]+$/i,ia=/^0b[01]+$/i,na=/^\[object .+?Constructor\]$/,sa=/^0o[0-7]+$/i,oa=/^(?:0|[1-9]\d*)$/,ni=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,an=/($^)/,aa=/['\n\r\u2028\u2029\\]/g,cn="\\ud800-\\udfff",ca="\\u0300-\\u036f",ua="\\ufe20-\\ufe2f",un="\\u20d0-\\u20ff",Es=ca+ua+un,Ds="\\u2700-\\u27bf",Br="a-z\\xdf-\\xf6\\xf8-\\xff",ha="\\xac\\xb1\\xd7\\xf7",fa="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",la="\\u2000-\\u206f",da=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ss="A-Z\\xc0-\\xd6\\xd8-\\xde",Is="\\ufe0e\\ufe0f",Ui=ha+fa+la+da,Fn="['â€™]",$i="["+cn+"]",Un="["+Ui+"]",Mi="["+Es+"]",xs="\\d+",pa="["+Ds+"]",Os="["+Br+"]",As="[^"+cn+Ui+xs+Ds+Br+Ss+"]",hn="\\ud83c[\\udffb-\\udfff]",ga="(?:"+Mi+"|"+hn+")",Cs="[^"+cn+"]",fn="(?:\\ud83c[\\udde6-\\uddff]){2}",bi="[\\ud800-\\udbff][\\udc00-\\udfff]",wr="["+Ss+"]",Ps="\\u200d",Rs="(?:"+Os+"|"+As+")",Yr="(?:"+wr+"|"+As+")",Ts="(?:"+Fn+"(?:d|ll|m|re|s|t|ve))?",Ns="(?:"+Fn+"(?:D|LL|M|RE|S|T|VE))?",Ls=ga+"?",Fs="["+Is+"]?",ya="(?:"+Ps+"(?:"+[Cs,fn,bi].join("|")+")"+Fs+Ls+")*",si="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Us="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",$s=Fs+Ls+ya,ln="(?:"+[pa,fn,bi].join("|")+")"+$s,va="(?:"+[Cs+Mi+"?",Mi,fn,bi,$i].join("|")+")",$n=RegExp(Fn,"g"),_a=RegExp(Mi,"g"),dn=RegExp(hn+"(?="+hn+")|"+va+$s,"g"),Ms=RegExp([wr+"?"+Os+"+"+Ts+"(?="+[Un,wr,"$"].join("|")+")",Yr+"+"+Ns+"(?="+[Un,wr+Rs,"$"].join("|")+")",wr+"?"+Rs+"+"+Ts,wr+"+"+Ns,Us,si,xs,ln].join("|"),"g"),js=RegExp("["+Ps+cn+Es+Is+"]"),ji=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Bs=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ma=-1,at={};at[ze]=at[Oe]=at[ke]=at[We]=at[et]=at[tt]=at[Je]=at[rr]=at[lr]=!0,at[he]=at[me]=at[Se]=at[q]=at[Ce]=at[L]=at[C]=at[ue]=at[Ie]=at[qe]=at[$e]=at[je]=at[xe]=at[Ne]=at[Ae]=!1;var st={};st[he]=st[me]=st[Se]=st[Ce]=st[q]=st[L]=st[ze]=st[Oe]=st[ke]=st[We]=st[et]=st[Ie]=st[qe]=st[$e]=st[je]=st[xe]=st[Ne]=st[Le]=st[tt]=st[Je]=st[rr]=st[lr]=!0,st[C]=st[ue]=st[Ae]=!1;var E={Ã€:"A",Ã:"A",Ã‚:"A",Ãƒ:"A",Ã„:"A",Ã…:"A",Ã :"a",Ã¡:"a",Ã¢:"a",Ã£:"a",Ã¤:"a",Ã¥:"a",Ã‡:"C",Ã§:"c",Ã:"D",Ã°:"d",Ãˆ:"E",Ã‰:"E",ÃŠ:"E",Ã‹:"E",Ã¨:"e",Ã©:"e",Ãª:"e",Ã«:"e",ÃŒ:"I",Ã:"I",ÃŽ:"I",Ã:"I",Ã¬:"i",Ã­:"i",Ã®:"i",Ã¯:"i",Ã‘:"N",Ã±:"n",Ã’:"O",Ã“:"O",Ã”:"O",Ã•:"O",Ã–:"O",Ã˜:"O",Ã²:"o",Ã³:"o",Ã´:"o",Ãµ:"o",Ã¶:"o",Ã¸:"o",Ã™:"U",Ãš:"U",Ã›:"U",Ãœ:"U",Ã¹:"u",Ãº:"u",Ã»:"u",Ã¼:"u",Ã:"Y",Ã½:"y",Ã¿:"y",Ã†:"Ae",Ã¦:"ae",Ãž:"Th",Ã¾:"th",ÃŸ:"ss",Ä€:"A",Ä‚:"A",Ä„:"A",Ä:"a",Äƒ:"a",Ä…:"a",Ä†:"C",Äˆ:"C",ÄŠ:"C",ÄŒ:"C",Ä‡:"c",Ä‰:"c",Ä‹:"c",Ä:"c",ÄŽ:"D",Ä:"D",Ä:"d",Ä‘:"d",Ä’:"E",Ä”:"E",Ä–:"E",Ä˜:"E",Äš:"E",Ä“:"e",Ä•:"e",Ä—:"e",Ä™:"e",Ä›:"e",Äœ:"G",Äž:"G",Ä :"G",Ä¢:"G",Ä:"g",ÄŸ:"g",Ä¡:"g",Ä£:"g",Ä¤:"H",Ä¦:"H",Ä¥:"h",Ä§:"h",Ä¨:"I",Äª:"I",Ä¬:"I",Ä®:"I",Ä°:"I",Ä©:"i",Ä«:"i",Ä­:"i",Ä¯:"i",Ä±:"i",Ä´:"J",Äµ:"j",Ä¶:"K",Ä·:"k",Ä¸:"k",Ä¹:"L",Ä»:"L",Ä½:"L",Ä¿:"L",Å:"L",Äº:"l",Ä¼:"l",Ä¾:"l",Å€:"l",Å‚:"l",Åƒ:"N",Å…:"N",Å‡:"N",ÅŠ:"N",Å„:"n",Å†:"n",Åˆ:"n",Å‹:"n",ÅŒ:"O",ÅŽ:"O",Å:"O",Å:"o",Å:"o",Å‘:"o",Å”:"R",Å–:"R",Å˜:"R",Å•:"r",Å—:"r",Å™:"r",Åš:"S",Åœ:"S",Åž:"S",Å :"S",Å›:"s",Å:"s",ÅŸ:"s",Å¡:"s",Å¢:"T",Å¤:"T",Å¦:"T",Å£:"t",Å¥:"t",Å§:"t",Å¨:"U",Åª:"U",Å¬:"U",Å®:"U",Å°:"U",Å²:"U",Å©:"u",Å«:"u",Å­:"u",Å¯:"u",Å±:"u",Å³:"u",Å´:"W",Åµ:"w",Å¶:"Y",Å·:"y",Å¸:"Y",Å¹:"Z",Å»:"Z",Å½:"Z",Åº:"z",Å¼:"z",Å¾:"z",Ä²:"IJ",Ä³:"ij",Å’:"Oe",Å“:"oe",Å‰:"'n",Å¿:"s"},$={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},se={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},pe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ct=parseFloat,Re=parseInt,dt=typeof hs=="object"&&hs&&hs.Object===Object&&hs,jt=typeof self=="object"&&self&&self.Object===Object&&self,Xe=dt||jt||Function("return this")(),ut=e&&!e.nodeType&&e,Pt=ut&&!0&&n&&!n.nodeType&&n,dr=Pt&&Pt.exports===ut,Bt=dr&&dt.process,pt=function(){try{var j=Pt&&Pt.require&&Pt.require("util").types;return j||Bt&&Bt.binding&&Bt.binding("util")}catch{}}(),nr=pt&&pt.isArrayBuffer,Hr=pt&&pt.isDate,Cr=pt&&pt.isMap,Jr=pt&&pt.isRegExp,Mn=pt&&pt.isSet,Bi=pt&&pt.isTypedArray;function Kt(j,te,J){switch(J.length){case 0:return j.call(te);case 1:return j.call(te,J[0]);case 2:return j.call(te,J[0],J[1]);case 3:return j.call(te,J[0],J[1],J[2])}return j.apply(te,J)}function Mp(j,te,J,ye){for(var Pe=-1,rt=j==null?0:j.length;++Pe<rt;){var qt=j[Pe];te(ye,qt,J(qt),j)}return ye}function Pr(j,te){for(var J=-1,ye=j==null?0:j.length;++J<ye&&te(j[J],J,j)!==!1;);return j}function jp(j,te){for(var J=j==null?0:j.length;J--&&te(j[J],J,j)!==!1;);return j}function Ru(j,te){for(var J=-1,ye=j==null?0:j.length;++J<ye;)if(!te(j[J],J,j))return!1;return!0}function wi(j,te){for(var J=-1,ye=j==null?0:j.length,Pe=0,rt=[];++J<ye;){var qt=j[J];te(qt,J,j)&&(rt[Pe++]=qt)}return rt}function Hs(j,te){var J=j==null?0:j.length;return!!J&&pn(j,te,0)>-1}function ba(j,te,J){for(var ye=-1,Pe=j==null?0:j.length;++ye<Pe;)if(J(te,j[ye]))return!0;return!1}function mt(j,te){for(var J=-1,ye=j==null?0:j.length,Pe=Array(ye);++J<ye;)Pe[J]=te(j[J],J,j);return Pe}function Ei(j,te){for(var J=-1,ye=te.length,Pe=j.length;++J<ye;)j[Pe+J]=te[J];return j}function wa(j,te,J,ye){var Pe=-1,rt=j==null?0:j.length;for(ye&&rt&&(J=j[++Pe]);++Pe<rt;)J=te(J,j[Pe],Pe,j);return J}function Bp(j,te,J,ye){var Pe=j==null?0:j.length;for(ye&&Pe&&(J=j[--Pe]);Pe--;)J=te(J,j[Pe],Pe,j);return J}function Ea(j,te){for(var J=-1,ye=j==null?0:j.length;++J<ye;)if(te(j[J],J,j))return!0;return!1}var Hp=Da("length");function qp(j){return j.split("")}function zp(j){return j.match(Mt)||[]}function Tu(j,te,J){var ye;return J(j,function(Pe,rt,qt){if(te(Pe,rt,qt))return ye=rt,!1}),ye}function qs(j,te,J,ye){for(var Pe=j.length,rt=J+(ye?1:-1);ye?rt--:++rt<Pe;)if(te(j[rt],rt,j))return rt;return-1}function pn(j,te,J){return te===te?tg(j,te,J):qs(j,Nu,J)}function Kp(j,te,J,ye){for(var Pe=J-1,rt=j.length;++Pe<rt;)if(ye(j[Pe],te))return Pe;return-1}function Nu(j){return j!==j}function Lu(j,te){var J=j==null?0:j.length;return J?Ia(j,te)/J:Q}function Da(j){return function(te){return te==null?r:te[j]}}function Sa(j){return function(te){return j==null?r:j[te]}}function Fu(j,te,J,ye,Pe){return Pe(j,function(rt,qt,ht){J=ye?(ye=!1,rt):te(J,rt,qt,ht)}),J}function Vp(j,te){var J=j.length;for(j.sort(te);J--;)j[J]=j[J].value;return j}function Ia(j,te){for(var J,ye=-1,Pe=j.length;++ye<Pe;){var rt=te(j[ye]);rt!==r&&(J=J===r?rt:J+rt)}return J}function xa(j,te){for(var J=-1,ye=Array(j);++J<j;)ye[J]=te(J);return ye}function kp(j,te){return mt(te,function(J){return[J,j[J]]})}function Uu(j){return j&&j.slice(0,Bu(j)+1).replace(xt,"")}function Er(j){return function(te){return j(te)}}function Oa(j,te){return mt(te,function(J){return j[J]})}function jn(j,te){return j.has(te)}function $u(j,te){for(var J=-1,ye=j.length;++J<ye&&pn(te,j[J],0)>-1;);return J}function Mu(j,te){for(var J=j.length;J--&&pn(te,j[J],0)>-1;);return J}function Gp(j,te){for(var J=j.length,ye=0;J--;)j[J]===te&&++ye;return ye}var Wp=Sa(E),Yp=Sa($);function Jp(j){return"\\"+pe[j]}function Xp(j,te){return j==null?r:j[te]}function gn(j){return js.test(j)}function Qp(j){return ji.test(j)}function Zp(j){for(var te,J=[];!(te=j.next()).done;)J.push(te.value);return J}function Aa(j){var te=-1,J=Array(j.size);return j.forEach(function(ye,Pe){J[++te]=[Pe,ye]}),J}function ju(j,te){return function(J){return j(te(J))}}function Di(j,te){for(var J=-1,ye=j.length,Pe=0,rt=[];++J<ye;){var qt=j[J];(qt===te||qt===x)&&(j[J]=x,rt[Pe++]=J)}return rt}function zs(j){var te=-1,J=Array(j.size);return j.forEach(function(ye){J[++te]=ye}),J}function eg(j){var te=-1,J=Array(j.size);return j.forEach(function(ye){J[++te]=[ye,ye]}),J}function tg(j,te,J){for(var ye=J-1,Pe=j.length;++ye<Pe;)if(j[ye]===te)return ye;return-1}function rg(j,te,J){for(var ye=J+1;ye--;)if(j[ye]===te)return ye;return ye}function yn(j){return gn(j)?ng(j):Hp(j)}function qr(j){return gn(j)?sg(j):qp(j)}function Bu(j){for(var te=j.length;te--&&Ct.test(j.charAt(te)););return te}var ig=Sa(se);function ng(j){for(var te=dn.lastIndex=0;dn.test(j);)++te;return te}function sg(j){return j.match(dn)||[]}function og(j){return j.match(Ms)||[]}var ag=function j(te){te=te==null?Xe:vn.defaults(Xe.Object(),te,vn.pick(Xe,Bs));var J=te.Array,ye=te.Date,Pe=te.Error,rt=te.Function,qt=te.Math,ht=te.Object,Ca=te.RegExp,cg=te.String,Rr=te.TypeError,Ks=J.prototype,ug=rt.prototype,_n=ht.prototype,Vs=te["__core-js_shared__"],ks=ug.toString,nt=_n.hasOwnProperty,hg=0,Hu=function(){var t=/[^.]+$/.exec(Vs&&Vs.keys&&Vs.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Gs=_n.toString,fg=ks.call(ht),lg=Xe._,dg=Ca("^"+ks.call(nt).replace(It,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ws=dr?te.Buffer:r,Si=te.Symbol,Ys=te.Uint8Array,qu=Ws?Ws.allocUnsafe:r,Js=ju(ht.getPrototypeOf,ht),zu=ht.create,Ku=_n.propertyIsEnumerable,Xs=Ks.splice,Vu=Si?Si.isConcatSpreadable:r,Bn=Si?Si.iterator:r,Hi=Si?Si.toStringTag:r,Qs=function(){try{var t=ki(ht,"defineProperty");return t({},"",{}),t}catch{}}(),pg=te.clearTimeout!==Xe.clearTimeout&&te.clearTimeout,gg=ye&&ye.now!==Xe.Date.now&&ye.now,yg=te.setTimeout!==Xe.setTimeout&&te.setTimeout,Zs=qt.ceil,eo=qt.floor,Pa=ht.getOwnPropertySymbols,vg=Ws?Ws.isBuffer:r,ku=te.isFinite,_g=Ks.join,mg=ju(ht.keys,ht),zt=qt.max,Qt=qt.min,bg=ye.now,wg=te.parseInt,Gu=qt.random,Eg=Ks.reverse,Ra=ki(te,"DataView"),Hn=ki(te,"Map"),Ta=ki(te,"Promise"),mn=ki(te,"Set"),qn=ki(te,"WeakMap"),zn=ki(ht,"create"),to=qn&&new qn,bn={},Dg=Gi(Ra),Sg=Gi(Hn),Ig=Gi(Ta),xg=Gi(mn),Og=Gi(qn),ro=Si?Si.prototype:r,Kn=ro?ro.valueOf:r,Wu=ro?ro.toString:r;function _(t){if(At(t)&&!Te(t)&&!(t instanceof Ye)){if(t instanceof Tr)return t;if(nt.call(t,"__wrapped__"))return Yh(t)}return new Tr(t)}var wn=function(){function t(){}return function(i){if(!wt(i))return{};if(zu)return zu(i);t.prototype=i;var o=new t;return t.prototype=r,o}}();function io(){}function Tr(t,i){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=r}_.templateSettings={escape:Dt,evaluate:St,interpolate:bt,variable:"",imports:{_}},_.prototype=io.prototype,_.prototype.constructor=_,Tr.prototype=wn(io.prototype),Tr.prototype.constructor=Tr;function Ye(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ne,this.__views__=[]}function Ag(){var t=new Ye(this.__wrapped__);return t.__actions__=pr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=pr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=pr(this.__views__),t}function Cg(){if(this.__filtered__){var t=new Ye(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Pg(){var t=this.__wrapped__.value(),i=this.__dir__,o=Te(t),u=i<0,d=o?t.length:0,m=q0(0,d,this.__views__),I=m.start,P=m.end,B=P-I,re=u?P:I-1,ie=this.__iteratees__,oe=ie.length,fe=0,ve=Qt(B,this.__takeCount__);if(!o||!u&&d==B&&ve==B)return _h(t,this.__actions__);var we=[];e:for(;B--&&fe<ve;){re+=i;for(var He=-1,Ee=t[re];++He<oe;){var Ge=ie[He],Qe=Ge.iteratee,Ir=Ge.type,ar=Qe(Ee);if(Ir==w)Ee=ar;else if(!ar){if(Ir==g)continue e;break e}}we[fe++]=Ee}return we}Ye.prototype=wn(io.prototype),Ye.prototype.constructor=Ye;function qi(t){var i=-1,o=t==null?0:t.length;for(this.clear();++i<o;){var u=t[i];this.set(u[0],u[1])}}function Rg(){this.__data__=zn?zn(null):{},this.size=0}function Tg(t){var i=this.has(t)&&delete this.__data__[t];return this.size-=i?1:0,i}function Ng(t){var i=this.__data__;if(zn){var o=i[t];return o===y?r:o}return nt.call(i,t)?i[t]:r}function Lg(t){var i=this.__data__;return zn?i[t]!==r:nt.call(i,t)}function Fg(t,i){var o=this.__data__;return this.size+=this.has(t)?0:1,o[t]=zn&&i===r?y:i,this}qi.prototype.clear=Rg,qi.prototype.delete=Tg,qi.prototype.get=Ng,qi.prototype.has=Lg,qi.prototype.set=Fg;function oi(t){var i=-1,o=t==null?0:t.length;for(this.clear();++i<o;){var u=t[i];this.set(u[0],u[1])}}function Ug(){this.__data__=[],this.size=0}function $g(t){var i=this.__data__,o=no(i,t);if(o<0)return!1;var u=i.length-1;return o==u?i.pop():Xs.call(i,o,1),--this.size,!0}function Mg(t){var i=this.__data__,o=no(i,t);return o<0?r:i[o][1]}function jg(t){return no(this.__data__,t)>-1}function Bg(t,i){var o=this.__data__,u=no(o,t);return u<0?(++this.size,o.push([t,i])):o[u][1]=i,this}oi.prototype.clear=Ug,oi.prototype.delete=$g,oi.prototype.get=Mg,oi.prototype.has=jg,oi.prototype.set=Bg;function ai(t){var i=-1,o=t==null?0:t.length;for(this.clear();++i<o;){var u=t[i];this.set(u[0],u[1])}}function Hg(){this.size=0,this.__data__={hash:new qi,map:new(Hn||oi),string:new qi}}function qg(t){var i=vo(this,t).delete(t);return this.size-=i?1:0,i}function zg(t){return vo(this,t).get(t)}function Kg(t){return vo(this,t).has(t)}function Vg(t,i){var o=vo(this,t),u=o.size;return o.set(t,i),this.size+=o.size==u?0:1,this}ai.prototype.clear=Hg,ai.prototype.delete=qg,ai.prototype.get=zg,ai.prototype.has=Kg,ai.prototype.set=Vg;function zi(t){var i=-1,o=t==null?0:t.length;for(this.__data__=new ai;++i<o;)this.add(t[i])}function kg(t){return this.__data__.set(t,y),this}function Gg(t){return this.__data__.has(t)}zi.prototype.add=zi.prototype.push=kg,zi.prototype.has=Gg;function zr(t){var i=this.__data__=new oi(t);this.size=i.size}function Wg(){this.__data__=new oi,this.size=0}function Yg(t){var i=this.__data__,o=i.delete(t);return this.size=i.size,o}function Jg(t){return this.__data__.get(t)}function Xg(t){return this.__data__.has(t)}function Qg(t,i){var o=this.__data__;if(o instanceof oi){var u=o.__data__;if(!Hn||u.length<a-1)return u.push([t,i]),this.size=++o.size,this;o=this.__data__=new ai(u)}return o.set(t,i),this.size=o.size,this}zr.prototype.clear=Wg,zr.prototype.delete=Yg,zr.prototype.get=Jg,zr.prototype.has=Xg,zr.prototype.set=Qg;function Yu(t,i){var o=Te(t),u=!o&&Wi(t),d=!o&&!u&&Ci(t),m=!o&&!u&&!d&&In(t),I=o||u||d||m,P=I?xa(t.length,cg):[],B=P.length;for(var re in t)(i||nt.call(t,re))&&!(I&&(re=="length"||d&&(re=="offset"||re=="parent")||m&&(re=="buffer"||re=="byteLength"||re=="byteOffset")||fi(re,B)))&&P.push(re);return P}function Ju(t){var i=t.length;return i?t[za(0,i-1)]:r}function Zg(t,i){return _o(pr(t),Ki(i,0,t.length))}function e0(t){return _o(pr(t))}function Na(t,i,o){(o!==r&&!Kr(t[i],o)||o===r&&!(i in t))&&ci(t,i,o)}function Vn(t,i,o){var u=t[i];(!(nt.call(t,i)&&Kr(u,o))||o===r&&!(i in t))&&ci(t,i,o)}function no(t,i){for(var o=t.length;o--;)if(Kr(t[o][0],i))return o;return-1}function t0(t,i,o,u){return Ii(t,function(d,m,I){i(u,d,o(d),I)}),u}function Xu(t,i){return t&&Qr(i,Vt(i),t)}function r0(t,i){return t&&Qr(i,yr(i),t)}function ci(t,i,o){i=="__proto__"&&Qs?Qs(t,i,{configurable:!0,enumerable:!0,value:o,writable:!0}):t[i]=o}function La(t,i){for(var o=-1,u=i.length,d=J(u),m=t==null;++o<u;)d[o]=m?r:pc(t,i[o]);return d}function Ki(t,i,o){return t===t&&(o!==r&&(t=t<=o?t:o),i!==r&&(t=t>=i?t:i)),t}function Nr(t,i,o,u,d,m){var I,P=i&N,B=i&V,re=i&F;if(o&&(I=d?o(t,u,d,m):o(t)),I!==r)return I;if(!wt(t))return t;var ie=Te(t);if(ie){if(I=K0(t),!P)return pr(t,I)}else{var oe=Zt(t),fe=oe==ue||oe==de;if(Ci(t))return wh(t,P);if(oe==$e||oe==he||fe&&!d){if(I=B||fe?{}:Bh(t),!P)return B?N0(t,r0(I,t)):T0(t,Xu(I,t))}else{if(!st[oe])return d?t:{};I=V0(t,oe,P)}}m||(m=new zr);var ve=m.get(t);if(ve)return ve;m.set(t,I),yf(t)?t.forEach(function(Ee){I.add(Nr(Ee,i,o,Ee,t,m))}):pf(t)&&t.forEach(function(Ee,Ge){I.set(Ge,Nr(Ee,i,o,Ge,t,m))});var we=re?B?ec:Za:B?yr:Vt,He=ie?r:we(t);return Pr(He||t,function(Ee,Ge){He&&(Ge=Ee,Ee=t[Ge]),Vn(I,Ge,Nr(Ee,i,o,Ge,t,m))}),I}function i0(t){var i=Vt(t);return function(o){return Qu(o,t,i)}}function Qu(t,i,o){var u=o.length;if(t==null)return!u;for(t=ht(t);u--;){var d=o[u],m=i[d],I=t[d];if(I===r&&!(d in t)||!m(I))return!1}return!0}function Zu(t,i,o){if(typeof t!="function")throw new Rr(p);return Qn(function(){t.apply(r,o)},i)}function kn(t,i,o,u){var d=-1,m=Hs,I=!0,P=t.length,B=[],re=i.length;if(!P)return B;o&&(i=mt(i,Er(o))),u?(m=ba,I=!1):i.length>=a&&(m=jn,I=!1,i=new zi(i));e:for(;++d<P;){var ie=t[d],oe=o==null?ie:o(ie);if(ie=u||ie!==0?ie:0,I&&oe===oe){for(var fe=re;fe--;)if(i[fe]===oe)continue e;B.push(ie)}else m(i,oe,u)||B.push(ie)}return B}var Ii=xh(Xr),eh=xh(Ua,!0);function n0(t,i){var o=!0;return Ii(t,function(u,d,m){return o=!!i(u,d,m),o}),o}function so(t,i,o){for(var u=-1,d=t.length;++u<d;){var m=t[u],I=i(m);if(I!=null&&(P===r?I===I&&!Sr(I):o(I,P)))var P=I,B=m}return B}function s0(t,i,o,u){var d=t.length;for(o=Me(o),o<0&&(o=-o>d?0:d+o),u=u===r||u>d?d:Me(u),u<0&&(u+=d),u=o>u?0:_f(u);o<u;)t[o++]=i;return t}function th(t,i){var o=[];return Ii(t,function(u,d,m){i(u,d,m)&&o.push(u)}),o}function Yt(t,i,o,u,d){var m=-1,I=t.length;for(o||(o=G0),d||(d=[]);++m<I;){var P=t[m];i>0&&o(P)?i>1?Yt(P,i-1,o,u,d):Ei(d,P):u||(d[d.length]=P)}return d}var Fa=Oh(),rh=Oh(!0);function Xr(t,i){return t&&Fa(t,i,Vt)}function Ua(t,i){return t&&rh(t,i,Vt)}function oo(t,i){return wi(i,function(o){return li(t[o])})}function Vi(t,i){i=Oi(i,t);for(var o=0,u=i.length;t!=null&&o<u;)t=t[Zr(i[o++])];return o&&o==u?t:r}function ih(t,i,o){var u=i(t);return Te(t)?u:Ei(u,o(t))}function sr(t){return t==null?t===r?Be:Ve:Hi&&Hi in ht(t)?H0(t):e1(t)}function $a(t,i){return t>i}function o0(t,i){return t!=null&&nt.call(t,i)}function a0(t,i){return t!=null&&i in ht(t)}function c0(t,i,o){return t>=Qt(i,o)&&t<zt(i,o)}function Ma(t,i,o){for(var u=o?ba:Hs,d=t[0].length,m=t.length,I=m,P=J(m),B=1/0,re=[];I--;){var ie=t[I];I&&i&&(ie=mt(ie,Er(i))),B=Qt(ie.length,B),P[I]=!o&&(i||d>=120&&ie.length>=120)?new zi(I&&ie):r}ie=t[0];var oe=-1,fe=P[0];e:for(;++oe<d&&re.length<B;){var ve=ie[oe],we=i?i(ve):ve;if(ve=o||ve!==0?ve:0,!(fe?jn(fe,we):u(re,we,o))){for(I=m;--I;){var He=P[I];if(!(He?jn(He,we):u(t[I],we,o)))continue e}fe&&fe.push(we),re.push(ve)}}return re}function u0(t,i,o,u){return Xr(t,function(d,m,I){i(u,o(d),m,I)}),u}function Gn(t,i,o){i=Oi(i,t),t=Kh(t,i);var u=t==null?t:t[Zr(Fr(i))];return u==null?r:Kt(u,t,o)}function nh(t){return At(t)&&sr(t)==he}function h0(t){return At(t)&&sr(t)==Se}function f0(t){return At(t)&&sr(t)==L}function Wn(t,i,o,u,d){return t===i?!0:t==null||i==null||!At(t)&&!At(i)?t!==t&&i!==i:l0(t,i,o,u,Wn,d)}function l0(t,i,o,u,d,m){var I=Te(t),P=Te(i),B=I?me:Zt(t),re=P?me:Zt(i);B=B==he?$e:B,re=re==he?$e:re;var ie=B==$e,oe=re==$e,fe=B==re;if(fe&&Ci(t)){if(!Ci(i))return!1;I=!0,ie=!1}if(fe&&!ie)return m||(m=new zr),I||In(t)?$h(t,i,o,u,d,m):j0(t,i,B,o,u,d,m);if(!(o&R)){var ve=ie&&nt.call(t,"__wrapped__"),we=oe&&nt.call(i,"__wrapped__");if(ve||we){var He=ve?t.value():t,Ee=we?i.value():i;return m||(m=new zr),d(He,Ee,o,u,m)}}return fe?(m||(m=new zr),B0(t,i,o,u,d,m)):!1}function d0(t){return At(t)&&Zt(t)==Ie}function ja(t,i,o,u){var d=o.length,m=d,I=!u;if(t==null)return!m;for(t=ht(t);d--;){var P=o[d];if(I&&P[2]?P[1]!==t[P[0]]:!(P[0]in t))return!1}for(;++d<m;){P=o[d];var B=P[0],re=t[B],ie=P[1];if(I&&P[2]){if(re===r&&!(B in t))return!1}else{var oe=new zr;if(u)var fe=u(re,ie,B,t,i,oe);if(!(fe===r?Wn(ie,re,R|k,u,oe):fe))return!1}}return!0}function sh(t){if(!wt(t)||Y0(t))return!1;var i=li(t)?dg:na;return i.test(Gi(t))}function p0(t){return At(t)&&sr(t)==je}function g0(t){return At(t)&&Zt(t)==xe}function y0(t){return At(t)&&So(t.length)&&!!at[sr(t)]}function oh(t){return typeof t=="function"?t:t==null?vr:typeof t=="object"?Te(t)?uh(t[0],t[1]):ch(t):Cf(t)}function Ba(t){if(!Xn(t))return mg(t);var i=[];for(var o in ht(t))nt.call(t,o)&&o!="constructor"&&i.push(o);return i}function v0(t){if(!wt(t))return Z0(t);var i=Xn(t),o=[];for(var u in t)u=="constructor"&&(i||!nt.call(t,u))||o.push(u);return o}function Ha(t,i){return t<i}function ah(t,i){var o=-1,u=gr(t)?J(t.length):[];return Ii(t,function(d,m,I){u[++o]=i(d,m,I)}),u}function ch(t){var i=rc(t);return i.length==1&&i[0][2]?qh(i[0][0],i[0][1]):function(o){return o===t||ja(o,t,i)}}function uh(t,i){return nc(t)&&Hh(i)?qh(Zr(t),i):function(o){var u=pc(o,t);return u===r&&u===i?gc(o,t):Wn(i,u,R|k)}}function ao(t,i,o,u,d){t!==i&&Fa(i,function(m,I){if(d||(d=new zr),wt(m))_0(t,i,I,o,ao,u,d);else{var P=u?u(oc(t,I),m,I+"",t,i,d):r;P===r&&(P=m),Na(t,I,P)}},yr)}function _0(t,i,o,u,d,m,I){var P=oc(t,o),B=oc(i,o),re=I.get(B);if(re){Na(t,o,re);return}var ie=m?m(P,B,o+"",t,i,I):r,oe=ie===r;if(oe){var fe=Te(B),ve=!fe&&Ci(B),we=!fe&&!ve&&In(B);ie=B,fe||ve||we?Te(P)?ie=P:Rt(P)?ie=pr(P):ve?(oe=!1,ie=wh(B,!0)):we?(oe=!1,ie=Eh(B,!0)):ie=[]:Zn(B)||Wi(B)?(ie=P,Wi(P)?ie=mf(P):(!wt(P)||li(P))&&(ie=Bh(B))):oe=!1}oe&&(I.set(B,ie),d(ie,B,u,m,I),I.delete(B)),Na(t,o,ie)}function hh(t,i){var o=t.length;if(o)return i+=i<0?o:0,fi(i,o)?t[i]:r}function fh(t,i,o){i.length?i=mt(i,function(m){return Te(m)?function(I){return Vi(I,m.length===1?m[0]:m)}:m}):i=[vr];var u=-1;i=mt(i,Er(be()));var d=ah(t,function(m,I,P){var B=mt(i,function(re){return re(m)});return{criteria:B,index:++u,value:m}});return Vp(d,function(m,I){return R0(m,I,o)})}function m0(t,i){return lh(t,i,function(o,u){return gc(t,u)})}function lh(t,i,o){for(var u=-1,d=i.length,m={};++u<d;){var I=i[u],P=Vi(t,I);o(P,I)&&Yn(m,Oi(I,t),P)}return m}function b0(t){return function(i){return Vi(i,t)}}function qa(t,i,o,u){var d=u?Kp:pn,m=-1,I=i.length,P=t;for(t===i&&(i=pr(i)),o&&(P=mt(t,Er(o)));++m<I;)for(var B=0,re=i[m],ie=o?o(re):re;(B=d(P,ie,B,u))>-1;)P!==t&&Xs.call(P,B,1),Xs.call(t,B,1);return t}function dh(t,i){for(var o=t?i.length:0,u=o-1;o--;){var d=i[o];if(o==u||d!==m){var m=d;fi(d)?Xs.call(t,d,1):ka(t,d)}}return t}function za(t,i){return t+eo(Gu()*(i-t+1))}function w0(t,i,o,u){for(var d=-1,m=zt(Zs((i-t)/(o||1)),0),I=J(m);m--;)I[u?m:++d]=t,t+=o;return I}function Ka(t,i){var o="";if(!t||i<1||i>W)return o;do i%2&&(o+=t),i=eo(i/2),i&&(t+=t);while(i);return o}function Ke(t,i){return ac(zh(t,i,vr),t+"")}function E0(t){return Ju(xn(t))}function D0(t,i){var o=xn(t);return _o(o,Ki(i,0,o.length))}function Yn(t,i,o,u){if(!wt(t))return t;i=Oi(i,t);for(var d=-1,m=i.length,I=m-1,P=t;P!=null&&++d<m;){var B=Zr(i[d]),re=o;if(B==="__proto__"||B==="constructor"||B==="prototype")return t;if(d!=I){var ie=P[B];re=u?u(ie,B,P):r,re===r&&(re=wt(ie)?ie:fi(i[d+1])?[]:{})}Vn(P,B,re),P=P[B]}return t}var ph=to?function(t,i){return to.set(t,i),t}:vr,S0=Qs?function(t,i){return Qs(t,"toString",{configurable:!0,enumerable:!1,value:vc(i),writable:!0})}:vr;function I0(t){return _o(xn(t))}function Lr(t,i,o){var u=-1,d=t.length;i<0&&(i=-i>d?0:d+i),o=o>d?d:o,o<0&&(o+=d),d=i>o?0:o-i>>>0,i>>>=0;for(var m=J(d);++u<d;)m[u]=t[u+i];return m}function x0(t,i){var o;return Ii(t,function(u,d,m){return o=i(u,d,m),!o}),!!o}function co(t,i,o){var u=0,d=t==null?u:t.length;if(typeof i=="number"&&i===i&&d<=ce){for(;u<d;){var m=u+d>>>1,I=t[m];I!==null&&!Sr(I)&&(o?I<=i:I<i)?u=m+1:d=m}return d}return Va(t,i,vr,o)}function Va(t,i,o,u){var d=0,m=t==null?0:t.length;if(m===0)return 0;i=o(i);for(var I=i!==i,P=i===null,B=Sr(i),re=i===r;d<m;){var ie=eo((d+m)/2),oe=o(t[ie]),fe=oe!==r,ve=oe===null,we=oe===oe,He=Sr(oe);if(I)var Ee=u||we;else re?Ee=we&&(u||fe):P?Ee=we&&fe&&(u||!ve):B?Ee=we&&fe&&!ve&&(u||!He):ve||He?Ee=!1:Ee=u?oe<=i:oe<i;Ee?d=ie+1:m=ie}return Qt(m,ge)}function gh(t,i){for(var o=-1,u=t.length,d=0,m=[];++o<u;){var I=t[o],P=i?i(I):I;if(!o||!Kr(P,B)){var B=P;m[d++]=I===0?0:I}}return m}function yh(t){return typeof t=="number"?t:Sr(t)?Q:+t}function Dr(t){if(typeof t=="string")return t;if(Te(t))return mt(t,Dr)+"";if(Sr(t))return Wu?Wu.call(t):"";var i=t+"";return i=="0"&&1/t==-X?"-0":i}function xi(t,i,o){var u=-1,d=Hs,m=t.length,I=!0,P=[],B=P;if(o)I=!1,d=ba;else if(m>=a){var re=i?null:$0(t);if(re)return zs(re);I=!1,d=jn,B=new zi}else B=i?[]:P;e:for(;++u<m;){var ie=t[u],oe=i?i(ie):ie;if(ie=o||ie!==0?ie:0,I&&oe===oe){for(var fe=B.length;fe--;)if(B[fe]===oe)continue e;i&&B.push(oe),P.push(ie)}else d(B,oe,o)||(B!==P&&B.push(oe),P.push(ie))}return P}function ka(t,i){return i=Oi(i,t),t=Kh(t,i),t==null||delete t[Zr(Fr(i))]}function vh(t,i,o,u){return Yn(t,i,o(Vi(t,i)),u)}function uo(t,i,o,u){for(var d=t.length,m=u?d:-1;(u?m--:++m<d)&&i(t[m],m,t););return o?Lr(t,u?0:m,u?m+1:d):Lr(t,u?m+1:0,u?d:m)}function _h(t,i){var o=t;return o instanceof Ye&&(o=o.value()),wa(i,function(u,d){return d.func.apply(d.thisArg,Ei([u],d.args))},o)}function Ga(t,i,o){var u=t.length;if(u<2)return u?xi(t[0]):[];for(var d=-1,m=J(u);++d<u;)for(var I=t[d],P=-1;++P<u;)P!=d&&(m[d]=kn(m[d]||I,t[P],i,o));return xi(Yt(m,1),i,o)}function mh(t,i,o){for(var u=-1,d=t.length,m=i.length,I={};++u<d;){var P=u<m?i[u]:r;o(I,t[u],P)}return I}function Wa(t){return Rt(t)?t:[]}function Ya(t){return typeof t=="function"?t:vr}function Oi(t,i){return Te(t)?t:nc(t,i)?[t]:Wh(it(t))}var O0=Ke;function Ai(t,i,o){var u=t.length;return o=o===r?u:o,!i&&o>=u?t:Lr(t,i,o)}var bh=pg||function(t){return Xe.clearTimeout(t)};function wh(t,i){if(i)return t.slice();var o=t.length,u=qu?qu(o):new t.constructor(o);return t.copy(u),u}function Ja(t){var i=new t.constructor(t.byteLength);return new Ys(i).set(new Ys(t)),i}function A0(t,i){var o=i?Ja(t.buffer):t.buffer;return new t.constructor(o,t.byteOffset,t.byteLength)}function C0(t){var i=new t.constructor(t.source,Ar.exec(t));return i.lastIndex=t.lastIndex,i}function P0(t){return Kn?ht(Kn.call(t)):{}}function Eh(t,i){var o=i?Ja(t.buffer):t.buffer;return new t.constructor(o,t.byteOffset,t.length)}function Dh(t,i){if(t!==i){var o=t!==r,u=t===null,d=t===t,m=Sr(t),I=i!==r,P=i===null,B=i===i,re=Sr(i);if(!P&&!re&&!m&&t>i||m&&I&&B&&!P&&!re||u&&I&&B||!o&&B||!d)return 1;if(!u&&!m&&!re&&t<i||re&&o&&d&&!u&&!m||P&&o&&d||!I&&d||!B)return-1}return 0}function R0(t,i,o){for(var u=-1,d=t.criteria,m=i.criteria,I=d.length,P=o.length;++u<I;){var B=Dh(d[u],m[u]);if(B){if(u>=P)return B;var re=o[u];return B*(re=="desc"?-1:1)}}return t.index-i.index}function Sh(t,i,o,u){for(var d=-1,m=t.length,I=o.length,P=-1,B=i.length,re=zt(m-I,0),ie=J(B+re),oe=!u;++P<B;)ie[P]=i[P];for(;++d<I;)(oe||d<m)&&(ie[o[d]]=t[d]);for(;re--;)ie[P++]=t[d++];return ie}function Ih(t,i,o,u){for(var d=-1,m=t.length,I=-1,P=o.length,B=-1,re=i.length,ie=zt(m-P,0),oe=J(ie+re),fe=!u;++d<ie;)oe[d]=t[d];for(var ve=d;++B<re;)oe[ve+B]=i[B];for(;++I<P;)(fe||d<m)&&(oe[ve+o[I]]=t[d++]);return oe}function pr(t,i){var o=-1,u=t.length;for(i||(i=J(u));++o<u;)i[o]=t[o];return i}function Qr(t,i,o,u){var d=!o;o||(o={});for(var m=-1,I=i.length;++m<I;){var P=i[m],B=u?u(o[P],t[P],P,o,t):r;B===r&&(B=t[P]),d?ci(o,P,B):Vn(o,P,B)}return o}function T0(t,i){return Qr(t,ic(t),i)}function N0(t,i){return Qr(t,Mh(t),i)}function ho(t,i){return function(o,u){var d=Te(o)?Mp:t0,m=i?i():{};return d(o,t,be(u,2),m)}}function En(t){return Ke(function(i,o){var u=-1,d=o.length,m=d>1?o[d-1]:r,I=d>2?o[2]:r;for(m=t.length>3&&typeof m=="function"?(d--,m):r,I&&or(o[0],o[1],I)&&(m=d<3?r:m,d=1),i=ht(i);++u<d;){var P=o[u];P&&t(i,P,u,m)}return i})}function xh(t,i){return function(o,u){if(o==null)return o;if(!gr(o))return t(o,u);for(var d=o.length,m=i?d:-1,I=ht(o);(i?m--:++m<d)&&u(I[m],m,I)!==!1;);return o}}function Oh(t){return function(i,o,u){for(var d=-1,m=ht(i),I=u(i),P=I.length;P--;){var B=I[t?P:++d];if(o(m[B],B,m)===!1)break}return i}}function L0(t,i,o){var u=i&Y,d=Jn(t);function m(){var I=this&&this!==Xe&&this instanceof m?d:t;return I.apply(u?o:this,arguments)}return m}function Ah(t){return function(i){i=it(i);var o=gn(i)?qr(i):r,u=o?o[0]:i.charAt(0),d=o?Ai(o,1).join(""):i.slice(1);return u[t]()+d}}function Dn(t){return function(i){return wa(Of(xf(i).replace($n,"")),t,"")}}function Jn(t){return function(){var i=arguments;switch(i.length){case 0:return new t;case 1:return new t(i[0]);case 2:return new t(i[0],i[1]);case 3:return new t(i[0],i[1],i[2]);case 4:return new t(i[0],i[1],i[2],i[3]);case 5:return new t(i[0],i[1],i[2],i[3],i[4]);case 6:return new t(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new t(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var o=wn(t.prototype),u=t.apply(o,i);return wt(u)?u:o}}function F0(t,i,o){var u=Jn(t);function d(){for(var m=arguments.length,I=J(m),P=m,B=Sn(d);P--;)I[P]=arguments[P];var re=m<3&&I[0]!==B&&I[m-1]!==B?[]:Di(I,B);if(m-=re.length,m<o)return Nh(t,i,fo,d.placeholder,r,I,re,r,r,o-m);var ie=this&&this!==Xe&&this instanceof d?u:t;return Kt(ie,this,I)}return d}function Ch(t){return function(i,o,u){var d=ht(i);if(!gr(i)){var m=be(o,3);i=Vt(i),o=function(P){return m(d[P],P,d)}}var I=t(i,o,u);return I>-1?d[m?i[I]:I]:r}}function Ph(t){return hi(function(i){var o=i.length,u=o,d=Tr.prototype.thru;for(t&&i.reverse();u--;){var m=i[u];if(typeof m!="function")throw new Rr(p);if(d&&!I&&yo(m)=="wrapper")var I=new Tr([],!0)}for(u=I?u:o;++u<o;){m=i[u];var P=yo(m),B=P=="wrapper"?tc(m):r;B&&sc(B[0])&&B[1]==(c|U|O|v)&&!B[4].length&&B[9]==1?I=I[yo(B[0])].apply(I,B[3]):I=m.length==1&&sc(m)?I[P]():I.thru(m)}return function(){var re=arguments,ie=re[0];if(I&&re.length==1&&Te(ie))return I.plant(ie).value();for(var oe=0,fe=o?i[oe].apply(this,re):ie;++oe<o;)fe=i[oe].call(this,fe);return fe}})}function fo(t,i,o,u,d,m,I,P,B,re){var ie=i&c,oe=i&Y,fe=i&ae,ve=i&(U|S),we=i&Z,He=fe?r:Jn(t);function Ee(){for(var Ge=arguments.length,Qe=J(Ge),Ir=Ge;Ir--;)Qe[Ir]=arguments[Ir];if(ve)var ar=Sn(Ee),xr=Gp(Qe,ar);if(u&&(Qe=Sh(Qe,u,d,ve)),m&&(Qe=Ih(Qe,m,I,ve)),Ge-=xr,ve&&Ge<re){var Tt=Di(Qe,ar);return Nh(t,i,fo,Ee.placeholder,o,Qe,Tt,P,B,re-Ge)}var Vr=oe?o:this,pi=fe?Vr[t]:t;return Ge=Qe.length,P?Qe=t1(Qe,P):we&&Ge>1&&Qe.reverse(),ie&&B<Ge&&(Qe.length=B),this&&this!==Xe&&this instanceof Ee&&(pi=He||Jn(pi)),pi.apply(Vr,Qe)}return Ee}function Rh(t,i){return function(o,u){return u0(o,t,i(u),{})}}function lo(t,i){return function(o,u){var d;if(o===r&&u===r)return i;if(o!==r&&(d=o),u!==r){if(d===r)return u;typeof o=="string"||typeof u=="string"?(o=Dr(o),u=Dr(u)):(o=yh(o),u=yh(u)),d=t(o,u)}return d}}function Xa(t){return hi(function(i){return i=mt(i,Er(be())),Ke(function(o){var u=this;return t(i,function(d){return Kt(d,u,o)})})})}function po(t,i){i=i===r?" ":Dr(i);var o=i.length;if(o<2)return o?Ka(i,t):i;var u=Ka(i,Zs(t/yn(i)));return gn(i)?Ai(qr(u),0,t).join(""):u.slice(0,t)}function U0(t,i,o,u){var d=i&Y,m=Jn(t);function I(){for(var P=-1,B=arguments.length,re=-1,ie=u.length,oe=J(ie+B),fe=this&&this!==Xe&&this instanceof I?m:t;++re<ie;)oe[re]=u[re];for(;B--;)oe[re++]=arguments[++P];return Kt(fe,d?o:this,oe)}return I}function Th(t){return function(i,o,u){return u&&typeof u!="number"&&or(i,o,u)&&(o=u=r),i=di(i),o===r?(o=i,i=0):o=di(o),u=u===r?i<o?1:-1:di(u),w0(i,o,u,t)}}function go(t){return function(i,o){return typeof i=="string"&&typeof o=="string"||(i=Ur(i),o=Ur(o)),t(i,o)}}function Nh(t,i,o,u,d,m,I,P,B,re){var ie=i&U,oe=ie?I:r,fe=ie?r:I,ve=ie?m:r,we=ie?r:m;i|=ie?O:b,i&=~(ie?b:O),i&T||(i&=~(Y|ae));var He=[t,i,d,ve,oe,we,fe,P,B,re],Ee=o.apply(r,He);return sc(t)&&Vh(Ee,He),Ee.placeholder=u,kh(Ee,t,i)}function Qa(t){var i=qt[t];return function(o,u){if(o=Ur(o),u=u==null?0:Qt(Me(u),292),u&&ku(o)){var d=(it(o)+"e").split("e"),m=i(d[0]+"e"+(+d[1]+u));return d=(it(m)+"e").split("e"),+(d[0]+"e"+(+d[1]-u))}return i(o)}}var $0=mn&&1/zs(new mn([,-0]))[1]==X?function(t){return new mn(t)}:bc;function Lh(t){return function(i){var o=Zt(i);return o==Ie?Aa(i):o==xe?eg(i):kp(i,t(i))}}function ui(t,i,o,u,d,m,I,P){var B=i&ae;if(!B&&typeof t!="function")throw new Rr(p);var re=u?u.length:0;if(re||(i&=~(O|b),u=d=r),I=I===r?I:zt(Me(I),0),P=P===r?P:Me(P),re-=d?d.length:0,i&b){var ie=u,oe=d;u=d=r}var fe=B?r:tc(t),ve=[t,i,o,u,d,ie,oe,m,I,P];if(fe&&Q0(ve,fe),t=ve[0],i=ve[1],o=ve[2],u=ve[3],d=ve[4],P=ve[9]=ve[9]===r?B?0:t.length:zt(ve[9]-re,0),!P&&i&(U|S)&&(i&=~(U|S)),!i||i==Y)var we=L0(t,i,o);else i==U||i==S?we=F0(t,i,P):(i==O||i==(Y|O))&&!d.length?we=U0(t,i,o,u):we=fo.apply(r,ve);var He=fe?ph:Vh;return kh(He(we,ve),t,i)}function Fh(t,i,o,u){return t===r||Kr(t,_n[o])&&!nt.call(u,o)?i:t}function Uh(t,i,o,u,d,m){return wt(t)&&wt(i)&&(m.set(i,t),ao(t,i,r,Uh,m),m.delete(i)),t}function M0(t){return Zn(t)?r:t}function $h(t,i,o,u,d,m){var I=o&R,P=t.length,B=i.length;if(P!=B&&!(I&&B>P))return!1;var re=m.get(t),ie=m.get(i);if(re&&ie)return re==i&&ie==t;var oe=-1,fe=!0,ve=o&k?new zi:r;for(m.set(t,i),m.set(i,t);++oe<P;){var we=t[oe],He=i[oe];if(u)var Ee=I?u(He,we,oe,i,t,m):u(we,He,oe,t,i,m);if(Ee!==r){if(Ee)continue;fe=!1;break}if(ve){if(!Ea(i,function(Ge,Qe){if(!jn(ve,Qe)&&(we===Ge||d(we,Ge,o,u,m)))return ve.push(Qe)})){fe=!1;break}}else if(!(we===He||d(we,He,o,u,m))){fe=!1;break}}return m.delete(t),m.delete(i),fe}function j0(t,i,o,u,d,m,I){switch(o){case Ce:if(t.byteLength!=i.byteLength||t.byteOffset!=i.byteOffset)return!1;t=t.buffer,i=i.buffer;case Se:return!(t.byteLength!=i.byteLength||!m(new Ys(t),new Ys(i)));case q:case L:case qe:return Kr(+t,+i);case C:return t.name==i.name&&t.message==i.message;case je:case Ne:return t==i+"";case Ie:var P=Aa;case xe:var B=u&R;if(P||(P=zs),t.size!=i.size&&!B)return!1;var re=I.get(t);if(re)return re==i;u|=k,I.set(t,i);var ie=$h(P(t),P(i),u,d,m,I);return I.delete(t),ie;case Le:if(Kn)return Kn.call(t)==Kn.call(i)}return!1}function B0(t,i,o,u,d,m){var I=o&R,P=Za(t),B=P.length,re=Za(i),ie=re.length;if(B!=ie&&!I)return!1;for(var oe=B;oe--;){var fe=P[oe];if(!(I?fe in i:nt.call(i,fe)))return!1}var ve=m.get(t),we=m.get(i);if(ve&&we)return ve==i&&we==t;var He=!0;m.set(t,i),m.set(i,t);for(var Ee=I;++oe<B;){fe=P[oe];var Ge=t[fe],Qe=i[fe];if(u)var Ir=I?u(Qe,Ge,fe,i,t,m):u(Ge,Qe,fe,t,i,m);if(!(Ir===r?Ge===Qe||d(Ge,Qe,o,u,m):Ir)){He=!1;break}Ee||(Ee=fe=="constructor")}if(He&&!Ee){var ar=t.constructor,xr=i.constructor;ar!=xr&&"constructor"in t&&"constructor"in i&&!(typeof ar=="function"&&ar instanceof ar&&typeof xr=="function"&&xr instanceof xr)&&(He=!1)}return m.delete(t),m.delete(i),He}function hi(t){return ac(zh(t,r,Qh),t+"")}function Za(t){return ih(t,Vt,ic)}function ec(t){return ih(t,yr,Mh)}var tc=to?function(t){return to.get(t)}:bc;function yo(t){for(var i=t.name+"",o=bn[i],u=nt.call(bn,i)?o.length:0;u--;){var d=o[u],m=d.func;if(m==null||m==t)return d.name}return i}function Sn(t){var i=nt.call(_,"placeholder")?_:t;return i.placeholder}function be(){var t=_.iteratee||_c;return t=t===_c?oh:t,arguments.length?t(arguments[0],arguments[1]):t}function vo(t,i){var o=t.__data__;return W0(i)?o[typeof i=="string"?"string":"hash"]:o.map}function rc(t){for(var i=Vt(t),o=i.length;o--;){var u=i[o],d=t[u];i[o]=[u,d,Hh(d)]}return i}function ki(t,i){var o=Xp(t,i);return sh(o)?o:r}function H0(t){var i=nt.call(t,Hi),o=t[Hi];try{t[Hi]=r;var u=!0}catch{}var d=Gs.call(t);return u&&(i?t[Hi]=o:delete t[Hi]),d}var ic=Pa?function(t){return t==null?[]:(t=ht(t),wi(Pa(t),function(i){return Ku.call(t,i)}))}:wc,Mh=Pa?function(t){for(var i=[];t;)Ei(i,ic(t)),t=Js(t);return i}:wc,Zt=sr;(Ra&&Zt(new Ra(new ArrayBuffer(1)))!=Ce||Hn&&Zt(new Hn)!=Ie||Ta&&Zt(Ta.resolve())!=gt||mn&&Zt(new mn)!=xe||qn&&Zt(new qn)!=Ae)&&(Zt=function(t){var i=sr(t),o=i==$e?t.constructor:r,u=o?Gi(o):"";if(u)switch(u){case Dg:return Ce;case Sg:return Ie;case Ig:return gt;case xg:return xe;case Og:return Ae}return i});function q0(t,i,o){for(var u=-1,d=o.length;++u<d;){var m=o[u],I=m.size;switch(m.type){case"drop":t+=I;break;case"dropRight":i-=I;break;case"take":i=Qt(i,t+I);break;case"takeRight":t=zt(t,i-I);break}}return{start:t,end:i}}function z0(t){var i=t.match(ft);return i?i[1].split($t):[]}function jh(t,i,o){i=Oi(i,t);for(var u=-1,d=i.length,m=!1;++u<d;){var I=Zr(i[u]);if(!(m=t!=null&&o(t,I)))break;t=t[I]}return m||++u!=d?m:(d=t==null?0:t.length,!!d&&So(d)&&fi(I,d)&&(Te(t)||Wi(t)))}function K0(t){var i=t.length,o=new t.constructor(i);return i&&typeof t[0]=="string"&&nt.call(t,"index")&&(o.index=t.index,o.input=t.input),o}function Bh(t){return typeof t.constructor=="function"&&!Xn(t)?wn(Js(t)):{}}function V0(t,i,o){var u=t.constructor;switch(i){case Se:return Ja(t);case q:case L:return new u(+t);case Ce:return A0(t,o);case ze:case Oe:case ke:case We:case et:case tt:case Je:case rr:case lr:return Eh(t,o);case Ie:return new u;case qe:case Ne:return new u(t);case je:return C0(t);case xe:return new u;case Le:return P0(t)}}function k0(t,i){var o=i.length;if(!o)return t;var u=o-1;return i[u]=(o>1?"& ":"")+i[u],i=i.join(o>2?", ":" "),t.replace(Ot,`{
/* [wrapped with `+i+`] */
`)}function G0(t){return Te(t)||Wi(t)||!!(Vu&&t&&t[Vu])}function fi(t,i){var o=typeof t;return i=i??W,!!i&&(o=="number"||o!="symbol"&&oa.test(t))&&t>-1&&t%1==0&&t<i}function or(t,i,o){if(!wt(o))return!1;var u=typeof i;return(u=="number"?gr(o)&&fi(i,o.length):u=="string"&&i in o)?Kr(o[i],t):!1}function nc(t,i){if(Te(t))return!1;var o=typeof t;return o=="number"||o=="symbol"||o=="boolean"||t==null||Sr(t)?!0:Lt.test(t)||!_t.test(t)||i!=null&&t in ht(i)}function W0(t){var i=typeof t;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?t!=="__proto__":t===null}function sc(t){var i=yo(t),o=_[i];if(typeof o!="function"||!(i in Ye.prototype))return!1;if(t===o)return!0;var u=tc(o);return!!u&&t===u[0]}function Y0(t){return!!Hu&&Hu in t}var J0=Vs?li:Ec;function Xn(t){var i=t&&t.constructor,o=typeof i=="function"&&i.prototype||_n;return t===o}function Hh(t){return t===t&&!wt(t)}function qh(t,i){return function(o){return o==null?!1:o[t]===i&&(i!==r||t in ht(o))}}function X0(t){var i=Eo(t,function(u){return o.size===D&&o.clear(),u}),o=i.cache;return i}function Q0(t,i){var o=t[1],u=i[1],d=o|u,m=d<(Y|ae|c),I=u==c&&o==U||u==c&&o==v&&t[7].length<=i[8]||u==(c|v)&&i[7].length<=i[8]&&o==U;if(!(m||I))return t;u&Y&&(t[2]=i[2],d|=o&Y?0:T);var P=i[3];if(P){var B=t[3];t[3]=B?Sh(B,P,i[4]):P,t[4]=B?Di(t[3],x):i[4]}return P=i[5],P&&(B=t[5],t[5]=B?Ih(B,P,i[6]):P,t[6]=B?Di(t[5],x):i[6]),P=i[7],P&&(t[7]=P),u&c&&(t[8]=t[8]==null?i[8]:Qt(t[8],i[8])),t[9]==null&&(t[9]=i[9]),t[0]=i[0],t[1]=d,t}function Z0(t){var i=[];if(t!=null)for(var o in ht(t))i.push(o);return i}function e1(t){return Gs.call(t)}function zh(t,i,o){return i=zt(i===r?t.length-1:i,0),function(){for(var u=arguments,d=-1,m=zt(u.length-i,0),I=J(m);++d<m;)I[d]=u[i+d];d=-1;for(var P=J(i+1);++d<i;)P[d]=u[d];return P[i]=o(I),Kt(t,this,P)}}function Kh(t,i){return i.length<2?t:Vi(t,Lr(i,0,-1))}function t1(t,i){for(var o=t.length,u=Qt(i.length,o),d=pr(t);u--;){var m=i[u];t[u]=fi(m,o)?d[m]:r}return t}function oc(t,i){if(!(i==="constructor"&&typeof t[i]=="function")&&i!="__proto__")return t[i]}var Vh=Gh(ph),Qn=yg||function(t,i){return Xe.setTimeout(t,i)},ac=Gh(S0);function kh(t,i,o){var u=i+"";return ac(t,k0(u,r1(z0(u),o)))}function Gh(t){var i=0,o=0;return function(){var u=bg(),d=ee-(u-o);if(o=u,d>0){if(++i>=z)return arguments[0]}else i=0;return t.apply(r,arguments)}}function _o(t,i){var o=-1,u=t.length,d=u-1;for(i=i===r?u:i;++o<i;){var m=za(o,d),I=t[m];t[m]=t[o],t[o]=I}return t.length=i,t}var Wh=X0(function(t){var i=[];return t.charCodeAt(0)===46&&i.push(""),t.replace(Ft,function(o,u,d,m){i.push(d?m.replace(ea,"$1"):u||o)}),i});function Zr(t){if(typeof t=="string"||Sr(t))return t;var i=t+"";return i=="0"&&1/t==-X?"-0":i}function Gi(t){if(t!=null){try{return ks.call(t)}catch{}try{return t+""}catch{}}return""}function r1(t,i){return Pr(_e,function(o){var u="_."+o[0];i&o[1]&&!Hs(t,u)&&t.push(u)}),t.sort()}function Yh(t){if(t instanceof Ye)return t.clone();var i=new Tr(t.__wrapped__,t.__chain__);return i.__actions__=pr(t.__actions__),i.__index__=t.__index__,i.__values__=t.__values__,i}function i1(t,i,o){(o?or(t,i,o):i===r)?i=1:i=zt(Me(i),0);var u=t==null?0:t.length;if(!u||i<1)return[];for(var d=0,m=0,I=J(Zs(u/i));d<u;)I[m++]=Lr(t,d,d+=i);return I}function n1(t){for(var i=-1,o=t==null?0:t.length,u=0,d=[];++i<o;){var m=t[i];m&&(d[u++]=m)}return d}function s1(){var t=arguments.length;if(!t)return[];for(var i=J(t-1),o=arguments[0],u=t;u--;)i[u-1]=arguments[u];return Ei(Te(o)?pr(o):[o],Yt(i,1))}var o1=Ke(function(t,i){return Rt(t)?kn(t,Yt(i,1,Rt,!0)):[]}),a1=Ke(function(t,i){var o=Fr(i);return Rt(o)&&(o=r),Rt(t)?kn(t,Yt(i,1,Rt,!0),be(o,2)):[]}),c1=Ke(function(t,i){var o=Fr(i);return Rt(o)&&(o=r),Rt(t)?kn(t,Yt(i,1,Rt,!0),r,o):[]});function u1(t,i,o){var u=t==null?0:t.length;return u?(i=o||i===r?1:Me(i),Lr(t,i<0?0:i,u)):[]}function h1(t,i,o){var u=t==null?0:t.length;return u?(i=o||i===r?1:Me(i),i=u-i,Lr(t,0,i<0?0:i)):[]}function f1(t,i){return t&&t.length?uo(t,be(i,3),!0,!0):[]}function l1(t,i){return t&&t.length?uo(t,be(i,3),!0):[]}function d1(t,i,o,u){var d=t==null?0:t.length;return d?(o&&typeof o!="number"&&or(t,i,o)&&(o=0,u=d),s0(t,i,o,u)):[]}function Jh(t,i,o){var u=t==null?0:t.length;if(!u)return-1;var d=o==null?0:Me(o);return d<0&&(d=zt(u+d,0)),qs(t,be(i,3),d)}function Xh(t,i,o){var u=t==null?0:t.length;if(!u)return-1;var d=u-1;return o!==r&&(d=Me(o),d=o<0?zt(u+d,0):Qt(d,u-1)),qs(t,be(i,3),d,!0)}function Qh(t){var i=t==null?0:t.length;return i?Yt(t,1):[]}function p1(t){var i=t==null?0:t.length;return i?Yt(t,X):[]}function g1(t,i){var o=t==null?0:t.length;return o?(i=i===r?1:Me(i),Yt(t,i)):[]}function y1(t){for(var i=-1,o=t==null?0:t.length,u={};++i<o;){var d=t[i];u[d[0]]=d[1]}return u}function Zh(t){return t&&t.length?t[0]:r}function v1(t,i,o){var u=t==null?0:t.length;if(!u)return-1;var d=o==null?0:Me(o);return d<0&&(d=zt(u+d,0)),pn(t,i,d)}function _1(t){var i=t==null?0:t.length;return i?Lr(t,0,-1):[]}var m1=Ke(function(t){var i=mt(t,Wa);return i.length&&i[0]===t[0]?Ma(i):[]}),b1=Ke(function(t){var i=Fr(t),o=mt(t,Wa);return i===Fr(o)?i=r:o.pop(),o.length&&o[0]===t[0]?Ma(o,be(i,2)):[]}),w1=Ke(function(t){var i=Fr(t),o=mt(t,Wa);return i=typeof i=="function"?i:r,i&&o.pop(),o.length&&o[0]===t[0]?Ma(o,r,i):[]});function E1(t,i){return t==null?"":_g.call(t,i)}function Fr(t){var i=t==null?0:t.length;return i?t[i-1]:r}function D1(t,i,o){var u=t==null?0:t.length;if(!u)return-1;var d=u;return o!==r&&(d=Me(o),d=d<0?zt(u+d,0):Qt(d,u-1)),i===i?rg(t,i,d):qs(t,Nu,d,!0)}function S1(t,i){return t&&t.length?hh(t,Me(i)):r}var I1=Ke(ef);function ef(t,i){return t&&t.length&&i&&i.length?qa(t,i):t}function x1(t,i,o){return t&&t.length&&i&&i.length?qa(t,i,be(o,2)):t}function O1(t,i,o){return t&&t.length&&i&&i.length?qa(t,i,r,o):t}var A1=hi(function(t,i){var o=t==null?0:t.length,u=La(t,i);return dh(t,mt(i,function(d){return fi(d,o)?+d:d}).sort(Dh)),u});function C1(t,i){var o=[];if(!(t&&t.length))return o;var u=-1,d=[],m=t.length;for(i=be(i,3);++u<m;){var I=t[u];i(I,u,t)&&(o.push(I),d.push(u))}return dh(t,d),o}function cc(t){return t==null?t:Eg.call(t)}function P1(t,i,o){var u=t==null?0:t.length;return u?(o&&typeof o!="number"&&or(t,i,o)?(i=0,o=u):(i=i==null?0:Me(i),o=o===r?u:Me(o)),Lr(t,i,o)):[]}function R1(t,i){return co(t,i)}function T1(t,i,o){return Va(t,i,be(o,2))}function N1(t,i){var o=t==null?0:t.length;if(o){var u=co(t,i);if(u<o&&Kr(t[u],i))return u}return-1}function L1(t,i){return co(t,i,!0)}function F1(t,i,o){return Va(t,i,be(o,2),!0)}function U1(t,i){var o=t==null?0:t.length;if(o){var u=co(t,i,!0)-1;if(Kr(t[u],i))return u}return-1}function $1(t){return t&&t.length?gh(t):[]}function M1(t,i){return t&&t.length?gh(t,be(i,2)):[]}function j1(t){var i=t==null?0:t.length;return i?Lr(t,1,i):[]}function B1(t,i,o){return t&&t.length?(i=o||i===r?1:Me(i),Lr(t,0,i<0?0:i)):[]}function H1(t,i,o){var u=t==null?0:t.length;return u?(i=o||i===r?1:Me(i),i=u-i,Lr(t,i<0?0:i,u)):[]}function q1(t,i){return t&&t.length?uo(t,be(i,3),!1,!0):[]}function z1(t,i){return t&&t.length?uo(t,be(i,3)):[]}var K1=Ke(function(t){return xi(Yt(t,1,Rt,!0))}),V1=Ke(function(t){var i=Fr(t);return Rt(i)&&(i=r),xi(Yt(t,1,Rt,!0),be(i,2))}),k1=Ke(function(t){var i=Fr(t);return i=typeof i=="function"?i:r,xi(Yt(t,1,Rt,!0),r,i)});function G1(t){return t&&t.length?xi(t):[]}function W1(t,i){return t&&t.length?xi(t,be(i,2)):[]}function Y1(t,i){return i=typeof i=="function"?i:r,t&&t.length?xi(t,r,i):[]}function uc(t){if(!(t&&t.length))return[];var i=0;return t=wi(t,function(o){if(Rt(o))return i=zt(o.length,i),!0}),xa(i,function(o){return mt(t,Da(o))})}function tf(t,i){if(!(t&&t.length))return[];var o=uc(t);return i==null?o:mt(o,function(u){return Kt(i,r,u)})}var J1=Ke(function(t,i){return Rt(t)?kn(t,i):[]}),X1=Ke(function(t){return Ga(wi(t,Rt))}),Q1=Ke(function(t){var i=Fr(t);return Rt(i)&&(i=r),Ga(wi(t,Rt),be(i,2))}),Z1=Ke(function(t){var i=Fr(t);return i=typeof i=="function"?i:r,Ga(wi(t,Rt),r,i)}),ey=Ke(uc);function ty(t,i){return mh(t||[],i||[],Vn)}function ry(t,i){return mh(t||[],i||[],Yn)}var iy=Ke(function(t){var i=t.length,o=i>1?t[i-1]:r;return o=typeof o=="function"?(t.pop(),o):r,tf(t,o)});function rf(t){var i=_(t);return i.__chain__=!0,i}function ny(t,i){return i(t),t}function mo(t,i){return i(t)}var sy=hi(function(t){var i=t.length,o=i?t[0]:0,u=this.__wrapped__,d=function(m){return La(m,t)};return i>1||this.__actions__.length||!(u instanceof Ye)||!fi(o)?this.thru(d):(u=u.slice(o,+o+(i?1:0)),u.__actions__.push({func:mo,args:[d],thisArg:r}),new Tr(u,this.__chain__).thru(function(m){return i&&!m.length&&m.push(r),m}))});function oy(){return rf(this)}function ay(){return new Tr(this.value(),this.__chain__)}function cy(){this.__values__===r&&(this.__values__=vf(this.value()));var t=this.__index__>=this.__values__.length,i=t?r:this.__values__[this.__index__++];return{done:t,value:i}}function uy(){return this}function hy(t){for(var i,o=this;o instanceof io;){var u=Yh(o);u.__index__=0,u.__values__=r,i?d.__wrapped__=u:i=u;var d=u;o=o.__wrapped__}return d.__wrapped__=t,i}function fy(){var t=this.__wrapped__;if(t instanceof Ye){var i=t;return this.__actions__.length&&(i=new Ye(this)),i=i.reverse(),i.__actions__.push({func:mo,args:[cc],thisArg:r}),new Tr(i,this.__chain__)}return this.thru(cc)}function ly(){return _h(this.__wrapped__,this.__actions__)}var dy=ho(function(t,i,o){nt.call(t,o)?++t[o]:ci(t,o,1)});function py(t,i,o){var u=Te(t)?Ru:n0;return o&&or(t,i,o)&&(i=r),u(t,be(i,3))}function gy(t,i){var o=Te(t)?wi:th;return o(t,be(i,3))}var yy=Ch(Jh),vy=Ch(Xh);function _y(t,i){return Yt(bo(t,i),1)}function my(t,i){return Yt(bo(t,i),X)}function by(t,i,o){return o=o===r?1:Me(o),Yt(bo(t,i),o)}function nf(t,i){var o=Te(t)?Pr:Ii;return o(t,be(i,3))}function sf(t,i){var o=Te(t)?jp:eh;return o(t,be(i,3))}var wy=ho(function(t,i,o){nt.call(t,o)?t[o].push(i):ci(t,o,[i])});function Ey(t,i,o,u){t=gr(t)?t:xn(t),o=o&&!u?Me(o):0;var d=t.length;return o<0&&(o=zt(d+o,0)),Io(t)?o<=d&&t.indexOf(i,o)>-1:!!d&&pn(t,i,o)>-1}var Dy=Ke(function(t,i,o){var u=-1,d=typeof i=="function",m=gr(t)?J(t.length):[];return Ii(t,function(I){m[++u]=d?Kt(i,I,o):Gn(I,i,o)}),m}),Sy=ho(function(t,i,o){ci(t,o,i)});function bo(t,i){var o=Te(t)?mt:ah;return o(t,be(i,3))}function Iy(t,i,o,u){return t==null?[]:(Te(i)||(i=i==null?[]:[i]),o=u?r:o,Te(o)||(o=o==null?[]:[o]),fh(t,i,o))}var xy=ho(function(t,i,o){t[o?0:1].push(i)},function(){return[[],[]]});function Oy(t,i,o){var u=Te(t)?wa:Fu,d=arguments.length<3;return u(t,be(i,4),o,d,Ii)}function Ay(t,i,o){var u=Te(t)?Bp:Fu,d=arguments.length<3;return u(t,be(i,4),o,d,eh)}function Cy(t,i){var o=Te(t)?wi:th;return o(t,Do(be(i,3)))}function Py(t){var i=Te(t)?Ju:E0;return i(t)}function Ry(t,i,o){(o?or(t,i,o):i===r)?i=1:i=Me(i);var u=Te(t)?Zg:D0;return u(t,i)}function Ty(t){var i=Te(t)?e0:I0;return i(t)}function Ny(t){if(t==null)return 0;if(gr(t))return Io(t)?yn(t):t.length;var i=Zt(t);return i==Ie||i==xe?t.size:Ba(t).length}function Ly(t,i,o){var u=Te(t)?Ea:x0;return o&&or(t,i,o)&&(i=r),u(t,be(i,3))}var Fy=Ke(function(t,i){if(t==null)return[];var o=i.length;return o>1&&or(t,i[0],i[1])?i=[]:o>2&&or(i[0],i[1],i[2])&&(i=[i[0]]),fh(t,Yt(i,1),[])}),wo=gg||function(){return Xe.Date.now()};function Uy(t,i){if(typeof i!="function")throw new Rr(p);return t=Me(t),function(){if(--t<1)return i.apply(this,arguments)}}function of(t,i,o){return i=o?r:i,i=t&&i==null?t.length:i,ui(t,c,r,r,r,r,i)}function af(t,i){var o;if(typeof i!="function")throw new Rr(p);return t=Me(t),function(){return--t>0&&(o=i.apply(this,arguments)),t<=1&&(i=r),o}}var hc=Ke(function(t,i,o){var u=Y;if(o.length){var d=Di(o,Sn(hc));u|=O}return ui(t,u,i,o,d)}),cf=Ke(function(t,i,o){var u=Y|ae;if(o.length){var d=Di(o,Sn(cf));u|=O}return ui(i,u,t,o,d)});function uf(t,i,o){i=o?r:i;var u=ui(t,U,r,r,r,r,r,i);return u.placeholder=uf.placeholder,u}function hf(t,i,o){i=o?r:i;var u=ui(t,S,r,r,r,r,r,i);return u.placeholder=hf.placeholder,u}function ff(t,i,o){var u,d,m,I,P,B,re=0,ie=!1,oe=!1,fe=!0;if(typeof t!="function")throw new Rr(p);i=Ur(i)||0,wt(o)&&(ie=!!o.leading,oe="maxWait"in o,m=oe?zt(Ur(o.maxWait)||0,i):m,fe="trailing"in o?!!o.trailing:fe);function ve(Tt){var Vr=u,pi=d;return u=d=r,re=Tt,I=t.apply(pi,Vr),I}function we(Tt){return re=Tt,P=Qn(Ge,i),ie?ve(Tt):I}function He(Tt){var Vr=Tt-B,pi=Tt-re,Pf=i-Vr;return oe?Qt(Pf,m-pi):Pf}function Ee(Tt){var Vr=Tt-B,pi=Tt-re;return B===r||Vr>=i||Vr<0||oe&&pi>=m}function Ge(){var Tt=wo();if(Ee(Tt))return Qe(Tt);P=Qn(Ge,He(Tt))}function Qe(Tt){return P=r,fe&&u?ve(Tt):(u=d=r,I)}function Ir(){P!==r&&bh(P),re=0,u=B=d=P=r}function ar(){return P===r?I:Qe(wo())}function xr(){var Tt=wo(),Vr=Ee(Tt);if(u=arguments,d=this,B=Tt,Vr){if(P===r)return we(B);if(oe)return bh(P),P=Qn(Ge,i),ve(B)}return P===r&&(P=Qn(Ge,i)),I}return xr.cancel=Ir,xr.flush=ar,xr}var $y=Ke(function(t,i){return Zu(t,1,i)}),My=Ke(function(t,i,o){return Zu(t,Ur(i)||0,o)});function jy(t){return ui(t,Z)}function Eo(t,i){if(typeof t!="function"||i!=null&&typeof i!="function")throw new Rr(p);var o=function(){var u=arguments,d=i?i.apply(this,u):u[0],m=o.cache;if(m.has(d))return m.get(d);var I=t.apply(this,u);return o.cache=m.set(d,I)||m,I};return o.cache=new(Eo.Cache||ai),o}Eo.Cache=ai;function Do(t){if(typeof t!="function")throw new Rr(p);return function(){var i=arguments;switch(i.length){case 0:return!t.call(this);case 1:return!t.call(this,i[0]);case 2:return!t.call(this,i[0],i[1]);case 3:return!t.call(this,i[0],i[1],i[2])}return!t.apply(this,i)}}function By(t){return af(2,t)}var Hy=O0(function(t,i){i=i.length==1&&Te(i[0])?mt(i[0],Er(be())):mt(Yt(i,1),Er(be()));var o=i.length;return Ke(function(u){for(var d=-1,m=Qt(u.length,o);++d<m;)u[d]=i[d].call(this,u[d]);return Kt(t,this,u)})}),fc=Ke(function(t,i){var o=Di(i,Sn(fc));return ui(t,O,r,i,o)}),lf=Ke(function(t,i){var o=Di(i,Sn(lf));return ui(t,b,r,i,o)}),qy=hi(function(t,i){return ui(t,v,r,r,r,i)});function zy(t,i){if(typeof t!="function")throw new Rr(p);return i=i===r?i:Me(i),Ke(t,i)}function Ky(t,i){if(typeof t!="function")throw new Rr(p);return i=i==null?0:zt(Me(i),0),Ke(function(o){var u=o[i],d=Ai(o,0,i);return u&&Ei(d,u),Kt(t,this,d)})}function Vy(t,i,o){var u=!0,d=!0;if(typeof t!="function")throw new Rr(p);return wt(o)&&(u="leading"in o?!!o.leading:u,d="trailing"in o?!!o.trailing:d),ff(t,i,{leading:u,maxWait:i,trailing:d})}function ky(t){return of(t,1)}function Gy(t,i){return fc(Ya(i),t)}function Wy(){if(!arguments.length)return[];var t=arguments[0];return Te(t)?t:[t]}function Yy(t){return Nr(t,F)}function Jy(t,i){return i=typeof i=="function"?i:r,Nr(t,F,i)}function Xy(t){return Nr(t,N|F)}function Qy(t,i){return i=typeof i=="function"?i:r,Nr(t,N|F,i)}function Zy(t,i){return i==null||Qu(t,i,Vt(i))}function Kr(t,i){return t===i||t!==t&&i!==i}var ev=go($a),tv=go(function(t,i){return t>=i}),Wi=nh(function(){return arguments}())?nh:function(t){return At(t)&&nt.call(t,"callee")&&!Ku.call(t,"callee")},Te=J.isArray,rv=nr?Er(nr):h0;function gr(t){return t!=null&&So(t.length)&&!li(t)}function Rt(t){return At(t)&&gr(t)}function iv(t){return t===!0||t===!1||At(t)&&sr(t)==q}var Ci=vg||Ec,nv=Hr?Er(Hr):f0;function sv(t){return At(t)&&t.nodeType===1&&!Zn(t)}function ov(t){if(t==null)return!0;if(gr(t)&&(Te(t)||typeof t=="string"||typeof t.splice=="function"||Ci(t)||In(t)||Wi(t)))return!t.length;var i=Zt(t);if(i==Ie||i==xe)return!t.size;if(Xn(t))return!Ba(t).length;for(var o in t)if(nt.call(t,o))return!1;return!0}function av(t,i){return Wn(t,i)}function cv(t,i,o){o=typeof o=="function"?o:r;var u=o?o(t,i):r;return u===r?Wn(t,i,r,o):!!u}function lc(t){if(!At(t))return!1;var i=sr(t);return i==C||i==h||typeof t.message=="string"&&typeof t.name=="string"&&!Zn(t)}function uv(t){return typeof t=="number"&&ku(t)}function li(t){if(!wt(t))return!1;var i=sr(t);return i==ue||i==de||i==K||i==yt}function df(t){return typeof t=="number"&&t==Me(t)}function So(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=W}function wt(t){var i=typeof t;return t!=null&&(i=="object"||i=="function")}function At(t){return t!=null&&typeof t=="object"}var pf=Cr?Er(Cr):d0;function hv(t,i){return t===i||ja(t,i,rc(i))}function fv(t,i,o){return o=typeof o=="function"?o:r,ja(t,i,rc(i),o)}function lv(t){return gf(t)&&t!=+t}function dv(t){if(J0(t))throw new Pe(f);return sh(t)}function pv(t){return t===null}function gv(t){return t==null}function gf(t){return typeof t=="number"||At(t)&&sr(t)==qe}function Zn(t){if(!At(t)||sr(t)!=$e)return!1;var i=Js(t);if(i===null)return!0;var o=nt.call(i,"constructor")&&i.constructor;return typeof o=="function"&&o instanceof o&&ks.call(o)==fg}var dc=Jr?Er(Jr):p0;function yv(t){return df(t)&&t>=-W&&t<=W}var yf=Mn?Er(Mn):g0;function Io(t){return typeof t=="string"||!Te(t)&&At(t)&&sr(t)==Ne}function Sr(t){return typeof t=="symbol"||At(t)&&sr(t)==Le}var In=Bi?Er(Bi):y0;function vv(t){return t===r}function _v(t){return At(t)&&Zt(t)==Ae}function mv(t){return At(t)&&sr(t)==Fe}var bv=go(Ha),wv=go(function(t,i){return t<=i});function vf(t){if(!t)return[];if(gr(t))return Io(t)?qr(t):pr(t);if(Bn&&t[Bn])return Zp(t[Bn]());var i=Zt(t),o=i==Ie?Aa:i==xe?zs:xn;return o(t)}function di(t){if(!t)return t===0?t:0;if(t=Ur(t),t===X||t===-X){var i=t<0?-1:1;return i*H}return t===t?t:0}function Me(t){var i=di(t),o=i%1;return i===i?o?i-o:i:0}function _f(t){return t?Ki(Me(t),0,ne):0}function Ur(t){if(typeof t=="number")return t;if(Sr(t))return Q;if(wt(t)){var i=typeof t.valueOf=="function"?t.valueOf():t;t=wt(i)?i+"":i}if(typeof t!="string")return t===0?t:+t;t=Uu(t);var o=ia.test(t);return o||sa.test(t)?Re(t.slice(2),o?2:8):ra.test(t)?Q:+t}function mf(t){return Qr(t,yr(t))}function Ev(t){return t?Ki(Me(t),-W,W):t===0?t:0}function it(t){return t==null?"":Dr(t)}var Dv=En(function(t,i){if(Xn(i)||gr(i)){Qr(i,Vt(i),t);return}for(var o in i)nt.call(i,o)&&Vn(t,o,i[o])}),bf=En(function(t,i){Qr(i,yr(i),t)}),xo=En(function(t,i,o,u){Qr(i,yr(i),t,u)}),Sv=En(function(t,i,o,u){Qr(i,Vt(i),t,u)}),Iv=hi(La);function xv(t,i){var o=wn(t);return i==null?o:Xu(o,i)}var Ov=Ke(function(t,i){t=ht(t);var o=-1,u=i.length,d=u>2?i[2]:r;for(d&&or(i[0],i[1],d)&&(u=1);++o<u;)for(var m=i[o],I=yr(m),P=-1,B=I.length;++P<B;){var re=I[P],ie=t[re];(ie===r||Kr(ie,_n[re])&&!nt.call(t,re))&&(t[re]=m[re])}return t}),Av=Ke(function(t){return t.push(r,Uh),Kt(wf,r,t)});function Cv(t,i){return Tu(t,be(i,3),Xr)}function Pv(t,i){return Tu(t,be(i,3),Ua)}function Rv(t,i){return t==null?t:Fa(t,be(i,3),yr)}function Tv(t,i){return t==null?t:rh(t,be(i,3),yr)}function Nv(t,i){return t&&Xr(t,be(i,3))}function Lv(t,i){return t&&Ua(t,be(i,3))}function Fv(t){return t==null?[]:oo(t,Vt(t))}function Uv(t){return t==null?[]:oo(t,yr(t))}function pc(t,i,o){var u=t==null?r:Vi(t,i);return u===r?o:u}function $v(t,i){return t!=null&&jh(t,i,o0)}function gc(t,i){return t!=null&&jh(t,i,a0)}var Mv=Rh(function(t,i,o){i!=null&&typeof i.toString!="function"&&(i=Gs.call(i)),t[i]=o},vc(vr)),jv=Rh(function(t,i,o){i!=null&&typeof i.toString!="function"&&(i=Gs.call(i)),nt.call(t,i)?t[i].push(o):t[i]=[o]},be),Bv=Ke(Gn);function Vt(t){return gr(t)?Yu(t):Ba(t)}function yr(t){return gr(t)?Yu(t,!0):v0(t)}function Hv(t,i){var o={};return i=be(i,3),Xr(t,function(u,d,m){ci(o,i(u,d,m),u)}),o}function qv(t,i){var o={};return i=be(i,3),Xr(t,function(u,d,m){ci(o,d,i(u,d,m))}),o}var zv=En(function(t,i,o){ao(t,i,o)}),wf=En(function(t,i,o,u){ao(t,i,o,u)}),Kv=hi(function(t,i){var o={};if(t==null)return o;var u=!1;i=mt(i,function(m){return m=Oi(m,t),u||(u=m.length>1),m}),Qr(t,ec(t),o),u&&(o=Nr(o,N|V|F,M0));for(var d=i.length;d--;)ka(o,i[d]);return o});function Vv(t,i){return Ef(t,Do(be(i)))}var kv=hi(function(t,i){return t==null?{}:m0(t,i)});function Ef(t,i){if(t==null)return{};var o=mt(ec(t),function(u){return[u]});return i=be(i),lh(t,o,function(u,d){return i(u,d[0])})}function Gv(t,i,o){i=Oi(i,t);var u=-1,d=i.length;for(d||(d=1,t=r);++u<d;){var m=t==null?r:t[Zr(i[u])];m===r&&(u=d,m=o),t=li(m)?m.call(t):m}return t}function Wv(t,i,o){return t==null?t:Yn(t,i,o)}function Yv(t,i,o,u){return u=typeof u=="function"?u:r,t==null?t:Yn(t,i,o,u)}var Df=Lh(Vt),Sf=Lh(yr);function Jv(t,i,o){var u=Te(t),d=u||Ci(t)||In(t);if(i=be(i,4),o==null){var m=t&&t.constructor;d?o=u?new m:[]:wt(t)?o=li(m)?wn(Js(t)):{}:o={}}return(d?Pr:Xr)(t,function(I,P,B){return i(o,I,P,B)}),o}function Xv(t,i){return t==null?!0:ka(t,i)}function Qv(t,i,o){return t==null?t:vh(t,i,Ya(o))}function Zv(t,i,o,u){return u=typeof u=="function"?u:r,t==null?t:vh(t,i,Ya(o),u)}function xn(t){return t==null?[]:Oa(t,Vt(t))}function e_(t){return t==null?[]:Oa(t,yr(t))}function t_(t,i,o){return o===r&&(o=i,i=r),o!==r&&(o=Ur(o),o=o===o?o:0),i!==r&&(i=Ur(i),i=i===i?i:0),Ki(Ur(t),i,o)}function r_(t,i,o){return i=di(i),o===r?(o=i,i=0):o=di(o),t=Ur(t),c0(t,i,o)}function i_(t,i,o){if(o&&typeof o!="boolean"&&or(t,i,o)&&(i=o=r),o===r&&(typeof i=="boolean"?(o=i,i=r):typeof t=="boolean"&&(o=t,t=r)),t===r&&i===r?(t=0,i=1):(t=di(t),i===r?(i=t,t=0):i=di(i)),t>i){var u=t;t=i,i=u}if(o||t%1||i%1){var d=Gu();return Qt(t+d*(i-t+ct("1e-"+((d+"").length-1))),i)}return za(t,i)}var n_=Dn(function(t,i,o){return i=i.toLowerCase(),t+(o?If(i):i)});function If(t){return yc(it(t).toLowerCase())}function xf(t){return t=it(t),t&&t.replace(ni,Wp).replace(_a,"")}function s_(t,i,o){t=it(t),i=Dr(i);var u=t.length;o=o===r?u:Ki(Me(o),0,u);var d=o;return o-=i.length,o>=0&&t.slice(o,d)==i}function o_(t){return t=it(t),t&&vt.test(t)?t.replace(Fi,Yp):t}function a_(t){return t=it(t),t&&Ut.test(t)?t.replace(It,"\\$&"):t}var c_=Dn(function(t,i,o){return t+(o?"-":"")+i.toLowerCase()}),u_=Dn(function(t,i,o){return t+(o?" ":"")+i.toLowerCase()}),h_=Ah("toLowerCase");function f_(t,i,o){t=it(t),i=Me(i);var u=i?yn(t):0;if(!i||u>=i)return t;var d=(i-u)/2;return po(eo(d),o)+t+po(Zs(d),o)}function l_(t,i,o){t=it(t),i=Me(i);var u=i?yn(t):0;return i&&u<i?t+po(i-u,o):t}function d_(t,i,o){t=it(t),i=Me(i);var u=i?yn(t):0;return i&&u<i?po(i-u,o)+t:t}function p_(t,i,o){return o||i==null?i=0:i&&(i=+i),wg(it(t).replace(xt,""),i||0)}function g_(t,i,o){return(o?or(t,i,o):i===r)?i=1:i=Me(i),Ka(it(t),i)}function y_(){var t=arguments,i=it(t[0]);return t.length<3?i:i.replace(t[1],t[2])}var v_=Dn(function(t,i,o){return t+(o?"_":"")+i.toLowerCase()});function __(t,i,o){return o&&typeof o!="number"&&or(t,i,o)&&(i=o=r),o=o===r?ne:o>>>0,o?(t=it(t),t&&(typeof i=="string"||i!=null&&!dc(i))&&(i=Dr(i),!i&&gn(t))?Ai(qr(t),0,o):t.split(i,o)):[]}var m_=Dn(function(t,i,o){return t+(o?" ":"")+yc(i)});function b_(t,i,o){return t=it(t),o=o==null?0:Ki(Me(o),0,t.length),i=Dr(i),t.slice(o,o+i.length)==i}function w_(t,i,o){var u=_.templateSettings;o&&or(t,i,o)&&(i=r),t=it(t),i=xo({},i,u,Fh);var d=xo({},i.imports,u.imports,Fh),m=Vt(d),I=Oa(d,m),P,B,re=0,ie=i.interpolate||an,oe="__p += '",fe=Ca((i.escape||an).source+"|"+ie.source+"|"+(ie===bt?ta:an).source+"|"+(i.evaluate||an).source+"|$","g"),ve="//# sourceURL="+(nt.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ma+"]")+`
`;t.replace(fe,function(Ee,Ge,Qe,Ir,ar,xr){return Qe||(Qe=Ir),oe+=t.slice(re,xr).replace(aa,Jp),Ge&&(P=!0,oe+=`' +
__e(`+Ge+`) +
'`),ar&&(B=!0,oe+=`';
`+ar+`;
__p += '`),Qe&&(oe+=`' +
((__t = (`+Qe+`)) == null ? '' : __t) +
'`),re=xr+Ee.length,Ee}),oe+=`';
`;var we=nt.call(i,"variable")&&i.variable;if(!we)oe=`with (obj) {
`+oe+`
}
`;else if(Zo.test(we))throw new Pe(l);oe=(B?oe.replace(Wr,""):oe).replace(ir,"$1").replace(ii,"$1;"),oe="function("+(we||"obj")+`) {
`+(we?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(P?", __e = _.escape":"")+(B?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+oe+`return __p
}`;var He=Af(function(){return rt(m,ve+"return "+oe).apply(r,I)});if(He.source=oe,lc(He))throw He;return He}function E_(t){return it(t).toLowerCase()}function D_(t){return it(t).toUpperCase()}function S_(t,i,o){if(t=it(t),t&&(o||i===r))return Uu(t);if(!t||!(i=Dr(i)))return t;var u=qr(t),d=qr(i),m=$u(u,d),I=Mu(u,d)+1;return Ai(u,m,I).join("")}function I_(t,i,o){if(t=it(t),t&&(o||i===r))return t.slice(0,Bu(t)+1);if(!t||!(i=Dr(i)))return t;var u=qr(t),d=Mu(u,qr(i))+1;return Ai(u,0,d).join("")}function x_(t,i,o){if(t=it(t),t&&(o||i===r))return t.replace(xt,"");if(!t||!(i=Dr(i)))return t;var u=qr(t),d=$u(u,qr(i));return Ai(u,d).join("")}function O_(t,i){var o=A,u=M;if(wt(i)){var d="separator"in i?i.separator:d;o="length"in i?Me(i.length):o,u="omission"in i?Dr(i.omission):u}t=it(t);var m=t.length;if(gn(t)){var I=qr(t);m=I.length}if(o>=m)return t;var P=o-yn(u);if(P<1)return u;var B=I?Ai(I,0,P).join(""):t.slice(0,P);if(d===r)return B+u;if(I&&(P+=B.length-P),dc(d)){if(t.slice(P).search(d)){var re,ie=B;for(d.global||(d=Ca(d.source,it(Ar.exec(d))+"g")),d.lastIndex=0;re=d.exec(ie);)var oe=re.index;B=B.slice(0,oe===r?P:oe)}}else if(t.indexOf(Dr(d),P)!=P){var fe=B.lastIndexOf(d);fe>-1&&(B=B.slice(0,fe))}return B+u}function A_(t){return t=it(t),t&&Et.test(t)?t.replace(mi,ig):t}var C_=Dn(function(t,i,o){return t+(o?" ":"")+i.toUpperCase()}),yc=Ah("toUpperCase");function Of(t,i,o){return t=it(t),i=o?r:i,i===r?Qp(t)?og(t):zp(t):t.match(i)||[]}var Af=Ke(function(t,i){try{return Kt(t,r,i)}catch(o){return lc(o)?o:new Pe(o)}}),P_=hi(function(t,i){return Pr(i,function(o){o=Zr(o),ci(t,o,hc(t[o],t))}),t});function R_(t){var i=t==null?0:t.length,o=be();return t=i?mt(t,function(u){if(typeof u[1]!="function")throw new Rr(p);return[o(u[0]),u[1]]}):[],Ke(function(u){for(var d=-1;++d<i;){var m=t[d];if(Kt(m[0],this,u))return Kt(m[1],this,u)}})}function T_(t){return i0(Nr(t,N))}function vc(t){return function(){return t}}function N_(t,i){return t==null||t!==t?i:t}var L_=Ph(),F_=Ph(!0);function vr(t){return t}function _c(t){return oh(typeof t=="function"?t:Nr(t,N))}function U_(t){return ch(Nr(t,N))}function $_(t,i){return uh(t,Nr(i,N))}var M_=Ke(function(t,i){return function(o){return Gn(o,t,i)}}),j_=Ke(function(t,i){return function(o){return Gn(t,o,i)}});function mc(t,i,o){var u=Vt(i),d=oo(i,u);o==null&&!(wt(i)&&(d.length||!u.length))&&(o=i,i=t,t=this,d=oo(i,Vt(i)));var m=!(wt(o)&&"chain"in o)||!!o.chain,I=li(t);return Pr(d,function(P){var B=i[P];t[P]=B,I&&(t.prototype[P]=function(){var re=this.__chain__;if(m||re){var ie=t(this.__wrapped__),oe=ie.__actions__=pr(this.__actions__);return oe.push({func:B,args:arguments,thisArg:t}),ie.__chain__=re,ie}return B.apply(t,Ei([this.value()],arguments))})}),t}function B_(){return Xe._===this&&(Xe._=lg),this}function bc(){}function H_(t){return t=Me(t),Ke(function(i){return hh(i,t)})}var q_=Xa(mt),z_=Xa(Ru),K_=Xa(Ea);function Cf(t){return nc(t)?Da(Zr(t)):b0(t)}function V_(t){return function(i){return t==null?r:Vi(t,i)}}var k_=Th(),G_=Th(!0);function wc(){return[]}function Ec(){return!1}function W_(){return{}}function Y_(){return""}function J_(){return!0}function X_(t,i){if(t=Me(t),t<1||t>W)return[];var o=ne,u=Qt(t,ne);i=be(i),t-=ne;for(var d=xa(u,i);++o<t;)i(o);return d}function Q_(t){return Te(t)?mt(t,Zr):Sr(t)?[t]:pr(Wh(it(t)))}function Z_(t){var i=++hg;return it(t)+i}var em=lo(function(t,i){return t+i},0),tm=Qa("ceil"),rm=lo(function(t,i){return t/i},1),im=Qa("floor");function nm(t){return t&&t.length?so(t,vr,$a):r}function sm(t,i){return t&&t.length?so(t,be(i,2),$a):r}function om(t){return Lu(t,vr)}function am(t,i){return Lu(t,be(i,2))}function cm(t){return t&&t.length?so(t,vr,Ha):r}function um(t,i){return t&&t.length?so(t,be(i,2),Ha):r}var hm=lo(function(t,i){return t*i},1),fm=Qa("round"),lm=lo(function(t,i){return t-i},0);function dm(t){return t&&t.length?Ia(t,vr):0}function pm(t,i){return t&&t.length?Ia(t,be(i,2)):0}return _.after=Uy,_.ary=of,_.assign=Dv,_.assignIn=bf,_.assignInWith=xo,_.assignWith=Sv,_.at=Iv,_.before=af,_.bind=hc,_.bindAll=P_,_.bindKey=cf,_.castArray=Wy,_.chain=rf,_.chunk=i1,_.compact=n1,_.concat=s1,_.cond=R_,_.conforms=T_,_.constant=vc,_.countBy=dy,_.create=xv,_.curry=uf,_.curryRight=hf,_.debounce=ff,_.defaults=Ov,_.defaultsDeep=Av,_.defer=$y,_.delay=My,_.difference=o1,_.differenceBy=a1,_.differenceWith=c1,_.drop=u1,_.dropRight=h1,_.dropRightWhile=f1,_.dropWhile=l1,_.fill=d1,_.filter=gy,_.flatMap=_y,_.flatMapDeep=my,_.flatMapDepth=by,_.flatten=Qh,_.flattenDeep=p1,_.flattenDepth=g1,_.flip=jy,_.flow=L_,_.flowRight=F_,_.fromPairs=y1,_.functions=Fv,_.functionsIn=Uv,_.groupBy=wy,_.initial=_1,_.intersection=m1,_.intersectionBy=b1,_.intersectionWith=w1,_.invert=Mv,_.invertBy=jv,_.invokeMap=Dy,_.iteratee=_c,_.keyBy=Sy,_.keys=Vt,_.keysIn=yr,_.map=bo,_.mapKeys=Hv,_.mapValues=qv,_.matches=U_,_.matchesProperty=$_,_.memoize=Eo,_.merge=zv,_.mergeWith=wf,_.method=M_,_.methodOf=j_,_.mixin=mc,_.negate=Do,_.nthArg=H_,_.omit=Kv,_.omitBy=Vv,_.once=By,_.orderBy=Iy,_.over=q_,_.overArgs=Hy,_.overEvery=z_,_.overSome=K_,_.partial=fc,_.partialRight=lf,_.partition=xy,_.pick=kv,_.pickBy=Ef,_.property=Cf,_.propertyOf=V_,_.pull=I1,_.pullAll=ef,_.pullAllBy=x1,_.pullAllWith=O1,_.pullAt=A1,_.range=k_,_.rangeRight=G_,_.rearg=qy,_.reject=Cy,_.remove=C1,_.rest=zy,_.reverse=cc,_.sampleSize=Ry,_.set=Wv,_.setWith=Yv,_.shuffle=Ty,_.slice=P1,_.sortBy=Fy,_.sortedUniq=$1,_.sortedUniqBy=M1,_.split=__,_.spread=Ky,_.tail=j1,_.take=B1,_.takeRight=H1,_.takeRightWhile=q1,_.takeWhile=z1,_.tap=ny,_.throttle=Vy,_.thru=mo,_.toArray=vf,_.toPairs=Df,_.toPairsIn=Sf,_.toPath=Q_,_.toPlainObject=mf,_.transform=Jv,_.unary=ky,_.union=K1,_.unionBy=V1,_.unionWith=k1,_.uniq=G1,_.uniqBy=W1,_.uniqWith=Y1,_.unset=Xv,_.unzip=uc,_.unzipWith=tf,_.update=Qv,_.updateWith=Zv,_.values=xn,_.valuesIn=e_,_.without=J1,_.words=Of,_.wrap=Gy,_.xor=X1,_.xorBy=Q1,_.xorWith=Z1,_.zip=ey,_.zipObject=ty,_.zipObjectDeep=ry,_.zipWith=iy,_.entries=Df,_.entriesIn=Sf,_.extend=bf,_.extendWith=xo,mc(_,_),_.add=em,_.attempt=Af,_.camelCase=n_,_.capitalize=If,_.ceil=tm,_.clamp=t_,_.clone=Yy,_.cloneDeep=Xy,_.cloneDeepWith=Qy,_.cloneWith=Jy,_.conformsTo=Zy,_.deburr=xf,_.defaultTo=N_,_.divide=rm,_.endsWith=s_,_.eq=Kr,_.escape=o_,_.escapeRegExp=a_,_.every=py,_.find=yy,_.findIndex=Jh,_.findKey=Cv,_.findLast=vy,_.findLastIndex=Xh,_.findLastKey=Pv,_.floor=im,_.forEach=nf,_.forEachRight=sf,_.forIn=Rv,_.forInRight=Tv,_.forOwn=Nv,_.forOwnRight=Lv,_.get=pc,_.gt=ev,_.gte=tv,_.has=$v,_.hasIn=gc,_.head=Zh,_.identity=vr,_.includes=Ey,_.indexOf=v1,_.inRange=r_,_.invoke=Bv,_.isArguments=Wi,_.isArray=Te,_.isArrayBuffer=rv,_.isArrayLike=gr,_.isArrayLikeObject=Rt,_.isBoolean=iv,_.isBuffer=Ci,_.isDate=nv,_.isElement=sv,_.isEmpty=ov,_.isEqual=av,_.isEqualWith=cv,_.isError=lc,_.isFinite=uv,_.isFunction=li,_.isInteger=df,_.isLength=So,_.isMap=pf,_.isMatch=hv,_.isMatchWith=fv,_.isNaN=lv,_.isNative=dv,_.isNil=gv,_.isNull=pv,_.isNumber=gf,_.isObject=wt,_.isObjectLike=At,_.isPlainObject=Zn,_.isRegExp=dc,_.isSafeInteger=yv,_.isSet=yf,_.isString=Io,_.isSymbol=Sr,_.isTypedArray=In,_.isUndefined=vv,_.isWeakMap=_v,_.isWeakSet=mv,_.join=E1,_.kebabCase=c_,_.last=Fr,_.lastIndexOf=D1,_.lowerCase=u_,_.lowerFirst=h_,_.lt=bv,_.lte=wv,_.max=nm,_.maxBy=sm,_.mean=om,_.meanBy=am,_.min=cm,_.minBy=um,_.stubArray=wc,_.stubFalse=Ec,_.stubObject=W_,_.stubString=Y_,_.stubTrue=J_,_.multiply=hm,_.nth=S1,_.noConflict=B_,_.noop=bc,_.now=wo,_.pad=f_,_.padEnd=l_,_.padStart=d_,_.parseInt=p_,_.random=i_,_.reduce=Oy,_.reduceRight=Ay,_.repeat=g_,_.replace=y_,_.result=Gv,_.round=fm,_.runInContext=j,_.sample=Py,_.size=Ny,_.snakeCase=v_,_.some=Ly,_.sortedIndex=R1,_.sortedIndexBy=T1,_.sortedIndexOf=N1,_.sortedLastIndex=L1,_.sortedLastIndexBy=F1,_.sortedLastIndexOf=U1,_.startCase=m_,_.startsWith=b_,_.subtract=lm,_.sum=dm,_.sumBy=pm,_.template=w_,_.times=X_,_.toFinite=di,_.toInteger=Me,_.toLength=_f,_.toLower=E_,_.toNumber=Ur,_.toSafeInteger=Ev,_.toString=it,_.toUpper=D_,_.trim=S_,_.trimEnd=I_,_.trimStart=x_,_.truncate=O_,_.unescape=A_,_.uniqueId=Z_,_.upperCase=C_,_.upperFirst=yc,_.each=nf,_.eachRight=sf,_.first=Zh,mc(_,function(){var t={};return Xr(_,function(i,o){nt.call(_.prototype,o)||(t[o]=i)}),t}(),{chain:!1}),_.VERSION=s,Pr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){_[t].placeholder=_}),Pr(["drop","take"],function(t,i){Ye.prototype[t]=function(o){o=o===r?1:zt(Me(o),0);var u=this.__filtered__&&!i?new Ye(this):this.clone();return u.__filtered__?u.__takeCount__=Qt(o,u.__takeCount__):u.__views__.push({size:Qt(o,ne),type:t+(u.__dir__<0?"Right":"")}),u},Ye.prototype[t+"Right"]=function(o){return this.reverse()[t](o).reverse()}}),Pr(["filter","map","takeWhile"],function(t,i){var o=i+1,u=o==g||o==G;Ye.prototype[t]=function(d){var m=this.clone();return m.__iteratees__.push({iteratee:be(d,3),type:o}),m.__filtered__=m.__filtered__||u,m}}),Pr(["head","last"],function(t,i){var o="take"+(i?"Right":"");Ye.prototype[t]=function(){return this[o](1).value()[0]}}),Pr(["initial","tail"],function(t,i){var o="drop"+(i?"":"Right");Ye.prototype[t]=function(){return this.__filtered__?new Ye(this):this[o](1)}}),Ye.prototype.compact=function(){return this.filter(vr)},Ye.prototype.find=function(t){return this.filter(t).head()},Ye.prototype.findLast=function(t){return this.reverse().find(t)},Ye.prototype.invokeMap=Ke(function(t,i){return typeof t=="function"?new Ye(this):this.map(function(o){return Gn(o,t,i)})}),Ye.prototype.reject=function(t){return this.filter(Do(be(t)))},Ye.prototype.slice=function(t,i){t=Me(t);var o=this;return o.__filtered__&&(t>0||i<0)?new Ye(o):(t<0?o=o.takeRight(-t):t&&(o=o.drop(t)),i!==r&&(i=Me(i),o=i<0?o.dropRight(-i):o.take(i-t)),o)},Ye.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Ye.prototype.toArray=function(){return this.take(ne)},Xr(Ye.prototype,function(t,i){var o=/^(?:filter|find|map|reject)|While$/.test(i),u=/^(?:head|last)$/.test(i),d=_[u?"take"+(i=="last"?"Right":""):i],m=u||/^find/.test(i);d&&(_.prototype[i]=function(){var I=this.__wrapped__,P=u?[1]:arguments,B=I instanceof Ye,re=P[0],ie=B||Te(I),oe=function(Ge){var Qe=d.apply(_,Ei([Ge],P));return u&&fe?Qe[0]:Qe};ie&&o&&typeof re=="function"&&re.length!=1&&(B=ie=!1);var fe=this.__chain__,ve=!!this.__actions__.length,we=m&&!fe,He=B&&!ve;if(!m&&ie){I=He?I:new Ye(this);var Ee=t.apply(I,P);return Ee.__actions__.push({func:mo,args:[oe],thisArg:r}),new Tr(Ee,fe)}return we&&He?t.apply(this,P):(Ee=this.thru(oe),we?u?Ee.value()[0]:Ee.value():Ee)})}),Pr(["pop","push","shift","sort","splice","unshift"],function(t){var i=Ks[t],o=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",u=/^(?:pop|shift)$/.test(t);_.prototype[t]=function(){var d=arguments;if(u&&!this.__chain__){var m=this.value();return i.apply(Te(m)?m:[],d)}return this[o](function(I){return i.apply(Te(I)?I:[],d)})}}),Xr(Ye.prototype,function(t,i){var o=_[i];if(o){var u=o.name+"";nt.call(bn,u)||(bn[u]=[]),bn[u].push({name:i,func:o})}}),bn[fo(r,ae).name]=[{name:"wrapper",func:r}],Ye.prototype.clone=Ag,Ye.prototype.reverse=Cg,Ye.prototype.value=Pg,_.prototype.at=sy,_.prototype.chain=oy,_.prototype.commit=ay,_.prototype.next=cy,_.prototype.plant=hy,_.prototype.reverse=fy,_.prototype.toJSON=_.prototype.valueOf=_.prototype.value=ly,_.prototype.first=_.prototype.head,Bn&&(_.prototype[Bn]=uy),_},vn=ag();Pt?((Pt.exports=vn)._=vn,ut._=vn):Xe._=vn}).call(hs)})(iu,iu.exports);var jS=Object.defineProperty,BS=Object.defineProperties,HS=Object.getOwnPropertyDescriptors,ad=Object.getOwnPropertySymbols,qS=Object.prototype.hasOwnProperty,zS=Object.prototype.propertyIsEnumerable,cd=(n,e,r)=>e in n?jS(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Ao=(n,e)=>{for(var r in e||(e={}))qS.call(e,r)&&cd(n,r,e[r]);if(ad)for(var r of ad(e))zS.call(e,r)&&cd(n,r,e[r]);return n},KS=(n,e)=>BS(n,HS(e));function jr(n,e,r){let s;const a=nu(n);return e.rpcMap&&(s=e.rpcMap[a]),s||(s=`${MS}?chainId=eip155:${a}&projectId=${r}`),s}function nu(n){return n.includes("eip155")?Number(n.split(":")[1]):Number(n)}function VS(n,e){if(!e.includes(n))throw new Error(`Chain '${n}' not approved. Please use one of the following: ${e.toString()}`)}function kS(n){return n.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function GS(n,e){const r=Object.keys(e.namespaces).filter(a=>a.includes(n));if(!r.length)return[];const s=[];return r.forEach(a=>{const f=e.namespaces[a].accounts;s.push(...f)}),s}function WS(n,e={}){const r=ud(n),s=ud(e);return iu.exports.merge(r,s)}function ud(n){var e,r,s,a;const f={};if(!Rn(n))return f;for(const[p,l]of Object.entries(n)){const y=Qd(p)?[p]:l.chains,D=l.methods||[],x=l.events||[],N=l.rpcMap||{},V=To(p);f[V]=KS(Ao(Ao({},f[V]),l),{chains:Ac(y,(e=f[V])==null?void 0:e.chains),methods:Ac(D,(r=f[V])==null?void 0:r.methods),events:Ac(x,(s=f[V])==null?void 0:s.events),rpcMap:Ao(Ao({},N),(a=f[V])==null?void 0:a.rpcMap)})}return f}const on=(n,e)=>{const r=s=>{s.request!==e.request||s.topic!==e.topic||(n.events.removeListener("session_request_sent",r),YS(e))};n.on("session_request_sent",r)};function YS(n){if(typeof window<"u")try{const e=window.localStorage.getItem("WALLETCONNECT_DEEPLINK_CHOICE");if(e){const r=JSON.parse(e),s=r==null?void 0:r.href;if(typeof s=="string"){s.endsWith("/")&&s.slice(0,-1);const a=`${s}/wc?requestId=${n.id}&sessionTopic=${n.topic}`;window.open(a,"_self","noreferrer noopener")}}}catch(e){console.error(e)}}class JS{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?(on(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const s=r||jr(`${this.name}:${e}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;e[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||jr(e,this.namespace);return typeof s>"u"?void 0:new Ni(new sn(s))}}class XS{constructor(e){this.name="eip155",this.namespace=e.namespace,this.client=e.client,this.events=e.events,this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){var r;switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return this.handleSwitchChain(e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0"),null;case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?(on(this.client,e),await this.client.request(e)):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){const s=nu(e);if(!this.httpProviders[s]){const a=r||jr(`${this.name}:${s}`,this.namespace,this.client.core.projectId);if(!a)throw new Error(`No RPC url provided for chainId: ${s}`);this.setHttpProvider(s,a)}this.chainId=s,this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const s=r||jr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Ni(new sn(s))}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;const a=nu(r);e[a]=this.createHttpProvider(a,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}handleSwitchChain(e){const r=parseInt(e,16),s=`${this.name}:${r}`;VS(s,this.namespace.chains),this.setDefaultChain(`${r}`)}}class QS{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?(on(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const s=r||jr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;e[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||jr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Ni(new sn(s))}}class ZS{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?(on(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const s=r||jr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;e[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||jr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Ni(new sn(s))}}class e5{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?(on(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const s=r||this.getCardanoRPCUrl(e);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{const s=this.getCardanoRPCUrl(r);e[r]=this.createHttpProvider(r,s)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}getCardanoRPCUrl(e){const r=this.namespace.rpcMap;if(r)return r[e]}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||this.getCardanoRPCUrl(e);return typeof s>"u"?void 0:new Ni(new sn(s))}}class t5{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?(on(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const s=r||jr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;e[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||jr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Ni(new sn(s))}}class r5{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?(on(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const s=r||jr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;e[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||jr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Ni(new sn(s))}}var i5=Object.defineProperty,n5=Object.defineProperties,s5=Object.getOwnPropertyDescriptors,hd=Object.getOwnPropertySymbols,o5=Object.prototype.hasOwnProperty,a5=Object.prototype.propertyIsEnumerable,fd=(n,e,r)=>e in n?i5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Co=(n,e)=>{for(var r in e||(e={}))o5.call(e,r)&&fd(n,r,e[r]);if(hd)for(var r of hd(e))a5.call(e,r)&&fd(n,r,e[r]);return n},Bc=(n,e)=>n5(n,s5(e));class Cu{constructor(e){this.events=new Wt,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Ze.pino(Ze.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||sd}))}static async init(e){const r=new Cu(e);return await r.initialize(),r}async request(e,r){const[s,a]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Co({},e),chainId:`${s}:${a}`,topic:this.session.topic})}sendAsync(e,r,s){this.request(e,s).then(a=>r(null,a)).catch(a=>r(a,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Nt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let r=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(r>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:s,approval:a}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});s&&(this.uri=s,this.events.emit("display_uri",s)),await a().then(f=>{this.session=f}).catch(f=>{if(f.message!==Lp)throw f;r++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,r){try{const[s,a]=this.validateChain(e);this.getProvider(s).setDefaultChain(a,r)}catch(s){if(!/Please call connect/.test(s.message))throw s}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(_i(r)){for(const s of r)e.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await _S.init({logger:this.providerOpts.logger||sd,relayUrl:this.providerOpts.relayUrl||FS,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");[...new Set(Object.keys(this.session.namespaces).map(e=>To(e)))].forEach(e=>{if(!this.session)return;const r=GS(e,this.session),s=kS(r),a=WS(this.namespaces,this.optionalNamespaces),f=Bc(Co({},a[e]),{accounts:r,chains:s});switch(e){case"eip155":this.rpcProviders[e]=new XS({client:this.client,namespace:f,events:this.events});break;case"solana":this.rpcProviders[e]=new QS({client:this.client,namespace:f,events:this.events});break;case"cosmos":this.rpcProviders[e]=new ZS({client:this.client,namespace:f,events:this.events});break;case"polkadot":this.rpcProviders[e]=new JS({client:this.client,namespace:f,events:this.events});break;case"cip34":this.rpcProviders[e]=new e5({client:this.client,namespace:f,events:this.events});break;case"elrond":this.rpcProviders[e]=new t5({client:this.client,namespace:f,events:this.events});break;case"multiversx":this.rpcProviders[e]=new r5({client:this.client,namespace:f,events:this.events});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:r}=e,{event:s}=r;s.name==="accountsChanged"?this.events.emit("accountsChanged",s.data):s.name==="chainChanged"?this.onChainChanged(r.chainId):this.events.emit(s.name,s.data),this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var s;const{namespaces:a}=r,f=(s=this.client)==null?void 0:s.session.get(e);this.session=Bc(Co({},f),{namespaces:a}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Bc(Co({},Nt("USER_DISCONNECTED")),{data:e.topic}))}),this.on(Li.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r,optionalNamespaces:s,sessionProperties:a}=e;if(!r||!Object.keys(r).length)throw new Error("Namespaces must be not empty");this.namespaces=r,this.optionalNamespaces=s,this.sessionProperties=a,this.persist("namespaces",r),this.persist("optionalNamespaces",s)}validateChain(e){const[r,s]=(e==null?void 0:e.split(":"))||["",""];if(r&&!Object.keys(this.namespaces).map(p=>To(p)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&s)return[r,s];const a=To(Object.keys(this.namespaces)[0]),f=this.rpcProviders[a].getDefaultChain();return[a,f]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,r=!1){var s;const[a,f]=this.validateChain(e);r||this.getProvider(a).setDefaultChain(f),((s=this.namespaces[a])!=null?s:this.namespaces[`${a}:${f}`]).defaultChain=f,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",f)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0})}persist(e,r){this.client.core.storage.setItem(`${od}/${e}`,r)}async getFromStore(e){return await this.client.core.storage.getItem(`${od}/${e}`)}}const c5=Cu,u5="wc",h5="ethereum_provider",f5=`${u5}@${2}:${h5}:`,l5="https://rpc.walletconnect.com/v1/",su=["eth_sendTransaction","personal_sign"],A5=["eth_accounts","eth_requestAccounts","eth_call","eth_getBalance","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],ou=["chainChanged","accountsChanged"],C5=["message","disconnect","connect"];var d5=Object.defineProperty,p5=Object.defineProperties,g5=Object.getOwnPropertyDescriptors,ld=Object.getOwnPropertySymbols,y5=Object.prototype.hasOwnProperty,v5=Object.prototype.propertyIsEnumerable,dd=(n,e,r)=>e in n?d5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Hc=(n,e)=>{for(var r in e||(e={}))y5.call(e,r)&&dd(n,r,e[r]);if(ld)for(var r of ld(e))v5.call(e,r)&&dd(n,r,e[r]);return n},pd=(n,e)=>p5(n,g5(e));function au(n){return Number(n[0].split(":")[1])}function qc(n){return`0x${n.toString(16)}`}function _5(n){const{chains:e,optionalChains:r,methods:s,optionalMethods:a,events:f,optionalEvents:p,rpcMap:l}=n;if(!_i(e))throw new Error("Invalid chains");const y=e,D=s||su,x=f||ou,N={[au(y)]:l[au(y)]},V={chains:y,methods:D,events:x,rpcMap:N},F=f==null?void 0:f.filter(ae=>!ou.includes(ae)),R=s==null?void 0:s.filter(ae=>!su.includes(ae));if(!r&&!p&&!a&&!(F!=null&&F.length)&&!(R!=null&&R.length))return{required:V};const k=(F==null?void 0:F.length)&&(R==null?void 0:R.length)||!r,Y={chains:[...new Set(k?y.concat(r||[]):r)],methods:[...new Set(D.concat(a||[]))],events:[...new Set(x.concat(p||[]))],rpcMap:l};return{required:V,optional:Y}}class Pu{constructor(){this.events=new Wt.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=f5,this.on=(e,r)=>(this.events.on(e,r),this),this.once=(e,r)=>(this.events.once(e,r),this),this.removeListener=(e,r)=>(this.events.removeListener(e,r),this),this.off=(e,r)=>(this.events.off(e,r),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const r=new Pu;return await r.initialize(e),r}async request(e){return await this.signer.request(e,this.formatChainId(this.chainId))}sendAsync(e,r){this.signer.sendAsync(e,r,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:r,optional:s}=_5(this.rpc);try{const a=await new Promise(async(p,l)=>{var y;this.rpc.showQrModal&&((y=this.modal)==null||y.subscribeModal(D=>{!D.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),l(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(pd(Hc({namespaces:{[this.namespace]:r}},s&&{optionalNamespaces:{[this.namespace]:s}}),{pairingTopic:e==null?void 0:e.pairingTopic})).then(D=>{p(D)}).catch(D=>{l(new Error(D.message))})});if(!a)return;this.setChainIds(this.rpc.chains);const f=Yw(a.namespaces,[this.namespace]);this.setAccounts(f),this.events.emit("connect",{chainId:qc(this.chainId)})}catch(a){throw this.signer.logger.error(a),a}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:r}=e,{event:s}=r;s.name==="accountsChanged"?(this.accounts=this.parseAccounts(s.data),this.events.emit("accountsChanged",this.accounts)):s.name==="chainChanged"?this.setChainId(this.formatChainId(s.data)):this.events.emit(s.name,s.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const r=parseInt(e);this.chainId=r,this.events.emit("chainChanged",qc(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",pd(Hc({},Nt("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var r,s;this.rpc.showQrModal&&((r=this.modal)==null||r.closeModal(),(s=this.modal)==null||s.openModal({uri:e})),this.events.emit("display_uri",e)})}setHttpProvider(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const r=e.filter(s=>this.isCompatibleChainId(s)).map(s=>this.parseChainId(s));r.length&&(this.chainId=r[0],this.events.emit("chainChanged",qc(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const r=this.parseChainId(e);this.chainId=r,this.setHttpProvider(r)}}parseAccountId(e){const[r,s,a]=e.split(":");return{chainId:`${r}:${s}`,address:a}}setAccounts(e){this.accounts=e.filter(r=>this.parseChainId(this.parseAccountId(r).chainId)===this.chainId).map(r=>this.parseAccountId(r).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var r,s;return{chains:((r=e.chains)==null?void 0:r.map(a=>this.formatChainId(a)))||[`${this.namespace}:1`],optionalChains:e.optionalChains?e.optionalChains.map(a=>this.formatChainId(a)):void 0,methods:(e==null?void 0:e.methods)||su,events:(e==null?void 0:e.events)||ou,optionalMethods:(e==null?void 0:e.optionalMethods)||[],optionalEvents:(e==null?void 0:e.optionalEvents)||[],rpcMap:(e==null?void 0:e.rpcMap)||this.buildRpcMap(e.chains.concat(e.optionalChains||[]),e.projectId),showQrModal:Boolean(e==null?void 0:e.showQrModal),qrModalOptions:(s=e==null?void 0:e.qrModalOptions)!=null?s:void 0,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,r){const s={};return e.forEach(a=>{s[a]=this.getRpcUrl(a,r)}),s}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=au(this.rpc.chains),this.signer=await c5.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal)try{const{Web3Modal:r}=await _m(()=>import("./index-8e827eba.js").then(s=>s.i),["assets/index-8e827eba.js","assets/index-f3fbe707.js","assets/index-ee7bdf8e.css"]);this.modal=new r(Hc({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch{throw new Error("To use QR modal, please install @web3modal/standalone package")}}loadConnectOpts(e){if(!e)return;const{chains:r,optionalChains:s,rpcMap:a}=e;r&&_i(r)&&(this.rpc.chains=r.map(f=>this.formatChainId(f)),r.forEach(f=>{this.rpc.rpcMap[f]=(a==null?void 0:a[f])||this.getRpcUrl(f)})),s&&_i(s)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=s==null?void 0:s.map(f=>this.formatChainId(f)),s.forEach(f=>{this.rpc.rpcMap[f]=(a==null?void 0:a[f])||this.getRpcUrl(f)}))}getRpcUrl(e,r){var s;return((s=this.rpc.rpcMap)==null?void 0:s[e])||`${l5}?chainId=eip155:${e}&projectId=${r||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`);this.setChainIds(e?[this.formatChainId(e)]:this.session.namespaces[this.namespace].accounts),this.setAccounts(this.session.namespaces[this.namespace].accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(r=>this.parseAccount(r))}}const P5=Pu;export{P5 as EthereumProvider,C5 as OPTIONAL_EVENTS,A5 as OPTIONAL_METHODS,ou as REQUIRED_EVENTS,su as REQUIRED_METHODS,Pu as default};
