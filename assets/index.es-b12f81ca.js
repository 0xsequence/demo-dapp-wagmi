import{g as au,r as pb,c as er,a as gb,_ as vb}from"./index-c4e0238d.js";var cu={exports:{}},Tn=typeof Reflect=="object"?Reflect:null,Nf=Tn&&typeof Tn.apply=="function"?Tn.apply:function(e,r,s){return Function.prototype.apply.call(e,r,s)},Po;Tn&&typeof Tn.ownKeys=="function"?Po=Tn.ownKeys:Object.getOwnPropertySymbols?Po=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Po=function(e){return Object.getOwnPropertyNames(e)};function yb(n){console&&console.warn&&console.warn(n)}var dd=Number.isNaN||function(e){return e!==e};function ot(){ot.init.call(this)}cu.exports=ot;cu.exports.once=wb;ot.EventEmitter=ot;ot.prototype._events=void 0;ot.prototype._eventsCount=0;ot.prototype._maxListeners=void 0;var Rf=10;function Bo(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(ot,"defaultMaxListeners",{enumerable:!0,get:function(){return Rf},set:function(n){if(typeof n!="number"||n<0||dd(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");Rf=n}});ot.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ot.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||dd(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function pd(n){return n._maxListeners===void 0?ot.defaultMaxListeners:n._maxListeners}ot.prototype.getMaxListeners=function(){return pd(this)};ot.prototype.emit=function(e){for(var r=[],s=1;s<arguments.length;s++)r.push(arguments[s]);var a=e==="error",h=this._events;if(h!==void 0)a=a&&h.error===void 0;else if(!a)return!1;if(a){var p;if(r.length>0&&(p=r[0]),p instanceof Error)throw p;var l=new Error("Unhandled error."+(p?" ("+p.message+")":""));throw l.context=p,l}var v=h[e];if(v===void 0)return!1;if(typeof v=="function")Nf(v,this,r);else for(var D=v.length,x=bd(v,D),s=0;s<D;++s)Nf(x[s],this,r);return!0};function gd(n,e,r,s){var a,h,p;if(Bo(r),h=n._events,h===void 0?(h=n._events=Object.create(null),n._eventsCount=0):(h.newListener!==void 0&&(n.emit("newListener",e,r.listener?r.listener:r),h=n._events),p=h[e]),p===void 0)p=h[e]=r,++n._eventsCount;else if(typeof p=="function"?p=h[e]=s?[r,p]:[p,r]:s?p.unshift(r):p.push(r),a=pd(n),a>0&&p.length>a&&!p.warned){p.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+p.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=n,l.type=e,l.count=p.length,yb(l)}return n}ot.prototype.addListener=function(e,r){return gd(this,e,r,!1)};ot.prototype.on=ot.prototype.addListener;ot.prototype.prependListener=function(e,r){return gd(this,e,r,!0)};function _b(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function vd(n,e,r){var s={fired:!1,wrapFn:void 0,target:n,type:e,listener:r},a=_b.bind(s);return a.listener=r,s.wrapFn=a,a}ot.prototype.once=function(e,r){return Bo(r),this.on(e,vd(this,e,r)),this};ot.prototype.prependOnceListener=function(e,r){return Bo(r),this.prependListener(e,vd(this,e,r)),this};ot.prototype.removeListener=function(e,r){var s,a,h,p,l;if(Bo(r),a=this._events,a===void 0)return this;if(s=a[e],s===void 0)return this;if(s===r||s.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete a[e],a.removeListener&&this.emit("removeListener",e,s.listener||r));else if(typeof s!="function"){for(h=-1,p=s.length-1;p>=0;p--)if(s[p]===r||s[p].listener===r){l=s[p].listener,h=p;break}if(h<0)return this;h===0?s.shift():bb(s,h),s.length===1&&(a[e]=s[0]),a.removeListener!==void 0&&this.emit("removeListener",e,l||r)}return this};ot.prototype.off=ot.prototype.removeListener;ot.prototype.removeAllListeners=function(e){var r,s,a;if(s=this._events,s===void 0)return this;if(s.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):s[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete s[e]),this;if(arguments.length===0){var h=Object.keys(s),p;for(a=0;a<h.length;++a)p=h[a],p!=="removeListener"&&this.removeAllListeners(p);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=s[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(a=r.length-1;a>=0;a--)this.removeListener(e,r[a]);return this};function yd(n,e,r){var s=n._events;if(s===void 0)return[];var a=s[e];return a===void 0?[]:typeof a=="function"?r?[a.listener||a]:[a]:r?mb(a):bd(a,a.length)}ot.prototype.listeners=function(e){return yd(this,e,!0)};ot.prototype.rawListeners=function(e){return yd(this,e,!1)};ot.listenerCount=function(n,e){return typeof n.listenerCount=="function"?n.listenerCount(e):_d.call(n,e)};ot.prototype.listenerCount=_d;function _d(n){var e=this._events;if(e!==void 0){var r=e[n];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}ot.prototype.eventNames=function(){return this._eventsCount>0?Po(this._events):[]};function bd(n,e){for(var r=new Array(e),s=0;s<e;++s)r[s]=n[s];return r}function bb(n,e){for(;e+1<n.length;e++)n[e]=n[e+1];n.pop()}function mb(n){for(var e=new Array(n.length),r=0;r<e.length;++r)e[r]=n[r].listener||n[r];return e}function wb(n,e){return new Promise(function(r,s){function a(p){n.removeListener(e,h),s(p)}function h(){typeof n.removeListener=="function"&&n.removeListener("error",a),r([].slice.call(arguments))}md(n,e,h,{once:!0}),e!=="error"&&Eb(n,a,{once:!0})})}function Eb(n,e,r){typeof n.on=="function"&&md(n,"error",e,r)}function md(n,e,r,s){if(typeof n.on=="function")s.once?n.once(e,r):n.on(e,r);else if(typeof n.addEventListener=="function")n.addEventListener(e,function a(h){s.once&&n.removeEventListener(e,a),r(h)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}var Ir=cu.exports;const uu=au(Ir);var hu={},qo={},Ue={},wd={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});function e(l,v){var D=l>>>16&65535,x=l&65535,R=v>>>16&65535,V=v&65535;return x*V+(D*V+x*R<<16>>>0)|0}n.mul=Math.imul||e;function r(l,v){return l+v|0}n.add=r;function s(l,v){return l-v|0}n.sub=s;function a(l,v){return l<<v|l>>>32-v}n.rotl=a;function h(l,v){return l<<32-v|l>>>v}n.rotr=h;function p(l){return typeof l=="number"&&isFinite(l)&&Math.floor(l)===l}n.isInteger=Number.isInteger||p,n.MAX_SAFE_INTEGER=9007199254740991,n.isSafeInteger=function(l){return n.isInteger(l)&&l>=-n.MAX_SAFE_INTEGER&&l<=n.MAX_SAFE_INTEGER}})(wd);Object.defineProperty(Ue,"__esModule",{value:!0});var Ed=wd;function Db(n,e){return e===void 0&&(e=0),(n[e+0]<<8|n[e+1])<<16>>16}Ue.readInt16BE=Db;function Sb(n,e){return e===void 0&&(e=0),(n[e+0]<<8|n[e+1])>>>0}Ue.readUint16BE=Sb;function Ib(n,e){return e===void 0&&(e=0),(n[e+1]<<8|n[e])<<16>>16}Ue.readInt16LE=Ib;function xb(n,e){return e===void 0&&(e=0),(n[e+1]<<8|n[e])>>>0}Ue.readUint16LE=xb;function Dd(n,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=n>>>8,e[r+1]=n>>>0,e}Ue.writeUint16BE=Dd;Ue.writeInt16BE=Dd;function Sd(n,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=n>>>0,e[r+1]=n>>>8,e}Ue.writeUint16LE=Sd;Ue.writeInt16LE=Sd;function zc(n,e){return e===void 0&&(e=0),n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]}Ue.readInt32BE=zc;function Hc(n,e){return e===void 0&&(e=0),(n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3])>>>0}Ue.readUint32BE=Hc;function Kc(n,e){return e===void 0&&(e=0),n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e]}Ue.readInt32LE=Kc;function Vc(n,e){return e===void 0&&(e=0),(n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e])>>>0}Ue.readUint32LE=Vc;function Lo(n,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=n>>>24,e[r+1]=n>>>16,e[r+2]=n>>>8,e[r+3]=n>>>0,e}Ue.writeUint32BE=Lo;Ue.writeInt32BE=Lo;function Fo(n,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=n>>>0,e[r+1]=n>>>8,e[r+2]=n>>>16,e[r+3]=n>>>24,e}Ue.writeUint32LE=Fo;Ue.writeInt32LE=Fo;function Ob(n,e){e===void 0&&(e=0);var r=zc(n,e),s=zc(n,e+4);return r*4294967296+s-(s>>31)*4294967296}Ue.readInt64BE=Ob;function Cb(n,e){e===void 0&&(e=0);var r=Hc(n,e),s=Hc(n,e+4);return r*4294967296+s}Ue.readUint64BE=Cb;function Ab(n,e){e===void 0&&(e=0);var r=Kc(n,e),s=Kc(n,e+4);return s*4294967296+r-(r>>31)*4294967296}Ue.readInt64LE=Ab;function Pb(n,e){e===void 0&&(e=0);var r=Vc(n,e),s=Vc(n,e+4);return s*4294967296+r}Ue.readUint64LE=Pb;function Id(n,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Lo(n/4294967296>>>0,e,r),Lo(n>>>0,e,r+4),e}Ue.writeUint64BE=Id;Ue.writeInt64BE=Id;function xd(n,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Fo(n>>>0,e,r),Fo(n/4294967296>>>0,e,r+4),e}Ue.writeUint64LE=xd;Ue.writeInt64LE=xd;function Tb(n,e,r){if(r===void 0&&(r=0),n%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(n/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var s=0,a=1,h=n/8+r-1;h>=r;h--)s+=e[h]*a,a*=256;return s}Ue.readUintBE=Tb;function Nb(n,e,r){if(r===void 0&&(r=0),n%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(n/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var s=0,a=1,h=r;h<r+n/8;h++)s+=e[h]*a,a*=256;return s}Ue.readUintLE=Nb;function Rb(n,e,r,s){if(r===void 0&&(r=new Uint8Array(n/8)),s===void 0&&(s=0),n%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Ed.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var a=1,h=n/8+s-1;h>=s;h--)r[h]=e/a&255,a*=256;return r}Ue.writeUintBE=Rb;function Lb(n,e,r,s){if(r===void 0&&(r=new Uint8Array(n/8)),s===void 0&&(s=0),n%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Ed.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var a=1,h=s;h<s+n/8;h++)r[h]=e/a&255,a*=256;return r}Ue.writeUintLE=Lb;function Fb(n,e){e===void 0&&(e=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat32(e)}Ue.readFloat32BE=Fb;function Ub(n,e){e===void 0&&(e=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat32(e,!0)}Ue.readFloat32LE=Ub;function Mb(n,e){e===void 0&&(e=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat64(e)}Ue.readFloat64BE=Mb;function $b(n,e){e===void 0&&(e=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat64(e,!0)}Ue.readFloat64LE=$b;function jb(n,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(r,n),e}Ue.writeFloat32BE=jb;function Bb(n,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(r,n,!0),e}Ue.writeFloat32LE=Bb;function qb(n,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(r,n),e}Ue.writeFloat64BE=qb;function zb(n,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(r,n,!0),e}Ue.writeFloat64LE=zb;var xr={};Object.defineProperty(xr,"__esModule",{value:!0});function Hb(n){for(var e=0;e<n.length;e++)n[e]=0;return n}xr.wipe=Hb;Object.defineProperty(qo,"__esModule",{value:!0});var Qt=Ue,kc=xr,Kb=20;function Vb(n,e,r){for(var s=1634760805,a=857760878,h=2036477234,p=1797285236,l=r[3]<<24|r[2]<<16|r[1]<<8|r[0],v=r[7]<<24|r[6]<<16|r[5]<<8|r[4],D=r[11]<<24|r[10]<<16|r[9]<<8|r[8],x=r[15]<<24|r[14]<<16|r[13]<<8|r[12],R=r[19]<<24|r[18]<<16|r[17]<<8|r[16],V=r[23]<<24|r[22]<<16|r[21]<<8|r[20],F=r[27]<<24|r[26]<<16|r[25]<<8|r[24],T=r[31]<<24|r[30]<<16|r[29]<<8|r[28],k=e[3]<<24|e[2]<<16|e[1]<<8|e[0],Y=e[7]<<24|e[6]<<16|e[5]<<8|e[4],ae=e[11]<<24|e[10]<<16|e[9]<<8|e[8],N=e[15]<<24|e[14]<<16|e[13]<<8|e[12],U=s,S=a,O=h,m=p,c=l,y=v,Q=D,C=x,$=R,H=V,ee=F,g=T,w=k,G=Y,X=ae,W=N,q=0;q<Kb;q+=2)U=U+c|0,w^=U,w=w>>>32-16|w<<16,$=$+w|0,c^=$,c=c>>>32-12|c<<12,S=S+y|0,G^=S,G=G>>>32-16|G<<16,H=H+G|0,y^=H,y=y>>>32-12|y<<12,O=O+Q|0,X^=O,X=X>>>32-16|X<<16,ee=ee+X|0,Q^=ee,Q=Q>>>32-12|Q<<12,m=m+C|0,W^=m,W=W>>>32-16|W<<16,g=g+W|0,C^=g,C=C>>>32-12|C<<12,O=O+Q|0,X^=O,X=X>>>32-8|X<<8,ee=ee+X|0,Q^=ee,Q=Q>>>32-7|Q<<7,m=m+C|0,W^=m,W=W>>>32-8|W<<8,g=g+W|0,C^=g,C=C>>>32-7|C<<7,S=S+y|0,G^=S,G=G>>>32-8|G<<8,H=H+G|0,y^=H,y=y>>>32-7|y<<7,U=U+c|0,w^=U,w=w>>>32-8|w<<8,$=$+w|0,c^=$,c=c>>>32-7|c<<7,U=U+y|0,W^=U,W=W>>>32-16|W<<16,ee=ee+W|0,y^=ee,y=y>>>32-12|y<<12,S=S+Q|0,w^=S,w=w>>>32-16|w<<16,g=g+w|0,Q^=g,Q=Q>>>32-12|Q<<12,O=O+C|0,G^=O,G=G>>>32-16|G<<16,$=$+G|0,C^=$,C=C>>>32-12|C<<12,m=m+c|0,X^=m,X=X>>>32-16|X<<16,H=H+X|0,c^=H,c=c>>>32-12|c<<12,O=O+C|0,G^=O,G=G>>>32-8|G<<8,$=$+G|0,C^=$,C=C>>>32-7|C<<7,m=m+c|0,X^=m,X=X>>>32-8|X<<8,H=H+X|0,c^=H,c=c>>>32-7|c<<7,S=S+Q|0,w^=S,w=w>>>32-8|w<<8,g=g+w|0,Q^=g,Q=Q>>>32-7|Q<<7,U=U+y|0,W^=U,W=W>>>32-8|W<<8,ee=ee+W|0,y^=ee,y=y>>>32-7|y<<7;Qt.writeUint32LE(U+s|0,n,0),Qt.writeUint32LE(S+a|0,n,4),Qt.writeUint32LE(O+h|0,n,8),Qt.writeUint32LE(m+p|0,n,12),Qt.writeUint32LE(c+l|0,n,16),Qt.writeUint32LE(y+v|0,n,20),Qt.writeUint32LE(Q+D|0,n,24),Qt.writeUint32LE(C+x|0,n,28),Qt.writeUint32LE($+R|0,n,32),Qt.writeUint32LE(H+V|0,n,36),Qt.writeUint32LE(ee+F|0,n,40),Qt.writeUint32LE(g+T|0,n,44),Qt.writeUint32LE(w+k|0,n,48),Qt.writeUint32LE(G+Y|0,n,52),Qt.writeUint32LE(X+ae|0,n,56),Qt.writeUint32LE(W+N|0,n,60)}function Od(n,e,r,s,a){if(a===void 0&&(a=0),n.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(s.length<r.length)throw new Error("ChaCha: destination is shorter than source");var h,p;if(a===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");h=new Uint8Array(16),p=h.length-e.length,h.set(e,p)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");h=e,p=a}for(var l=new Uint8Array(64),v=0;v<r.length;v+=64){Vb(l,h,n);for(var D=v;D<v+64&&D<r.length;D++)s[D]=r[D]^l[D-v];Gb(h,0,p)}return kc.wipe(l),a===0&&kc.wipe(h),s}qo.streamXOR=Od;function kb(n,e,r,s){return s===void 0&&(s=0),kc.wipe(r),Od(n,e,r,r,s)}qo.stream=kb;function Gb(n,e,r){for(var s=1;r--;)s=s+(n[e]&255)|0,n[e]=s&255,s>>>=8,e++;if(s>0)throw new Error("ChaCha: counter overflow")}var Cd={},Ni={};Object.defineProperty(Ni,"__esModule",{value:!0});function Wb(n,e,r){return~(n-1)&e|n-1&r}Ni.select=Wb;function Yb(n,e){return(n|0)-(e|0)-1>>>31&1}Ni.lessOrEqual=Yb;function Ad(n,e){if(n.length!==e.length)return 0;for(var r=0,s=0;s<n.length;s++)r|=n[s]^e[s];return 1&r-1>>>8}Ni.compare=Ad;function Jb(n,e){return n.length===0||e.length===0?!1:Ad(n,e)!==0}Ni.equal=Jb;(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Ni,r=xr;n.DIGEST_LENGTH=16;var s=function(){function p(l){this.digestLength=n.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var v=l[0]|l[1]<<8;this._r[0]=v&8191;var D=l[2]|l[3]<<8;this._r[1]=(v>>>13|D<<3)&8191;var x=l[4]|l[5]<<8;this._r[2]=(D>>>10|x<<6)&7939;var R=l[6]|l[7]<<8;this._r[3]=(x>>>7|R<<9)&8191;var V=l[8]|l[9]<<8;this._r[4]=(R>>>4|V<<12)&255,this._r[5]=V>>>1&8190;var F=l[10]|l[11]<<8;this._r[6]=(V>>>14|F<<2)&8191;var T=l[12]|l[13]<<8;this._r[7]=(F>>>11|T<<5)&8065;var k=l[14]|l[15]<<8;this._r[8]=(T>>>8|k<<8)&8191,this._r[9]=k>>>5&127,this._pad[0]=l[16]|l[17]<<8,this._pad[1]=l[18]|l[19]<<8,this._pad[2]=l[20]|l[21]<<8,this._pad[3]=l[22]|l[23]<<8,this._pad[4]=l[24]|l[25]<<8,this._pad[5]=l[26]|l[27]<<8,this._pad[6]=l[28]|l[29]<<8,this._pad[7]=l[30]|l[31]<<8}return p.prototype._blocks=function(l,v,D){for(var x=this._fin?0:2048,R=this._h[0],V=this._h[1],F=this._h[2],T=this._h[3],k=this._h[4],Y=this._h[5],ae=this._h[6],N=this._h[7],U=this._h[8],S=this._h[9],O=this._r[0],m=this._r[1],c=this._r[2],y=this._r[3],Q=this._r[4],C=this._r[5],$=this._r[6],H=this._r[7],ee=this._r[8],g=this._r[9];D>=16;){var w=l[v+0]|l[v+1]<<8;R+=w&8191;var G=l[v+2]|l[v+3]<<8;V+=(w>>>13|G<<3)&8191;var X=l[v+4]|l[v+5]<<8;F+=(G>>>10|X<<6)&8191;var W=l[v+6]|l[v+7]<<8;T+=(X>>>7|W<<9)&8191;var q=l[v+8]|l[v+9]<<8;k+=(W>>>4|q<<12)&8191,Y+=q>>>1&8191;var Z=l[v+10]|l[v+11]<<8;ae+=(q>>>14|Z<<2)&8191;var ne=l[v+12]|l[v+13]<<8;N+=(Z>>>11|ne<<5)&8191;var ge=l[v+14]|l[v+15]<<8;U+=(ne>>>8|ge<<8)&8191,S+=ge>>>5|x;var ce=0,_e=ce;_e+=R*O,_e+=V*(5*g),_e+=F*(5*ee),_e+=T*(5*H),_e+=k*(5*$),ce=_e>>>13,_e&=8191,_e+=Y*(5*C),_e+=ae*(5*Q),_e+=N*(5*y),_e+=U*(5*c),_e+=S*(5*m),ce+=_e>>>13,_e&=8191;var he=ce;he+=R*m,he+=V*O,he+=F*(5*g),he+=T*(5*ee),he+=k*(5*H),ce=he>>>13,he&=8191,he+=Y*(5*$),he+=ae*(5*C),he+=N*(5*Q),he+=U*(5*y),he+=S*(5*c),ce+=he>>>13,he&=8191;var be=ce;be+=R*c,be+=V*m,be+=F*O,be+=T*(5*g),be+=k*(5*ee),ce=be>>>13,be&=8191,be+=Y*(5*H),be+=ae*(5*$),be+=N*(5*C),be+=U*(5*Q),be+=S*(5*y),ce+=be>>>13,be&=8191;var K=ce;K+=R*y,K+=V*c,K+=F*m,K+=T*O,K+=k*(5*g),ce=K>>>13,K&=8191,K+=Y*(5*ee),K+=ae*(5*H),K+=N*(5*$),K+=U*(5*C),K+=S*(5*Q),ce+=K>>>13,K&=8191;var z=ce;z+=R*Q,z+=V*y,z+=F*c,z+=T*m,z+=k*O,ce=z>>>13,z&=8191,z+=Y*(5*g),z+=ae*(5*ee),z+=N*(5*H),z+=U*(5*$),z+=S*(5*C),ce+=z>>>13,z&=8191;var L=ce;L+=R*C,L+=V*Q,L+=F*y,L+=T*c,L+=k*m,ce=L>>>13,L&=8191,L+=Y*O,L+=ae*(5*g),L+=N*(5*ee),L+=U*(5*H),L+=S*(5*$),ce+=L>>>13,L&=8191;var f=ce;f+=R*$,f+=V*C,f+=F*Q,f+=T*y,f+=k*c,ce=f>>>13,f&=8191,f+=Y*m,f+=ae*O,f+=N*(5*g),f+=U*(5*ee),f+=S*(5*H),ce+=f>>>13,f&=8191;var A=ce;A+=R*H,A+=V*$,A+=F*C,A+=T*Q,A+=k*y,ce=A>>>13,A&=8191,A+=Y*c,A+=ae*m,A+=N*O,A+=U*(5*g),A+=S*(5*ee),ce+=A>>>13,A&=8191;var ue=ce;ue+=R*ee,ue+=V*H,ue+=F*$,ue+=T*C,ue+=k*Q,ce=ue>>>13,ue&=8191,ue+=Y*y,ue+=ae*c,ue+=N*m,ue+=U*O,ue+=S*(5*g),ce+=ue>>>13,ue&=8191;var de=ce;de+=R*g,de+=V*ee,de+=F*H,de+=T*$,de+=k*C,ce=de>>>13,de&=8191,de+=Y*Q,de+=ae*y,de+=N*c,de+=U*m,de+=S*O,ce+=de>>>13,de&=8191,ce=(ce<<2)+ce|0,ce=ce+_e|0,_e=ce&8191,ce=ce>>>13,he+=ce,R=_e,V=he,F=be,T=K,k=z,Y=L,ae=f,N=A,U=ue,S=de,v+=16,D-=16}this._h[0]=R,this._h[1]=V,this._h[2]=F,this._h[3]=T,this._h[4]=k,this._h[5]=Y,this._h[6]=ae,this._h[7]=N,this._h[8]=U,this._h[9]=S},p.prototype.finish=function(l,v){v===void 0&&(v=0);var D=new Uint16Array(10),x,R,V,F;if(this._leftover){for(F=this._leftover,this._buffer[F++]=1;F<16;F++)this._buffer[F]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(x=this._h[1]>>>13,this._h[1]&=8191,F=2;F<10;F++)this._h[F]+=x,x=this._h[F]>>>13,this._h[F]&=8191;for(this._h[0]+=x*5,x=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=x,x=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=x,D[0]=this._h[0]+5,x=D[0]>>>13,D[0]&=8191,F=1;F<10;F++)D[F]=this._h[F]+x,x=D[F]>>>13,D[F]&=8191;for(D[9]-=8192,R=(x^1)-1,F=0;F<10;F++)D[F]&=R;for(R=~R,F=0;F<10;F++)this._h[F]=this._h[F]&R|D[F];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,V=this._h[0]+this._pad[0],this._h[0]=V&65535,F=1;F<8;F++)V=(this._h[F]+this._pad[F]|0)+(V>>>16)|0,this._h[F]=V&65535;return l[v+0]=this._h[0]>>>0,l[v+1]=this._h[0]>>>8,l[v+2]=this._h[1]>>>0,l[v+3]=this._h[1]>>>8,l[v+4]=this._h[2]>>>0,l[v+5]=this._h[2]>>>8,l[v+6]=this._h[3]>>>0,l[v+7]=this._h[3]>>>8,l[v+8]=this._h[4]>>>0,l[v+9]=this._h[4]>>>8,l[v+10]=this._h[5]>>>0,l[v+11]=this._h[5]>>>8,l[v+12]=this._h[6]>>>0,l[v+13]=this._h[6]>>>8,l[v+14]=this._h[7]>>>0,l[v+15]=this._h[7]>>>8,this._finished=!0,this},p.prototype.update=function(l){var v=0,D=l.length,x;if(this._leftover){x=16-this._leftover,x>D&&(x=D);for(var R=0;R<x;R++)this._buffer[this._leftover+R]=l[v+R];if(D-=x,v+=x,this._leftover+=x,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(D>=16&&(x=D-D%16,this._blocks(l,v,x),v+=x,D-=x),D){for(var R=0;R<D;R++)this._buffer[this._leftover+R]=l[v+R];this._leftover+=D}return this},p.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var l=new Uint8Array(16);return this.finish(l),l},p.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},p}();n.Poly1305=s;function a(p,l){var v=new s(p);v.update(l);var D=v.digest();return v.clean(),D}n.oneTimeAuth=a;function h(p,l){return p.length!==n.DIGEST_LENGTH||l.length!==n.DIGEST_LENGTH?!1:e.equal(p,l)}n.equal=h})(Cd);(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=qo,r=Cd,s=xr,a=Ue,h=Ni;n.KEY_LENGTH=32,n.NONCE_LENGTH=12,n.TAG_LENGTH=16;var p=new Uint8Array(16),l=function(){function v(D){if(this.nonceLength=n.NONCE_LENGTH,this.tagLength=n.TAG_LENGTH,D.length!==n.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(D)}return v.prototype.seal=function(D,x,R,V){if(D.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var F=new Uint8Array(16);F.set(D,F.length-D.length);var T=new Uint8Array(32);e.stream(this._key,F,T,4);var k=x.length+this.tagLength,Y;if(V){if(V.length!==k)throw new Error("ChaCha20Poly1305: incorrect destination length");Y=V}else Y=new Uint8Array(k);return e.streamXOR(this._key,F,x,Y,4),this._authenticate(Y.subarray(Y.length-this.tagLength,Y.length),T,Y.subarray(0,Y.length-this.tagLength),R),s.wipe(F),Y},v.prototype.open=function(D,x,R,V){if(D.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(x.length<this.tagLength)return null;var F=new Uint8Array(16);F.set(D,F.length-D.length);var T=new Uint8Array(32);e.stream(this._key,F,T,4);var k=new Uint8Array(this.tagLength);if(this._authenticate(k,T,x.subarray(0,x.length-this.tagLength),R),!h.equal(k,x.subarray(x.length-this.tagLength,x.length)))return null;var Y=x.length-this.tagLength,ae;if(V){if(V.length!==Y)throw new Error("ChaCha20Poly1305: incorrect destination length");ae=V}else ae=new Uint8Array(Y);return e.streamXOR(this._key,F,x.subarray(0,x.length-this.tagLength),ae,4),s.wipe(F),ae},v.prototype.clean=function(){return s.wipe(this._key),this},v.prototype._authenticate=function(D,x,R,V){var F=new r.Poly1305(x);V&&(F.update(V),V.length%16>0&&F.update(p.subarray(V.length%16))),F.update(R),R.length%16>0&&F.update(p.subarray(R.length%16));var T=new Uint8Array(8);V&&a.writeUint64LE(V.length,T),F.update(T),a.writeUint64LE(R.length,T),F.update(T);for(var k=F.digest(),Y=0;Y<k.length;Y++)D[Y]=k[Y];F.clean(),s.wipe(k),s.wipe(T)},v}();n.ChaCha20Poly1305=l})(hu);var Pd={},vs={},fu={};Object.defineProperty(fu,"__esModule",{value:!0});function Xb(n){return typeof n.saveState<"u"&&typeof n.restoreState<"u"&&typeof n.cleanSavedState<"u"}fu.isSerializableHash=Xb;Object.defineProperty(vs,"__esModule",{value:!0});var Qr=fu,Zb=Ni,Qb=xr,Td=function(){function n(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var s=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(s).clean():s.set(r);for(var a=0;a<s.length;a++)s[a]^=54;this._inner.update(s);for(var a=0;a<s.length;a++)s[a]^=106;this._outer.update(s),Qr.isSerializableHash(this._inner)&&Qr.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),Qb.wipe(s)}return n.prototype.reset=function(){if(!Qr.isSerializableHash(this._inner)||!Qr.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},n.prototype.clean=function(){Qr.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Qr.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},n.prototype.update=function(e){return this._inner.update(e),this},n.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},n.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},n.prototype.saveState=function(){if(!Qr.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},n.prototype.restoreState=function(e){if(!Qr.isSerializableHash(this._inner)||!Qr.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},n.prototype.cleanSavedState=function(e){if(!Qr.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},n}();vs.HMAC=Td;function em(n,e,r){var s=new Td(n,e);s.update(r);var a=s.digest();return s.clean(),a}vs.hmac=em;vs.equal=Zb.equal;Object.defineProperty(Pd,"__esModule",{value:!0});var Lf=vs,Ff=xr,tm=function(){function n(e,r,s,a){s===void 0&&(s=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=a;var h=Lf.hmac(this._hash,s,r);this._hmac=new Lf.HMAC(e,h),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return n.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},n.prototype.expand=function(e){for(var r=new Uint8Array(e),s=0;s<r.length;s++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[s]=this._buffer[this._bufpos++];return r},n.prototype.clean=function(){this._hmac.clean(),Ff.wipe(this._buffer),Ff.wipe(this._counter),this._bufpos=0},n}(),rm=Pd.HKDF=tm,Rn={},zo={},Ho={};Object.defineProperty(Ho,"__esModule",{value:!0});Ho.BrowserRandomSource=void 0;const Uf=65536;class im{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let s=0;s<r.length;s+=Uf)this._crypto.getRandomValues(r.subarray(s,s+Math.min(r.length-s,Uf)));return r}}Ho.BrowserRandomSource=im;function nm(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ko={};Object.defineProperty(Ko,"__esModule",{value:!0});Ko.NodeRandomSource=void 0;const sm=xr;class om{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof nm<"u"){const e=pb;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const s=new Uint8Array(e);for(let a=0;a<s.length;a++)s[a]=r[a];return(0,sm.wipe)(r),s}}Ko.NodeRandomSource=om;Object.defineProperty(zo,"__esModule",{value:!0});zo.SystemRandomSource=void 0;const am=Ho,cm=Ko;class um{constructor(){if(this.isAvailable=!1,this.name="",this._source=new am.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new cm.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}zo.SystemRandomSource=um;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.randomStringForEntropy=n.randomString=n.randomUint32=n.randomBytes=n.defaultRandomSource=void 0;const e=zo,r=Ue,s=xr;n.defaultRandomSource=new e.SystemRandomSource;function a(D,x=n.defaultRandomSource){return x.randomBytes(D)}n.randomBytes=a;function h(D=n.defaultRandomSource){const x=a(4,D),R=(0,r.readUint32LE)(x);return(0,s.wipe)(x),R}n.randomUint32=h;const p="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function l(D,x=p,R=n.defaultRandomSource){if(x.length<2)throw new Error("randomString charset is too short");if(x.length>256)throw new Error("randomString charset is too long");let V="";const F=x.length,T=256-256%F;for(;D>0;){const k=a(Math.ceil(D*256/T),R);for(let Y=0;Y<k.length&&D>0;Y++){const ae=k[Y];ae<T&&(V+=x.charAt(ae%F),D--)}(0,s.wipe)(k)}return V}n.randomString=l;function v(D,x=p,R=n.defaultRandomSource){const V=Math.ceil(D/(Math.log(x.length)/Math.LN2));return l(V,x,R)}n.randomStringForEntropy=v})(Rn);var Vo={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Ue,r=xr;n.DIGEST_LENGTH=32,n.BLOCK_SIZE=64;var s=function(){function l(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return l.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},l.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},l.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},l.prototype.update=function(v,D){if(D===void 0&&(D=v.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var x=0;if(this._bytesHashed+=D,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&D>0;)this._buffer[this._bufferLength++]=v[x++],D--;this._bufferLength===this.blockSize&&(h(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(D>=this.blockSize&&(x=h(this._temp,this._state,v,x,D),D%=this.blockSize);D>0;)this._buffer[this._bufferLength++]=v[x++],D--;return this},l.prototype.finish=function(v){if(!this._finished){var D=this._bytesHashed,x=this._bufferLength,R=D/536870912|0,V=D<<3,F=D%64<56?64:128;this._buffer[x]=128;for(var T=x+1;T<F-8;T++)this._buffer[T]=0;e.writeUint32BE(R,this._buffer,F-8),e.writeUint32BE(V,this._buffer,F-4),h(this._temp,this._state,this._buffer,0,F),this._finished=!0}for(var T=0;T<this.digestLength/4;T++)e.writeUint32BE(this._state[T],v,T*4);return this},l.prototype.digest=function(){var v=new Uint8Array(this.digestLength);return this.finish(v),v},l.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},l.prototype.restoreState=function(v){return this._state.set(v.state),this._bufferLength=v.bufferLength,v.buffer&&this._buffer.set(v.buffer),this._bytesHashed=v.bytesHashed,this._finished=!1,this},l.prototype.cleanSavedState=function(v){r.wipe(v.state),v.buffer&&r.wipe(v.buffer),v.bufferLength=0,v.bytesHashed=0},l}();n.SHA256=s;var a=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function h(l,v,D,x,R){for(;R>=64;){for(var V=v[0],F=v[1],T=v[2],k=v[3],Y=v[4],ae=v[5],N=v[6],U=v[7],S=0;S<16;S++){var O=x+S*4;l[S]=e.readUint32BE(D,O)}for(var S=16;S<64;S++){var m=l[S-2],c=(m>>>17|m<<32-17)^(m>>>19|m<<32-19)^m>>>10;m=l[S-15];var y=(m>>>7|m<<32-7)^(m>>>18|m<<32-18)^m>>>3;l[S]=(c+l[S-7]|0)+(y+l[S-16]|0)}for(var S=0;S<64;S++){var c=(((Y>>>6|Y<<26)^(Y>>>11|Y<<21)^(Y>>>25|Y<<7))+(Y&ae^~Y&N)|0)+(U+(a[S]+l[S]|0)|0)|0,y=((V>>>2|V<<32-2)^(V>>>13|V<<32-13)^(V>>>22|V<<32-22))+(V&F^V&T^F&T)|0;U=N,N=ae,ae=Y,Y=k+c|0,k=T,T=F,F=V,V=c+y|0}v[0]+=V,v[1]+=F,v[2]+=T,v[3]+=k,v[4]+=Y,v[5]+=ae,v[6]+=N,v[7]+=U,x+=64,R-=64}return x}function p(l){var v=new s;v.update(l);var D=v.digest();return v.clean(),D}n.hash=p})(Vo);var lu={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.sharedKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.scalarMultBase=n.scalarMult=n.SHARED_KEY_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=void 0;const e=Rn,r=xr;n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=32,n.SHARED_KEY_LENGTH=32;function s(S){const O=new Float64Array(16);if(S)for(let m=0;m<S.length;m++)O[m]=S[m];return O}const a=new Uint8Array(32);a[0]=9;const h=s([56129,1]);function p(S){let O=1;for(let m=0;m<16;m++){let c=S[m]+O+65535;O=Math.floor(c/65536),S[m]=c-O*65536}S[0]+=O-1+37*(O-1)}function l(S,O,m){const c=~(m-1);for(let y=0;y<16;y++){const Q=c&(S[y]^O[y]);S[y]^=Q,O[y]^=Q}}function v(S,O){const m=s(),c=s();for(let y=0;y<16;y++)c[y]=O[y];p(c),p(c),p(c);for(let y=0;y<2;y++){m[0]=c[0]-65517;for(let C=1;C<15;C++)m[C]=c[C]-65535-(m[C-1]>>16&1),m[C-1]&=65535;m[15]=c[15]-32767-(m[14]>>16&1);const Q=m[15]>>16&1;m[14]&=65535,l(c,m,1-Q)}for(let y=0;y<16;y++)S[2*y]=c[y]&255,S[2*y+1]=c[y]>>8}function D(S,O){for(let m=0;m<16;m++)S[m]=O[2*m]+(O[2*m+1]<<8);S[15]&=32767}function x(S,O,m){for(let c=0;c<16;c++)S[c]=O[c]+m[c]}function R(S,O,m){for(let c=0;c<16;c++)S[c]=O[c]-m[c]}function V(S,O,m){let c,y,Q=0,C=0,$=0,H=0,ee=0,g=0,w=0,G=0,X=0,W=0,q=0,Z=0,ne=0,ge=0,ce=0,_e=0,he=0,be=0,K=0,z=0,L=0,f=0,A=0,ue=0,de=0,Ie=0,ze=0,Ve=0,Me=0,gt=0,vt=0,je=m[0],xe=m[1],Re=m[2],Le=m[3],Be=m[4],Ce=m[5],Fe=m[6],Se=m[7],Ae=m[8],He=m[9],Oe=m[10],ke=m[11],We=m[12],et=m[13],tt=m[14],Je=m[15];c=O[0],Q+=c*je,C+=c*xe,$+=c*Re,H+=c*Le,ee+=c*Be,g+=c*Ce,w+=c*Fe,G+=c*Se,X+=c*Ae,W+=c*He,q+=c*Oe,Z+=c*ke,ne+=c*We,ge+=c*et,ce+=c*tt,_e+=c*Je,c=O[1],C+=c*je,$+=c*xe,H+=c*Re,ee+=c*Le,g+=c*Be,w+=c*Ce,G+=c*Fe,X+=c*Se,W+=c*Ae,q+=c*He,Z+=c*Oe,ne+=c*ke,ge+=c*We,ce+=c*et,_e+=c*tt,he+=c*Je,c=O[2],$+=c*je,H+=c*xe,ee+=c*Re,g+=c*Le,w+=c*Be,G+=c*Ce,X+=c*Fe,W+=c*Se,q+=c*Ae,Z+=c*He,ne+=c*Oe,ge+=c*ke,ce+=c*We,_e+=c*et,he+=c*tt,be+=c*Je,c=O[3],H+=c*je,ee+=c*xe,g+=c*Re,w+=c*Le,G+=c*Be,X+=c*Ce,W+=c*Fe,q+=c*Se,Z+=c*Ae,ne+=c*He,ge+=c*Oe,ce+=c*ke,_e+=c*We,he+=c*et,be+=c*tt,K+=c*Je,c=O[4],ee+=c*je,g+=c*xe,w+=c*Re,G+=c*Le,X+=c*Be,W+=c*Ce,q+=c*Fe,Z+=c*Se,ne+=c*Ae,ge+=c*He,ce+=c*Oe,_e+=c*ke,he+=c*We,be+=c*et,K+=c*tt,z+=c*Je,c=O[5],g+=c*je,w+=c*xe,G+=c*Re,X+=c*Le,W+=c*Be,q+=c*Ce,Z+=c*Fe,ne+=c*Se,ge+=c*Ae,ce+=c*He,_e+=c*Oe,he+=c*ke,be+=c*We,K+=c*et,z+=c*tt,L+=c*Je,c=O[6],w+=c*je,G+=c*xe,X+=c*Re,W+=c*Le,q+=c*Be,Z+=c*Ce,ne+=c*Fe,ge+=c*Se,ce+=c*Ae,_e+=c*He,he+=c*Oe,be+=c*ke,K+=c*We,z+=c*et,L+=c*tt,f+=c*Je,c=O[7],G+=c*je,X+=c*xe,W+=c*Re,q+=c*Le,Z+=c*Be,ne+=c*Ce,ge+=c*Fe,ce+=c*Se,_e+=c*Ae,he+=c*He,be+=c*Oe,K+=c*ke,z+=c*We,L+=c*et,f+=c*tt,A+=c*Je,c=O[8],X+=c*je,W+=c*xe,q+=c*Re,Z+=c*Le,ne+=c*Be,ge+=c*Ce,ce+=c*Fe,_e+=c*Se,he+=c*Ae,be+=c*He,K+=c*Oe,z+=c*ke,L+=c*We,f+=c*et,A+=c*tt,ue+=c*Je,c=O[9],W+=c*je,q+=c*xe,Z+=c*Re,ne+=c*Le,ge+=c*Be,ce+=c*Ce,_e+=c*Fe,he+=c*Se,be+=c*Ae,K+=c*He,z+=c*Oe,L+=c*ke,f+=c*We,A+=c*et,ue+=c*tt,de+=c*Je,c=O[10],q+=c*je,Z+=c*xe,ne+=c*Re,ge+=c*Le,ce+=c*Be,_e+=c*Ce,he+=c*Fe,be+=c*Se,K+=c*Ae,z+=c*He,L+=c*Oe,f+=c*ke,A+=c*We,ue+=c*et,de+=c*tt,Ie+=c*Je,c=O[11],Z+=c*je,ne+=c*xe,ge+=c*Re,ce+=c*Le,_e+=c*Be,he+=c*Ce,be+=c*Fe,K+=c*Se,z+=c*Ae,L+=c*He,f+=c*Oe,A+=c*ke,ue+=c*We,de+=c*et,Ie+=c*tt,ze+=c*Je,c=O[12],ne+=c*je,ge+=c*xe,ce+=c*Re,_e+=c*Le,he+=c*Be,be+=c*Ce,K+=c*Fe,z+=c*Se,L+=c*Ae,f+=c*He,A+=c*Oe,ue+=c*ke,de+=c*We,Ie+=c*et,ze+=c*tt,Ve+=c*Je,c=O[13],ge+=c*je,ce+=c*xe,_e+=c*Re,he+=c*Le,be+=c*Be,K+=c*Ce,z+=c*Fe,L+=c*Se,f+=c*Ae,A+=c*He,ue+=c*Oe,de+=c*ke,Ie+=c*We,ze+=c*et,Ve+=c*tt,Me+=c*Je,c=O[14],ce+=c*je,_e+=c*xe,he+=c*Re,be+=c*Le,K+=c*Be,z+=c*Ce,L+=c*Fe,f+=c*Se,A+=c*Ae,ue+=c*He,de+=c*Oe,Ie+=c*ke,ze+=c*We,Ve+=c*et,Me+=c*tt,gt+=c*Je,c=O[15],_e+=c*je,he+=c*xe,be+=c*Re,K+=c*Le,z+=c*Be,L+=c*Ce,f+=c*Fe,A+=c*Se,ue+=c*Ae,de+=c*He,Ie+=c*Oe,ze+=c*ke,Ve+=c*We,Me+=c*et,gt+=c*tt,vt+=c*Je,Q+=38*he,C+=38*be,$+=38*K,H+=38*z,ee+=38*L,g+=38*f,w+=38*A,G+=38*ue,X+=38*de,W+=38*Ie,q+=38*ze,Z+=38*Ve,ne+=38*Me,ge+=38*gt,ce+=38*vt,y=1,c=Q+y+65535,y=Math.floor(c/65536),Q=c-y*65536,c=C+y+65535,y=Math.floor(c/65536),C=c-y*65536,c=$+y+65535,y=Math.floor(c/65536),$=c-y*65536,c=H+y+65535,y=Math.floor(c/65536),H=c-y*65536,c=ee+y+65535,y=Math.floor(c/65536),ee=c-y*65536,c=g+y+65535,y=Math.floor(c/65536),g=c-y*65536,c=w+y+65535,y=Math.floor(c/65536),w=c-y*65536,c=G+y+65535,y=Math.floor(c/65536),G=c-y*65536,c=X+y+65535,y=Math.floor(c/65536),X=c-y*65536,c=W+y+65535,y=Math.floor(c/65536),W=c-y*65536,c=q+y+65535,y=Math.floor(c/65536),q=c-y*65536,c=Z+y+65535,y=Math.floor(c/65536),Z=c-y*65536,c=ne+y+65535,y=Math.floor(c/65536),ne=c-y*65536,c=ge+y+65535,y=Math.floor(c/65536),ge=c-y*65536,c=ce+y+65535,y=Math.floor(c/65536),ce=c-y*65536,c=_e+y+65535,y=Math.floor(c/65536),_e=c-y*65536,Q+=y-1+37*(y-1),y=1,c=Q+y+65535,y=Math.floor(c/65536),Q=c-y*65536,c=C+y+65535,y=Math.floor(c/65536),C=c-y*65536,c=$+y+65535,y=Math.floor(c/65536),$=c-y*65536,c=H+y+65535,y=Math.floor(c/65536),H=c-y*65536,c=ee+y+65535,y=Math.floor(c/65536),ee=c-y*65536,c=g+y+65535,y=Math.floor(c/65536),g=c-y*65536,c=w+y+65535,y=Math.floor(c/65536),w=c-y*65536,c=G+y+65535,y=Math.floor(c/65536),G=c-y*65536,c=X+y+65535,y=Math.floor(c/65536),X=c-y*65536,c=W+y+65535,y=Math.floor(c/65536),W=c-y*65536,c=q+y+65535,y=Math.floor(c/65536),q=c-y*65536,c=Z+y+65535,y=Math.floor(c/65536),Z=c-y*65536,c=ne+y+65535,y=Math.floor(c/65536),ne=c-y*65536,c=ge+y+65535,y=Math.floor(c/65536),ge=c-y*65536,c=ce+y+65535,y=Math.floor(c/65536),ce=c-y*65536,c=_e+y+65535,y=Math.floor(c/65536),_e=c-y*65536,Q+=y-1+37*(y-1),S[0]=Q,S[1]=C,S[2]=$,S[3]=H,S[4]=ee,S[5]=g,S[6]=w,S[7]=G,S[8]=X,S[9]=W,S[10]=q,S[11]=Z,S[12]=ne,S[13]=ge,S[14]=ce,S[15]=_e}function F(S,O){V(S,O,O)}function T(S,O){const m=s();for(let c=0;c<16;c++)m[c]=O[c];for(let c=253;c>=0;c--)F(m,m),c!==2&&c!==4&&V(m,m,O);for(let c=0;c<16;c++)S[c]=m[c]}function k(S,O){const m=new Uint8Array(32),c=new Float64Array(80),y=s(),Q=s(),C=s(),$=s(),H=s(),ee=s();for(let X=0;X<31;X++)m[X]=S[X];m[31]=S[31]&127|64,m[0]&=248,D(c,O);for(let X=0;X<16;X++)Q[X]=c[X];y[0]=$[0]=1;for(let X=254;X>=0;--X){const W=m[X>>>3]>>>(X&7)&1;l(y,Q,W),l(C,$,W),x(H,y,C),R(y,y,C),x(C,Q,$),R(Q,Q,$),F($,H),F(ee,y),V(y,C,y),V(C,Q,H),x(H,y,C),R(y,y,C),F(Q,y),R(C,$,ee),V(y,C,h),x(y,y,$),V(C,C,y),V(y,$,ee),V($,Q,c),F(Q,H),l(y,Q,W),l(C,$,W)}for(let X=0;X<16;X++)c[X+16]=y[X],c[X+32]=C[X],c[X+48]=Q[X],c[X+64]=$[X];const g=c.subarray(32),w=c.subarray(16);T(g,g),V(w,w,g);const G=new Uint8Array(32);return v(G,w),G}n.scalarMult=k;function Y(S){return k(S,a)}n.scalarMultBase=Y;function ae(S){if(S.length!==n.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${n.SECRET_KEY_LENGTH} bytes`);const O=new Uint8Array(S);return{publicKey:Y(O),secretKey:O}}n.generateKeyPairFromSeed=ae;function N(S){const O=(0,e.randomBytes)(32,S),m=ae(O);return(0,r.wipe)(O),m}n.generateKeyPair=N;function U(S,O,m=!1){if(S.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(O.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const c=k(S,O);if(m){let y=0;for(let Q=0;Q<c.length;Q++)y|=c[Q];if(y===0)throw new Error("X25519: invalid shared key")}return c}n.sharedKey=U})(lu);function du(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function Nd(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?du(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function Gc(n,e){e||(e=n.reduce((a,h)=>a+h.length,0));const r=Nd(e);let s=0;for(const a of n)r.set(a,s),s+=a.length;return du(r)}function hm(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var a=0;a<n.length;a++){var h=n.charAt(a),p=h.charCodeAt(0);if(r[p]!==255)throw new TypeError(h+" is ambiguous");r[p]=a}var l=n.length,v=n.charAt(0),D=Math.log(l)/Math.log(256),x=Math.log(256)/Math.log(l);function R(T){if(T instanceof Uint8Array||(ArrayBuffer.isView(T)?T=new Uint8Array(T.buffer,T.byteOffset,T.byteLength):Array.isArray(T)&&(T=Uint8Array.from(T))),!(T instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(T.length===0)return"";for(var k=0,Y=0,ae=0,N=T.length;ae!==N&&T[ae]===0;)ae++,k++;for(var U=(N-ae)*x+1>>>0,S=new Uint8Array(U);ae!==N;){for(var O=T[ae],m=0,c=U-1;(O!==0||m<Y)&&c!==-1;c--,m++)O+=256*S[c]>>>0,S[c]=O%l>>>0,O=O/l>>>0;if(O!==0)throw new Error("Non-zero carry");Y=m,ae++}for(var y=U-Y;y!==U&&S[y]===0;)y++;for(var Q=v.repeat(k);y<U;++y)Q+=n.charAt(S[y]);return Q}function V(T){if(typeof T!="string")throw new TypeError("Expected String");if(T.length===0)return new Uint8Array;var k=0;if(T[k]!==" "){for(var Y=0,ae=0;T[k]===v;)Y++,k++;for(var N=(T.length-k)*D+1>>>0,U=new Uint8Array(N);T[k];){var S=r[T.charCodeAt(k)];if(S===255)return;for(var O=0,m=N-1;(S!==0||O<ae)&&m!==-1;m--,O++)S+=l*U[m]>>>0,U[m]=S%256>>>0,S=S/256>>>0;if(S!==0)throw new Error("Non-zero carry");ae=O,k++}if(T[k]!==" "){for(var c=N-ae;c!==N&&U[c]===0;)c++;for(var y=new Uint8Array(Y+(N-c)),Q=Y;c!==N;)y[Q++]=U[c++];return y}}}function F(T){var k=V(T);if(k)return k;throw new Error(`Non-${e} character`)}return{encode:R,decodeUnsafe:V,decode:F}}var fm=hm,lm=fm;const dm=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},pm=n=>new TextEncoder().encode(n),gm=n=>new TextDecoder().decode(n);class vm{constructor(e,r,s){this.name=e,this.prefix=r,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class ym{constructor(e,r,s){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Rd(this,e)}}class _m{constructor(e){this.decoders=e}or(e){return Rd(this,e)}decode(e){const r=e[0],s=this.decoders[r];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Rd=(n,e)=>new _m({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});class bm{constructor(e,r,s,a){this.name=e,this.prefix=r,this.baseEncode=s,this.baseDecode=a,this.encoder=new vm(e,r,s),this.decoder=new ym(e,r,a)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ko=({name:n,prefix:e,encode:r,decode:s})=>new bm(n,e,r,s),ys=({prefix:n,name:e,alphabet:r})=>{const{encode:s,decode:a}=lm(r,e);return ko({prefix:n,name:e,encode:s,decode:h=>dm(a(h))})},mm=(n,e,r,s)=>{const a={};for(let x=0;x<e.length;++x)a[e[x]]=x;let h=n.length;for(;n[h-1]==="=";)--h;const p=new Uint8Array(h*r/8|0);let l=0,v=0,D=0;for(let x=0;x<h;++x){const R=a[n[x]];if(R===void 0)throw new SyntaxError(`Non-${s} character`);v=v<<r|R,l+=r,l>=8&&(l-=8,p[D++]=255&v>>l)}if(l>=r||255&v<<8-l)throw new SyntaxError("Unexpected end of data");return p},wm=(n,e,r)=>{const s=e[e.length-1]==="=",a=(1<<r)-1;let h="",p=0,l=0;for(let v=0;v<n.length;++v)for(l=l<<8|n[v],p+=8;p>r;)p-=r,h+=e[a&l>>p];if(p&&(h+=e[a&l<<r-p]),s)for(;h.length*r&7;)h+="=";return h},Yt=({name:n,prefix:e,bitsPerChar:r,alphabet:s})=>ko({prefix:e,name:n,encode(a){return wm(a,s,r)},decode(a){return mm(a,s,r,n)}}),Em=ko({prefix:"\0",name:"identity",encode:n=>gm(n),decode:n=>pm(n)}),Dm=Object.freeze(Object.defineProperty({__proto__:null,identity:Em},Symbol.toStringTag,{value:"Module"})),Sm=Yt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Im=Object.freeze(Object.defineProperty({__proto__:null,base2:Sm},Symbol.toStringTag,{value:"Module"})),xm=Yt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Om=Object.freeze(Object.defineProperty({__proto__:null,base8:xm},Symbol.toStringTag,{value:"Module"})),Cm=ys({prefix:"9",name:"base10",alphabet:"0123456789"}),Am=Object.freeze(Object.defineProperty({__proto__:null,base10:Cm},Symbol.toStringTag,{value:"Module"})),Pm=Yt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Tm=Yt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Nm=Object.freeze(Object.defineProperty({__proto__:null,base16:Pm,base16upper:Tm},Symbol.toStringTag,{value:"Module"})),Rm=Yt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Lm=Yt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Fm=Yt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Um=Yt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Mm=Yt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),$m=Yt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),jm=Yt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Bm=Yt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),qm=Yt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),zm=Object.freeze(Object.defineProperty({__proto__:null,base32:Rm,base32hex:Mm,base32hexpad:jm,base32hexpadupper:Bm,base32hexupper:$m,base32pad:Fm,base32padupper:Um,base32upper:Lm,base32z:qm},Symbol.toStringTag,{value:"Module"})),Hm=ys({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Km=ys({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Vm=Object.freeze(Object.defineProperty({__proto__:null,base36:Hm,base36upper:Km},Symbol.toStringTag,{value:"Module"})),km=ys({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Gm=ys({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Wm=Object.freeze(Object.defineProperty({__proto__:null,base58btc:km,base58flickr:Gm},Symbol.toStringTag,{value:"Module"})),Ym=Yt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Jm=Yt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Xm=Yt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Zm=Yt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Qm=Object.freeze(Object.defineProperty({__proto__:null,base64:Ym,base64pad:Jm,base64url:Xm,base64urlpad:Zm},Symbol.toStringTag,{value:"Module"})),Ld=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),ew=Ld.reduce((n,e,r)=>(n[r]=e,n),[]),tw=Ld.reduce((n,e,r)=>(n[e.codePointAt(0)]=r,n),[]);function rw(n){return n.reduce((e,r)=>(e+=ew[r],e),"")}function iw(n){const e=[];for(const r of n){const s=tw[r.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(s)}return new Uint8Array(e)}const nw=ko({prefix:"ðŸš€",name:"base256emoji",encode:rw,decode:iw}),sw=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:nw},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const Mf={...Dm,...Im,...Om,...Am,...Nm,...zm,...Vm,...Wm,...Qm,...sw};function Fd(n,e,r,s){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:r},decoder:{decode:s}}}const $f=Fd("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),Ec=Fd("ascii","a",n=>{let e="a";for(let r=0;r<n.length;r++)e+=String.fromCharCode(n[r]);return e},n=>{n=n.substring(1);const e=Nd(n.length);for(let r=0;r<n.length;r++)e[r]=n.charCodeAt(r);return e}),Ud={utf8:$f,"utf-8":$f,hex:Mf.base16,latin1:Ec,ascii:Ec,binary:Ec,...Mf};function _r(n,e="utf8"){const r=Ud[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?du(globalThis.Buffer.from(n,"utf-8")):r.decoder.decode(`${r.prefix}${n}`)}function hr(n,e="utf8"){const r=Ud[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):r.encoder.encode(n).substring(1)}var jf=globalThis&&globalThis.__spreadArray||function(n,e,r){if(r||arguments.length===2)for(var s=0,a=e.length,h;s<a;s++)(h||!(s in e))&&(h||(h=Array.prototype.slice.call(e,0,s)),h[s]=e[s]);return n.concat(h||Array.prototype.slice.call(e))},ow=function(){function n(e,r,s){this.name=e,this.version=r,this.os=s,this.type="browser"}return n}(),aw=function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return n}(),cw=function(){function n(e,r,s,a){this.name=e,this.version=r,this.os=s,this.bot=a,this.type="bot-device"}return n}(),uw=function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n}(),hw=function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n}(),fw=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,lw=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Bf=3,dw=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",fw]],qf=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function pw(n){return n?zf(n):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new hw:typeof navigator<"u"?zf(navigator.userAgent):yw()}function gw(n){return n!==""&&dw.reduce(function(e,r){var s=r[0],a=r[1];if(e)return e;var h=a.exec(n);return!!h&&[s,h]},!1)}function zf(n){var e=gw(n);if(!e)return null;var r=e[0],s=e[1];if(r==="searchbot")return new uw;var a=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);a?a.length<Bf&&(a=jf(jf([],a,!0),_w(Bf-a.length),!0)):a=[];var h=a.join("."),p=vw(n),l=lw.exec(n);return l&&l[1]?new cw(r,h,p,l[1]):new ow(r,h,p)}function vw(n){for(var e=0,r=qf.length;e<r;e++){var s=qf[e],a=s[0],h=s[1],p=h.exec(n);if(p)return a}return null}function yw(){var n=typeof process<"u"&&process.version;return n?new aw(process.version.slice(1)):null}function _w(n){for(var e=[],r=0;r<n;r++)e.push("0");return e}var me={},Md={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(n){var e,r,s,a,h,p,l,v,D,x,R,V,F,T,k,Y,ae,N,U,S,O,m,c;(function(y){var Q=typeof er=="object"?er:typeof self=="object"?self:typeof this=="object"?this:{};y(C(Q,C(n.exports)));function C($,H){return $!==Q&&(typeof Object.create=="function"?Object.defineProperty($,"__esModule",{value:!0}):$.__esModule=!0),function(ee,g){return $[ee]=H?H(ee,g):g}}})(function(y){var Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,$){C.__proto__=$}||function(C,$){for(var H in $)$.hasOwnProperty(H)&&(C[H]=$[H])};e=function(C,$){Q(C,$);function H(){this.constructor=C}C.prototype=$===null?Object.create($):(H.prototype=$.prototype,new H)},r=Object.assign||function(C){for(var $,H=1,ee=arguments.length;H<ee;H++){$=arguments[H];for(var g in $)Object.prototype.hasOwnProperty.call($,g)&&(C[g]=$[g])}return C},s=function(C,$){var H={};for(var ee in C)Object.prototype.hasOwnProperty.call(C,ee)&&$.indexOf(ee)<0&&(H[ee]=C[ee]);if(C!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,ee=Object.getOwnPropertySymbols(C);g<ee.length;g++)$.indexOf(ee[g])<0&&Object.prototype.propertyIsEnumerable.call(C,ee[g])&&(H[ee[g]]=C[ee[g]]);return H},a=function(C,$,H,ee){var g=arguments.length,w=g<3?$:ee===null?ee=Object.getOwnPropertyDescriptor($,H):ee,G;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(C,$,H,ee);else for(var X=C.length-1;X>=0;X--)(G=C[X])&&(w=(g<3?G(w):g>3?G($,H,w):G($,H))||w);return g>3&&w&&Object.defineProperty($,H,w),w},h=function(C,$){return function(H,ee){$(H,ee,C)}},p=function(C,$){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(C,$)},l=function(C,$,H,ee){function g(w){return w instanceof H?w:new H(function(G){G(w)})}return new(H||(H=Promise))(function(w,G){function X(Z){try{q(ee.next(Z))}catch(ne){G(ne)}}function W(Z){try{q(ee.throw(Z))}catch(ne){G(ne)}}function q(Z){Z.done?w(Z.value):g(Z.value).then(X,W)}q((ee=ee.apply(C,$||[])).next())})},v=function(C,$){var H={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},ee,g,w,G;return G={next:X(0),throw:X(1),return:X(2)},typeof Symbol=="function"&&(G[Symbol.iterator]=function(){return this}),G;function X(q){return function(Z){return W([q,Z])}}function W(q){if(ee)throw new TypeError("Generator is already executing.");for(;H;)try{if(ee=1,g&&(w=q[0]&2?g.return:q[0]?g.throw||((w=g.return)&&w.call(g),0):g.next)&&!(w=w.call(g,q[1])).done)return w;switch(g=0,w&&(q=[q[0]&2,w.value]),q[0]){case 0:case 1:w=q;break;case 4:return H.label++,{value:q[1],done:!1};case 5:H.label++,g=q[1],q=[0];continue;case 7:q=H.ops.pop(),H.trys.pop();continue;default:if(w=H.trys,!(w=w.length>0&&w[w.length-1])&&(q[0]===6||q[0]===2)){H=0;continue}if(q[0]===3&&(!w||q[1]>w[0]&&q[1]<w[3])){H.label=q[1];break}if(q[0]===6&&H.label<w[1]){H.label=w[1],w=q;break}if(w&&H.label<w[2]){H.label=w[2],H.ops.push(q);break}w[2]&&H.ops.pop(),H.trys.pop();continue}q=$.call(C,H)}catch(Z){q=[6,Z],g=0}finally{ee=w=0}if(q[0]&5)throw q[1];return{value:q[0]?q[1]:void 0,done:!0}}},c=function(C,$,H,ee){ee===void 0&&(ee=H),C[ee]=$[H]},D=function(C,$){for(var H in C)H!=="default"&&!$.hasOwnProperty(H)&&($[H]=C[H])},x=function(C){var $=typeof Symbol=="function"&&Symbol.iterator,H=$&&C[$],ee=0;if(H)return H.call(C);if(C&&typeof C.length=="number")return{next:function(){return C&&ee>=C.length&&(C=void 0),{value:C&&C[ee++],done:!C}}};throw new TypeError($?"Object is not iterable.":"Symbol.iterator is not defined.")},R=function(C,$){var H=typeof Symbol=="function"&&C[Symbol.iterator];if(!H)return C;var ee=H.call(C),g,w=[],G;try{for(;($===void 0||$-- >0)&&!(g=ee.next()).done;)w.push(g.value)}catch(X){G={error:X}}finally{try{g&&!g.done&&(H=ee.return)&&H.call(ee)}finally{if(G)throw G.error}}return w},V=function(){for(var C=[],$=0;$<arguments.length;$++)C=C.concat(R(arguments[$]));return C},F=function(){for(var C=0,$=0,H=arguments.length;$<H;$++)C+=arguments[$].length;for(var ee=Array(C),g=0,$=0;$<H;$++)for(var w=arguments[$],G=0,X=w.length;G<X;G++,g++)ee[g]=w[G];return ee},T=function(C){return this instanceof T?(this.v=C,this):new T(C)},k=function(C,$,H){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee=H.apply(C,$||[]),g,w=[];return g={},G("next"),G("throw"),G("return"),g[Symbol.asyncIterator]=function(){return this},g;function G(ge){ee[ge]&&(g[ge]=function(ce){return new Promise(function(_e,he){w.push([ge,ce,_e,he])>1||X(ge,ce)})})}function X(ge,ce){try{W(ee[ge](ce))}catch(_e){ne(w[0][3],_e)}}function W(ge){ge.value instanceof T?Promise.resolve(ge.value.v).then(q,Z):ne(w[0][2],ge)}function q(ge){X("next",ge)}function Z(ge){X("throw",ge)}function ne(ge,ce){ge(ce),w.shift(),w.length&&X(w[0][0],w[0][1])}},Y=function(C){var $,H;return $={},ee("next"),ee("throw",function(g){throw g}),ee("return"),$[Symbol.iterator]=function(){return this},$;function ee(g,w){$[g]=C[g]?function(G){return(H=!H)?{value:T(C[g](G)),done:g==="return"}:w?w(G):G}:w}},ae=function(C){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var $=C[Symbol.asyncIterator],H;return $?$.call(C):(C=typeof x=="function"?x(C):C[Symbol.iterator](),H={},ee("next"),ee("throw"),ee("return"),H[Symbol.asyncIterator]=function(){return this},H);function ee(w){H[w]=C[w]&&function(G){return new Promise(function(X,W){G=C[w](G),g(X,W,G.done,G.value)})}}function g(w,G,X,W){Promise.resolve(W).then(function(q){w({value:q,done:X})},G)}},N=function(C,$){return Object.defineProperty?Object.defineProperty(C,"raw",{value:$}):C.raw=$,C},U=function(C){if(C&&C.__esModule)return C;var $={};if(C!=null)for(var H in C)Object.hasOwnProperty.call(C,H)&&($[H]=C[H]);return $.default=C,$},S=function(C){return C&&C.__esModule?C:{default:C}},O=function(C,$){if(!$.has(C))throw new TypeError("attempted to get private field on non-instance");return $.get(C)},m=function(C,$,H){if(!$.has(C))throw new TypeError("attempted to set private field on non-instance");return $.set(C,H),H},y("__extends",e),y("__assign",r),y("__rest",s),y("__decorate",a),y("__param",h),y("__metadata",p),y("__awaiter",l),y("__generator",v),y("__exportStar",D),y("__createBinding",c),y("__values",x),y("__read",R),y("__spread",V),y("__spreadArrays",F),y("__await",T),y("__asyncGenerator",k),y("__asyncDelegator",Y),y("__asyncValues",ae),y("__makeTemplateObject",N),y("__importStar",U),y("__importDefault",S),y("__classPrivateFieldGet",O),y("__classPrivateFieldSet",m)})})(Md);var jr=Md.exports,Dc={},ts={},Hf;function bw(){if(Hf)return ts;Hf=1,Object.defineProperty(ts,"__esModule",{value:!0}),ts.delay=void 0;function n(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return ts.delay=n,ts}var Yi={},Sc={},Ji={},Kf;function mw(){return Kf||(Kf=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.ONE_THOUSAND=Ji.ONE_HUNDRED=void 0,Ji.ONE_HUNDRED=100,Ji.ONE_THOUSAND=1e3),Ji}var Ic={},Vf;function ww(){return Vf||(Vf=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ONE_YEAR=n.FOUR_WEEKS=n.THREE_WEEKS=n.TWO_WEEKS=n.ONE_WEEK=n.THIRTY_DAYS=n.SEVEN_DAYS=n.FIVE_DAYS=n.THREE_DAYS=n.ONE_DAY=n.TWENTY_FOUR_HOURS=n.TWELVE_HOURS=n.SIX_HOURS=n.THREE_HOURS=n.ONE_HOUR=n.SIXTY_MINUTES=n.THIRTY_MINUTES=n.TEN_MINUTES=n.FIVE_MINUTES=n.ONE_MINUTE=n.SIXTY_SECONDS=n.THIRTY_SECONDS=n.TEN_SECONDS=n.FIVE_SECONDS=n.ONE_SECOND=void 0,n.ONE_SECOND=1,n.FIVE_SECONDS=5,n.TEN_SECONDS=10,n.THIRTY_SECONDS=30,n.SIXTY_SECONDS=60,n.ONE_MINUTE=n.SIXTY_SECONDS,n.FIVE_MINUTES=n.ONE_MINUTE*5,n.TEN_MINUTES=n.ONE_MINUTE*10,n.THIRTY_MINUTES=n.ONE_MINUTE*30,n.SIXTY_MINUTES=n.ONE_MINUTE*60,n.ONE_HOUR=n.SIXTY_MINUTES,n.THREE_HOURS=n.ONE_HOUR*3,n.SIX_HOURS=n.ONE_HOUR*6,n.TWELVE_HOURS=n.ONE_HOUR*12,n.TWENTY_FOUR_HOURS=n.ONE_HOUR*24,n.ONE_DAY=n.TWENTY_FOUR_HOURS,n.THREE_DAYS=n.ONE_DAY*3,n.FIVE_DAYS=n.ONE_DAY*5,n.SEVEN_DAYS=n.ONE_DAY*7,n.THIRTY_DAYS=n.ONE_DAY*30,n.ONE_WEEK=n.SEVEN_DAYS,n.TWO_WEEKS=n.ONE_WEEK*2,n.THREE_WEEKS=n.ONE_WEEK*3,n.FOUR_WEEKS=n.ONE_WEEK*4,n.ONE_YEAR=n.ONE_DAY*365}(Ic)),Ic}var kf;function $d(){return kf||(kf=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=jr;e.__exportStar(mw(),n),e.__exportStar(ww(),n)}(Sc)),Sc}var Gf;function Ew(){if(Gf)return Yi;Gf=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.fromMiliseconds=Yi.toMiliseconds=void 0;const n=$d();function e(s){return s*n.ONE_THOUSAND}Yi.toMiliseconds=e;function r(s){return Math.floor(s/n.ONE_THOUSAND)}return Yi.fromMiliseconds=r,Yi}var Wf;function Dw(){return Wf||(Wf=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=jr;e.__exportStar(bw(),n),e.__exportStar(Ew(),n)}(Dc)),Dc}var Cn={},Yf;function Sw(){if(Yf)return Cn;Yf=1,Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.Watch=void 0;class n{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const s=this.get(r);if(typeof s.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const a=Date.now()-s.started;this.timestamps.set(r,{started:s.started,elapsed:a})}get(r){const s=this.timestamps.get(r);if(typeof s>"u")throw new Error(`No timestamp found for label: ${r}`);return s}elapsed(r){const s=this.get(r);return s.elapsed||Date.now()-s.started}}return Cn.Watch=n,Cn.default=n,Cn}var xc={},rs={},Jf;function Iw(){if(Jf)return rs;Jf=1,Object.defineProperty(rs,"__esModule",{value:!0}),rs.IWatch=void 0;class n{}return rs.IWatch=n,rs}var Xf;function xw(){return Xf||(Xf=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),jr.__exportStar(Iw(),n)}(xc)),xc}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=jr;e.__exportStar(Dw(),n),e.__exportStar(Sw(),n),e.__exportStar(xw(),n),e.__exportStar($d(),n)})(me);var lt={};Object.defineProperty(lt,"__esModule",{value:!0});lt.getLocalStorage=lt.getLocalStorageOrThrow=lt.getCrypto=lt.getCryptoOrThrow=Bd=lt.getLocation=lt.getLocationOrThrow=pu=lt.getNavigator=lt.getNavigatorOrThrow=jd=lt.getDocument=lt.getDocumentOrThrow=lt.getFromWindowOrThrow=lt.getFromWindow=void 0;function rn(n){let e;return typeof window<"u"&&typeof window[n]<"u"&&(e=window[n]),e}lt.getFromWindow=rn;function Ln(n){const e=rn(n);if(!e)throw new Error(`${n} is not defined in Window`);return e}lt.getFromWindowOrThrow=Ln;function Ow(){return Ln("document")}lt.getDocumentOrThrow=Ow;function Cw(){return rn("document")}var jd=lt.getDocument=Cw;function Aw(){return Ln("navigator")}lt.getNavigatorOrThrow=Aw;function Pw(){return rn("navigator")}var pu=lt.getNavigator=Pw;function Tw(){return Ln("location")}lt.getLocationOrThrow=Tw;function Nw(){return rn("location")}var Bd=lt.getLocation=Nw;function Rw(){return Ln("crypto")}lt.getCryptoOrThrow=Rw;function Lw(){return rn("crypto")}lt.getCrypto=Lw;function Fw(){return Ln("localStorage")}lt.getLocalStorageOrThrow=Fw;function Uw(){return rn("localStorage")}lt.getLocalStorage=Uw;var gu={};Object.defineProperty(gu,"__esModule",{value:!0});var qd=gu.getWindowMetadata=void 0;const Zf=lt;function Mw(){let n,e;try{n=Zf.getDocumentOrThrow(),e=Zf.getLocationOrThrow()}catch{return null}function r(){const R=n.getElementsByTagName("link"),V=[];for(let F=0;F<R.length;F++){const T=R[F],k=T.getAttribute("rel");if(k&&k.toLowerCase().indexOf("icon")>-1){const Y=T.getAttribute("href");if(Y)if(Y.toLowerCase().indexOf("https:")===-1&&Y.toLowerCase().indexOf("http:")===-1&&Y.indexOf("//")!==0){let ae=e.protocol+"//"+e.host;if(Y.indexOf("/")===0)ae+=Y;else{const N=e.pathname.split("/");N.pop();const U=N.join("/");ae+=U+"/"+Y}V.push(ae)}else if(Y.indexOf("//")===0){const ae=e.protocol+Y;V.push(ae)}else V.push(Y)}}return V}function s(...R){const V=n.getElementsByTagName("meta");for(let F=0;F<V.length;F++){const T=V[F],k=["itemprop","property","name"].map(Y=>T.getAttribute(Y)).filter(Y=>Y?R.includes(Y):!1);if(k.length&&k){const Y=T.getAttribute("content");if(Y)return Y}}return""}function a(){let R=s("name","og:site_name","og:title","twitter:title");return R||(R=n.title),R}function h(){return s("description","og:description","twitter:description","keywords")}const p=a(),l=h(),v=e.origin,D=r();return{description:l,url:v,icons:D,name:p}}qd=gu.getWindowMetadata=Mw;var ps={},$w=n=>encodeURIComponent(n).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),zd="%[a-f0-9]{2}",Qf=new RegExp("("+zd+")|([^%]+?)","gi"),el=new RegExp("("+zd+")+","gi");function Wc(n,e){try{return[decodeURIComponent(n.join(""))]}catch{}if(n.length===1)return n;e=e||1;var r=n.slice(0,e),s=n.slice(e);return Array.prototype.concat.call([],Wc(r),Wc(s))}function jw(n){try{return decodeURIComponent(n)}catch{for(var e=n.match(Qf)||[],r=1;r<e.length;r++)n=Wc(e,r).join(""),e=n.match(Qf)||[];return n}}function Bw(n){for(var e={"%FE%FF":"ï¿½ï¿½","%FF%FE":"ï¿½ï¿½"},r=el.exec(n);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var s=jw(r[0]);s!==r[0]&&(e[r[0]]=s)}r=el.exec(n)}e["%C2"]="ï¿½";for(var a=Object.keys(e),h=0;h<a.length;h++){var p=a[h];n=n.replace(new RegExp(p,"g"),e[p])}return n}var qw=function(n){if(typeof n!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof n+"`");try{return n=n.replace(/\+/g," "),decodeURIComponent(n)}catch{return Bw(n)}},zw=(n,e)=>{if(!(typeof n=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[n];const r=n.indexOf(e);return r===-1?[n]:[n.slice(0,r),n.slice(r+e.length)]},Hw=function(n,e){for(var r={},s=Object.keys(n),a=Array.isArray(e),h=0;h<s.length;h++){var p=s[h],l=n[p];(a?e.indexOf(p)!==-1:e(p,l,n))&&(r[p]=l)}return r};(function(n){const e=$w,r=qw,s=zw,a=Hw,h=N=>N==null,p=Symbol("encodeFragmentIdentifier");function l(N){switch(N.arrayFormat){case"index":return U=>(S,O)=>{const m=S.length;return O===void 0||N.skipNull&&O===null||N.skipEmptyString&&O===""?S:O===null?[...S,[x(U,N),"[",m,"]"].join("")]:[...S,[x(U,N),"[",x(m,N),"]=",x(O,N)].join("")]};case"bracket":return U=>(S,O)=>O===void 0||N.skipNull&&O===null||N.skipEmptyString&&O===""?S:O===null?[...S,[x(U,N),"[]"].join("")]:[...S,[x(U,N),"[]=",x(O,N)].join("")];case"colon-list-separator":return U=>(S,O)=>O===void 0||N.skipNull&&O===null||N.skipEmptyString&&O===""?S:O===null?[...S,[x(U,N),":list="].join("")]:[...S,[x(U,N),":list=",x(O,N)].join("")];case"comma":case"separator":case"bracket-separator":{const U=N.arrayFormat==="bracket-separator"?"[]=":"=";return S=>(O,m)=>m===void 0||N.skipNull&&m===null||N.skipEmptyString&&m===""?O:(m=m===null?"":m,O.length===0?[[x(S,N),U,x(m,N)].join("")]:[[O,x(m,N)].join(N.arrayFormatSeparator)])}default:return U=>(S,O)=>O===void 0||N.skipNull&&O===null||N.skipEmptyString&&O===""?S:O===null?[...S,x(U,N)]:[...S,[x(U,N),"=",x(O,N)].join("")]}}function v(N){let U;switch(N.arrayFormat){case"index":return(S,O,m)=>{if(U=/\[(\d*)\]$/.exec(S),S=S.replace(/\[\d*\]$/,""),!U){m[S]=O;return}m[S]===void 0&&(m[S]={}),m[S][U[1]]=O};case"bracket":return(S,O,m)=>{if(U=/(\[\])$/.exec(S),S=S.replace(/\[\]$/,""),!U){m[S]=O;return}if(m[S]===void 0){m[S]=[O];return}m[S]=[].concat(m[S],O)};case"colon-list-separator":return(S,O,m)=>{if(U=/(:list)$/.exec(S),S=S.replace(/:list$/,""),!U){m[S]=O;return}if(m[S]===void 0){m[S]=[O];return}m[S]=[].concat(m[S],O)};case"comma":case"separator":return(S,O,m)=>{const c=typeof O=="string"&&O.includes(N.arrayFormatSeparator),y=typeof O=="string"&&!c&&R(O,N).includes(N.arrayFormatSeparator);O=y?R(O,N):O;const Q=c||y?O.split(N.arrayFormatSeparator).map(C=>R(C,N)):O===null?O:R(O,N);m[S]=Q};case"bracket-separator":return(S,O,m)=>{const c=/(\[\])$/.test(S);if(S=S.replace(/\[\]$/,""),!c){m[S]=O&&R(O,N);return}const y=O===null?[]:O.split(N.arrayFormatSeparator).map(Q=>R(Q,N));if(m[S]===void 0){m[S]=y;return}m[S]=[].concat(m[S],y)};default:return(S,O,m)=>{if(m[S]===void 0){m[S]=O;return}m[S]=[].concat(m[S],O)}}}function D(N){if(typeof N!="string"||N.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function x(N,U){return U.encode?U.strict?e(N):encodeURIComponent(N):N}function R(N,U){return U.decode?r(N):N}function V(N){return Array.isArray(N)?N.sort():typeof N=="object"?V(Object.keys(N)).sort((U,S)=>Number(U)-Number(S)).map(U=>N[U]):N}function F(N){const U=N.indexOf("#");return U!==-1&&(N=N.slice(0,U)),N}function T(N){let U="";const S=N.indexOf("#");return S!==-1&&(U=N.slice(S)),U}function k(N){N=F(N);const U=N.indexOf("?");return U===-1?"":N.slice(U+1)}function Y(N,U){return U.parseNumbers&&!Number.isNaN(Number(N))&&typeof N=="string"&&N.trim()!==""?N=Number(N):U.parseBooleans&&N!==null&&(N.toLowerCase()==="true"||N.toLowerCase()==="false")&&(N=N.toLowerCase()==="true"),N}function ae(N,U){U=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},U),D(U.arrayFormatSeparator);const S=v(U),O=Object.create(null);if(typeof N!="string"||(N=N.trim().replace(/^[?#&]/,""),!N))return O;for(const m of N.split("&")){if(m==="")continue;let[c,y]=s(U.decode?m.replace(/\+/g," "):m,"=");y=y===void 0?null:["comma","separator","bracket-separator"].includes(U.arrayFormat)?y:R(y,U),S(R(c,U),y,O)}for(const m of Object.keys(O)){const c=O[m];if(typeof c=="object"&&c!==null)for(const y of Object.keys(c))c[y]=Y(c[y],U);else O[m]=Y(c,U)}return U.sort===!1?O:(U.sort===!0?Object.keys(O).sort():Object.keys(O).sort(U.sort)).reduce((m,c)=>{const y=O[c];return y&&typeof y=="object"&&!Array.isArray(y)?m[c]=V(y):m[c]=y,m},Object.create(null))}n.extract=k,n.parse=ae,n.stringify=(N,U)=>{if(!N)return"";U=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},U),D(U.arrayFormatSeparator);const S=y=>U.skipNull&&h(N[y])||U.skipEmptyString&&N[y]==="",O=l(U),m={};for(const y of Object.keys(N))S(y)||(m[y]=N[y]);const c=Object.keys(m);return U.sort!==!1&&c.sort(U.sort),c.map(y=>{const Q=N[y];return Q===void 0?"":Q===null?x(y,U):Array.isArray(Q)?Q.length===0&&U.arrayFormat==="bracket-separator"?x(y,U)+"[]":Q.reduce(O(y),[]).join("&"):x(y,U)+"="+x(Q,U)}).filter(y=>y.length>0).join("&")},n.parseUrl=(N,U)=>{U=Object.assign({decode:!0},U);const[S,O]=s(N,"#");return Object.assign({url:S.split("?")[0]||"",query:ae(k(N),U)},U&&U.parseFragmentIdentifier&&O?{fragmentIdentifier:R(O,U)}:{})},n.stringifyUrl=(N,U)=>{U=Object.assign({encode:!0,strict:!0,[p]:!0},U);const S=F(N.url).split("?")[0]||"",O=n.extract(N.url),m=n.parse(O,{sort:!1}),c=Object.assign(m,N.query);let y=n.stringify(c,U);y&&(y=`?${y}`);let Q=T(N.url);return N.fragmentIdentifier&&(Q=`#${U[p]?x(N.fragmentIdentifier,U):N.fragmentIdentifier}`),`${S}${y}${Q}`},n.pick=(N,U,S)=>{S=Object.assign({parseFragmentIdentifier:!0,[p]:!1},S);const{url:O,query:m,fragmentIdentifier:c}=n.parseUrl(N,S);return n.stringifyUrl({url:O,query:a(m,U),fragmentIdentifier:c},S)},n.exclude=(N,U,S)=>{const O=Array.isArray(U)?m=>!U.includes(m):(m,c)=>!U(m,c);return n.pick(N,O,S)}})(ps);const Kw={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function Vw(n,e=[]){const r=[];return Object.keys(n).forEach(s=>{if(e.length&&!e.includes(s))return;const a=n[s];r.push(...a.accounts)}),r}function Hd(n,e){return n.includes(":")?[n]:e.chains||[]}const Kd="base10",ur="base16",Yc="base64pad",vu="utf8",Vd=0,nn=1,kw=0,tl=1,Jc=12,yu=32;function Gw(){const n=lu.generateKeyPair();return{privateKey:hr(n.secretKey,ur),publicKey:hr(n.publicKey,ur)}}function Xc(){const n=Rn.randomBytes(yu);return hr(n,ur)}function Ww(n,e){const r=lu.sharedKey(_r(n,ur),_r(e,ur)),s=new rm(Vo.SHA256,r).expand(yu);return hr(s,ur)}function Yw(n){const e=Vo.hash(_r(n,ur));return hr(e,ur)}function tn(n){const e=Vo.hash(_r(n,vu));return hr(e,ur)}function Jw(n){return _r(`${n}`,Kd)}function _s(n){return Number(hr(n,Kd))}function Xw(n){const e=Jw(typeof n.type<"u"?n.type:Vd);if(_s(e)===nn&&typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof n.senderPublicKey<"u"?_r(n.senderPublicKey,ur):void 0,s=typeof n.iv<"u"?_r(n.iv,ur):Rn.randomBytes(Jc),a=new hu.ChaCha20Poly1305(_r(n.symKey,ur)).seal(s,_r(n.message,vu));return Qw({type:e,sealed:a,iv:s,senderPublicKey:r})}function Zw(n){const e=new hu.ChaCha20Poly1305(_r(n.symKey,ur)),{sealed:r,iv:s}=Uo(n.encoded),a=e.open(s,r);if(a===null)throw new Error("Failed to decrypt");return hr(a,vu)}function Qw(n){if(_s(n.type)===nn){if(typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return hr(Gc([n.type,n.senderPublicKey,n.iv,n.sealed]),Yc)}return hr(Gc([n.type,n.iv,n.sealed]),Yc)}function Uo(n){const e=_r(n,Yc),r=e.slice(kw,tl),s=tl;if(_s(r)===nn){const l=s+yu,v=l+Jc,D=e.slice(s,l),x=e.slice(l,v),R=e.slice(v);return{type:r,sealed:R,iv:x,senderPublicKey:D}}const a=s+Jc,h=e.slice(s,a),p=e.slice(a);return{type:r,sealed:p,iv:h}}function eE(n,e){const r=Uo(n);return kd({type:_s(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?hr(r.senderPublicKey,ur):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function kd(n){const e=(n==null?void 0:n.type)||Vd;if(e===nn){if(typeof(n==null?void 0:n.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(n==null?void 0:n.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:n==null?void 0:n.senderPublicKey,receiverPublicKey:n==null?void 0:n.receiverPublicKey}}function rl(n){return n.type===nn&&typeof n.senderPublicKey=="string"&&typeof n.receiverPublicKey=="string"}var tE=Object.defineProperty,il=Object.getOwnPropertySymbols,rE=Object.prototype.hasOwnProperty,iE=Object.prototype.propertyIsEnumerable,nl=(n,e,r)=>e in n?tE(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,sl=(n,e)=>{for(var r in e||(e={}))rE.call(e,r)&&nl(n,r,e[r]);if(il)for(var r of il(e))iE.call(e,r)&&nl(n,r,e[r]);return n};const nE="ReactNative",Qi={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},sE="js";function _u(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Gd(){return!jd()&&!!pu()&&navigator.product===nE}function bu(){return!_u()&&!!pu()}function Wd(){return Gd()?Qi.reactNative:_u()?Qi.node:bu()?Qi.browser:Qi.unknown}function oE(n,e){let r=ps.parse(n);return r=sl(sl({},r),e),n=ps.stringify(r),n}function aE(){return qd()||{name:"",description:"",url:"",icons:[""]}}function cE(){const n=pw();if(n===null)return"unknown";const e=n.os?n.os.replace(" ","").toLowerCase():"unknown";return n.type==="browser"?[e,n.name,n.version].join("-"):[e,n.version].join("-")}function uE(){var n;const e=Wd();return e===Qi.browser?[e,((n=Bd())==null?void 0:n.host)||"unknown"].join(":"):e}function hE(n,e,r){const s=cE(),a=uE();return[[n,e].join("-"),[sE,r].join("-"),s,a].join("/")}function fE({protocol:n,version:e,relayUrl:r,sdkVersion:s,auth:a,projectId:h,useOnCloseEvent:p}){const l=r.split("?"),v=hE(n,e,s),D={auth:a,ua:v,projectId:h,useOnCloseEvent:p||void 0},x=oE(l[1]||"",D);return l[0]+"?"+x}function en(n,e){return n.filter(r=>e.includes(r)).length===n.length}function Yd(n){return Object.fromEntries(n.entries())}function Jd(n){return new Map(Object.entries(n))}function An(n=me.FIVE_MINUTES,e){const r=me.toMiliseconds(n||me.FIVE_MINUTES);let s,a,h;return{resolve:p=>{h&&s&&(clearTimeout(h),s(p))},reject:p=>{h&&a&&(clearTimeout(h),a(p))},done:()=>new Promise((p,l)=>{h=setTimeout(()=>{l(new Error(e))},r),s=p,a=l})}}function Mo(n,e,r){return new Promise(async(s,a)=>{const h=setTimeout(()=>a(new Error(r)),e);try{const p=await n;s(p)}catch(p){a(p)}clearTimeout(h)})}function Xd(n,e){if(typeof e=="string"&&e.startsWith(`${n}:`))return e;if(n.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(n.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${n}`)}function lE(n){return Xd("topic",n)}function dE(n){return Xd("id",n)}function Zd(n){const[e,r]=n.split(":"),s={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")s.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))s.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return s}function ri(n,e){return me.fromMiliseconds((e||Date.now())+me.toMiliseconds(n))}function Pi(n){return Date.now()>=me.toMiliseconds(n)}function qt(n,e){return`${n}${e?`:${e}`:""}`}function Oc(n=[],e=[]){return[...new Set([...n,...e])]}const pE="irn";function Zc(n){return(n==null?void 0:n.relay)||{protocol:pE}}function To(n){const e=Kw[n];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${n}`);return e}var gE=Object.defineProperty,ol=Object.getOwnPropertySymbols,vE=Object.prototype.hasOwnProperty,yE=Object.prototype.propertyIsEnumerable,al=(n,e,r)=>e in n?gE(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,_E=(n,e)=>{for(var r in e||(e={}))vE.call(e,r)&&al(n,r,e[r]);if(ol)for(var r of ol(e))yE.call(e,r)&&al(n,r,e[r]);return n};function bE(n,e="-"){const r={},s="relay"+e;return Object.keys(n).forEach(a=>{if(a.startsWith(s)){const h=a.replace(s,""),p=n[a];r[h]=p}}),r}function mE(n){const e=n.indexOf(":"),r=n.indexOf("?")!==-1?n.indexOf("?"):void 0,s=n.substring(0,e),a=n.substring(e+1,r).split("@"),h=typeof r<"u"?n.substring(r):"",p=ps.parse(h);return{protocol:s,topic:a[0],version:parseInt(a[1],10),symKey:p.symKey,relay:bE(p)}}function wE(n,e="-"){const r="relay",s={};return Object.keys(n).forEach(a=>{const h=r+e+a;n[a]&&(s[h]=n[a])}),s}function EE(n){return`${n.protocol}:${n.topic}@${n.version}?`+ps.stringify(_E({symKey:n.symKey},wE(n.relay)))}function Fn(n){const e=[];return n.forEach(r=>{const[s,a]=r.split(":");e.push(`${s}:${a}`)}),e}function DE(n){const e=[];return Object.values(n).forEach(r=>{e.push(...Fn(r.accounts))}),e}function SE(n,e){const r=[];return Object.values(n).forEach(s=>{Fn(s.accounts).includes(e)&&r.push(...s.methods)}),r}function IE(n,e){const r=[];return Object.values(n).forEach(s=>{Fn(s.accounts).includes(e)&&r.push(...s.events)}),r}function xE(n,e){const r=Ro(n,e);if(r)throw new Error(r.message);const s={};for(const[a,h]of Object.entries(n))s[a]={methods:h.methods,events:h.events,chains:h.accounts.map(p=>`${p.split(":")[0]}:${p.split(":")[1]}`)};return s}function Qd(n){return n.includes(":")}function No(n){return Qd(n)?n.split(":")[0]:n}const OE={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},CE={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function le(n,e){const{message:r,code:s}=CE[n];return{message:e?`${r} ${e}`:r,code:s}}function Rt(n,e){const{message:r,code:s}=OE[n];return{message:e?`${r} ${e}`:r,code:s}}function _i(n,e){return Array.isArray(n)?typeof e<"u"&&n.length?n.every(e):!0:!1}function Nn(n){return Object.getPrototypeOf(n)===Object.prototype&&Object.keys(n).length}function cr(n){return typeof n>"u"}function Gt(n,e){return e&&cr(n)?!0:typeof n=="string"&&!!n.trim().length}function mu(n,e){return e&&cr(n)?!0:typeof n=="number"&&!isNaN(n)}function AE(n,e){const{requiredNamespaces:r}=e,s=Object.keys(n.namespaces),a=Object.keys(r);let h=!0;return en(a,s)?(s.forEach(p=>{const{accounts:l,methods:v,events:D}=n.namespaces[p],x=Fn(l),R=r[p];(!en(Hd(p,R),x)||!en(R.methods,v)||!en(R.events,D))&&(h=!1)}),h):!1}function wu(n){return Gt(n,!1)&&n.includes(":")?n.split(":").length===2:!1}function PE(n){if(Gt(n,!1)&&n.includes(":")){const e=n.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&wu(r)}}return!1}function TE(n){if(Gt(n,!1))try{return typeof new URL(n)<"u"}catch{return!1}return!1}function NE(n){var e;return(e=n==null?void 0:n.proposer)==null?void 0:e.publicKey}function RE(n){return n==null?void 0:n.topic}function LE(n,e){let r=null;return Gt(n==null?void 0:n.publicKey,!1)||(r=le("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function cl(n){let e=!0;return _i(n)?n.length&&(e=n.every(r=>Gt(r,!1))):e=!1,e}function FE(n,e,r){let s=null;return _i(e)?e.forEach(a=>{s||(!wu(a)||!a.includes(n))&&(s=Rt("UNSUPPORTED_CHAINS",`${r}, chain ${a} should be a string and conform to "namespace:chainId" format`))}):s=Rt("UNSUPPORTED_CHAINS",`${r}, chains ${e} should be an array of strings conforming to "namespace:chainId" format`),s}function UE(n,e){let r=null;return Object.entries(n).forEach(([s,a])=>{if(r)return;const h=FE(s,Hd(s,a),`${e} requiredNamespace`);h&&(r=h)}),r}function ME(n,e){let r=null;return _i(n)?n.forEach(s=>{r||PE(s)||(r=Rt("UNSUPPORTED_ACCOUNTS",`${e}, account ${s} should be a string and conform to "namespace:chainId:address" format`))}):r=Rt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function $E(n,e){let r=null;return Object.values(n).forEach(s=>{if(r)return;const a=ME(s==null?void 0:s.accounts,`${e} namespace`);a&&(r=a)}),r}function jE(n,e){let r=null;return cl(n==null?void 0:n.methods)?cl(n==null?void 0:n.events)||(r=Rt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=Rt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function ep(n,e){let r=null;return Object.values(n).forEach(s=>{if(r)return;const a=jE(s,`${e}, namespace`);a&&(r=a)}),r}function BE(n,e,r){let s=null;if(n&&Nn(n)){const a=ep(n,e);a&&(s=a);const h=UE(n,e);h&&(s=h)}else s=le("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return s}function Ro(n,e){let r=null;if(n&&Nn(n)){const s=ep(n,e);s&&(r=s);const a=$E(n,e);a&&(r=a)}else r=le("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function tp(n){return Gt(n.protocol,!0)}function qE(n,e){let r=!1;return e&&!n?r=!0:n&&_i(n)&&n.length&&n.forEach(s=>{r=tp(s)}),r}function zE(n){return typeof n=="number"}function yr(n){return typeof n<"u"&&typeof n!==null}function HE(n){return!(!n||typeof n!="object"||!n.code||!mu(n.code,!1)||!n.message||!Gt(n.message,!1))}function KE(n){return!(cr(n)||!Gt(n.method,!1))}function VE(n){return!(cr(n)||cr(n.result)&&cr(n.error)||!mu(n.id,!1)||!Gt(n.jsonrpc,!1))}function kE(n){return!(cr(n)||!Gt(n.name,!1))}function ul(n,e){return!(!wu(e)||!DE(n).includes(e))}function GE(n,e,r){return Gt(r,!1)?SE(n,e).includes(r):!1}function WE(n,e,r){return Gt(r,!1)?IE(n,e).includes(r):!1}function hl(n,e,r){let s=null;const a=YE(n),h=JE(e),p=Object.keys(a),l=Object.keys(h),v=fl(Object.keys(n)),D=fl(Object.keys(e)),x=v.filter(R=>!D.includes(R));return x.length&&(s=le("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${x.toString()}
      Received: ${Object.keys(e).toString()}`)),en(p,l)||(s=le("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${p.toString()}
      Approved: ${l.toString()}`)),Object.keys(e).forEach(R=>{if(!R.includes(":")||s)return;const V=Fn(e[R].accounts);V.includes(R)||(s=le("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${R}
        Required: ${R}
        Approved: ${V.toString()}`))}),p.forEach(R=>{s||(en(a[R].methods,h[R].methods)?en(a[R].events,h[R].events)||(s=le("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${R}`)):s=le("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${R}`))}),s}function YE(n){const e={};return Object.keys(n).forEach(r=>{var s;r.includes(":")?e[r]=n[r]:(s=n[r].chains)==null||s.forEach(a=>{e[a]={methods:n[r].methods,events:n[r].events}})}),e}function fl(n){return[...new Set(n.map(e=>e.includes(":")?e.split(":")[0]:e))]}function JE(n){const e={};return Object.keys(n).forEach(r=>{if(r.includes(":"))e[r]=n[r];else{const s=Fn(n[r].accounts);s==null||s.forEach(a=>{e[a]={accounts:n[r].accounts.filter(h=>h.includes(`${a}:`)),methods:n[r].methods,events:n[r].events}})}}),e}function XE(n,e){return mu(n,!1)&&n<=e.max&&n>=e.min}var Go={},bs={};Object.defineProperty(bs,"__esModule",{value:!0});function ZE(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return JSON.parse(n)}catch{return n}}bs.safeJsonParse=ZE;function QE(n){return typeof n=="string"?n:JSON.stringify(n,(e,r)=>typeof r>"u"?null:r)}bs.safeJsonStringify=QE;var is={exports:{}},ll;function e3(){return ll||(ll=1,function(){let n;function e(){}n=e,n.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},n.prototype.setItem=function(r,s){this[r]=String(s)},n.prototype.removeItem=function(r){delete this[r]},n.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(s){r[s]=void 0,delete r[s]})},n.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},n.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof er<"u"&&er.localStorage?is.exports=er.localStorage:typeof window<"u"&&window.localStorage?is.exports=window.localStorage:is.exports=new e}()),is.exports}var Cc={},ns={},dl;function t3(){if(dl)return ns;dl=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.IKeyValueStorage=void 0;class n{}return ns.IKeyValueStorage=n,ns}var ss={},pl;function r3(){if(pl)return ss;pl=1,Object.defineProperty(ss,"__esModule",{value:!0}),ss.parseEntry=void 0;const n=bs;function e(r){var s;return[r[0],n.safeJsonParse((s=r[1])!==null&&s!==void 0?s:"")]}return ss.parseEntry=e,ss}var gl;function i3(){return gl||(gl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=jr;e.__exportStar(t3(),n),e.__exportStar(r3(),n)}(Cc)),Cc}Object.defineProperty(Go,"__esModule",{value:!0});Go.KeyValueStorage=void 0;const Pn=jr,vl=bs,n3=Pn.__importDefault(e3()),s3=i3();class rp{constructor(){this.localStorage=n3.default}getKeys(){return Pn.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return Pn.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(s3.parseEntry)})}getItem(e){return Pn.__awaiter(this,void 0,void 0,function*(){const r=this.localStorage.getItem(e);if(r!==null)return vl.safeJsonParse(r)})}setItem(e,r){return Pn.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,vl.safeJsonStringify(r))})}removeItem(e){return Pn.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}Go.KeyValueStorage=rp;var o3=Go.default=rp,ms={},os={},Ac={},as={};let sn=class{};const a3=Object.freeze(Object.defineProperty({__proto__:null,IEvents:sn},Symbol.toStringTag,{value:"Module"})),c3=gb(a3);var yl;function u3(){if(yl)return as;yl=1,Object.defineProperty(as,"__esModule",{value:!0}),as.IHeartBeat=void 0;const n=c3;class e extends n.IEvents{constructor(s){super()}}return as.IHeartBeat=e,as}var _l;function ip(){return _l||(_l=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),jr.__exportStar(u3(),n)}(Ac)),Ac}var Pc={},Xi={},bl;function h3(){if(bl)return Xi;bl=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.HEARTBEAT_EVENTS=Xi.HEARTBEAT_INTERVAL=void 0;const n=me;return Xi.HEARTBEAT_INTERVAL=n.FIVE_SECONDS,Xi.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Xi}var ml;function np(){return ml||(ml=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),jr.__exportStar(h3(),n)}(Pc)),Pc}var wl;function f3(){if(wl)return os;wl=1,Object.defineProperty(os,"__esModule",{value:!0}),os.HeartBeat=void 0;const n=jr,e=Ir,r=me,s=ip(),a=np();class h extends s.IHeartBeat{constructor(l){super(l),this.events=new e.EventEmitter,this.interval=a.HEARTBEAT_INTERVAL,this.interval=(l==null?void 0:l.interval)||a.HEARTBEAT_INTERVAL}static init(l){return n.__awaiter(this,void 0,void 0,function*(){const v=new h(l);return yield v.init(),v})}init(){return n.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(l,v){this.events.on(l,v)}once(l,v){this.events.once(l,v)}off(l,v){this.events.off(l,v)}removeListener(l,v){this.events.removeListener(l,v)}initialize(){return n.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(a.HEARTBEAT_EVENTS.pulse)}}return os.HeartBeat=h,os}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=jr;e.__exportStar(f3(),n),e.__exportStar(ip(),n),e.__exportStar(np(),n)})(ms);var Qe={},Tc,El;function l3(){if(El)return Tc;El=1;function n(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}Tc=e;function e(r,s,a){var h=a&&a.stringify||n,p=1;if(typeof r=="object"&&r!==null){var l=s.length+p;if(l===1)return r;var v=new Array(l);v[0]=h(r);for(var D=1;D<l;D++)v[D]=h(s[D]);return v.join(" ")}if(typeof r!="string")return r;var x=s.length;if(x===0)return r;for(var R="",V=1-p,F=-1,T=r&&r.length||0,k=0;k<T;){if(r.charCodeAt(k)===37&&k+1<T){switch(F=F>-1?F:0,r.charCodeAt(k+1)){case 100:case 102:if(V>=x||s[V]==null)break;F<k&&(R+=r.slice(F,k)),R+=Number(s[V]),F=k+2,k++;break;case 105:if(V>=x||s[V]==null)break;F<k&&(R+=r.slice(F,k)),R+=Math.floor(Number(s[V])),F=k+2,k++;break;case 79:case 111:case 106:if(V>=x||s[V]===void 0)break;F<k&&(R+=r.slice(F,k));var Y=typeof s[V];if(Y==="string"){R+="'"+s[V]+"'",F=k+2,k++;break}if(Y==="function"){R+=s[V].name||"<anonymous>",F=k+2,k++;break}R+=h(s[V]),F=k+2,k++;break;case 115:if(V>=x)break;F<k&&(R+=r.slice(F,k)),R+=String(s[V]),F=k+2,k++;break;case 37:F<k&&(R+=r.slice(F,k)),R+="%",F=k+2,k++,V--;break}++V}++k}return F===-1?r:(F<T&&(R+=r.slice(F)),R)}return Tc}var Nc,Dl;function d3(){if(Dl)return Nc;Dl=1;const n=l3();Nc=a;const e=O().console||{},r={mapHttpRequest:T,mapHttpResponse:T,wrapRequestSerializer:k,wrapResponseSerializer:k,wrapErrorSerializer:k,req:T,res:T,err:V};function s(m,c){return Array.isArray(m)?m.filter(function(Q){return Q!=="!stdSerializers.err"}):m===!0?Object.keys(c):!1}function a(m){m=m||{},m.browser=m.browser||{};const c=m.browser.transmit;if(c&&typeof c.send!="function")throw Error("pino: transmit option must have a send function");const y=m.browser.write||e;m.browser.write&&(m.browser.asObject=!0);const Q=m.serializers||{},C=s(m.browser.serialize,Q);let $=m.browser.serialize;Array.isArray(m.browser.serialize)&&m.browser.serialize.indexOf("!stdSerializers.err")>-1&&($=!1);const H=["error","fatal","warn","info","debug","trace"];typeof y=="function"&&(y.error=y.fatal=y.warn=y.info=y.debug=y.trace=y),m.enabled===!1&&(m.level="silent");const ee=m.level||"info",g=Object.create(y);g.log||(g.log=Y),Object.defineProperty(g,"levelVal",{get:G}),Object.defineProperty(g,"level",{get:X,set:W});const w={transmit:c,serialize:C,asObject:m.browser.asObject,levels:H,timestamp:F(m)};g.levels=a.levels,g.level=ee,g.setMaxListeners=g.getMaxListeners=g.emit=g.addListener=g.on=g.prependListener=g.once=g.prependOnceListener=g.removeListener=g.removeAllListeners=g.listeners=g.listenerCount=g.eventNames=g.write=g.flush=Y,g.serializers=Q,g._serialize=C,g._stdErrSerialize=$,g.child=q,c&&(g._logEvent=R());function G(){return this.level==="silent"?1/0:this.levels.values[this.level]}function X(){return this._level}function W(Z){if(Z!=="silent"&&!this.levels.values[Z])throw Error("unknown level "+Z);this._level=Z,h(w,g,"error","log"),h(w,g,"fatal","error"),h(w,g,"warn","error"),h(w,g,"info","log"),h(w,g,"debug","log"),h(w,g,"trace","log")}function q(Z,ne){if(!Z)throw new Error("missing bindings for child Pino");ne=ne||{},C&&Z.serializers&&(ne.serializers=Z.serializers);const ge=ne.serializers;if(C&&ge){var ce=Object.assign({},Q,ge),_e=m.browser.serialize===!0?Object.keys(ce):C;delete Z.serializers,v([Z],_e,ce,this._stdErrSerialize)}function he(be){this._childLevel=(be._childLevel|0)+1,this.error=D(be,Z,"error"),this.fatal=D(be,Z,"fatal"),this.warn=D(be,Z,"warn"),this.info=D(be,Z,"info"),this.debug=D(be,Z,"debug"),this.trace=D(be,Z,"trace"),ce&&(this.serializers=ce,this._serialize=_e),c&&(this._logEvent=R([].concat(be._logEvent.bindings,Z)))}return he.prototype=this,new he(this)}return g}a.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},a.stdSerializers=r,a.stdTimeFunctions=Object.assign({},{nullTime:ae,epochTime:N,unixTime:U,isoTime:S});function h(m,c,y,Q){const C=Object.getPrototypeOf(c);c[y]=c.levelVal>c.levels.values[y]?Y:C[y]?C[y]:e[y]||e[Q]||Y,p(m,c,y)}function p(m,c,y){!m.transmit&&c[y]===Y||(c[y]=function(Q){return function(){const $=m.timestamp(),H=new Array(arguments.length),ee=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var g=0;g<H.length;g++)H[g]=arguments[g];if(m.serialize&&!m.asObject&&v(H,this._serialize,this.serializers,this._stdErrSerialize),m.asObject?Q.call(ee,l(this,y,H,$)):Q.apply(ee,H),m.transmit){const w=m.transmit.level||c.level,G=a.levels.values[w],X=a.levels.values[y];if(X<G)return;x(this,{ts:$,methodLevel:y,methodValue:X,transmitLevel:w,transmitValue:a.levels.values[m.transmit.level||c.level],send:m.transmit.send,val:c.levelVal},H)}}}(c[y]))}function l(m,c,y,Q){m._serialize&&v(y,m._serialize,m.serializers,m._stdErrSerialize);const C=y.slice();let $=C[0];const H={};Q&&(H.time=Q),H.level=a.levels.values[c];let ee=(m._childLevel|0)+1;if(ee<1&&(ee=1),$!==null&&typeof $=="object"){for(;ee--&&typeof C[0]=="object";)Object.assign(H,C.shift());$=C.length?n(C.shift(),C):void 0}else typeof $=="string"&&($=n(C.shift(),C));return $!==void 0&&(H.msg=$),H}function v(m,c,y,Q){for(const C in m)if(Q&&m[C]instanceof Error)m[C]=a.stdSerializers.err(m[C]);else if(typeof m[C]=="object"&&!Array.isArray(m[C]))for(const $ in m[C])c&&c.indexOf($)>-1&&$ in y&&(m[C][$]=y[$](m[C][$]))}function D(m,c,y){return function(){const Q=new Array(1+arguments.length);Q[0]=c;for(var C=1;C<Q.length;C++)Q[C]=arguments[C-1];return m[y].apply(this,Q)}}function x(m,c,y){const Q=c.send,C=c.ts,$=c.methodLevel,H=c.methodValue,ee=c.val,g=m._logEvent.bindings;v(y,m._serialize||Object.keys(m.serializers),m.serializers,m._stdErrSerialize===void 0?!0:m._stdErrSerialize),m._logEvent.ts=C,m._logEvent.messages=y.filter(function(w){return g.indexOf(w)===-1}),m._logEvent.level.label=$,m._logEvent.level.value=H,Q($,m._logEvent,ee),m._logEvent=R(g)}function R(m){return{ts:0,messages:[],bindings:m||[],level:{label:"",value:0}}}function V(m){const c={type:m.constructor.name,msg:m.message,stack:m.stack};for(const y in m)c[y]===void 0&&(c[y]=m[y]);return c}function F(m){return typeof m.timestamp=="function"?m.timestamp:m.timestamp===!1?ae:N}function T(){return{}}function k(m){return m}function Y(){}function ae(){return!1}function N(){return Date.now()}function U(){return Math.round(Date.now()/1e3)}function S(){return new Date(Date.now()).toISOString()}function O(){function m(c){return typeof c<"u"&&c}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return m(self)||m(window)||m(this)||{}}}return Nc}var Zi={},Sl;function sp(){return Sl||(Sl=1,Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.PINO_CUSTOM_CONTEXT_KEY=Zi.PINO_LOGGER_DEFAULTS=void 0,Zi.PINO_LOGGER_DEFAULTS={level:"info"},Zi.PINO_CUSTOM_CONTEXT_KEY="custom_context"),Zi}var ar={},Il;function p3(){if(Il)return ar;Il=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.generateChildLogger=ar.formatChildLoggerContext=ar.getLoggerContext=ar.setBrowserLoggerContext=ar.getBrowserLoggerContext=ar.getDefaultLoggerOptions=void 0;const n=sp();function e(l){return Object.assign(Object.assign({},l),{level:(l==null?void 0:l.level)||n.PINO_LOGGER_DEFAULTS.level})}ar.getDefaultLoggerOptions=e;function r(l,v=n.PINO_CUSTOM_CONTEXT_KEY){return l[v]||""}ar.getBrowserLoggerContext=r;function s(l,v,D=n.PINO_CUSTOM_CONTEXT_KEY){return l[D]=v,l}ar.setBrowserLoggerContext=s;function a(l,v=n.PINO_CUSTOM_CONTEXT_KEY){let D="";return typeof l.bindings>"u"?D=r(l,v):D=l.bindings().context||"",D}ar.getLoggerContext=a;function h(l,v,D=n.PINO_CUSTOM_CONTEXT_KEY){const x=a(l,D);return x.trim()?`${x}/${v}`:v}ar.formatChildLoggerContext=h;function p(l,v,D=n.PINO_CUSTOM_CONTEXT_KEY){const x=h(l,v,D),R=l.child({context:x});return s(R,x,D)}return ar.generateChildLogger=p,ar}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.pino=void 0;const e=jr,r=e.__importDefault(d3());Object.defineProperty(n,"pino",{enumerable:!0,get:function(){return r.default}}),e.__exportStar(sp(),n),e.__exportStar(p3(),n)})(Qe);class g3 extends sn{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class v3 extends sn{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}}class y3{constructor(e,r){this.logger=e,this.core=r}}let _3=class extends sn{constructor(e,r){super(),this.relayer=e,this.logger=r}};class b3 extends sn{constructor(e){super()}}let m3=class{constructor(e,r,s,a){this.core=e,this.logger=r,this.name=s}};class w3 extends sn{constructor(e,r){super(),this.relayer=e,this.logger=r}}let E3=class extends sn{constructor(e,r){super(),this.core=e,this.logger=r}},D3=class{constructor(e,r){this.projectId=e,this.logger=r}},S3=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}};class I3{constructor(e){this.client=e}}const x3=n=>JSON.stringify(n,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),O3=n=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=n.replace(e,'$1"$2n"$3');return JSON.parse(r,(s,a)=>typeof a=="string"&&a.match(/^\d+n$/)?BigInt(a.substring(0,a.length-1)):a)};function Eu(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return O3(n)}catch{return n}}function gs(n){return typeof n=="string"?n:x3(n)||""}var Du={},op={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Ue,r=xr;n.DIGEST_LENGTH=64,n.BLOCK_SIZE=128;var s=function(){function l(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return l.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},l.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},l.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},l.prototype.update=function(v,D){if(D===void 0&&(D=v.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var x=0;if(this._bytesHashed+=D,this._bufferLength>0){for(;this._bufferLength<n.BLOCK_SIZE&&D>0;)this._buffer[this._bufferLength++]=v[x++],D--;this._bufferLength===this.blockSize&&(h(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(D>=this.blockSize&&(x=h(this._tempHi,this._tempLo,this._stateHi,this._stateLo,v,x,D),D%=this.blockSize);D>0;)this._buffer[this._bufferLength++]=v[x++],D--;return this},l.prototype.finish=function(v){if(!this._finished){var D=this._bytesHashed,x=this._bufferLength,R=D/536870912|0,V=D<<3,F=D%128<112?128:256;this._buffer[x]=128;for(var T=x+1;T<F-8;T++)this._buffer[T]=0;e.writeUint32BE(R,this._buffer,F-8),e.writeUint32BE(V,this._buffer,F-4),h(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,F),this._finished=!0}for(var T=0;T<this.digestLength/8;T++)e.writeUint32BE(this._stateHi[T],v,T*8),e.writeUint32BE(this._stateLo[T],v,T*8+4);return this},l.prototype.digest=function(){var v=new Uint8Array(this.digestLength);return this.finish(v),v},l.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},l.prototype.restoreState=function(v){return this._stateHi.set(v.stateHi),this._stateLo.set(v.stateLo),this._bufferLength=v.bufferLength,v.buffer&&this._buffer.set(v.buffer),this._bytesHashed=v.bytesHashed,this._finished=!1,this},l.prototype.cleanSavedState=function(v){r.wipe(v.stateHi),r.wipe(v.stateLo),v.buffer&&r.wipe(v.buffer),v.bufferLength=0,v.bytesHashed=0},l}();n.SHA512=s;var a=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function h(l,v,D,x,R,V,F){for(var T=D[0],k=D[1],Y=D[2],ae=D[3],N=D[4],U=D[5],S=D[6],O=D[7],m=x[0],c=x[1],y=x[2],Q=x[3],C=x[4],$=x[5],H=x[6],ee=x[7],g,w,G,X,W,q,Z,ne;F>=128;){for(var ge=0;ge<16;ge++){var ce=8*ge+V;l[ge]=e.readUint32BE(R,ce),v[ge]=e.readUint32BE(R,ce+4)}for(var ge=0;ge<80;ge++){var _e=T,he=k,be=Y,K=ae,z=N,L=U,f=S,A=O,ue=m,de=c,Ie=y,ze=Q,Ve=C,Me=$,gt=H,vt=ee;if(g=O,w=ee,W=w&65535,q=w>>>16,Z=g&65535,ne=g>>>16,g=(N>>>14|C<<32-14)^(N>>>18|C<<32-18)^(C>>>41-32|N<<32-(41-32)),w=(C>>>14|N<<32-14)^(C>>>18|N<<32-18)^(N>>>41-32|C<<32-(41-32)),W+=w&65535,q+=w>>>16,Z+=g&65535,ne+=g>>>16,g=N&U^~N&S,w=C&$^~C&H,W+=w&65535,q+=w>>>16,Z+=g&65535,ne+=g>>>16,g=a[ge*2],w=a[ge*2+1],W+=w&65535,q+=w>>>16,Z+=g&65535,ne+=g>>>16,g=l[ge%16],w=v[ge%16],W+=w&65535,q+=w>>>16,Z+=g&65535,ne+=g>>>16,q+=W>>>16,Z+=q>>>16,ne+=Z>>>16,G=Z&65535|ne<<16,X=W&65535|q<<16,g=G,w=X,W=w&65535,q=w>>>16,Z=g&65535,ne=g>>>16,g=(T>>>28|m<<32-28)^(m>>>34-32|T<<32-(34-32))^(m>>>39-32|T<<32-(39-32)),w=(m>>>28|T<<32-28)^(T>>>34-32|m<<32-(34-32))^(T>>>39-32|m<<32-(39-32)),W+=w&65535,q+=w>>>16,Z+=g&65535,ne+=g>>>16,g=T&k^T&Y^k&Y,w=m&c^m&y^c&y,W+=w&65535,q+=w>>>16,Z+=g&65535,ne+=g>>>16,q+=W>>>16,Z+=q>>>16,ne+=Z>>>16,A=Z&65535|ne<<16,vt=W&65535|q<<16,g=K,w=ze,W=w&65535,q=w>>>16,Z=g&65535,ne=g>>>16,g=G,w=X,W+=w&65535,q+=w>>>16,Z+=g&65535,ne+=g>>>16,q+=W>>>16,Z+=q>>>16,ne+=Z>>>16,K=Z&65535|ne<<16,ze=W&65535|q<<16,k=_e,Y=he,ae=be,N=K,U=z,S=L,O=f,T=A,c=ue,y=de,Q=Ie,C=ze,$=Ve,H=Me,ee=gt,m=vt,ge%16===15)for(var ce=0;ce<16;ce++)g=l[ce],w=v[ce],W=w&65535,q=w>>>16,Z=g&65535,ne=g>>>16,g=l[(ce+9)%16],w=v[(ce+9)%16],W+=w&65535,q+=w>>>16,Z+=g&65535,ne+=g>>>16,G=l[(ce+1)%16],X=v[(ce+1)%16],g=(G>>>1|X<<32-1)^(G>>>8|X<<32-8)^G>>>7,w=(X>>>1|G<<32-1)^(X>>>8|G<<32-8)^(X>>>7|G<<32-7),W+=w&65535,q+=w>>>16,Z+=g&65535,ne+=g>>>16,G=l[(ce+14)%16],X=v[(ce+14)%16],g=(G>>>19|X<<32-19)^(X>>>61-32|G<<32-(61-32))^G>>>6,w=(X>>>19|G<<32-19)^(G>>>61-32|X<<32-(61-32))^(X>>>6|G<<32-6),W+=w&65535,q+=w>>>16,Z+=g&65535,ne+=g>>>16,q+=W>>>16,Z+=q>>>16,ne+=Z>>>16,l[ce]=Z&65535|ne<<16,v[ce]=W&65535|q<<16}g=T,w=m,W=w&65535,q=w>>>16,Z=g&65535,ne=g>>>16,g=D[0],w=x[0],W+=w&65535,q+=w>>>16,Z+=g&65535,ne+=g>>>16,q+=W>>>16,Z+=q>>>16,ne+=Z>>>16,D[0]=T=Z&65535|ne<<16,x[0]=m=W&65535|q<<16,g=k,w=c,W=w&65535,q=w>>>16,Z=g&65535,ne=g>>>16,g=D[1],w=x[1],W+=w&65535,q+=w>>>16,Z+=g&65535,ne+=g>>>16,q+=W>>>16,Z+=q>>>16,ne+=Z>>>16,D[1]=k=Z&65535|ne<<16,x[1]=c=W&65535|q<<16,g=Y,w=y,W=w&65535,q=w>>>16,Z=g&65535,ne=g>>>16,g=D[2],w=x[2],W+=w&65535,q+=w>>>16,Z+=g&65535,ne+=g>>>16,q+=W>>>16,Z+=q>>>16,ne+=Z>>>16,D[2]=Y=Z&65535|ne<<16,x[2]=y=W&65535|q<<16,g=ae,w=Q,W=w&65535,q=w>>>16,Z=g&65535,ne=g>>>16,g=D[3],w=x[3],W+=w&65535,q+=w>>>16,Z+=g&65535,ne+=g>>>16,q+=W>>>16,Z+=q>>>16,ne+=Z>>>16,D[3]=ae=Z&65535|ne<<16,x[3]=Q=W&65535|q<<16,g=N,w=C,W=w&65535,q=w>>>16,Z=g&65535,ne=g>>>16,g=D[4],w=x[4],W+=w&65535,q+=w>>>16,Z+=g&65535,ne+=g>>>16,q+=W>>>16,Z+=q>>>16,ne+=Z>>>16,D[4]=N=Z&65535|ne<<16,x[4]=C=W&65535|q<<16,g=U,w=$,W=w&65535,q=w>>>16,Z=g&65535,ne=g>>>16,g=D[5],w=x[5],W+=w&65535,q+=w>>>16,Z+=g&65535,ne+=g>>>16,q+=W>>>16,Z+=q>>>16,ne+=Z>>>16,D[5]=U=Z&65535|ne<<16,x[5]=$=W&65535|q<<16,g=S,w=H,W=w&65535,q=w>>>16,Z=g&65535,ne=g>>>16,g=D[6],w=x[6],W+=w&65535,q+=w>>>16,Z+=g&65535,ne+=g>>>16,q+=W>>>16,Z+=q>>>16,ne+=Z>>>16,D[6]=S=Z&65535|ne<<16,x[6]=H=W&65535|q<<16,g=O,w=ee,W=w&65535,q=w>>>16,Z=g&65535,ne=g>>>16,g=D[7],w=x[7],W+=w&65535,q+=w>>>16,Z+=g&65535,ne+=g>>>16,q+=W>>>16,Z+=q>>>16,ne+=Z>>>16,D[7]=O=Z&65535|ne<<16,x[7]=ee=W&65535|q<<16,V+=128,F-=128}return V}function p(l){var v=new s;v.update(l);var D=v.digest();return v.clean(),D}n.hash=p})(op);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.convertSecretKeyToX25519=n.convertPublicKeyToX25519=n.verify=n.sign=n.extractPublicKeyFromSecretKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.SEED_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=n.SIGNATURE_LENGTH=void 0;const e=Rn,r=op,s=xr;n.SIGNATURE_LENGTH=64,n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=64,n.SEED_LENGTH=32;function a(K){const z=new Float64Array(16);if(K)for(let L=0;L<K.length;L++)z[L]=K[L];return z}const h=new Uint8Array(32);h[0]=9;const p=a(),l=a([1]),v=a([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),D=a([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),x=a([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),R=a([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),V=a([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function F(K,z){for(let L=0;L<16;L++)K[L]=z[L]|0}function T(K){let z=1;for(let L=0;L<16;L++){let f=K[L]+z+65535;z=Math.floor(f/65536),K[L]=f-z*65536}K[0]+=z-1+37*(z-1)}function k(K,z,L){const f=~(L-1);for(let A=0;A<16;A++){const ue=f&(K[A]^z[A]);K[A]^=ue,z[A]^=ue}}function Y(K,z){const L=a(),f=a();for(let A=0;A<16;A++)f[A]=z[A];T(f),T(f),T(f);for(let A=0;A<2;A++){L[0]=f[0]-65517;for(let de=1;de<15;de++)L[de]=f[de]-65535-(L[de-1]>>16&1),L[de-1]&=65535;L[15]=f[15]-32767-(L[14]>>16&1);const ue=L[15]>>16&1;L[14]&=65535,k(f,L,1-ue)}for(let A=0;A<16;A++)K[2*A]=f[A]&255,K[2*A+1]=f[A]>>8}function ae(K,z){let L=0;for(let f=0;f<32;f++)L|=K[f]^z[f];return(1&L-1>>>8)-1}function N(K,z){const L=new Uint8Array(32),f=new Uint8Array(32);return Y(L,K),Y(f,z),ae(L,f)}function U(K){const z=new Uint8Array(32);return Y(z,K),z[0]&1}function S(K,z){for(let L=0;L<16;L++)K[L]=z[2*L]+(z[2*L+1]<<8);K[15]&=32767}function O(K,z,L){for(let f=0;f<16;f++)K[f]=z[f]+L[f]}function m(K,z,L){for(let f=0;f<16;f++)K[f]=z[f]-L[f]}function c(K,z,L){let f,A,ue=0,de=0,Ie=0,ze=0,Ve=0,Me=0,gt=0,vt=0,je=0,xe=0,Re=0,Le=0,Be=0,Ce=0,Fe=0,Se=0,Ae=0,He=0,Oe=0,ke=0,We=0,et=0,tt=0,Je=0,tr=0,fr=0,Gr=0,rr=0,ii=0,bi=0,Fi=0,Et=L[0],yt=L[1],Dt=L[2],St=L[3],mt=L[4],_t=L[5],Lt=L[6],Ft=L[7],It=L[8],Ut=L[9],xt=L[10],At=L[11],Ot=L[12],ft=L[13],Mt=L[14],$t=L[15];f=z[0],ue+=f*Et,de+=f*yt,Ie+=f*Dt,ze+=f*St,Ve+=f*mt,Me+=f*_t,gt+=f*Lt,vt+=f*Ft,je+=f*It,xe+=f*Ut,Re+=f*xt,Le+=f*At,Be+=f*Ot,Ce+=f*ft,Fe+=f*Mt,Se+=f*$t,f=z[1],de+=f*Et,Ie+=f*yt,ze+=f*Dt,Ve+=f*St,Me+=f*mt,gt+=f*_t,vt+=f*Lt,je+=f*Ft,xe+=f*It,Re+=f*Ut,Le+=f*xt,Be+=f*At,Ce+=f*Ot,Fe+=f*ft,Se+=f*Mt,Ae+=f*$t,f=z[2],Ie+=f*Et,ze+=f*yt,Ve+=f*Dt,Me+=f*St,gt+=f*mt,vt+=f*_t,je+=f*Lt,xe+=f*Ft,Re+=f*It,Le+=f*Ut,Be+=f*xt,Ce+=f*At,Fe+=f*Ot,Se+=f*ft,Ae+=f*Mt,He+=f*$t,f=z[3],ze+=f*Et,Ve+=f*yt,Me+=f*Dt,gt+=f*St,vt+=f*mt,je+=f*_t,xe+=f*Lt,Re+=f*Ft,Le+=f*It,Be+=f*Ut,Ce+=f*xt,Fe+=f*At,Se+=f*Ot,Ae+=f*ft,He+=f*Mt,Oe+=f*$t,f=z[4],Ve+=f*Et,Me+=f*yt,gt+=f*Dt,vt+=f*St,je+=f*mt,xe+=f*_t,Re+=f*Lt,Le+=f*Ft,Be+=f*It,Ce+=f*Ut,Fe+=f*xt,Se+=f*At,Ae+=f*Ot,He+=f*ft,Oe+=f*Mt,ke+=f*$t,f=z[5],Me+=f*Et,gt+=f*yt,vt+=f*Dt,je+=f*St,xe+=f*mt,Re+=f*_t,Le+=f*Lt,Be+=f*Ft,Ce+=f*It,Fe+=f*Ut,Se+=f*xt,Ae+=f*At,He+=f*Ot,Oe+=f*ft,ke+=f*Mt,We+=f*$t,f=z[6],gt+=f*Et,vt+=f*yt,je+=f*Dt,xe+=f*St,Re+=f*mt,Le+=f*_t,Be+=f*Lt,Ce+=f*Ft,Fe+=f*It,Se+=f*Ut,Ae+=f*xt,He+=f*At,Oe+=f*Ot,ke+=f*ft,We+=f*Mt,et+=f*$t,f=z[7],vt+=f*Et,je+=f*yt,xe+=f*Dt,Re+=f*St,Le+=f*mt,Be+=f*_t,Ce+=f*Lt,Fe+=f*Ft,Se+=f*It,Ae+=f*Ut,He+=f*xt,Oe+=f*At,ke+=f*Ot,We+=f*ft,et+=f*Mt,tt+=f*$t,f=z[8],je+=f*Et,xe+=f*yt,Re+=f*Dt,Le+=f*St,Be+=f*mt,Ce+=f*_t,Fe+=f*Lt,Se+=f*Ft,Ae+=f*It,He+=f*Ut,Oe+=f*xt,ke+=f*At,We+=f*Ot,et+=f*ft,tt+=f*Mt,Je+=f*$t,f=z[9],xe+=f*Et,Re+=f*yt,Le+=f*Dt,Be+=f*St,Ce+=f*mt,Fe+=f*_t,Se+=f*Lt,Ae+=f*Ft,He+=f*It,Oe+=f*Ut,ke+=f*xt,We+=f*At,et+=f*Ot,tt+=f*ft,Je+=f*Mt,tr+=f*$t,f=z[10],Re+=f*Et,Le+=f*yt,Be+=f*Dt,Ce+=f*St,Fe+=f*mt,Se+=f*_t,Ae+=f*Lt,He+=f*Ft,Oe+=f*It,ke+=f*Ut,We+=f*xt,et+=f*At,tt+=f*Ot,Je+=f*ft,tr+=f*Mt,fr+=f*$t,f=z[11],Le+=f*Et,Be+=f*yt,Ce+=f*Dt,Fe+=f*St,Se+=f*mt,Ae+=f*_t,He+=f*Lt,Oe+=f*Ft,ke+=f*It,We+=f*Ut,et+=f*xt,tt+=f*At,Je+=f*Ot,tr+=f*ft,fr+=f*Mt,Gr+=f*$t,f=z[12],Be+=f*Et,Ce+=f*yt,Fe+=f*Dt,Se+=f*St,Ae+=f*mt,He+=f*_t,Oe+=f*Lt,ke+=f*Ft,We+=f*It,et+=f*Ut,tt+=f*xt,Je+=f*At,tr+=f*Ot,fr+=f*ft,Gr+=f*Mt,rr+=f*$t,f=z[13],Ce+=f*Et,Fe+=f*yt,Se+=f*Dt,Ae+=f*St,He+=f*mt,Oe+=f*_t,ke+=f*Lt,We+=f*Ft,et+=f*It,tt+=f*Ut,Je+=f*xt,tr+=f*At,fr+=f*Ot,Gr+=f*ft,rr+=f*Mt,ii+=f*$t,f=z[14],Fe+=f*Et,Se+=f*yt,Ae+=f*Dt,He+=f*St,Oe+=f*mt,ke+=f*_t,We+=f*Lt,et+=f*Ft,tt+=f*It,Je+=f*Ut,tr+=f*xt,fr+=f*At,Gr+=f*Ot,rr+=f*ft,ii+=f*Mt,bi+=f*$t,f=z[15],Se+=f*Et,Ae+=f*yt,He+=f*Dt,Oe+=f*St,ke+=f*mt,We+=f*_t,et+=f*Lt,tt+=f*Ft,Je+=f*It,tr+=f*Ut,fr+=f*xt,Gr+=f*At,rr+=f*Ot,ii+=f*ft,bi+=f*Mt,Fi+=f*$t,ue+=38*Ae,de+=38*He,Ie+=38*Oe,ze+=38*ke,Ve+=38*We,Me+=38*et,gt+=38*tt,vt+=38*Je,je+=38*tr,xe+=38*fr,Re+=38*Gr,Le+=38*rr,Be+=38*ii,Ce+=38*bi,Fe+=38*Fi,A=1,f=ue+A+65535,A=Math.floor(f/65536),ue=f-A*65536,f=de+A+65535,A=Math.floor(f/65536),de=f-A*65536,f=Ie+A+65535,A=Math.floor(f/65536),Ie=f-A*65536,f=ze+A+65535,A=Math.floor(f/65536),ze=f-A*65536,f=Ve+A+65535,A=Math.floor(f/65536),Ve=f-A*65536,f=Me+A+65535,A=Math.floor(f/65536),Me=f-A*65536,f=gt+A+65535,A=Math.floor(f/65536),gt=f-A*65536,f=vt+A+65535,A=Math.floor(f/65536),vt=f-A*65536,f=je+A+65535,A=Math.floor(f/65536),je=f-A*65536,f=xe+A+65535,A=Math.floor(f/65536),xe=f-A*65536,f=Re+A+65535,A=Math.floor(f/65536),Re=f-A*65536,f=Le+A+65535,A=Math.floor(f/65536),Le=f-A*65536,f=Be+A+65535,A=Math.floor(f/65536),Be=f-A*65536,f=Ce+A+65535,A=Math.floor(f/65536),Ce=f-A*65536,f=Fe+A+65535,A=Math.floor(f/65536),Fe=f-A*65536,f=Se+A+65535,A=Math.floor(f/65536),Se=f-A*65536,ue+=A-1+37*(A-1),A=1,f=ue+A+65535,A=Math.floor(f/65536),ue=f-A*65536,f=de+A+65535,A=Math.floor(f/65536),de=f-A*65536,f=Ie+A+65535,A=Math.floor(f/65536),Ie=f-A*65536,f=ze+A+65535,A=Math.floor(f/65536),ze=f-A*65536,f=Ve+A+65535,A=Math.floor(f/65536),Ve=f-A*65536,f=Me+A+65535,A=Math.floor(f/65536),Me=f-A*65536,f=gt+A+65535,A=Math.floor(f/65536),gt=f-A*65536,f=vt+A+65535,A=Math.floor(f/65536),vt=f-A*65536,f=je+A+65535,A=Math.floor(f/65536),je=f-A*65536,f=xe+A+65535,A=Math.floor(f/65536),xe=f-A*65536,f=Re+A+65535,A=Math.floor(f/65536),Re=f-A*65536,f=Le+A+65535,A=Math.floor(f/65536),Le=f-A*65536,f=Be+A+65535,A=Math.floor(f/65536),Be=f-A*65536,f=Ce+A+65535,A=Math.floor(f/65536),Ce=f-A*65536,f=Fe+A+65535,A=Math.floor(f/65536),Fe=f-A*65536,f=Se+A+65535,A=Math.floor(f/65536),Se=f-A*65536,ue+=A-1+37*(A-1),K[0]=ue,K[1]=de,K[2]=Ie,K[3]=ze,K[4]=Ve,K[5]=Me,K[6]=gt,K[7]=vt,K[8]=je,K[9]=xe,K[10]=Re,K[11]=Le,K[12]=Be,K[13]=Ce,K[14]=Fe,K[15]=Se}function y(K,z){c(K,z,z)}function Q(K,z){const L=a();let f;for(f=0;f<16;f++)L[f]=z[f];for(f=253;f>=0;f--)y(L,L),f!==2&&f!==4&&c(L,L,z);for(f=0;f<16;f++)K[f]=L[f]}function C(K,z){const L=a();let f;for(f=0;f<16;f++)L[f]=z[f];for(f=250;f>=0;f--)y(L,L),f!==1&&c(L,L,z);for(f=0;f<16;f++)K[f]=L[f]}function $(K,z){const L=a(),f=a(),A=a(),ue=a(),de=a(),Ie=a(),ze=a(),Ve=a(),Me=a();m(L,K[1],K[0]),m(Me,z[1],z[0]),c(L,L,Me),O(f,K[0],K[1]),O(Me,z[0],z[1]),c(f,f,Me),c(A,K[3],z[3]),c(A,A,D),c(ue,K[2],z[2]),O(ue,ue,ue),m(de,f,L),m(Ie,ue,A),O(ze,ue,A),O(Ve,f,L),c(K[0],de,Ie),c(K[1],Ve,ze),c(K[2],ze,Ie),c(K[3],de,Ve)}function H(K,z,L){for(let f=0;f<4;f++)k(K[f],z[f],L)}function ee(K,z){const L=a(),f=a(),A=a();Q(A,z[2]),c(L,z[0],A),c(f,z[1],A),Y(K,f),K[31]^=U(L)<<7}function g(K,z,L){F(K[0],p),F(K[1],l),F(K[2],l),F(K[3],p);for(let f=255;f>=0;--f){const A=L[f/8|0]>>(f&7)&1;H(K,z,A),$(z,K),$(K,K),H(K,z,A)}}function w(K,z){const L=[a(),a(),a(),a()];F(L[0],x),F(L[1],R),F(L[2],l),c(L[3],x,R),g(K,L,z)}function G(K){if(K.length!==n.SEED_LENGTH)throw new Error(`ed25519: seed must be ${n.SEED_LENGTH} bytes`);const z=(0,r.hash)(K);z[0]&=248,z[31]&=127,z[31]|=64;const L=new Uint8Array(32),f=[a(),a(),a(),a()];w(f,z),ee(L,f);const A=new Uint8Array(64);return A.set(K),A.set(L,32),{publicKey:L,secretKey:A}}n.generateKeyPairFromSeed=G;function X(K){const z=(0,e.randomBytes)(32,K),L=G(z);return(0,s.wipe)(z),L}n.generateKeyPair=X;function W(K){if(K.length!==n.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${n.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(K.subarray(32))}n.extractPublicKeyFromSecretKey=W;const q=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Z(K,z){let L,f,A,ue;for(f=63;f>=32;--f){for(L=0,A=f-32,ue=f-12;A<ue;++A)z[A]+=L-16*z[f]*q[A-(f-32)],L=Math.floor((z[A]+128)/256),z[A]-=L*256;z[A]+=L,z[f]=0}for(L=0,A=0;A<32;A++)z[A]+=L-(z[31]>>4)*q[A],L=z[A]>>8,z[A]&=255;for(A=0;A<32;A++)z[A]-=L*q[A];for(f=0;f<32;f++)z[f+1]+=z[f]>>8,K[f]=z[f]&255}function ne(K){const z=new Float64Array(64);for(let L=0;L<64;L++)z[L]=K[L];for(let L=0;L<64;L++)K[L]=0;Z(K,z)}function ge(K,z){const L=new Float64Array(64),f=[a(),a(),a(),a()],A=(0,r.hash)(K.subarray(0,32));A[0]&=248,A[31]&=127,A[31]|=64;const ue=new Uint8Array(64);ue.set(A.subarray(32),32);const de=new r.SHA512;de.update(ue.subarray(32)),de.update(z);const Ie=de.digest();de.clean(),ne(Ie),w(f,Ie),ee(ue,f),de.reset(),de.update(ue.subarray(0,32)),de.update(K.subarray(32)),de.update(z);const ze=de.digest();ne(ze);for(let Ve=0;Ve<32;Ve++)L[Ve]=Ie[Ve];for(let Ve=0;Ve<32;Ve++)for(let Me=0;Me<32;Me++)L[Ve+Me]+=ze[Ve]*A[Me];return Z(ue.subarray(32),L),ue}n.sign=ge;function ce(K,z){const L=a(),f=a(),A=a(),ue=a(),de=a(),Ie=a(),ze=a();return F(K[2],l),S(K[1],z),y(A,K[1]),c(ue,A,v),m(A,A,K[2]),O(ue,K[2],ue),y(de,ue),y(Ie,de),c(ze,Ie,de),c(L,ze,A),c(L,L,ue),C(L,L),c(L,L,A),c(L,L,ue),c(L,L,ue),c(K[0],L,ue),y(f,K[0]),c(f,f,ue),N(f,A)&&c(K[0],K[0],V),y(f,K[0]),c(f,f,ue),N(f,A)?-1:(U(K[0])===z[31]>>7&&m(K[0],p,K[0]),c(K[3],K[0],K[1]),0)}function _e(K,z,L){const f=new Uint8Array(32),A=[a(),a(),a(),a()],ue=[a(),a(),a(),a()];if(L.length!==n.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${n.SIGNATURE_LENGTH} bytes`);if(ce(ue,K))return!1;const de=new r.SHA512;de.update(L.subarray(0,32)),de.update(K),de.update(z);const Ie=de.digest();return ne(Ie),g(A,ue,Ie),w(ue,L.subarray(32)),$(A,ue),ee(f,A),!ae(L,f)}n.verify=_e;function he(K){let z=[a(),a(),a(),a()];if(ce(z,K))throw new Error("Ed25519: invalid public key");let L=a(),f=a(),A=z[1];O(L,l,A),m(f,l,A),Q(f,f),c(L,L,f);let ue=new Uint8Array(32);return Y(ue,L),ue}n.convertPublicKeyToX25519=he;function be(K){const z=(0,r.hash)(K.subarray(0,32));z[0]&=248,z[31]&=127,z[31]|=64;const L=new Uint8Array(z.subarray(0,32));return(0,s.wipe)(z),L}n.convertSecretKeyToX25519=be})(Du);const C3="EdDSA",A3="JWT",ap=".",cp="base64url",P3="utf8",T3="utf8",N3=":",R3="did",L3="key",xl="base58btc",F3="z",U3="K36",M3=32;function $o(n){return hr(_r(gs(n),P3),cp)}function up(n){const e=_r(U3,xl),r=F3+hr(Gc([e,n]),xl);return[R3,L3,r].join(N3)}function $3(n){return hr(n,cp)}function j3(n){return _r([$o(n.header),$o(n.payload)].join(ap),T3)}function B3(n){return[$o(n.header),$o(n.payload),$3(n.signature)].join(ap)}function Ol(n=Rn.randomBytes(M3)){return Du.generateKeyPairFromSeed(n)}async function q3(n,e,r,s,a=me.fromMiliseconds(Date.now())){const h={alg:C3,typ:A3},p=up(s.publicKey),l=a+r,v={iss:p,sub:n,aud:e,iat:a,exp:l},D=j3({header:h,payload:v}),x=Du.sign(s.secretKey,D);return B3({header:h,payload:v,signature:x})}const z3="PARSE_ERROR",H3="INVALID_REQUEST",K3="METHOD_NOT_FOUND",V3="INVALID_PARAMS",hp="INTERNAL_ERROR",Su="SERVER_ERROR",k3=[-32700,-32600,-32601,-32602,-32603],ds={[z3]:{code:-32700,message:"Parse error"},[H3]:{code:-32600,message:"Invalid Request"},[K3]:{code:-32601,message:"Method not found"},[V3]:{code:-32602,message:"Invalid params"},[hp]:{code:-32603,message:"Internal error"},[Su]:{code:-32e3,message:"Server error"}},fp=Su;function G3(n){return k3.includes(n)}function Cl(n){return Object.keys(ds).includes(n)?ds[n]:ds[fp]}function W3(n){const e=Object.values(ds).find(r=>r.code===n);return e||ds[fp]}function lp(n,e,r){return n.message.includes("getaddrinfo ENOTFOUND")||n.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):n}var dp={},gi={},Al;function Y3(){if(Al)return gi;Al=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.isBrowserCryptoAvailable=gi.getSubtleCrypto=gi.getBrowerCrypto=void 0;function n(){return(er===null||er===void 0?void 0:er.crypto)||(er===null||er===void 0?void 0:er.msCrypto)||{}}gi.getBrowerCrypto=n;function e(){const s=n();return s.subtle||s.webkitSubtle}gi.getSubtleCrypto=e;function r(){return!!n()&&!!e()}return gi.isBrowserCryptoAvailable=r,gi}var vi={},Pl;function J3(){if(Pl)return vi;Pl=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.isBrowser=vi.isNode=vi.isReactNative=void 0;function n(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}vi.isReactNative=n;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}vi.isNode=e;function r(){return!n()&&!e()}return vi.isBrowser=r,vi}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=jr;e.__exportStar(Y3(),n),e.__exportStar(J3(),n)})(dp);function pp(n=3){const e=Date.now()*Math.pow(10,n),r=Math.floor(Math.random()*Math.pow(10,n));return e+r}function X3(n=6){return BigInt(pp(n))}function Wo(n,e,r){return{id:r||pp(),jsonrpc:"2.0",method:n,params:e}}function Iu(n,e){return{id:n,jsonrpc:"2.0",result:e}}function Yo(n,e,r){return{id:n,jsonrpc:"2.0",error:Z3(e,r)}}function Z3(n,e){return typeof n>"u"?Cl(hp):(typeof n=="string"&&(n=Object.assign(Object.assign({},Cl(Su)),{message:n})),typeof e<"u"&&(n.data=e),G3(n.code)&&(n=W3(n.code)),n)}class Q3{}class e6 extends Q3{constructor(){super()}}class t6 extends e6{constructor(e){super()}}const r6="^https?:",i6="^wss?:";function n6(n){const e=n.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function gp(n,e){const r=n6(n);return typeof r>"u"?!1:new RegExp(e).test(r)}function Tl(n){return gp(n,r6)}function Nl(n){return gp(n,i6)}function s6(n){return new RegExp("wss?://localhost(:d{2,5})?").test(n)}function vp(n){return typeof n=="object"&&"id"in n&&"jsonrpc"in n&&n.jsonrpc==="2.0"}function xu(n){return vp(n)&&"method"in n}function Ou(n){return vp(n)&&(yi(n)||kr(n))}function yi(n){return"result"in n}function kr(n){return"error"in n}class Ri extends t6{constructor(e){super(e),this.events=new Ir.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(Wo(e.method,e.params||[],e.id||X3().toString()),r)}async requestStrict(e,r){return new Promise(async(s,a)=>{if(!this.connection.connected)try{await this.open()}catch(h){a(h)}this.events.on(`${e.id}`,h=>{kr(h)?a(h.error):s(h.result)});try{await this.connection.send(e,r)}catch(h){a(h)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Ou(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const Rl=10,o6=()=>typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:require("ws"),a6=()=>typeof window<"u",c6=o6();class u6{constructor(e){if(this.url=e,this.events=new Ir.EventEmitter,this.registering=!1,!Nl(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=s=>{this.onClose(s),e()},this.socket.close()})}async send(e,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(gs(e))}catch(s){this.onError(e.id,s)}}register(e=this.url){if(!Nl(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((s,a)=>{this.events.once("register_error",h=>{this.resetMaxListeners(),a(h)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return a(new Error("WebSocket connection is missing or invalid"));s(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,s)=>{const a=dp.isReactNative()?void 0:{rejectUnauthorized:!s6(e)},h=new c6(e,[],a);a6()?h.onerror=p=>{const l=p;s(this.emitError(l.error))}:h.on("error",p=>{s(this.emitError(p))}),h.onopen=()=>{this.onOpen(h),r(h)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Eu(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const s=this.parseError(r),a=s.message||s.toString(),h=Yo(e,a);this.events.emit("payload",h)}parseError(e,r=this.url){return lp(e,r,"WS")}resetMaxListeners(){this.events.getMaxListeners()>Rl&&this.events.setMaxListeners(Rl)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for URL: ${this.url}`));return this.events.emit("register_error",r),r}}var jo={exports:{}};jo.exports;(function(n,e){var r=200,s="__lodash_hash_undefined__",a=1,h=2,p=9007199254740991,l="[object Arguments]",v="[object Array]",D="[object AsyncFunction]",x="[object Boolean]",R="[object Date]",V="[object Error]",F="[object Function]",T="[object GeneratorFunction]",k="[object Map]",Y="[object Number]",ae="[object Null]",N="[object Object]",U="[object Promise]",S="[object Proxy]",O="[object RegExp]",m="[object Set]",c="[object String]",y="[object Symbol]",Q="[object Undefined]",C="[object WeakMap]",$="[object ArrayBuffer]",H="[object DataView]",ee="[object Float32Array]",g="[object Float64Array]",w="[object Int8Array]",G="[object Int16Array]",X="[object Int32Array]",W="[object Uint8Array]",q="[object Uint8ClampedArray]",Z="[object Uint16Array]",ne="[object Uint32Array]",ge=/[\\^$.*+?()[\]{}|]/g,ce=/^\[object .+?Constructor\]$/,_e=/^(?:0|[1-9]\d*)$/,he={};he[ee]=he[g]=he[w]=he[G]=he[X]=he[W]=he[q]=he[Z]=he[ne]=!0,he[l]=he[v]=he[$]=he[x]=he[H]=he[R]=he[V]=he[F]=he[k]=he[Y]=he[N]=he[O]=he[m]=he[c]=he[C]=!1;var be=typeof er=="object"&&er&&er.Object===Object&&er,K=typeof self=="object"&&self&&self.Object===Object&&self,z=be||K||Function("return this")(),L=e&&!e.nodeType&&e,f=L&&!0&&n&&!n.nodeType&&n,A=f&&f.exports===L,ue=A&&be.process,de=function(){try{return ue&&ue.binding&&ue.binding("util")}catch{}}(),Ie=de&&de.isTypedArray;function ze(E,M){for(var se=-1,pe=E==null?0:E.length,ct=0,Te=[];++se<pe;){var dt=E[se];M(dt,se,E)&&(Te[ct++]=dt)}return Te}function Ve(E,M){for(var se=-1,pe=M.length,ct=E.length;++se<pe;)E[ct+se]=M[se];return E}function Me(E,M){for(var se=-1,pe=E==null?0:E.length;++se<pe;)if(M(E[se],se,E))return!0;return!1}function gt(E,M){for(var se=-1,pe=Array(E);++se<E;)pe[se]=M(se);return pe}function vt(E){return function(M){return E(M)}}function je(E,M){return E.has(M)}function xe(E,M){return E==null?void 0:E[M]}function Re(E){var M=-1,se=Array(E.size);return E.forEach(function(pe,ct){se[++M]=[ct,pe]}),se}function Le(E,M){return function(se){return E(M(se))}}function Be(E){var M=-1,se=Array(E.size);return E.forEach(function(pe){se[++M]=pe}),se}var Ce=Array.prototype,Fe=Function.prototype,Se=Object.prototype,Ae=z["__core-js_shared__"],He=Fe.toString,Oe=Se.hasOwnProperty,ke=function(){var E=/[^.]+$/.exec(Ae&&Ae.keys&&Ae.keys.IE_PROTO||"");return E?"Symbol(src)_1."+E:""}(),We=Se.toString,et=RegExp("^"+He.call(Oe).replace(ge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=A?z.Buffer:void 0,Je=z.Symbol,tr=z.Uint8Array,fr=Se.propertyIsEnumerable,Gr=Ce.splice,rr=Je?Je.toStringTag:void 0,ii=Object.getOwnPropertySymbols,bi=tt?tt.isBuffer:void 0,Fi=Le(Object.keys,Object),Et=br(z,"DataView"),yt=br(z,"Map"),Dt=br(z,"Promise"),St=br(z,"Set"),mt=br(z,"WeakMap"),_t=br(Object,"create"),Lt=si(Et),Ft=si(yt),It=si(Dt),Ut=si(St),xt=si(mt),At=Je?Je.prototype:void 0,Ot=At?At.valueOf:void 0;function ft(E){var M=-1,se=E==null?0:E.length;for(this.clear();++M<se;){var pe=E[M];this.set(pe[0],pe[1])}}function Mt(){this.__data__=_t?_t(null):{},this.size=0}function $t(E){var M=this.has(E)&&delete this.__data__[E];return this.size-=M?1:0,M}function Zo(E){var M=this.__data__;if(_t){var se=M[E];return se===s?void 0:se}return Oe.call(M,E)?M[E]:void 0}function Qo(E){var M=this.__data__;return _t?M[E]!==void 0:Oe.call(M,E)}function ea(E,M){var se=this.__data__;return this.size+=this.has(E)?0:1,se[E]=_t&&M===void 0?s:M,this}ft.prototype.clear=Mt,ft.prototype.delete=$t,ft.prototype.get=Zo,ft.prototype.has=Qo,ft.prototype.set=ea;function Or(E){var M=-1,se=E==null?0:E.length;for(this.clear();++M<se;){var pe=E[M];this.set(pe[0],pe[1])}}function ta(){this.__data__=[],this.size=0}function ra(E){var M=this.__data__,se=Ui(M,E);if(se<0)return!1;var pe=M.length-1;return se==pe?M.pop():Gr.call(M,se,1),--this.size,!0}function ia(E){var M=this.__data__,se=Ui(M,E);return se<0?void 0:M[se][1]}function na(E){return Ui(this.__data__,E)>-1}function sa(E,M){var se=this.__data__,pe=Ui(se,E);return pe<0?(++this.size,se.push([E,M])):se[pe][1]=M,this}Or.prototype.clear=ta,Or.prototype.delete=ra,Or.prototype.get=ia,Or.prototype.has=na,Or.prototype.set=sa;function ni(E){var M=-1,se=E==null?0:E.length;for(this.clear();++M<se;){var pe=E[M];this.set(pe[0],pe[1])}}function cn(){this.size=0,this.__data__={hash:new ft,map:new(yt||Or),string:new ft}}function oa(E){var M=mi(this,E).delete(E);return this.size-=M?1:0,M}function un(E){return mi(this,E).get(E)}function aa(E){return mi(this,E).has(E)}function ca(E,M){var se=mi(this,E),pe=se.size;return se.set(E,M),this.size+=se.size==pe?0:1,this}ni.prototype.clear=cn,ni.prototype.delete=oa,ni.prototype.get=un,ni.prototype.has=aa,ni.prototype.set=ca;function hn(E){var M=-1,se=E==null?0:E.length;for(this.__data__=new ni;++M<se;)this.add(E[M])}function Es(E){return this.__data__.set(E,s),this}function Ds(E){return this.__data__.has(E)}hn.prototype.add=hn.prototype.push=Es,hn.prototype.has=Ds;function Br(E){var M=this.__data__=new Or(E);this.size=M.size}function ua(){this.__data__=new Or,this.size=0}function ha(E){var M=this.__data__,se=M.delete(E);return this.size=M.size,se}function fa(E){return this.__data__.get(E)}function la(E){return this.__data__.has(E)}function Ss(E,M){var se=this.__data__;if(se instanceof Or){var pe=se.__data__;if(!yt||pe.length<r-1)return pe.push([E,M]),this.size=++se.size,this;se=this.__data__=new ni(pe)}return se.set(E,M),this.size=se.size,this}Br.prototype.clear=ua,Br.prototype.delete=ha,Br.prototype.get=fa,Br.prototype.has=la,Br.prototype.set=Ss;function Is(E,M){var se=dn(E),pe=!se&&Ms(E),ct=!se&&!pe&&$n(E),Te=!se&&!pe&&!ct&&Bs(E),dt=se||pe||ct||Te,jt=dt?gt(E.length,String):[],Xe=jt.length;for(var ut in E)(M||Oe.call(E,ut))&&!(dt&&(ut=="length"||ct&&(ut=="offset"||ut=="parent")||Te&&(ut=="buffer"||ut=="byteLength"||ut=="byteOffset")||Ns(ut,Xe)))&&jt.push(ut);return jt}function Ui(E,M){for(var se=E.length;se--;)if(Us(E[se][0],M))return se;return-1}function Un(E,M,se){var pe=M(E);return dn(E)?pe:Ve(pe,se(E))}function Mi(E){return E==null?E===void 0?Q:ae:rr&&rr in Object(E)?Ps(E):ga(E)}function Mn(E){return ji(E)&&Mi(E)==l}function $i(E,M,se,pe,ct){return E===M?!0:E==null||M==null||!ji(E)&&!ji(M)?E!==E&&M!==M:xs(E,M,se,pe,$i,ct)}function xs(E,M,se,pe,ct,Te){var dt=dn(E),jt=dn(M),Xe=dt?v:Wr(E),ut=jt?v:Wr(M);Xe=Xe==l?N:Xe,ut=ut==l?N:ut;var Pt=Xe==N,lr=ut==N,Bt=Xe==ut;if(Bt&&$n(E)){if(!$n(M))return!1;dt=!0,Pt=!1}if(Bt&&!Pt)return Te||(Te=new Br),dt||Bs(E)?fn(E,M,se,pe,ct,Te):pa(E,M,Xe,se,pe,ct,Te);if(!(se&a)){var pt=Pt&&Oe.call(E,"__wrapped__"),ir=lr&&Oe.call(M,"__wrapped__");if(pt||ir){var qr=pt?E.value():E,Cr=ir?M.value():M;return Te||(Te=new Br),ct(qr,Cr,se,pe,Te)}}return Bt?(Te||(Te=new Br),As(E,M,se,pe,ct,Te)):!1}function da(E){if(!js(E)||Ls(E))return!1;var M=pn(E)?et:ce;return M.test(si(E))}function Os(E){return ji(E)&&$s(E.length)&&!!he[Mi(E)]}function Cs(E){if(!Fs(E))return Fi(E);var M=[];for(var se in Object(E))Oe.call(E,se)&&se!="constructor"&&M.push(se);return M}function fn(E,M,se,pe,ct,Te){var dt=se&a,jt=E.length,Xe=M.length;if(jt!=Xe&&!(dt&&Xe>jt))return!1;var ut=Te.get(E);if(ut&&Te.get(M))return ut==M;var Pt=-1,lr=!0,Bt=se&h?new hn:void 0;for(Te.set(E,M),Te.set(M,E);++Pt<jt;){var pt=E[Pt],ir=M[Pt];if(pe)var qr=dt?pe(ir,pt,Pt,M,E,Te):pe(pt,ir,Pt,E,M,Te);if(qr!==void 0){if(qr)continue;lr=!1;break}if(Bt){if(!Me(M,function(Cr,Yr){if(!je(Bt,Yr)&&(pt===Cr||ct(pt,Cr,se,pe,Te)))return Bt.push(Yr)})){lr=!1;break}}else if(!(pt===ir||ct(pt,ir,se,pe,Te))){lr=!1;break}}return Te.delete(E),Te.delete(M),lr}function pa(E,M,se,pe,ct,Te,dt){switch(se){case H:if(E.byteLength!=M.byteLength||E.byteOffset!=M.byteOffset)return!1;E=E.buffer,M=M.buffer;case $:return!(E.byteLength!=M.byteLength||!Te(new tr(E),new tr(M)));case x:case R:case Y:return Us(+E,+M);case V:return E.name==M.name&&E.message==M.message;case O:case c:return E==M+"";case k:var jt=Re;case m:var Xe=pe&a;if(jt||(jt=Be),E.size!=M.size&&!Xe)return!1;var ut=dt.get(E);if(ut)return ut==M;pe|=h,dt.set(E,M);var Pt=fn(jt(E),jt(M),pe,ct,Te,dt);return dt.delete(E),Pt;case y:if(Ot)return Ot.call(E)==Ot.call(M)}return!1}function As(E,M,se,pe,ct,Te){var dt=se&a,jt=ln(E),Xe=jt.length,ut=ln(M),Pt=ut.length;if(Xe!=Pt&&!dt)return!1;for(var lr=Xe;lr--;){var Bt=jt[lr];if(!(dt?Bt in M:Oe.call(M,Bt)))return!1}var pt=Te.get(E);if(pt&&Te.get(M))return pt==M;var ir=!0;Te.set(E,M),Te.set(M,E);for(var qr=dt;++lr<Xe;){Bt=jt[lr];var Cr=E[Bt],Yr=M[Bt];if(pe)var jn=dt?pe(Yr,Cr,Bt,M,E,Te):pe(Cr,Yr,Bt,E,M,Te);if(!(jn===void 0?Cr===Yr||ct(Cr,Yr,se,pe,Te):jn)){ir=!1;break}qr||(qr=Bt=="constructor")}if(ir&&!qr){var Bi=E.constructor,Kt=M.constructor;Bi!=Kt&&"constructor"in E&&"constructor"in M&&!(typeof Bi=="function"&&Bi instanceof Bi&&typeof Kt=="function"&&Kt instanceof Kt)&&(ir=!1)}return Te.delete(E),Te.delete(M),ir}function ln(E){return Un(E,_a,Ts)}function mi(E,M){var se=E.__data__;return Rs(M)?se[typeof M=="string"?"string":"hash"]:se.map}function br(E,M){var se=xe(E,M);return da(se)?se:void 0}function Ps(E){var M=Oe.call(E,rr),se=E[rr];try{E[rr]=void 0;var pe=!0}catch{}var ct=We.call(E);return pe&&(M?E[rr]=se:delete E[rr]),ct}var Ts=ii?function(E){return E==null?[]:(E=Object(E),ze(ii(E),function(M){return fr.call(E,M)}))}:at,Wr=Mi;(Et&&Wr(new Et(new ArrayBuffer(1)))!=H||yt&&Wr(new yt)!=k||Dt&&Wr(Dt.resolve())!=U||St&&Wr(new St)!=m||mt&&Wr(new mt)!=C)&&(Wr=function(E){var M=Mi(E),se=M==N?E.constructor:void 0,pe=se?si(se):"";if(pe)switch(pe){case Lt:return H;case Ft:return k;case It:return U;case Ut:return m;case xt:return C}return M});function Ns(E,M){return M=M??p,!!M&&(typeof E=="number"||_e.test(E))&&E>-1&&E%1==0&&E<M}function Rs(E){var M=typeof E;return M=="string"||M=="number"||M=="symbol"||M=="boolean"?E!=="__proto__":E===null}function Ls(E){return!!ke&&ke in E}function Fs(E){var M=E&&E.constructor,se=typeof M=="function"&&M.prototype||Se;return E===se}function ga(E){return We.call(E)}function si(E){if(E!=null){try{return He.call(E)}catch{}try{return E+""}catch{}}return""}function Us(E,M){return E===M||E!==E&&M!==M}var Ms=Mn(function(){return arguments}())?Mn:function(E){return ji(E)&&Oe.call(E,"callee")&&!fr.call(E,"callee")},dn=Array.isArray;function va(E){return E!=null&&$s(E.length)&&!pn(E)}var $n=bi||st;function ya(E,M){return $i(E,M)}function pn(E){if(!js(E))return!1;var M=Mi(E);return M==F||M==T||M==D||M==S}function $s(E){return typeof E=="number"&&E>-1&&E%1==0&&E<=p}function js(E){var M=typeof E;return E!=null&&(M=="object"||M=="function")}function ji(E){return E!=null&&typeof E=="object"}var Bs=Ie?vt(Ie):Os;function _a(E){return va(E)?Is(E):Cs(E)}function at(){return[]}function st(){return!1}n.exports=ya})(jo,jo.exports);var h6=jo.exports;const f6=au(h6);function l6(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var a=0;a<n.length;a++){var h=n.charAt(a),p=h.charCodeAt(0);if(r[p]!==255)throw new TypeError(h+" is ambiguous");r[p]=a}var l=n.length,v=n.charAt(0),D=Math.log(l)/Math.log(256),x=Math.log(256)/Math.log(l);function R(T){if(T instanceof Uint8Array||(ArrayBuffer.isView(T)?T=new Uint8Array(T.buffer,T.byteOffset,T.byteLength):Array.isArray(T)&&(T=Uint8Array.from(T))),!(T instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(T.length===0)return"";for(var k=0,Y=0,ae=0,N=T.length;ae!==N&&T[ae]===0;)ae++,k++;for(var U=(N-ae)*x+1>>>0,S=new Uint8Array(U);ae!==N;){for(var O=T[ae],m=0,c=U-1;(O!==0||m<Y)&&c!==-1;c--,m++)O+=256*S[c]>>>0,S[c]=O%l>>>0,O=O/l>>>0;if(O!==0)throw new Error("Non-zero carry");Y=m,ae++}for(var y=U-Y;y!==U&&S[y]===0;)y++;for(var Q=v.repeat(k);y<U;++y)Q+=n.charAt(S[y]);return Q}function V(T){if(typeof T!="string")throw new TypeError("Expected String");if(T.length===0)return new Uint8Array;var k=0;if(T[k]!==" "){for(var Y=0,ae=0;T[k]===v;)Y++,k++;for(var N=(T.length-k)*D+1>>>0,U=new Uint8Array(N);T[k];){var S=r[T.charCodeAt(k)];if(S===255)return;for(var O=0,m=N-1;(S!==0||O<ae)&&m!==-1;m--,O++)S+=l*U[m]>>>0,U[m]=S%256>>>0,S=S/256>>>0;if(S!==0)throw new Error("Non-zero carry");ae=O,k++}if(T[k]!==" "){for(var c=N-ae;c!==N&&U[c]===0;)c++;for(var y=new Uint8Array(Y+(N-c)),Q=Y;c!==N;)y[Q++]=U[c++];return y}}}function F(T){var k=V(T);if(k)return k;throw new Error(`Non-${e} character`)}return{encode:R,decodeUnsafe:V,decode:F}}var d6=l6,p6=d6;const yp=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},g6=n=>new TextEncoder().encode(n),v6=n=>new TextDecoder().decode(n);class y6{constructor(e,r,s){this.name=e,this.prefix=r,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}let _6=class{constructor(e,r,s){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return _p(this,e)}};class b6{constructor(e){this.decoders=e}or(e){return _p(this,e)}decode(e){const r=e[0],s=this.decoders[r];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const _p=(n,e)=>new b6({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});class m6{constructor(e,r,s,a){this.name=e,this.prefix=r,this.baseEncode=s,this.baseDecode=a,this.encoder=new y6(e,r,s),this.decoder=new _6(e,r,a)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Jo=({name:n,prefix:e,encode:r,decode:s})=>new m6(n,e,r,s),ws=({prefix:n,name:e,alphabet:r})=>{const{encode:s,decode:a}=p6(r,e);return Jo({prefix:n,name:e,encode:s,decode:h=>yp(a(h))})},w6=(n,e,r,s)=>{const a={};for(let x=0;x<e.length;++x)a[e[x]]=x;let h=n.length;for(;n[h-1]==="=";)--h;const p=new Uint8Array(h*r/8|0);let l=0,v=0,D=0;for(let x=0;x<h;++x){const R=a[n[x]];if(R===void 0)throw new SyntaxError(`Non-${s} character`);v=v<<r|R,l+=r,l>=8&&(l-=8,p[D++]=255&v>>l)}if(l>=r||255&v<<8-l)throw new SyntaxError("Unexpected end of data");return p},E6=(n,e,r)=>{const s=e[e.length-1]==="=",a=(1<<r)-1;let h="",p=0,l=0;for(let v=0;v<n.length;++v)for(l=l<<8|n[v],p+=8;p>r;)p-=r,h+=e[a&l>>p];if(p&&(h+=e[a&l<<r-p]),s)for(;h.length*r&7;)h+="=";return h},Jt=({name:n,prefix:e,bitsPerChar:r,alphabet:s})=>Jo({prefix:e,name:n,encode(a){return E6(a,s,r)},decode(a){return w6(a,s,r,n)}}),D6=Jo({prefix:"\0",name:"identity",encode:n=>v6(n),decode:n=>g6(n)});var S6=Object.freeze({__proto__:null,identity:D6});const I6=Jt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var x6=Object.freeze({__proto__:null,base2:I6});const O6=Jt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var C6=Object.freeze({__proto__:null,base8:O6});const A6=ws({prefix:"9",name:"base10",alphabet:"0123456789"});var P6=Object.freeze({__proto__:null,base10:A6});const T6=Jt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),N6=Jt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var R6=Object.freeze({__proto__:null,base16:T6,base16upper:N6});const L6=Jt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),F6=Jt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),U6=Jt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),M6=Jt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),$6=Jt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),j6=Jt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),B6=Jt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),q6=Jt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),z6=Jt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var H6=Object.freeze({__proto__:null,base32:L6,base32upper:F6,base32pad:U6,base32padupper:M6,base32hex:$6,base32hexupper:j6,base32hexpad:B6,base32hexpadupper:q6,base32z:z6});const K6=ws({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),V6=ws({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var k6=Object.freeze({__proto__:null,base36:K6,base36upper:V6});const G6=ws({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),W6=ws({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Y6=Object.freeze({__proto__:null,base58btc:G6,base58flickr:W6});const J6=Jt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),X6=Jt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Z6=Jt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Q6=Jt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var eD=Object.freeze({__proto__:null,base64:J6,base64pad:X6,base64url:Z6,base64urlpad:Q6});const bp=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),tD=bp.reduce((n,e,r)=>(n[r]=e,n),[]),rD=bp.reduce((n,e,r)=>(n[e.codePointAt(0)]=r,n),[]);function iD(n){return n.reduce((e,r)=>(e+=tD[r],e),"")}function nD(n){const e=[];for(const r of n){const s=rD[r.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(s)}return new Uint8Array(e)}const sD=Jo({prefix:"ðŸš€",name:"base256emoji",encode:iD,decode:nD});var oD=Object.freeze({__proto__:null,base256emoji:sD}),aD=mp,Ll=128,cD=127,uD=~cD,hD=Math.pow(2,31);function mp(n,e,r){e=e||[],r=r||0;for(var s=r;n>=hD;)e[r++]=n&255|Ll,n/=128;for(;n&uD;)e[r++]=n&255|Ll,n>>>=7;return e[r]=n|0,mp.bytes=r-s+1,e}var fD=Qc,lD=128,Fl=127;function Qc(n,s){var r=0,s=s||0,a=0,h=s,p,l=n.length;do{if(h>=l)throw Qc.bytes=0,new RangeError("Could not decode varint");p=n[h++],r+=a<28?(p&Fl)<<a:(p&Fl)*Math.pow(2,a),a+=7}while(p>=lD);return Qc.bytes=h-s,r}var dD=Math.pow(2,7),pD=Math.pow(2,14),gD=Math.pow(2,21),vD=Math.pow(2,28),yD=Math.pow(2,35),_D=Math.pow(2,42),bD=Math.pow(2,49),mD=Math.pow(2,56),wD=Math.pow(2,63),ED=function(n){return n<dD?1:n<pD?2:n<gD?3:n<vD?4:n<yD?5:n<_D?6:n<bD?7:n<mD?8:n<wD?9:10},DD={encode:aD,decode:fD,encodingLength:ED},wp=DD;const Ul=(n,e,r=0)=>(wp.encode(n,e,r),e),Ml=n=>wp.encodingLength(n),eu=(n,e)=>{const r=e.byteLength,s=Ml(n),a=s+Ml(r),h=new Uint8Array(a+r);return Ul(n,h,0),Ul(r,h,s),h.set(e,a),new SD(n,r,e,h)};class SD{constructor(e,r,s,a){this.code=e,this.size=r,this.digest=s,this.bytes=a}}const Ep=({name:n,code:e,encode:r})=>new ID(n,e,r);class ID{constructor(e,r,s){this.name=e,this.code=r,this.encode=s}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?eu(this.code,r):r.then(s=>eu(this.code,s))}else throw Error("Unknown type, must be binary type")}}const Dp=n=>async e=>new Uint8Array(await crypto.subtle.digest(n,e)),xD=Ep({name:"sha2-256",code:18,encode:Dp("SHA-256")}),OD=Ep({name:"sha2-512",code:19,encode:Dp("SHA-512")});var CD=Object.freeze({__proto__:null,sha256:xD,sha512:OD});const Sp=0,AD="identity",Ip=yp,PD=n=>eu(Sp,Ip(n)),TD={code:Sp,name:AD,encode:Ip,digest:PD};var ND=Object.freeze({__proto__:null,identity:TD});new TextEncoder,new TextDecoder;const $l={...S6,...x6,...C6,...P6,...R6,...H6,...k6,...Y6,...eD,...oD};({...CD,...ND});function xp(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function RD(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?xp(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function Op(n,e,r,s){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:r},decoder:{decode:s}}}const jl=Op("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),Rc=Op("ascii","a",n=>{let e="a";for(let r=0;r<n.length;r++)e+=String.fromCharCode(n[r]);return e},n=>{n=n.substring(1);const e=RD(n.length);for(let r=0;r<n.length;r++)e[r]=n.charCodeAt(r);return e}),LD={utf8:jl,"utf-8":jl,hex:$l.base16,latin1:Rc,ascii:Rc,binary:Rc,...$l};function FD(n,e="utf8"){const r=LD[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?xp(globalThis.Buffer.from(n,"utf-8")):r.decoder.decode(`${r.prefix}${n}`)}const Cp="wc",UD=2,Cu="core",Ti=`${Cp}@2:${Cu}:`,MD={name:Cu,logger:"error"},$D={database:":memory:"},jD="crypto",Bl="client_ed25519_seed",BD=me.ONE_DAY,qD="keychain",zD="0.3",HD="messages",KD="0.3",VD=me.SIX_HOURS,kD="publisher",Ap="irn",GD="error",Pp="wss://relay.walletconnect.com",WD="relayer",kt={message:"relayer_message",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},YD="_subscription",cs={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},JD=me.ONE_SECOND/2,XD="2.7.4",ZD="0.3",ti={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},QD="subscription",e2="0.3",t2=me.FIVE_SECONDS*1e3,r2="pairing",i2="0.3",us={wc_pairingDelete:{req:{ttl:me.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:me.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:me.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:me.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:me.ONE_DAY,prompt:!1,tag:0},res:{ttl:me.ONE_DAY,prompt:!1,tag:0}}},ei={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},n2="history",s2="0.3",o2="expirer",Mr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},a2="0.3",Lc="verify-api",ql="https://verify.walletconnect.com";class c2{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=qD,this.version=zD,this.initialized=!1,this.storagePrefix=Ti,this.init=async()=>{if(!this.initialized){const s=await this.getKeyChain();typeof s<"u"&&(this.keychain=s),this.initialized=!0}},this.has=s=>(this.isInitialized(),this.keychain.has(s)),this.set=async(s,a)=>{this.isInitialized(),this.keychain.set(s,a),await this.persist()},this.get=s=>{this.isInitialized();const a=this.keychain.get(s);if(typeof a>"u"){const{message:h}=le("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(h)}return a},this.del=async s=>{this.isInitialized(),this.keychain.delete(s),await this.persist()},this.core=e,this.logger=Qe.generateChildLogger(r,this.name)}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Yd(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Jd(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}}class u2{constructor(e,r,s){this.core=e,this.logger=r,this.name=jD,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=a=>(this.isInitialized(),this.keychain.has(a)),this.getClientId=async()=>{this.isInitialized();const a=await this.getClientSeed(),h=Ol(a);return up(h.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const a=Gw();return this.setPrivateKey(a.publicKey,a.privateKey)},this.signJWT=async a=>{this.isInitialized();const h=await this.getClientSeed(),p=Ol(h),l=Xc();return await q3(l,a,BD,p)},this.generateSharedKey=(a,h,p)=>{this.isInitialized();const l=this.getPrivateKey(a),v=Ww(l,h);return this.setSymKey(v,p)},this.setSymKey=async(a,h)=>{this.isInitialized();const p=h||Yw(a);return await this.keychain.set(p,a),p},this.deleteKeyPair=async a=>{this.isInitialized(),await this.keychain.del(a)},this.deleteSymKey=async a=>{this.isInitialized(),await this.keychain.del(a)},this.encode=async(a,h,p)=>{this.isInitialized();const l=kd(p),v=gs(h);if(rl(l)){const V=l.senderPublicKey,F=l.receiverPublicKey;a=await this.generateSharedKey(V,F)}const D=this.getSymKey(a),{type:x,senderPublicKey:R}=l;return Xw({type:x,symKey:D,message:v,senderPublicKey:R})},this.decode=async(a,h,p)=>{this.isInitialized();const l=eE(h,p);if(rl(l)){const x=l.receiverPublicKey,R=l.senderPublicKey;a=await this.generateSharedKey(x,R)}const v=this.getSymKey(a),D=Zw({symKey:v,encoded:h});return Eu(D)},this.getPayloadType=a=>{const h=Uo(a);return _s(h.type)},this.getPayloadSenderPublicKey=a=>{const h=Uo(a);return h.senderPublicKey?hr(h.senderPublicKey,ur):void 0},this.core=e,this.logger=Qe.generateChildLogger(r,this.name),this.keychain=s||new c2(this.core,this.logger)}get context(){return Qe.getLoggerContext(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Bl)}catch{e=Xc(),await this.keychain.set(Bl,e)}return FD(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}}class h2 extends y3{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=HD,this.version=KD,this.initialized=!1,this.storagePrefix=Ti,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const s=await this.getRelayerMessages();typeof s<"u"&&(this.messages=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(s){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(s)}finally{this.initialized=!0}}},this.set=async(s,a)=>{this.isInitialized();const h=tn(a);let p=this.messages.get(s);return typeof p>"u"&&(p={}),typeof p[h]<"u"||(p[h]=a,this.messages.set(s,p),await this.persist()),h},this.get=s=>{this.isInitialized();let a=this.messages.get(s);return typeof a>"u"&&(a={}),a},this.has=(s,a)=>{this.isInitialized();const h=this.get(s),p=tn(a);return typeof h[p]<"u"},this.del=async s=>{this.isInitialized(),this.messages.delete(s),await this.persist()},this.logger=Qe.generateChildLogger(e,this.name),this.core=r}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Yd(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Jd(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}}class f2 extends _3{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new Ir.EventEmitter,this.name=kD,this.queue=new Map,this.publishTimeout=1e4,this.publish=async(s,a,h)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:a,opts:h}});try{const p=(h==null?void 0:h.ttl)||VD,l=Zc(h),v=(h==null?void 0:h.prompt)||!1,D=(h==null?void 0:h.tag)||0,x={topic:s,message:a,opts:{ttl:p,relay:l,prompt:v,tag:D}},R=tn(a);this.queue.set(R,x);try{await await Mo(this.rpcPublish(s,a,p,l,v,D),this.publishTimeout),this.relayer.events.emit(kt.publish,x)}catch{this.logger.debug("Publishing Payload stalled"),this.relayer.events.emit(kt.connection_stalled);return}this.onPublish(R,x),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:a,opts:h}})}catch(p){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(p),p}},this.on=(s,a)=>{this.events.on(s,a)},this.once=(s,a)=>{this.events.once(s,a)},this.off=(s,a)=>{this.events.off(s,a)},this.removeListener=(s,a)=>{this.events.removeListener(s,a)},this.relayer=e,this.logger=Qe.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return Qe.getLoggerContext(this.logger)}rpcPublish(e,r,s,a,h,p){var l,v,D,x;const R={method:To(a.protocol).publish,params:{topic:e,message:r,ttl:s,prompt:h,tag:p}};return cr((l=R.params)==null?void 0:l.prompt)&&((v=R.params)==null||delete v.prompt),cr((D=R.params)==null?void 0:D.tag)&&((x=R.params)==null||delete x.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:R}),this.relayer.request(R)}onPublish(e,r){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:r,message:s,opts:a}=e;await this.publish(r,s,a)})}registerEventListeners(){this.relayer.core.heartbeat.on(ms.HEARTBEAT_EVENTS.pulse,()=>{this.checkQueue()})}}let l2=class{constructor(){this.map=new Map,this.set=(e,r)=>{const s=this.get(e);this.exists(e,r)||this.map.set(e,[...s,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const s=this.get(e);if(!this.exists(e,r))return;const a=s.filter(h=>h!==r);if(!a.length){this.map.delete(e);return}this.map.set(e,a)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}};var d2=Object.defineProperty,p2=Object.defineProperties,g2=Object.getOwnPropertyDescriptors,zl=Object.getOwnPropertySymbols,v2=Object.prototype.hasOwnProperty,y2=Object.prototype.propertyIsEnumerable,Hl=(n,e,r)=>e in n?d2(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,hs=(n,e)=>{for(var r in e||(e={}))v2.call(e,r)&&Hl(n,r,e[r]);if(zl)for(var r of zl(e))y2.call(e,r)&&Hl(n,r,e[r]);return n},Fc=(n,e)=>p2(n,g2(e));class _2 extends w3{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new l2,this.events=new Ir.EventEmitter,this.name=QD,this.version=e2,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Ti,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(s,a)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:a}});try{const h=Zc(a),p={topic:s,relay:h};this.pending.set(s,p);const l=await this.rpcSubscribe(s,h);return this.onSubscribe(l,p),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:a}}),l}catch(h){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(h),h}},this.unsubscribe=async(s,a)=>{await this.restartToComplete(),this.isInitialized(),typeof(a==null?void 0:a.id)<"u"?await this.unsubscribeById(s,a.id,a):await this.unsubscribeByTopic(s,a)},this.isSubscribed=async s=>this.topics.includes(s)?!0:await new Promise((a,h)=>{const p=new me.Watch;p.start(this.pendingSubscriptionWatchLabel);const l=setInterval(()=>{!this.pending.has(s)&&this.topics.includes(s)&&(clearInterval(l),p.stop(this.pendingSubscriptionWatchLabel),a(!0)),p.elapsed(this.pendingSubscriptionWatchLabel)>=t2&&(clearInterval(l),p.stop(this.pendingSubscriptionWatchLabel),h(!1))},this.pollingInterval)}),this.on=(s,a)=>{this.events.on(s,a)},this.once=(s,a)=>{this.events.once(s,a)},this.off=(s,a)=>{this.events.off(s,a)},this.removeListener=(s,a)=>{this.events.removeListener(s,a)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Qe.generateChildLogger(r,this.name),this.clientId=""}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let s=!1;try{s=this.getSubscription(e).topic===r}catch{}return s}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const s=this.topicMap.get(e);await Promise.all(s.map(async a=>await this.unsubscribeById(e,a,r)))}async unsubscribeById(e,r,s){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:s}});try{const a=Zc(s);await this.rpcUnsubscribe(e,r,a);const h=Rt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,h),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:s}})}catch(a){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(a),a}}async rpcSubscribe(e,r){const s={method:To(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{await await Mo(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(kt.connection_stalled)}return tn(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,s={method:To(r.protocol).batchSubscribe,params:{topics:e.map(a=>a.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{return await await Mo(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(kt.connection_stalled)}}rpcUnsubscribe(e,r,s){const a={method:To(s.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a}),this.relayer.request(a)}onSubscribe(e,r){this.setSubscription(e,Fc(hs({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,hs({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,s){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,s),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r))}addSubscription(e,r){this.subscriptions.set(e,hs({},r)),this.topicMap.set(r.topic,e),this.events.emit(ti.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:s}=le("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const s=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(s.topic,e),this.events.emit(ti.deleted,Fc(hs({},s),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(ti.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<e;r++){const s=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(ti.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=le("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const r=await this.rpcBatchSubscribe(e);_i(r)&&this.onBatchSubscribe(r.map((s,a)=>Fc(hs({},e[a]),{id:s})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(r=>{e.push(r)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(ms.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(kt.connect,async()=>{await this.onConnect()}),this.relayer.on(kt.disconnect,()=>{this.onDisconnect()}),this.events.on(ti.created,async e=>{const r=ti.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(ti.deleted,async e=>{const r=ti.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}}var b2=Object.defineProperty,Kl=Object.getOwnPropertySymbols,m2=Object.prototype.hasOwnProperty,w2=Object.prototype.propertyIsEnumerable,Vl=(n,e,r)=>e in n?b2(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,E2=(n,e)=>{for(var r in e||(e={}))m2.call(e,r)&&Vl(n,r,e[r]);if(Kl)for(var r of Kl(e))w2.call(e,r)&&Vl(n,r,e[r]);return n};class D2 extends b3{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new Ir.EventEmitter,this.name=WD,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(s){throw this.logger.debug("Failed to Publish Request"),this.logger.error(s),s}},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Qe.generateChildLogger(e.logger,this.name):Qe.pino(Qe.getDefaultLoggerOptions({level:e.logger||GD})),this.messages=new h2(this.logger,e.core),this.subscriber=new _2(this,this.logger),this.publisher=new f2(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||Pp,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.transportOpen(),this.subscriber.init()]),this.registerEventListeners(),this.initialized=!0}get context(){return Qe.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,r,s){this.isInitialized(),await this.publisher.publish(e,r,s),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now()})}async subscribe(e,r){this.isInitialized();let s="";return await Promise.all([new Promise(a=>{this.subscriber.once(ti.created,h=>{h.topic===e&&a()})}),new Promise(async a=>{s=await this.subscriber.subscribe(e,r),a()})]),s}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(kt.transport_closed))}async transportOpen(e){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=e||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(r=>{this.initialized||r(),this.subscriber.once(ti.resubscribed,()=>{r()})}),await Promise.race([new Promise(async(r,s)=>{await Mo(this.provider.connect(),5e3,"socket stalled").catch(a=>s(a)).then(()=>r()).finally(()=>this.removeListener(kt.transport_closed,this.rejectTransportOpen))}),new Promise(r=>this.once(kt.transport_closed,this.rejectTransportOpen))])])}catch(r){this.logger.error(r);const s=r;if(!this.isConnectionStalled(s.message))throw r;this.events.emit(kt.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(e){this.transportExplicitlyClosed||(this.relayUrl=e||this.relayUrl,this.connected&&await Promise.all([new Promise(r=>{this.provider.once(cs.disconnect,()=>{r()})}),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(e){return this.staleConnectionErrors.some(r=>e.includes(r))}rejectTransportOpen(){throw new Error("closeTransport called before connection was established")}async createProvider(){const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Ri(new u6(fE({sdkVersion:XD,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:s}=e;await this.messages.set(r,s)}async shouldIgnoreMessageEvent(e){const{topic:r,message:s}=e;return await this.subscriber.isSubscribed(r)?this.messages.has(r,s):!0}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),xu(e)){if(!e.method.endsWith(YD))return;const r=e.params,{topic:s,message:a,publishedAt:h}=r.data,p={topic:s,message:a,publishedAt:h};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(E2({type:"event",event:r.id},p)),this.events.emit(r.id,p),await this.acknowledgePayload(e),await this.onMessageEvent(p)}}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(kt.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=Iu(e.id,!0);await this.provider.connection.send(r)}registerProviderListeners(){this.provider.on(cs.payload,e=>this.onProviderPayload(e)),this.provider.on(cs.connect,()=>{this.events.emit(kt.connect)}),this.provider.on(cs.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(cs.error,e=>{this.logger.error(e),this.events.emit(kt.error,e)})}registerEventListeners(){this.events.on(kt.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(kt.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},me.toMiliseconds(JD))}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(e=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var S2=Object.defineProperty,kl=Object.getOwnPropertySymbols,I2=Object.prototype.hasOwnProperty,x2=Object.prototype.propertyIsEnumerable,Gl=(n,e,r)=>e in n?S2(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Wl=(n,e)=>{for(var r in e||(e={}))I2.call(e,r)&&Gl(n,r,e[r]);if(kl)for(var r of kl(e))x2.call(e,r)&&Gl(n,r,e[r]);return n};class Xo extends m3{constructor(e,r,s,a=Ti,h=void 0){super(e,r,s,a),this.core=e,this.logger=r,this.name=s,this.map=new Map,this.version=ZD,this.cached=[],this.initialized=!1,this.storagePrefix=Ti,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(p=>{this.getKey&&p!==null&&!cr(p)?this.map.set(this.getKey(p),p):NE(p)?this.map.set(p.id,p):RE(p)&&this.map.set(p.topic,p)}),this.cached=[],this.initialized=!0)},this.set=async(p,l)=>{this.isInitialized(),this.map.has(p)?await this.update(p,l):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:p,value:l}),this.map.set(p,l),await this.persist())},this.get=p=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:p}),this.getData(p)),this.getAll=p=>(this.isInitialized(),p?this.values.filter(l=>Object.keys(p).every(v=>f6(l[v],p[v]))):this.values),this.update=async(p,l)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:p,update:l});const v=Wl(Wl({},this.getData(p)),l);this.map.set(p,v),await this.persist()},this.delete=async(p,l)=>{this.isInitialized(),this.map.has(p)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:p,reason:l}),this.map.delete(p),await this.persist())},this.logger=Qe.generateChildLogger(r,this.name),this.storagePrefix=a,this.getKey=h}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){const{message:s}=le("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=le("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}}class O2{constructor(e,r){this.core=e,this.logger=r,this.name=r2,this.version=i2,this.events=new uu,this.initialized=!1,this.storagePrefix=Ti,this.ignoredPayloadTypes=[nn],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]},this.create=async()=>{this.isInitialized();const s=Xc(),a=await this.core.crypto.setSymKey(s),h=ri(me.FIVE_MINUTES),p={protocol:Ap},l={topic:a,expiry:h,relay:p,active:!1},v=EE({protocol:this.core.protocol,version:this.core.version,topic:a,symKey:s,relay:p});return await this.pairings.set(a,l),await this.core.relayer.subscribe(a),this.core.expirer.set(a,h),{topic:a,uri:v}},this.pair=async s=>{this.isInitialized(),this.isValidPair(s);const{topic:a,symKey:h,relay:p}=mE(s.uri);if(this.pairings.keys.includes(a))throw new Error(`Pairing already exists: ${a}`);if(this.core.crypto.hasKeys(a))throw new Error(`Keychain already exists: ${a}`);const l=ri(me.FIVE_MINUTES),v={topic:a,relay:p,expiry:l,active:!1};return await this.pairings.set(a,v),await this.core.crypto.setSymKey(h,a),await this.core.relayer.subscribe(a,{relay:p}),this.core.expirer.set(a,l),s.activatePairing&&await this.activate({topic:a}),v},this.activate=async({topic:s})=>{this.isInitialized();const a=ri(me.THIRTY_DAYS);await this.pairings.update(s,{active:!0,expiry:a}),this.core.expirer.set(s,a)},this.ping=async s=>{this.isInitialized(),await this.isValidPing(s);const{topic:a}=s;if(this.pairings.keys.includes(a)){const h=await this.sendRequest(a,"wc_pairingPing",{}),{done:p,resolve:l,reject:v}=An();this.events.once(qt("pairing_ping",h),({error:D})=>{D?v(D):l()}),await p()}},this.updateExpiry=async({topic:s,expiry:a})=>{this.isInitialized(),await this.pairings.update(s,{expiry:a})},this.updateMetadata=async({topic:s,metadata:a})=>{this.isInitialized(),await this.pairings.update(s,{peerMetadata:a})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async s=>{this.isInitialized(),await this.isValidDisconnect(s);const{topic:a}=s;this.pairings.keys.includes(a)&&(await this.sendRequest(a,"wc_pairingDelete",Rt("USER_DISCONNECTED")),await this.deletePairing(a))},this.sendRequest=async(s,a,h)=>{const p=Wo(a,h),l=await this.core.crypto.encode(s,p),v=us[a].req;return this.core.history.set(s,p),await this.core.relayer.publish(s,l,v),p.id},this.sendResult=async(s,a,h)=>{const p=Iu(s,h),l=await this.core.crypto.encode(a,p),v=await this.core.history.get(a,s),D=us[v.request.method].res;await this.core.relayer.publish(a,l,D),await this.core.history.resolve(p)},this.sendError=async(s,a,h)=>{const p=Yo(s,h),l=await this.core.crypto.encode(a,p),v=await this.core.history.get(a,s),D=us[v.request.method]?us[v.request.method].res:us.unregistered_method.res;await this.core.relayer.publish(a,l,D),await this.core.history.resolve(p)},this.deletePairing=async(s,a)=>{await this.core.relayer.unsubscribe(s),await Promise.all([this.pairings.delete(s,Rt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(s),a?Promise.resolve():this.core.expirer.del(s)])},this.cleanup=async()=>{const s=this.pairings.getAll().filter(a=>Pi(a.expiry));await Promise.all(s.map(a=>this.deletePairing(a.topic)))},this.onRelayEventRequest=s=>{const{topic:a,payload:h}=s,p=h.method;if(this.pairings.keys.includes(a))switch(p){case"wc_pairingPing":return this.onPairingPingRequest(a,h);case"wc_pairingDelete":return this.onPairingDeleteRequest(a,h);default:return this.onUnknownRpcMethodRequest(a,h)}},this.onRelayEventResponse=async s=>{const{topic:a,payload:h}=s,p=(await this.core.history.get(a,h.id)).request.method;if(this.pairings.keys.includes(a))switch(p){case"wc_pairingPing":return this.onPairingPingResponse(a,h);default:return this.onUnknownRpcMethodResponse(p)}},this.onPairingPingRequest=async(s,a)=>{const{id:h}=a;try{this.isValidPing({topic:s}),await this.sendResult(h,s,!0),this.events.emit("pairing_ping",{id:h,topic:s})}catch(p){await this.sendError(h,s,p),this.logger.error(p)}},this.onPairingPingResponse=(s,a)=>{const{id:h}=a;setTimeout(()=>{yi(a)?this.events.emit(qt("pairing_ping",h),{}):kr(a)&&this.events.emit(qt("pairing_ping",h),{error:a.error})},500)},this.onPairingDeleteRequest=async(s,a)=>{const{id:h}=a;try{this.isValidDisconnect({topic:s}),await this.deletePairing(s),this.events.emit("pairing_delete",{id:h,topic:s})}catch(p){await this.sendError(h,s,p),this.logger.error(p)}},this.onUnknownRpcMethodRequest=async(s,a)=>{const{id:h,method:p}=a;try{if(this.registeredMethods.includes(p))return;const l=Rt("WC_METHOD_UNSUPPORTED",p);await this.sendError(h,s,l),this.logger.error(l)}catch(l){await this.sendError(h,s,l),this.logger.error(l)}},this.onUnknownRpcMethodResponse=s=>{this.registeredMethods.includes(s)||this.logger.error(Rt("WC_METHOD_UNSUPPORTED",s))},this.isValidPair=s=>{if(!yr(s)){const{message:a}=le("MISSING_OR_INVALID",`pair() params: ${s}`);throw new Error(a)}if(!TE(s.uri)){const{message:a}=le("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw new Error(a)}},this.isValidPing=async s=>{if(!yr(s)){const{message:h}=le("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(h)}const{topic:a}=s;await this.isValidPairingTopic(a)},this.isValidDisconnect=async s=>{if(!yr(s)){const{message:h}=le("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(h)}const{topic:a}=s;await this.isValidPairingTopic(a)},this.isValidPairingTopic=async s=>{if(!Gt(s,!1)){const{message:a}=le("MISSING_OR_INVALID",`pairing topic should be a string: ${s}`);throw new Error(a)}if(!this.pairings.keys.includes(s)){const{message:a}=le("NO_MATCHING_KEY",`pairing topic doesn't exist: ${s}`);throw new Error(a)}if(Pi(this.pairings.get(s).expiry)){await this.deletePairing(s);const{message:a}=le("EXPIRED",`pairing topic: ${s}`);throw new Error(a)}},this.core=e,this.logger=Qe.generateChildLogger(r,this.name),this.pairings=new Xo(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Qe.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(kt.message,async e=>{const{topic:r,message:s}=e;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(s)))return;const a=await this.core.crypto.decode(r,s);xu(a)?(this.core.history.set(r,a),this.onRelayEventRequest({topic:r,payload:a})):Ou(a)&&(await this.core.history.resolve(a),this.onRelayEventResponse({topic:r,payload:a}))})}registerExpirerEvents(){this.core.expirer.on(Mr.expired,async e=>{const{topic:r}=Zd(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}}let C2=class extends v3{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new Ir.EventEmitter,this.name=n2,this.version=s2,this.cached=[],this.initialized=!1,this.storagePrefix=Ti,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.records.set(s.id,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(s,a,h)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:a,chainId:h}),this.records.has(a.id))return;const p={id:a.id,topic:s,request:{method:a.method,params:a.params||null},chainId:h};this.records.set(p.id,p),this.events.emit(ei.created,p)},this.resolve=async s=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:s}),!this.records.has(s.id))return;const a=await this.getRecord(s.id);typeof a.response>"u"&&(a.response=kr(s)?{error:s.error}:{result:s.result},this.records.set(a.id,a),this.events.emit(ei.updated,a))},this.get=async(s,a)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:s,id:a}),await this.getRecord(a)),this.delete=(s,a)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:a}),this.values.forEach(h=>{if(h.topic===s){if(typeof a<"u"&&h.id!==a)return;this.records.delete(h.id),this.events.emit(ei.deleted,h)}})},this.exists=async(s,a)=>(this.isInitialized(),this.records.has(a)?(await this.getRecord(a)).topic===s:!1),this.on=(s,a)=>{this.events.on(s,a)},this.once=(s,a)=>{this.events.once(s,a)},this.off=(s,a)=>{this.events.off(s,a)},this.removeListener=(s,a)=>{this.events.removeListener(s,a)},this.logger=Qe.generateChildLogger(r,this.name)}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const s={topic:r.topic,request:Wo(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(s)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:s}=le("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(ei.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=le("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(ei.created,e=>{const r=ei.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(ei.updated,e=>{const r=ei.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(ei.deleted,e=>{const r=ei.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}};class A2 extends E3{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new Ir.EventEmitter,this.name=o2,this.version=a2,this.cached=[],this.initialized=!1,this.storagePrefix=Ti,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.expirations.set(s.target,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=s=>{try{const a=this.formatTarget(s);return typeof this.getExpiration(a)<"u"}catch{return!1}},this.set=(s,a)=>{this.isInitialized();const h=this.formatTarget(s),p={target:h,expiry:a};this.expirations.set(h,p),this.checkExpiry(h,p),this.events.emit(Mr.created,{target:h,expiration:p})},this.get=s=>{this.isInitialized();const a=this.formatTarget(s);return this.getExpiration(a)},this.del=s=>{if(this.isInitialized(),this.has(s)){const a=this.formatTarget(s),h=this.getExpiration(a);this.expirations.delete(a),this.events.emit(Mr.deleted,{target:a,expiration:h})}},this.on=(s,a)=>{this.events.on(s,a)},this.once=(s,a)=>{this.events.once(s,a)},this.off=(s,a)=>{this.events.off(s,a)},this.removeListener=(s,a)=>{this.events.removeListener(s,a)},this.logger=Qe.generateChildLogger(r,this.name)}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return lE(e);if(typeof e=="number")return dE(e);const{message:r}=le("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Mr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=le("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:s}=le("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return r}checkExpiry(e,r){const{expiry:s}=r;me.toMiliseconds(s)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Mr.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(ms.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Mr.created,e=>{const r=Mr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Mr.expired,e=>{const r=Mr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Mr.deleted,e=>{const r=Mr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}}class P2 extends D3{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.name=Lc,this.initialized=!1,this.init=async s=>{Gd()||!bu()||(this.verifyUrl=(s==null?void 0:s.verifyUrl)||ql,await this.createIframe())},this.register=async s=>{var a;this.initialized||await this.init(),this.iframe&&((a=this.iframe.contentWindow)==null||a.postMessage(s.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${s.attestationId} ${this.verifyUrl}`))},this.resolve=async s=>{var a;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${s.attestationId}`);const h=this.startAbortTimer(me.FIVE_SECONDS),p=await fetch(`${this.verifyUrl}/attestation/${s.attestationId}`,{signal:this.abortController.signal});return clearTimeout(h),p.status===200?(a=await p.json())==null?void 0:a.origin:""},this.createIframe=async()=>{try{await Promise.race([new Promise((s,a)=>{if(document.getElementById(Lc))return s();const h=document.createElement("iframe");h.setAttribute("id",Lc),h.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),h.style.display="none",h.addEventListener("load",()=>{this.initialized=!0,s()}),h.addEventListener("error",p=>{a(p)}),document.body.append(h),this.iframe=h}),new Promise(s=>{setTimeout(()=>s("iframe load timeout"),me.toMiliseconds(me.ONE_SECOND/2))})])}catch(s){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(s)}},this.logger=Qe.generateChildLogger(r,this.name),this.verifyUrl=ql,this.abortController=new AbortController,this.isDevEnv=_u()&&{}.IS_VITEST}get context(){return Qe.getLoggerContext(this.logger)}startAbortTimer(e){return setTimeout(()=>this.abortController.abort(),me.toMiliseconds(e))}}var T2=Object.defineProperty,Yl=Object.getOwnPropertySymbols,N2=Object.prototype.hasOwnProperty,R2=Object.prototype.propertyIsEnumerable,Jl=(n,e,r)=>e in n?T2(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Xl=(n,e)=>{for(var r in e||(e={}))N2.call(e,r)&&Jl(n,r,e[r]);if(Yl)for(var r of Yl(e))R2.call(e,r)&&Jl(n,r,e[r]);return n};let L2=class Tp extends g3{constructor(e){super(e),this.protocol=Cp,this.version=UD,this.name=Cu,this.events=new Ir.EventEmitter,this.initialized=!1,this.on=(s,a)=>this.events.on(s,a),this.once=(s,a)=>this.events.once(s,a),this.off=(s,a)=>this.events.off(s,a),this.removeListener=(s,a)=>this.events.removeListener(s,a),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||Pp;const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Qe.pino(Qe.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||MD.logger}));this.logger=Qe.generateChildLogger(r,this.name),this.heartbeat=new ms.HeartBeat,this.crypto=new u2(this,this.logger,e==null?void 0:e.keychain),this.history=new C2(this,this.logger),this.expirer=new A2(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new o3(Xl(Xl({},$D),e==null?void 0:e.storageOptions)),this.relayer=new D2({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new O2(this,this.logger),this.verify=new P2(this.projectId||"",this.logger)}static async init(e){const r=new Tp(e);return await r.initialize(),r}get context(){return Qe.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}};const F2=L2,Np="wc",Rp=2,Lp="client",Au=`${Np}@${Rp}:${Lp}:`,Uc={name:Lp,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},U2="proposal",Fp="Proposal expired",M2="session",Oo=me.SEVEN_DAYS,$2="engine",fs={wc_sessionPropose:{req:{ttl:me.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:me.ONE_DAY,prompt:!1,tag:1104},res:{ttl:me.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:me.ONE_DAY,prompt:!1,tag:1106},res:{ttl:me.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:me.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:me.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:me.ONE_DAY,prompt:!1,tag:1112},res:{ttl:me.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:me.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:me.THIRTY_SECONDS,prompt:!1,tag:1115}}},Mc={min:me.FIVE_MINUTES,max:me.SEVEN_DAYS},j2="request",B2=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var q2=Object.defineProperty,z2=Object.defineProperties,H2=Object.getOwnPropertyDescriptors,Zl=Object.getOwnPropertySymbols,K2=Object.prototype.hasOwnProperty,V2=Object.prototype.propertyIsEnumerable,Ql=(n,e,r)=>e in n?q2(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Ur=(n,e)=>{for(var r in e||(e={}))K2.call(e,r)&&Ql(n,r,e[r]);if(Zl)for(var r of Zl(e))V2.call(e,r)&&Ql(n,r,e[r]);return n},$c=(n,e)=>z2(n,H2(e));class k2 extends I3{constructor(e){super(e),this.name=$2,this.events=new uu,this.initialized=!1,this.ignoredPayloadTypes=[nn],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(fs)}),this.initialized=!0)},this.connect=async r=>{this.isInitialized();const s=$c(Ur({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:a,requiredNamespaces:h,optionalNamespaces:p,sessionProperties:l,relays:v}=s;let D=a,x,R=!1;if(D&&(R=this.client.core.pairing.pairings.get(D).active),!D||!R){const{topic:U,uri:S}=await this.client.core.pairing.create();D=U,x=S}const V=await this.client.core.crypto.generateKeyPair(),F=Ur({requiredNamespaces:h,optionalNamespaces:p,relays:v??[{protocol:Ap}],proposer:{publicKey:V,metadata:this.client.metadata}},l&&{sessionProperties:l}),{reject:T,resolve:k,done:Y}=An(me.FIVE_MINUTES,Fp);if(this.events.once(qt("session_connect"),async({error:U,session:S})=>{if(U)T(U);else if(S){S.self.publicKey=V;const O=$c(Ur({},S),{requiredNamespaces:S.requiredNamespaces,optionalNamespaces:S.optionalNamespaces});await this.client.session.set(S.topic,O),await this.setExpiry(S.topic,S.expiry),D&&await this.client.core.pairing.updateMetadata({topic:D,metadata:S.peer.metadata}),k(O)}}),!D){const{message:U}=le("NO_MATCHING_KEY",`connect() pairing topic: ${D}`);throw new Error(U)}const ae=await this.sendRequest(D,"wc_sessionPropose",F),N=ri(me.FIVE_MINUTES);return await this.setProposal(ae,Ur({id:ae,expiry:N},F)),{uri:x,approval:Y}},this.pair=async r=>(this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{this.isInitialized(),await this.isValidApprove(r);const{id:s,relayProtocol:a,namespaces:h,sessionProperties:p}=r,l=this.client.proposal.get(s);let{pairingTopic:v,proposer:D,requiredNamespaces:x,optionalNamespaces:R}=l;v=v||"",Nn(x)||(x=xE(h,"approve()"));const V=await this.client.core.crypto.generateKeyPair(),F=D.publicKey,T=await this.client.core.crypto.generateSharedKey(V,F);v&&s&&(await this.client.core.pairing.updateMetadata({topic:v,metadata:D.metadata}),await this.sendResult(s,v,{relay:{protocol:a??"irn"},responderPublicKey:V}),await this.client.proposal.delete(s,Rt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:v}));const k=Ur({relay:{protocol:a??"irn"},namespaces:h,requiredNamespaces:x,optionalNamespaces:R,pairingTopic:v,controller:{publicKey:V,metadata:this.client.metadata},expiry:ri(Oo)},p&&{sessionProperties:p});await this.client.core.relayer.subscribe(T),await this.sendRequest(T,"wc_sessionSettle",k);const Y=$c(Ur({},k),{topic:T,pairingTopic:v,acknowledged:!1,self:k.controller,peer:{publicKey:D.publicKey,metadata:D.metadata},controller:V});return await this.client.session.set(T,Y),await this.setExpiry(T,ri(Oo)),{topic:T,acknowledged:()=>new Promise(ae=>ae(this.client.session.get(T)))}},this.reject=async r=>{this.isInitialized(),await this.isValidReject(r);const{id:s,reason:a}=r,{pairingTopic:h}=this.client.proposal.get(s);h&&(await this.sendError(s,h,a),await this.client.proposal.delete(s,Rt("USER_DISCONNECTED")))},this.update=async r=>{this.isInitialized(),await this.isValidUpdate(r);const{topic:s,namespaces:a}=r,h=await this.sendRequest(s,"wc_sessionUpdate",{namespaces:a}),{done:p,resolve:l,reject:v}=An();return this.events.once(qt("session_update",h),({error:D})=>{D?v(D):l()}),await this.client.session.update(s,{namespaces:a}),{acknowledged:p}},this.extend=async r=>{this.isInitialized(),await this.isValidExtend(r);const{topic:s}=r,a=await this.sendRequest(s,"wc_sessionExtend",{}),{done:h,resolve:p,reject:l}=An();return this.events.once(qt("session_extend",a),({error:v})=>{v?l(v):p()}),await this.setExpiry(s,ri(Oo)),{acknowledged:h}},this.request=async r=>{this.isInitialized(),await this.isValidRequest(r);const{chainId:s,request:a,topic:h,expiry:p}=r,l=await this.sendRequest(h,"wc_sessionRequest",{request:a,chainId:s},p),{done:v,resolve:D,reject:x}=An(p);return this.events.once(qt("session_request",l),({error:R,result:V})=>{R?x(R):D(V)}),this.client.events.emit("session_request_sent",{topic:h,request:a,chainId:s,id:l}),await v()},this.respond=async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:s,response:a}=r,{id:h}=a;yi(a)?await this.sendResult(h,s,a.result):kr(a)&&await this.sendError(h,s,a.error),this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0})},this.ping=async r=>{this.isInitialized(),await this.isValidPing(r);const{topic:s}=r;if(this.client.session.keys.includes(s)){const a=await this.sendRequest(s,"wc_sessionPing",{}),{done:h,resolve:p,reject:l}=An();this.events.once(qt("session_ping",a),({error:v})=>{v?l(v):p()}),await h()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async r=>{this.isInitialized(),await this.isValidEmit(r);const{topic:s,event:a,chainId:h}=r;await this.sendRequest(s,"wc_sessionEvent",{event:a,chainId:h})},this.disconnect=async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.client.session.keys.includes(s)?(await this.sendRequest(s,"wc_sessionDelete",Rt("USER_DISCONNECTED")),await this.deleteSession(s)):await this.client.core.pairing.disconnect({topic:s})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(s=>AE(s,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{try{const s=this.client.core.pairing.pairings.get(r.pairingTopic),a=this.client.core.pairing.pairings.getAll().filter(h=>{var p,l;return((p=h.peerMetadata)==null?void 0:p.url)&&((l=h.peerMetadata)==null?void 0:l.url)===r.self.metadata.url&&h.topic!==s.topic});if(a.length===0)return;this.client.logger.info(`Cleaning up ${a.length} duplicate pairing(s)`),await Promise.all(a.map(h=>this.client.core.pairing.disconnect({topic:h.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(s){this.client.logger.error(s)}},this.deleteSession=async(r,s)=>{const{self:a}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),await Promise.all([this.client.session.delete(r,Rt("USER_DISCONNECTED")),this.client.core.crypto.deleteKeyPair(a.publicKey),this.client.core.crypto.deleteSymKey(r),s?Promise.resolve():this.client.core.expirer.del(r)])},this.deleteProposal=async(r,s)=>{await Promise.all([this.client.proposal.delete(r,Rt("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,s,a=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,s),a?Promise.resolve():this.client.core.expirer.del(r)])},this.setExpiry=async(r,s)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:s}),this.client.core.expirer.set(r,s)},this.setProposal=async(r,s)=>{await this.client.proposal.set(r,s),this.client.core.expirer.set(r,s.expiry)},this.setPendingSessionRequest=async r=>{const s=fs.wc_sessionRequest.req.ttl,{id:a,topic:h,params:p}=r;await this.client.pendingRequest.set(a,{id:a,topic:h,params:p}),s&&this.client.core.expirer.set(a,ri(s))},this.sendRequest=async(r,s,a,h)=>{const p=Wo(s,a);if(bu()&&B2.includes(s)){const D=tn(JSON.stringify(p));await this.client.core.verify.register({attestationId:D})}const l=await this.client.core.crypto.encode(r,p),v=fs[s].req;return h&&(v.ttl=h),this.client.core.history.set(r,p),this.client.core.relayer.publish(r,l,v),p.id},this.sendResult=async(r,s,a)=>{const h=Iu(r,a),p=await this.client.core.crypto.encode(s,h),l=await this.client.core.history.get(s,r),v=fs[l.request.method].res;this.client.core.relayer.publish(s,p,v),await this.client.core.history.resolve(h)},this.sendError=async(r,s,a)=>{const h=Yo(r,a),p=await this.client.core.crypto.encode(s,h),l=await this.client.core.history.get(s,r),v=fs[l.request.method].res;this.client.core.relayer.publish(s,p,v),await this.client.core.history.resolve(h)},this.cleanup=async()=>{const r=[],s=[];this.client.session.getAll().forEach(a=>{Pi(a.expiry)&&r.push(a.topic)}),this.client.proposal.getAll().forEach(a=>{Pi(a.expiry)&&s.push(a.id)}),await Promise.all([...r.map(a=>this.deleteSession(a)),...s.map(a=>this.deleteProposal(a))])},this.onRelayEventRequest=r=>{const{topic:s,payload:a}=r,h=a.method;switch(h){case"wc_sessionPropose":return this.onSessionProposeRequest(s,a);case"wc_sessionSettle":return this.onSessionSettleRequest(s,a);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,a);case"wc_sessionExtend":return this.onSessionExtendRequest(s,a);case"wc_sessionPing":return this.onSessionPingRequest(s,a);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,a);case"wc_sessionRequest":return this.onSessionRequest(s,a);case"wc_sessionEvent":return this.onSessionEventRequest(s,a);default:return this.client.logger.info(`Unsupported request method ${h}`)}},this.onRelayEventResponse=async r=>{const{topic:s,payload:a}=r,h=(await this.client.core.history.get(s,a.id)).request.method;switch(h){case"wc_sessionPropose":return this.onSessionProposeResponse(s,a);case"wc_sessionSettle":return this.onSessionSettleResponse(s,a);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,a);case"wc_sessionExtend":return this.onSessionExtendResponse(s,a);case"wc_sessionPing":return this.onSessionPingResponse(s,a);case"wc_sessionRequest":return this.onSessionRequestResponse(s,a);default:return this.client.logger.info(`Unsupported response method ${h}`)}},this.onSessionProposeRequest=async(r,s)=>{const{params:a,id:h}=s;try{this.isValidConnect(Ur({},s.params));const p=ri(me.FIVE_MINUTES),l=Ur({id:h,pairingTopic:r,expiry:p},a);await this.setProposal(h,l);const v=tn(JSON.stringify(s)),D=await this.getVerifyContext(v,l.proposer.metadata);this.client.events.emit("session_proposal",{id:h,params:l,context:D})}catch(p){await this.sendError(h,r,p),this.client.logger.error(p)}},this.onSessionProposeResponse=async(r,s)=>{const{id:a}=s;if(yi(s)){const{result:h}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:h});const p=this.client.proposal.get(a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:p});const l=p.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:l});const v=h.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:v});const D=await this.client.core.crypto.generateSharedKey(l,v);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:D});const x=await this.client.core.relayer.subscribe(D);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:x}),await this.client.core.pairing.activate({topic:r})}else kr(s)&&(await this.client.proposal.delete(a,Rt("USER_DISCONNECTED")),this.events.emit(qt("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(r,s)=>{const{id:a,params:h}=s;try{this.isValidSessionSettleRequest(h);const{relay:p,controller:l,expiry:v,namespaces:D,requiredNamespaces:x,optionalNamespaces:R,sessionProperties:V,pairingTopic:F}=s.params,T=Ur({topic:r,relay:p,expiry:v,namespaces:D,acknowledged:!0,pairingTopic:F,requiredNamespaces:x,optionalNamespaces:R,controller:l.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:l.publicKey,metadata:l.metadata}},V&&{sessionProperties:V});await this.sendResult(s.id,r,!0),this.events.emit(qt("session_connect"),{session:T}),this.cleanupDuplicatePairings(T)}catch(p){await this.sendError(a,r,p),this.client.logger.error(p)}},this.onSessionSettleResponse=async(r,s)=>{const{id:a}=s;yi(s)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(qt("session_approve",a),{})):kr(s)&&(await this.client.session.delete(r,Rt("USER_DISCONNECTED")),this.events.emit(qt("session_approve",a),{error:s.error}))},this.onSessionUpdateRequest=async(r,s)=>{const{params:a,id:h}=s;try{this.isValidUpdate(Ur({topic:r},a)),await this.client.session.update(r,{namespaces:a.namespaces}),await this.sendResult(h,r,!0),this.client.events.emit("session_update",{id:h,topic:r,params:a})}catch(p){await this.sendError(h,r,p),this.client.logger.error(p)}},this.onSessionUpdateResponse=(r,s)=>{const{id:a}=s;yi(s)?this.events.emit(qt("session_update",a),{}):kr(s)&&this.events.emit(qt("session_update",a),{error:s.error})},this.onSessionExtendRequest=async(r,s)=>{const{id:a}=s;try{this.isValidExtend({topic:r}),await this.setExpiry(r,ri(Oo)),await this.sendResult(a,r,!0),this.client.events.emit("session_extend",{id:a,topic:r})}catch(h){await this.sendError(a,r,h),this.client.logger.error(h)}},this.onSessionExtendResponse=(r,s)=>{const{id:a}=s;yi(s)?this.events.emit(qt("session_extend",a),{}):kr(s)&&this.events.emit(qt("session_extend",a),{error:s.error})},this.onSessionPingRequest=async(r,s)=>{const{id:a}=s;try{this.isValidPing({topic:r}),await this.sendResult(a,r,!0),this.client.events.emit("session_ping",{id:a,topic:r})}catch(h){await this.sendError(a,r,h),this.client.logger.error(h)}},this.onSessionPingResponse=(r,s)=>{const{id:a}=s;setTimeout(()=>{yi(s)?this.events.emit(qt("session_ping",a),{}):kr(s)&&this.events.emit(qt("session_ping",a),{error:s.error})},500)},this.onSessionDeleteRequest=async(r,s)=>{const{id:a}=s;try{this.isValidDisconnect({topic:r,reason:s.params}),await Promise.all([new Promise(h=>{this.client.core.relayer.once(kt.publish,async()=>{h(await this.deleteSession(r))})}),this.sendResult(a,r,!0)]),this.client.events.emit("session_delete",{id:a,topic:r})}catch(h){await this.sendError(a,r,h),this.client.logger.error(h)}},this.onSessionRequest=async(r,s)=>{const{id:a,params:h}=s;try{this.isValidRequest(Ur({topic:r},h)),await this.setPendingSessionRequest({id:a,topic:r,params:h});const p=tn(JSON.stringify(s)),l=this.client.session.get(r),v=await this.getVerifyContext(p,l.peer.metadata);this.client.events.emit("session_request",{id:a,topic:r,params:h,context:v})}catch(p){await this.sendError(a,r,p),this.client.logger.error(p)}},this.onSessionRequestResponse=(r,s)=>{const{id:a}=s;yi(s)?this.events.emit(qt("session_request",a),{result:s.result}):kr(s)&&this.events.emit(qt("session_request",a),{error:s.error})},this.onSessionEventRequest=async(r,s)=>{const{id:a,params:h}=s;try{this.isValidEmit(Ur({topic:r},h)),this.client.events.emit("session_event",{id:a,topic:r,params:h})}catch(p){await this.sendError(a,r,p),this.client.logger.error(p)}},this.isValidConnect=async r=>{if(!yr(r)){const{message:v}=le("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(v)}const{pairingTopic:s,requiredNamespaces:a,optionalNamespaces:h,sessionProperties:p,relays:l}=r;if(cr(s)||await this.isValidPairingTopic(s),!qE(l,!0)){const{message:v}=le("MISSING_OR_INVALID",`connect() relays: ${l}`);throw new Error(v)}!cr(a)&&Nn(a)!==0&&this.validateNamespaces(a,"requiredNamespaces"),!cr(h)&&Nn(h)!==0&&this.validateNamespaces(h,"optionalNamespaces"),cr(p)||this.validateSessionProps(p,"sessionProperties")},this.validateNamespaces=(r,s)=>{const a=BE(r,"connect()",s);if(a)throw new Error(a.message)},this.isValidApprove=async r=>{if(!yr(r))throw new Error(le("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:s,namespaces:a,relayProtocol:h,sessionProperties:p}=r;await this.isValidProposalId(s);const l=this.client.proposal.get(s),v=Ro(a,"approve()");if(v)throw new Error(v.message);const D=hl(l.requiredNamespaces,a,"approve()");if(D)throw new Error(D.message);if(!Gt(h,!0)){const{message:x}=le("MISSING_OR_INVALID",`approve() relayProtocol: ${h}`);throw new Error(x)}cr(p)||this.validateSessionProps(p,"sessionProperties")},this.isValidReject=async r=>{if(!yr(r)){const{message:h}=le("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(h)}const{id:s,reason:a}=r;if(await this.isValidProposalId(s),!HE(a)){const{message:h}=le("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(a)}`);throw new Error(h)}},this.isValidSessionSettleRequest=r=>{if(!yr(r)){const{message:D}=le("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(D)}const{relay:s,controller:a,namespaces:h,expiry:p}=r;if(!tp(s)){const{message:D}=le("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(D)}const l=LE(a,"onSessionSettleRequest()");if(l)throw new Error(l.message);const v=Ro(h,"onSessionSettleRequest()");if(v)throw new Error(v.message);if(Pi(p)){const{message:D}=le("EXPIRED","onSessionSettleRequest()");throw new Error(D)}},this.isValidUpdate=async r=>{if(!yr(r)){const{message:v}=le("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(v)}const{topic:s,namespaces:a}=r;await this.isValidSessionTopic(s);const h=this.client.session.get(s),p=Ro(a,"update()");if(p)throw new Error(p.message);const l=hl(h.requiredNamespaces,a,"update()");if(l)throw new Error(l.message)},this.isValidExtend=async r=>{if(!yr(r)){const{message:a}=le("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(a)}const{topic:s}=r;await this.isValidSessionTopic(s)},this.isValidRequest=async r=>{if(!yr(r)){const{message:v}=le("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(v)}const{topic:s,request:a,chainId:h,expiry:p}=r;await this.isValidSessionTopic(s);const{namespaces:l}=this.client.session.get(s);if(!ul(l,h)){const{message:v}=le("MISSING_OR_INVALID",`request() chainId: ${h}`);throw new Error(v)}if(!KE(a)){const{message:v}=le("MISSING_OR_INVALID",`request() ${JSON.stringify(a)}`);throw new Error(v)}if(!GE(l,h,a.method)){const{message:v}=le("MISSING_OR_INVALID",`request() method: ${a.method}`);throw new Error(v)}if(p&&!XE(p,Mc)){const{message:v}=le("MISSING_OR_INVALID",`request() expiry: ${p}. Expiry must be a number (in seconds) between ${Mc.min} and ${Mc.max}`);throw new Error(v)}},this.isValidRespond=async r=>{if(!yr(r)){const{message:h}=le("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(h)}const{topic:s,response:a}=r;if(await this.isValidSessionTopic(s),!VE(a)){const{message:h}=le("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(a)}`);throw new Error(h)}},this.isValidPing=async r=>{if(!yr(r)){const{message:a}=le("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(a)}const{topic:s}=r;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async r=>{if(!yr(r)){const{message:l}=le("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(l)}const{topic:s,event:a,chainId:h}=r;await this.isValidSessionTopic(s);const{namespaces:p}=this.client.session.get(s);if(!ul(p,h)){const{message:l}=le("MISSING_OR_INVALID",`emit() chainId: ${h}`);throw new Error(l)}if(!kE(a)){const{message:l}=le("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(a)}`);throw new Error(l)}if(!WE(p,h,a.name)){const{message:l}=le("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(a)}`);throw new Error(l)}},this.isValidDisconnect=async r=>{if(!yr(r)){const{message:a}=le("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(a)}const{topic:s}=r;await this.isValidSessionOrPairingTopic(s)},this.getVerifyContext=async(r,s)=>{const a={verified:{verifyUrl:s.verifyUrl||"",validation:"UNKNOWN",origin:s.url||""}};try{const h=await this.client.core.verify.resolve({attestationId:r,verifyUrl:s.verifyUrl});h&&(a.verified.origin=h,a.verified.validation=h===s.url?"VALID":"INVALID")}catch(h){this.client.logger.error(h)}return this.client.logger.info(`Verify context: ${JSON.stringify(a)}`),a},this.validateSessionProps=(r,s)=>{Object.values(r).forEach(a=>{if(!Gt(a,!1)){const{message:h}=le("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(a)}`);throw new Error(h)}})}}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.client.core.relayer.on(kt.message,async e=>{const{topic:r,message:s}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const a=await this.client.core.crypto.decode(r,s);xu(a)?(this.client.core.history.set(r,a),this.onRelayEventRequest({topic:r,payload:a})):Ou(a)&&(await this.client.core.history.resolve(a),this.onRelayEventResponse({topic:r,payload:a}))})}registerExpirerEvents(){this.client.core.expirer.on(Mr.expired,async e=>{const{topic:r,id:s}=Zd(e.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,le("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}isValidPairingTopic(e){if(!Gt(e,!1)){const{message:r}=le("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=le("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(Pi(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=le("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!Gt(e,!1)){const{message:r}=le("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(!this.client.session.keys.includes(e)){const{message:r}=le("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(Pi(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:r}=le("EXPIRED",`session topic: ${e}`);throw new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Gt(e,!1)){const{message:r}=le("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=le("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!zE(e)){const{message:r}=le("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=le("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(Pi(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:r}=le("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class G2 extends Xo{constructor(e,r){super(e,r,U2,Au),this.core=e,this.logger=r}}class W2 extends Xo{constructor(e,r){super(e,r,M2,Au),this.core=e,this.logger=r}}class Y2 extends Xo{constructor(e,r){super(e,r,j2,Au,s=>s.id),this.core=e,this.logger=r}}let J2=class Up extends S3{constructor(e){super(e),this.protocol=Np,this.version=Rp,this.name=Uc.name,this.events=new Ir.EventEmitter,this.on=(s,a)=>this.events.on(s,a),this.once=(s,a)=>this.events.once(s,a),this.off=(s,a)=>this.events.off(s,a),this.removeListener=(s,a)=>this.events.removeListener(s,a),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(a){throw this.logger.error(a.message),a}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(a){throw this.logger.error(a.message),a}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(a){throw this.logger.error(a.message),a}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(a){throw this.logger.error(a.message),a}},this.update=async s=>{try{return await this.engine.update(s)}catch(a){throw this.logger.error(a.message),a}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(a){throw this.logger.error(a.message),a}},this.request=async s=>{try{return await this.engine.request(s)}catch(a){throw this.logger.error(a.message),a}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(a){throw this.logger.error(a.message),a}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(a){throw this.logger.error(a.message),a}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(a){throw this.logger.error(a.message),a}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(a){throw this.logger.error(a.message),a}},this.find=s=>{try{return this.engine.find(s)}catch(a){throw this.logger.error(a.message),a}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=(e==null?void 0:e.name)||Uc.name,this.metadata=(e==null?void 0:e.metadata)||aE();const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Qe.pino(Qe.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Uc.logger}));this.core=(e==null?void 0:e.core)||new F2(e),this.logger=Qe.generateChildLogger(r,this.name),this.session=new W2(this.core,this.logger),this.proposal=new G2(this.core,this.logger),this.pendingRequest=new Y2(this.core,this.logger),this.engine=new k2(this)}static async init(e){const r=new Up(e);return await r.initialize(),r}get context(){return Qe.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var tu={exports:{}};(function(n,e){var r=typeof self<"u"?self:er,s=function(){function h(){this.fetch=!1,this.DOMException=r.DOMException}return h.prototype=r,new h}();(function(h){(function(p){var l={searchParams:"URLSearchParams"in h,iterable:"Symbol"in h&&"iterator"in Symbol,blob:"FileReader"in h&&"Blob"in h&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in h,arrayBuffer:"ArrayBuffer"in h};function v(g){return g&&DataView.prototype.isPrototypeOf(g)}if(l.arrayBuffer)var D=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],x=ArrayBuffer.isView||function(g){return g&&D.indexOf(Object.prototype.toString.call(g))>-1};function R(g){if(typeof g!="string"&&(g=String(g)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(g))throw new TypeError("Invalid character in header field name");return g.toLowerCase()}function V(g){return typeof g!="string"&&(g=String(g)),g}function F(g){var w={next:function(){var G=g.shift();return{done:G===void 0,value:G}}};return l.iterable&&(w[Symbol.iterator]=function(){return w}),w}function T(g){this.map={},g instanceof T?g.forEach(function(w,G){this.append(G,w)},this):Array.isArray(g)?g.forEach(function(w){this.append(w[0],w[1])},this):g&&Object.getOwnPropertyNames(g).forEach(function(w){this.append(w,g[w])},this)}T.prototype.append=function(g,w){g=R(g),w=V(w);var G=this.map[g];this.map[g]=G?G+", "+w:w},T.prototype.delete=function(g){delete this.map[R(g)]},T.prototype.get=function(g){return g=R(g),this.has(g)?this.map[g]:null},T.prototype.has=function(g){return this.map.hasOwnProperty(R(g))},T.prototype.set=function(g,w){this.map[R(g)]=V(w)},T.prototype.forEach=function(g,w){for(var G in this.map)this.map.hasOwnProperty(G)&&g.call(w,this.map[G],G,this)},T.prototype.keys=function(){var g=[];return this.forEach(function(w,G){g.push(G)}),F(g)},T.prototype.values=function(){var g=[];return this.forEach(function(w){g.push(w)}),F(g)},T.prototype.entries=function(){var g=[];return this.forEach(function(w,G){g.push([G,w])}),F(g)},l.iterable&&(T.prototype[Symbol.iterator]=T.prototype.entries);function k(g){if(g.bodyUsed)return Promise.reject(new TypeError("Already read"));g.bodyUsed=!0}function Y(g){return new Promise(function(w,G){g.onload=function(){w(g.result)},g.onerror=function(){G(g.error)}})}function ae(g){var w=new FileReader,G=Y(w);return w.readAsArrayBuffer(g),G}function N(g){var w=new FileReader,G=Y(w);return w.readAsText(g),G}function U(g){for(var w=new Uint8Array(g),G=new Array(w.length),X=0;X<w.length;X++)G[X]=String.fromCharCode(w[X]);return G.join("")}function S(g){if(g.slice)return g.slice(0);var w=new Uint8Array(g.byteLength);return w.set(new Uint8Array(g)),w.buffer}function O(){return this.bodyUsed=!1,this._initBody=function(g){this._bodyInit=g,g?typeof g=="string"?this._bodyText=g:l.blob&&Blob.prototype.isPrototypeOf(g)?this._bodyBlob=g:l.formData&&FormData.prototype.isPrototypeOf(g)?this._bodyFormData=g:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(g)?this._bodyText=g.toString():l.arrayBuffer&&l.blob&&v(g)?(this._bodyArrayBuffer=S(g.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(g)||x(g))?this._bodyArrayBuffer=S(g):this._bodyText=g=Object.prototype.toString.call(g):this._bodyText="",this.headers.get("content-type")||(typeof g=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(g)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var g=k(this);if(g)return g;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?k(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(ae)}),this.text=function(){var g=k(this);if(g)return g;if(this._bodyBlob)return N(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(U(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(Q)}),this.json=function(){return this.text().then(JSON.parse)},this}var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function c(g){var w=g.toUpperCase();return m.indexOf(w)>-1?w:g}function y(g,w){w=w||{};var G=w.body;if(g instanceof y){if(g.bodyUsed)throw new TypeError("Already read");this.url=g.url,this.credentials=g.credentials,w.headers||(this.headers=new T(g.headers)),this.method=g.method,this.mode=g.mode,this.signal=g.signal,!G&&g._bodyInit!=null&&(G=g._bodyInit,g.bodyUsed=!0)}else this.url=String(g);if(this.credentials=w.credentials||this.credentials||"same-origin",(w.headers||!this.headers)&&(this.headers=new T(w.headers)),this.method=c(w.method||this.method||"GET"),this.mode=w.mode||this.mode||null,this.signal=w.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&G)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(G)}y.prototype.clone=function(){return new y(this,{body:this._bodyInit})};function Q(g){var w=new FormData;return g.trim().split("&").forEach(function(G){if(G){var X=G.split("="),W=X.shift().replace(/\+/g," "),q=X.join("=").replace(/\+/g," ");w.append(decodeURIComponent(W),decodeURIComponent(q))}}),w}function C(g){var w=new T,G=g.replace(/\r?\n[\t ]+/g," ");return G.split(/\r?\n/).forEach(function(X){var W=X.split(":"),q=W.shift().trim();if(q){var Z=W.join(":").trim();w.append(q,Z)}}),w}O.call(y.prototype);function $(g,w){w||(w={}),this.type="default",this.status=w.status===void 0?200:w.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in w?w.statusText:"OK",this.headers=new T(w.headers),this.url=w.url||"",this._initBody(g)}O.call($.prototype),$.prototype.clone=function(){return new $(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new T(this.headers),url:this.url})},$.error=function(){var g=new $(null,{status:0,statusText:""});return g.type="error",g};var H=[301,302,303,307,308];$.redirect=function(g,w){if(H.indexOf(w)===-1)throw new RangeError("Invalid status code");return new $(null,{status:w,headers:{location:g}})},p.DOMException=h.DOMException;try{new p.DOMException}catch{p.DOMException=function(w,G){this.message=w,this.name=G;var X=Error(w);this.stack=X.stack},p.DOMException.prototype=Object.create(Error.prototype),p.DOMException.prototype.constructor=p.DOMException}function ee(g,w){return new Promise(function(G,X){var W=new y(g,w);if(W.signal&&W.signal.aborted)return X(new p.DOMException("Aborted","AbortError"));var q=new XMLHttpRequest;function Z(){q.abort()}q.onload=function(){var ne={status:q.status,statusText:q.statusText,headers:C(q.getAllResponseHeaders()||"")};ne.url="responseURL"in q?q.responseURL:ne.headers.get("X-Request-URL");var ge="response"in q?q.response:q.responseText;G(new $(ge,ne))},q.onerror=function(){X(new TypeError("Network request failed"))},q.ontimeout=function(){X(new TypeError("Network request failed"))},q.onabort=function(){X(new p.DOMException("Aborted","AbortError"))},q.open(W.method,W.url,!0),W.credentials==="include"?q.withCredentials=!0:W.credentials==="omit"&&(q.withCredentials=!1),"responseType"in q&&l.blob&&(q.responseType="blob"),W.headers.forEach(function(ne,ge){q.setRequestHeader(ge,ne)}),W.signal&&(W.signal.addEventListener("abort",Z),q.onreadystatechange=function(){q.readyState===4&&W.signal.removeEventListener("abort",Z)}),q.send(typeof W._bodyInit>"u"?null:W._bodyInit)})}return ee.polyfill=!0,h.fetch||(h.fetch=ee,h.Headers=T,h.Request=y,h.Response=$),p.Headers=T,p.Request=y,p.Response=$,p.fetch=ee,Object.defineProperty(p,"__esModule",{value:!0}),p})({})})(s),s.fetch.ponyfill=!0,delete s.fetch.polyfill;var a=s;e=a.fetch,e.default=a.fetch,e.fetch=a.fetch,e.Headers=a.Headers,e.Request=a.Request,e.Response=a.Response,n.exports=e})(tu,tu.exports);var X2=tu.exports;const ed=au(X2),Z2={Accept:"application/json","Content-Type":"application/json"},Q2="POST",td={headers:Z2,method:Q2},rd=10;class on{constructor(e){if(this.url=e,this.events=new Ir.EventEmitter,this.isAvailable=!1,this.registering=!1,!Tl(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e,r){this.isAvailable||await this.register();try{const s=gs(e),h=await(await ed(this.url,Object.assign(Object.assign({},td),{body:s}))).json();this.onPayload({data:h})}catch(s){this.onError(e.id,s)}}async register(e=this.url){if(!Tl(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((s,a)=>{this.events.once("register_error",h=>{this.resetMaxListeners(),a(h)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return a(new Error("HTTP connection is missing or invalid"));s()})})}this.url=e,this.registering=!0;try{const r=gs({id:1,jsonrpc:"2.0",method:"test",params:[]});await ed(e,Object.assign(Object.assign({},td),{body:r})),this.onOpen()}catch(r){const s=this.parseError(r);throw this.events.emit("register_error",s),this.onClose(),s}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Eu(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const s=this.parseError(r),a=s.message||s.toString(),h=Yo(e,a);this.events.emit("payload",h)}parseError(e,r=this.url){return lp(e,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>rd&&this.events.setMaxListeners(rd)}}const id="error",e5="wss://relay.walletconnect.com",t5="wc",r5="universal_provider",nd=`${t5}@2:${r5}:`,i5="https://rpc.walletconnect.com/v1",Li={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var ls=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ru={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(n,e){(function(){var r,s="4.17.21",a=200,h="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",p="Expected a function",l="Invalid `variable` option passed into `_.template`",v="__lodash_hash_undefined__",D=500,x="__lodash_placeholder__",R=1,V=2,F=4,T=1,k=2,Y=1,ae=2,N=4,U=8,S=16,O=32,m=64,c=128,y=256,Q=512,C=30,$="...",H=800,ee=16,g=1,w=2,G=3,X=1/0,W=9007199254740991,q=17976931348623157e292,Z=0/0,ne=4294967295,ge=ne-1,ce=ne>>>1,_e=[["ary",c],["bind",Y],["bindKey",ae],["curry",U],["curryRight",S],["flip",Q],["partial",O],["partialRight",m],["rearg",y]],he="[object Arguments]",be="[object Array]",K="[object AsyncFunction]",z="[object Boolean]",L="[object Date]",f="[object DOMException]",A="[object Error]",ue="[object Function]",de="[object GeneratorFunction]",Ie="[object Map]",ze="[object Number]",Ve="[object Null]",Me="[object Object]",gt="[object Promise]",vt="[object Proxy]",je="[object RegExp]",xe="[object Set]",Re="[object String]",Le="[object Symbol]",Be="[object Undefined]",Ce="[object WeakMap]",Fe="[object WeakSet]",Se="[object ArrayBuffer]",Ae="[object DataView]",He="[object Float32Array]",Oe="[object Float64Array]",ke="[object Int8Array]",We="[object Int16Array]",et="[object Int32Array]",tt="[object Uint8Array]",Je="[object Uint8ClampedArray]",tr="[object Uint16Array]",fr="[object Uint32Array]",Gr=/\b__p \+= '';/g,rr=/\b(__p \+=) '' \+/g,ii=/(__e\(.*?\)|\b__t\)) \+\n'';/g,bi=/&(?:amp|lt|gt|quot|#39);/g,Fi=/[&<>"']/g,Et=RegExp(bi.source),yt=RegExp(Fi.source),Dt=/<%-([\s\S]+?)%>/g,St=/<%([\s\S]+?)%>/g,mt=/<%=([\s\S]+?)%>/g,_t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Lt=/^\w*$/,Ft=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,It=/[\\^$.*+?()[\]{}|]/g,Ut=RegExp(It.source),xt=/^\s+/,At=/\s/,Ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ft=/\{\n\/\* \[wrapped with (.+)\] \*/,Mt=/,? & /,$t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Zo=/[()=,{}\[\]\/\s]/,Qo=/\\(\\)?/g,ea=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Or=/\w*$/,ta=/^[-+]0x[0-9a-f]+$/i,ra=/^0b[01]+$/i,ia=/^\[object .+?Constructor\]$/,na=/^0o[0-7]+$/i,sa=/^(?:0|[1-9]\d*)$/,ni=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,cn=/($^)/,oa=/['\n\r\u2028\u2029\\]/g,un="\\ud800-\\udfff",aa="\\u0300-\\u036f",ca="\\ufe20-\\ufe2f",hn="\\u20d0-\\u20ff",Es=aa+ca+hn,Ds="\\u2700-\\u27bf",Br="a-z\\xdf-\\xf6\\xf8-\\xff",ua="\\xac\\xb1\\xd7\\xf7",ha="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",fa="\\u2000-\\u206f",la=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ss="A-Z\\xc0-\\xd6\\xd8-\\xde",Is="\\ufe0e\\ufe0f",Ui=ua+ha+fa+la,Un="['â€™]",Mi="["+un+"]",Mn="["+Ui+"]",$i="["+Es+"]",xs="\\d+",da="["+Ds+"]",Os="["+Br+"]",Cs="[^"+un+Ui+xs+Ds+Br+Ss+"]",fn="\\ud83c[\\udffb-\\udfff]",pa="(?:"+$i+"|"+fn+")",As="[^"+un+"]",ln="(?:\\ud83c[\\udde6-\\uddff]){2}",mi="[\\ud800-\\udbff][\\udc00-\\udfff]",br="["+Ss+"]",Ps="\\u200d",Ts="(?:"+Os+"|"+Cs+")",Wr="(?:"+br+"|"+Cs+")",Ns="(?:"+Un+"(?:d|ll|m|re|s|t|ve))?",Rs="(?:"+Un+"(?:D|LL|M|RE|S|T|VE))?",Ls=pa+"?",Fs="["+Is+"]?",ga="(?:"+Ps+"(?:"+[As,ln,mi].join("|")+")"+Fs+Ls+")*",si="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Us="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ms=Fs+Ls+ga,dn="(?:"+[da,ln,mi].join("|")+")"+Ms,va="(?:"+[As+$i+"?",$i,ln,mi,Mi].join("|")+")",$n=RegExp(Un,"g"),ya=RegExp($i,"g"),pn=RegExp(fn+"(?="+fn+")|"+va+Ms,"g"),$s=RegExp([br+"?"+Os+"+"+Ns+"(?="+[Mn,br,"$"].join("|")+")",Wr+"+"+Rs+"(?="+[Mn,br+Ts,"$"].join("|")+")",br+"?"+Ts+"+"+Ns,br+"+"+Rs,Us,si,xs,dn].join("|"),"g"),js=RegExp("["+Ps+un+Es+Is+"]"),ji=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Bs=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],_a=-1,at={};at[He]=at[Oe]=at[ke]=at[We]=at[et]=at[tt]=at[Je]=at[tr]=at[fr]=!0,at[he]=at[be]=at[Se]=at[z]=at[Ae]=at[L]=at[A]=at[ue]=at[Ie]=at[ze]=at[Me]=at[je]=at[xe]=at[Re]=at[Ce]=!1;var st={};st[he]=st[be]=st[Se]=st[Ae]=st[z]=st[L]=st[He]=st[Oe]=st[ke]=st[We]=st[et]=st[Ie]=st[ze]=st[Me]=st[je]=st[xe]=st[Re]=st[Le]=st[tt]=st[Je]=st[tr]=st[fr]=!0,st[A]=st[ue]=st[Ce]=!1;var E={Ã€:"A",Ã:"A",Ã‚:"A",Ãƒ:"A",Ã„:"A",Ã…:"A",Ã :"a",Ã¡:"a",Ã¢:"a",Ã£:"a",Ã¤:"a",Ã¥:"a",Ã‡:"C",Ã§:"c",Ã:"D",Ã°:"d",Ãˆ:"E",Ã‰:"E",ÃŠ:"E",Ã‹:"E",Ã¨:"e",Ã©:"e",Ãª:"e",Ã«:"e",ÃŒ:"I",Ã:"I",ÃŽ:"I",Ã:"I",Ã¬:"i",Ã­:"i",Ã®:"i",Ã¯:"i",Ã‘:"N",Ã±:"n",Ã’:"O",Ã“:"O",Ã”:"O",Ã•:"O",Ã–:"O",Ã˜:"O",Ã²:"o",Ã³:"o",Ã´:"o",Ãµ:"o",Ã¶:"o",Ã¸:"o",Ã™:"U",Ãš:"U",Ã›:"U",Ãœ:"U",Ã¹:"u",Ãº:"u",Ã»:"u",Ã¼:"u",Ã:"Y",Ã½:"y",Ã¿:"y",Ã†:"Ae",Ã¦:"ae",Ãž:"Th",Ã¾:"th",ÃŸ:"ss",Ä€:"A",Ä‚:"A",Ä„:"A",Ä:"a",Äƒ:"a",Ä…:"a",Ä†:"C",Äˆ:"C",ÄŠ:"C",ÄŒ:"C",Ä‡:"c",Ä‰:"c",Ä‹:"c",Ä:"c",ÄŽ:"D",Ä:"D",Ä:"d",Ä‘:"d",Ä’:"E",Ä”:"E",Ä–:"E",Ä˜:"E",Äš:"E",Ä“:"e",Ä•:"e",Ä—:"e",Ä™:"e",Ä›:"e",Äœ:"G",Äž:"G",Ä :"G",Ä¢:"G",Ä:"g",ÄŸ:"g",Ä¡:"g",Ä£:"g",Ä¤:"H",Ä¦:"H",Ä¥:"h",Ä§:"h",Ä¨:"I",Äª:"I",Ä¬:"I",Ä®:"I",Ä°:"I",Ä©:"i",Ä«:"i",Ä­:"i",Ä¯:"i",Ä±:"i",Ä´:"J",Äµ:"j",Ä¶:"K",Ä·:"k",Ä¸:"k",Ä¹:"L",Ä»:"L",Ä½:"L",Ä¿:"L",Å:"L",Äº:"l",Ä¼:"l",Ä¾:"l",Å€:"l",Å‚:"l",Åƒ:"N",Å…:"N",Å‡:"N",ÅŠ:"N",Å„:"n",Å†:"n",Åˆ:"n",Å‹:"n",ÅŒ:"O",ÅŽ:"O",Å:"O",Å:"o",Å:"o",Å‘:"o",Å”:"R",Å–:"R",Å˜:"R",Å•:"r",Å—:"r",Å™:"r",Åš:"S",Åœ:"S",Åž:"S",Å :"S",Å›:"s",Å:"s",ÅŸ:"s",Å¡:"s",Å¢:"T",Å¤:"T",Å¦:"T",Å£:"t",Å¥:"t",Å§:"t",Å¨:"U",Åª:"U",Å¬:"U",Å®:"U",Å°:"U",Å²:"U",Å©:"u",Å«:"u",Å­:"u",Å¯:"u",Å±:"u",Å³:"u",Å´:"W",Åµ:"w",Å¶:"Y",Å·:"y",Å¸:"Y",Å¹:"Z",Å»:"Z",Å½:"Z",Åº:"z",Å¼:"z",Å¾:"z",Ä²:"IJ",Ä³:"ij",Å’:"Oe",Å“:"oe",Å‰:"'n",Å¿:"s"},M={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},se={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},pe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ct=parseFloat,Te=parseInt,dt=typeof ls=="object"&&ls&&ls.Object===Object&&ls,jt=typeof self=="object"&&self&&self.Object===Object&&self,Xe=dt||jt||Function("return this")(),ut=e&&!e.nodeType&&e,Pt=ut&&!0&&n&&!n.nodeType&&n,lr=Pt&&Pt.exports===ut,Bt=lr&&dt.process,pt=function(){try{var j=Pt&&Pt.require&&Pt.require("util").types;return j||Bt&&Bt.binding&&Bt.binding("util")}catch{}}(),ir=pt&&pt.isArrayBuffer,qr=pt&&pt.isDate,Cr=pt&&pt.isMap,Yr=pt&&pt.isRegExp,jn=pt&&pt.isSet,Bi=pt&&pt.isTypedArray;function Kt(j,te,J){switch(J.length){case 0:return j.call(te);case 1:return j.call(te,J[0]);case 2:return j.call(te,J[0],J[1]);case 3:return j.call(te,J[0],J[1],J[2])}return j.apply(te,J)}function Mp(j,te,J,ve){for(var Pe=-1,rt=j==null?0:j.length;++Pe<rt;){var zt=j[Pe];te(ve,zt,J(zt),j)}return ve}function Ar(j,te){for(var J=-1,ve=j==null?0:j.length;++J<ve&&te(j[J],J,j)!==!1;);return j}function $p(j,te){for(var J=j==null?0:j.length;J--&&te(j[J],J,j)!==!1;);return j}function Nu(j,te){for(var J=-1,ve=j==null?0:j.length;++J<ve;)if(!te(j[J],J,j))return!1;return!0}function wi(j,te){for(var J=-1,ve=j==null?0:j.length,Pe=0,rt=[];++J<ve;){var zt=j[J];te(zt,J,j)&&(rt[Pe++]=zt)}return rt}function qs(j,te){var J=j==null?0:j.length;return!!J&&gn(j,te,0)>-1}function ba(j,te,J){for(var ve=-1,Pe=j==null?0:j.length;++ve<Pe;)if(J(te,j[ve]))return!0;return!1}function bt(j,te){for(var J=-1,ve=j==null?0:j.length,Pe=Array(ve);++J<ve;)Pe[J]=te(j[J],J,j);return Pe}function Ei(j,te){for(var J=-1,ve=te.length,Pe=j.length;++J<ve;)j[Pe+J]=te[J];return j}function ma(j,te,J,ve){var Pe=-1,rt=j==null?0:j.length;for(ve&&rt&&(J=j[++Pe]);++Pe<rt;)J=te(J,j[Pe],Pe,j);return J}function jp(j,te,J,ve){var Pe=j==null?0:j.length;for(ve&&Pe&&(J=j[--Pe]);Pe--;)J=te(J,j[Pe],Pe,j);return J}function wa(j,te){for(var J=-1,ve=j==null?0:j.length;++J<ve;)if(te(j[J],J,j))return!0;return!1}var Bp=Ea("length");function qp(j){return j.split("")}function zp(j){return j.match($t)||[]}function Ru(j,te,J){var ve;return J(j,function(Pe,rt,zt){if(te(Pe,rt,zt))return ve=rt,!1}),ve}function zs(j,te,J,ve){for(var Pe=j.length,rt=J+(ve?1:-1);ve?rt--:++rt<Pe;)if(te(j[rt],rt,j))return rt;return-1}function gn(j,te,J){return te===te?eg(j,te,J):zs(j,Lu,J)}function Hp(j,te,J,ve){for(var Pe=J-1,rt=j.length;++Pe<rt;)if(ve(j[Pe],te))return Pe;return-1}function Lu(j){return j!==j}function Fu(j,te){var J=j==null?0:j.length;return J?Sa(j,te)/J:Z}function Ea(j){return function(te){return te==null?r:te[j]}}function Da(j){return function(te){return j==null?r:j[te]}}function Uu(j,te,J,ve,Pe){return Pe(j,function(rt,zt,ht){J=ve?(ve=!1,rt):te(J,rt,zt,ht)}),J}function Kp(j,te){var J=j.length;for(j.sort(te);J--;)j[J]=j[J].value;return j}function Sa(j,te){for(var J,ve=-1,Pe=j.length;++ve<Pe;){var rt=te(j[ve]);rt!==r&&(J=J===r?rt:J+rt)}return J}function Ia(j,te){for(var J=-1,ve=Array(j);++J<j;)ve[J]=te(J);return ve}function Vp(j,te){return bt(te,function(J){return[J,j[J]]})}function Mu(j){return j&&j.slice(0,qu(j)+1).replace(xt,"")}function mr(j){return function(te){return j(te)}}function xa(j,te){return bt(te,function(J){return j[J]})}function Bn(j,te){return j.has(te)}function $u(j,te){for(var J=-1,ve=j.length;++J<ve&&gn(te,j[J],0)>-1;);return J}function ju(j,te){for(var J=j.length;J--&&gn(te,j[J],0)>-1;);return J}function kp(j,te){for(var J=j.length,ve=0;J--;)j[J]===te&&++ve;return ve}var Gp=Da(E),Wp=Da(M);function Yp(j){return"\\"+pe[j]}function Jp(j,te){return j==null?r:j[te]}function vn(j){return js.test(j)}function Xp(j){return ji.test(j)}function Zp(j){for(var te,J=[];!(te=j.next()).done;)J.push(te.value);return J}function Oa(j){var te=-1,J=Array(j.size);return j.forEach(function(ve,Pe){J[++te]=[Pe,ve]}),J}function Bu(j,te){return function(J){return j(te(J))}}function Di(j,te){for(var J=-1,ve=j.length,Pe=0,rt=[];++J<ve;){var zt=j[J];(zt===te||zt===x)&&(j[J]=x,rt[Pe++]=J)}return rt}function Hs(j){var te=-1,J=Array(j.size);return j.forEach(function(ve){J[++te]=ve}),J}function Qp(j){var te=-1,J=Array(j.size);return j.forEach(function(ve){J[++te]=[ve,ve]}),J}function eg(j,te,J){for(var ve=J-1,Pe=j.length;++ve<Pe;)if(j[ve]===te)return ve;return-1}function tg(j,te,J){for(var ve=J+1;ve--;)if(j[ve]===te)return ve;return ve}function yn(j){return vn(j)?ig(j):Bp(j)}function zr(j){return vn(j)?ng(j):qp(j)}function qu(j){for(var te=j.length;te--&&At.test(j.charAt(te)););return te}var rg=Da(se);function ig(j){for(var te=pn.lastIndex=0;pn.test(j);)++te;return te}function ng(j){return j.match(pn)||[]}function sg(j){return j.match($s)||[]}var og=function j(te){te=te==null?Xe:_n.defaults(Xe.Object(),te,_n.pick(Xe,Bs));var J=te.Array,ve=te.Date,Pe=te.Error,rt=te.Function,zt=te.Math,ht=te.Object,Ca=te.RegExp,ag=te.String,Pr=te.TypeError,Ks=J.prototype,cg=rt.prototype,bn=ht.prototype,Vs=te["__core-js_shared__"],ks=cg.toString,nt=bn.hasOwnProperty,ug=0,zu=function(){var t=/[^.]+$/.exec(Vs&&Vs.keys&&Vs.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Gs=bn.toString,hg=ks.call(ht),fg=Xe._,lg=Ca("^"+ks.call(nt).replace(It,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ws=lr?te.Buffer:r,Si=te.Symbol,Ys=te.Uint8Array,Hu=Ws?Ws.allocUnsafe:r,Js=Bu(ht.getPrototypeOf,ht),Ku=ht.create,Vu=bn.propertyIsEnumerable,Xs=Ks.splice,ku=Si?Si.isConcatSpreadable:r,qn=Si?Si.iterator:r,qi=Si?Si.toStringTag:r,Zs=function(){try{var t=ki(ht,"defineProperty");return t({},"",{}),t}catch{}}(),dg=te.clearTimeout!==Xe.clearTimeout&&te.clearTimeout,pg=ve&&ve.now!==Xe.Date.now&&ve.now,gg=te.setTimeout!==Xe.setTimeout&&te.setTimeout,Qs=zt.ceil,eo=zt.floor,Aa=ht.getOwnPropertySymbols,vg=Ws?Ws.isBuffer:r,Gu=te.isFinite,yg=Ks.join,_g=Bu(ht.keys,ht),Ht=zt.max,Xt=zt.min,bg=ve.now,mg=te.parseInt,Wu=zt.random,wg=Ks.reverse,Pa=ki(te,"DataView"),zn=ki(te,"Map"),Ta=ki(te,"Promise"),mn=ki(te,"Set"),Hn=ki(te,"WeakMap"),Kn=ki(ht,"create"),to=Hn&&new Hn,wn={},Eg=Gi(Pa),Dg=Gi(zn),Sg=Gi(Ta),Ig=Gi(mn),xg=Gi(Hn),ro=Si?Si.prototype:r,Vn=ro?ro.valueOf:r,Yu=ro?ro.toString:r;function _(t){if(Ct(t)&&!Ne(t)&&!(t instanceof Ye)){if(t instanceof Tr)return t;if(nt.call(t,"__wrapped__"))return Jh(t)}return new Tr(t)}var En=function(){function t(){}return function(i){if(!wt(i))return{};if(Ku)return Ku(i);t.prototype=i;var o=new t;return t.prototype=r,o}}();function io(){}function Tr(t,i){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=r}_.templateSettings={escape:Dt,evaluate:St,interpolate:mt,variable:"",imports:{_}},_.prototype=io.prototype,_.prototype.constructor=_,Tr.prototype=En(io.prototype),Tr.prototype.constructor=Tr;function Ye(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ne,this.__views__=[]}function Og(){var t=new Ye(this.__wrapped__);return t.__actions__=dr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=dr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=dr(this.__views__),t}function Cg(){if(this.__filtered__){var t=new Ye(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Ag(){var t=this.__wrapped__.value(),i=this.__dir__,o=Ne(t),u=i<0,d=o?t.length:0,b=q0(0,d,this.__views__),I=b.start,P=b.end,B=P-I,re=u?P:I-1,ie=this.__iteratees__,oe=ie.length,fe=0,ye=Xt(B,this.__takeCount__);if(!o||!u&&d==B&&ye==B)return bh(t,this.__actions__);var Ee=[];e:for(;B--&&fe<ye;){re+=i;for(var qe=-1,De=t[re];++qe<oe;){var Ge=ie[qe],Ze=Ge.iteratee,Dr=Ge.type,or=Ze(De);if(Dr==w)De=or;else if(!or){if(Dr==g)continue e;break e}}Ee[fe++]=De}return Ee}Ye.prototype=En(io.prototype),Ye.prototype.constructor=Ye;function zi(t){var i=-1,o=t==null?0:t.length;for(this.clear();++i<o;){var u=t[i];this.set(u[0],u[1])}}function Pg(){this.__data__=Kn?Kn(null):{},this.size=0}function Tg(t){var i=this.has(t)&&delete this.__data__[t];return this.size-=i?1:0,i}function Ng(t){var i=this.__data__;if(Kn){var o=i[t];return o===v?r:o}return nt.call(i,t)?i[t]:r}function Rg(t){var i=this.__data__;return Kn?i[t]!==r:nt.call(i,t)}function Lg(t,i){var o=this.__data__;return this.size+=this.has(t)?0:1,o[t]=Kn&&i===r?v:i,this}zi.prototype.clear=Pg,zi.prototype.delete=Tg,zi.prototype.get=Ng,zi.prototype.has=Rg,zi.prototype.set=Lg;function oi(t){var i=-1,o=t==null?0:t.length;for(this.clear();++i<o;){var u=t[i];this.set(u[0],u[1])}}function Fg(){this.__data__=[],this.size=0}function Ug(t){var i=this.__data__,o=no(i,t);if(o<0)return!1;var u=i.length-1;return o==u?i.pop():Xs.call(i,o,1),--this.size,!0}function Mg(t){var i=this.__data__,o=no(i,t);return o<0?r:i[o][1]}function $g(t){return no(this.__data__,t)>-1}function jg(t,i){var o=this.__data__,u=no(o,t);return u<0?(++this.size,o.push([t,i])):o[u][1]=i,this}oi.prototype.clear=Fg,oi.prototype.delete=Ug,oi.prototype.get=Mg,oi.prototype.has=$g,oi.prototype.set=jg;function ai(t){var i=-1,o=t==null?0:t.length;for(this.clear();++i<o;){var u=t[i];this.set(u[0],u[1])}}function Bg(){this.size=0,this.__data__={hash:new zi,map:new(zn||oi),string:new zi}}function qg(t){var i=yo(this,t).delete(t);return this.size-=i?1:0,i}function zg(t){return yo(this,t).get(t)}function Hg(t){return yo(this,t).has(t)}function Kg(t,i){var o=yo(this,t),u=o.size;return o.set(t,i),this.size+=o.size==u?0:1,this}ai.prototype.clear=Bg,ai.prototype.delete=qg,ai.prototype.get=zg,ai.prototype.has=Hg,ai.prototype.set=Kg;function Hi(t){var i=-1,o=t==null?0:t.length;for(this.__data__=new ai;++i<o;)this.add(t[i])}function Vg(t){return this.__data__.set(t,v),this}function kg(t){return this.__data__.has(t)}Hi.prototype.add=Hi.prototype.push=Vg,Hi.prototype.has=kg;function Hr(t){var i=this.__data__=new oi(t);this.size=i.size}function Gg(){this.__data__=new oi,this.size=0}function Wg(t){var i=this.__data__,o=i.delete(t);return this.size=i.size,o}function Yg(t){return this.__data__.get(t)}function Jg(t){return this.__data__.has(t)}function Xg(t,i){var o=this.__data__;if(o instanceof oi){var u=o.__data__;if(!zn||u.length<a-1)return u.push([t,i]),this.size=++o.size,this;o=this.__data__=new ai(u)}return o.set(t,i),this.size=o.size,this}Hr.prototype.clear=Gg,Hr.prototype.delete=Wg,Hr.prototype.get=Yg,Hr.prototype.has=Jg,Hr.prototype.set=Xg;function Ju(t,i){var o=Ne(t),u=!o&&Wi(t),d=!o&&!u&&Ai(t),b=!o&&!u&&!d&&xn(t),I=o||u||d||b,P=I?Ia(t.length,ag):[],B=P.length;for(var re in t)(i||nt.call(t,re))&&!(I&&(re=="length"||d&&(re=="offset"||re=="parent")||b&&(re=="buffer"||re=="byteLength"||re=="byteOffset")||fi(re,B)))&&P.push(re);return P}function Xu(t){var i=t.length;return i?t[za(0,i-1)]:r}function Zg(t,i){return _o(dr(t),Ki(i,0,t.length))}function Qg(t){return _o(dr(t))}function Na(t,i,o){(o!==r&&!Kr(t[i],o)||o===r&&!(i in t))&&ci(t,i,o)}function kn(t,i,o){var u=t[i];(!(nt.call(t,i)&&Kr(u,o))||o===r&&!(i in t))&&ci(t,i,o)}function no(t,i){for(var o=t.length;o--;)if(Kr(t[o][0],i))return o;return-1}function e0(t,i,o,u){return Ii(t,function(d,b,I){i(u,d,o(d),I)}),u}function Zu(t,i){return t&&Xr(i,Vt(i),t)}function t0(t,i){return t&&Xr(i,gr(i),t)}function ci(t,i,o){i=="__proto__"&&Zs?Zs(t,i,{configurable:!0,enumerable:!0,value:o,writable:!0}):t[i]=o}function Ra(t,i){for(var o=-1,u=i.length,d=J(u),b=t==null;++o<u;)d[o]=b?r:dc(t,i[o]);return d}function Ki(t,i,o){return t===t&&(o!==r&&(t=t<=o?t:o),i!==r&&(t=t>=i?t:i)),t}function Nr(t,i,o,u,d,b){var I,P=i&R,B=i&V,re=i&F;if(o&&(I=d?o(t,u,d,b):o(t)),I!==r)return I;if(!wt(t))return t;var ie=Ne(t);if(ie){if(I=H0(t),!P)return dr(t,I)}else{var oe=Zt(t),fe=oe==ue||oe==de;if(Ai(t))return Eh(t,P);if(oe==Me||oe==he||fe&&!d){if(I=B||fe?{}:qh(t),!P)return B?N0(t,t0(I,t)):T0(t,Zu(I,t))}else{if(!st[oe])return d?t:{};I=K0(t,oe,P)}}b||(b=new Hr);var ye=b.get(t);if(ye)return ye;b.set(t,I),yf(t)?t.forEach(function(De){I.add(Nr(De,i,o,De,t,b))}):gf(t)&&t.forEach(function(De,Ge){I.set(Ge,Nr(De,i,o,Ge,t,b))});var Ee=re?B?Qa:Za:B?gr:Vt,qe=ie?r:Ee(t);return Ar(qe||t,function(De,Ge){qe&&(Ge=De,De=t[Ge]),kn(I,Ge,Nr(De,i,o,Ge,t,b))}),I}function r0(t){var i=Vt(t);return function(o){return Qu(o,t,i)}}function Qu(t,i,o){var u=o.length;if(t==null)return!u;for(t=ht(t);u--;){var d=o[u],b=i[d],I=t[d];if(I===r&&!(d in t)||!b(I))return!1}return!0}function eh(t,i,o){if(typeof t!="function")throw new Pr(p);return Qn(function(){t.apply(r,o)},i)}function Gn(t,i,o,u){var d=-1,b=qs,I=!0,P=t.length,B=[],re=i.length;if(!P)return B;o&&(i=bt(i,mr(o))),u?(b=ba,I=!1):i.length>=a&&(b=Bn,I=!1,i=new Hi(i));e:for(;++d<P;){var ie=t[d],oe=o==null?ie:o(ie);if(ie=u||ie!==0?ie:0,I&&oe===oe){for(var fe=re;fe--;)if(i[fe]===oe)continue e;B.push(ie)}else b(i,oe,u)||B.push(ie)}return B}var Ii=Oh(Jr),th=Oh(Fa,!0);function i0(t,i){var o=!0;return Ii(t,function(u,d,b){return o=!!i(u,d,b),o}),o}function so(t,i,o){for(var u=-1,d=t.length;++u<d;){var b=t[u],I=i(b);if(I!=null&&(P===r?I===I&&!Er(I):o(I,P)))var P=I,B=b}return B}function n0(t,i,o,u){var d=t.length;for(o=$e(o),o<0&&(o=-o>d?0:d+o),u=u===r||u>d?d:$e(u),u<0&&(u+=d),u=o>u?0:bf(u);o<u;)t[o++]=i;return t}function rh(t,i){var o=[];return Ii(t,function(u,d,b){i(u,d,b)&&o.push(u)}),o}function Wt(t,i,o,u,d){var b=-1,I=t.length;for(o||(o=k0),d||(d=[]);++b<I;){var P=t[b];i>0&&o(P)?i>1?Wt(P,i-1,o,u,d):Ei(d,P):u||(d[d.length]=P)}return d}var La=Ch(),ih=Ch(!0);function Jr(t,i){return t&&La(t,i,Vt)}function Fa(t,i){return t&&ih(t,i,Vt)}function oo(t,i){return wi(i,function(o){return li(t[o])})}function Vi(t,i){i=Oi(i,t);for(var o=0,u=i.length;t!=null&&o<u;)t=t[Zr(i[o++])];return o&&o==u?t:r}function nh(t,i,o){var u=i(t);return Ne(t)?u:Ei(u,o(t))}function nr(t){return t==null?t===r?Be:Ve:qi&&qi in ht(t)?B0(t):Q0(t)}function Ua(t,i){return t>i}function s0(t,i){return t!=null&&nt.call(t,i)}function o0(t,i){return t!=null&&i in ht(t)}function a0(t,i,o){return t>=Xt(i,o)&&t<Ht(i,o)}function Ma(t,i,o){for(var u=o?ba:qs,d=t[0].length,b=t.length,I=b,P=J(b),B=1/0,re=[];I--;){var ie=t[I];I&&i&&(ie=bt(ie,mr(i))),B=Xt(ie.length,B),P[I]=!o&&(i||d>=120&&ie.length>=120)?new Hi(I&&ie):r}ie=t[0];var oe=-1,fe=P[0];e:for(;++oe<d&&re.length<B;){var ye=ie[oe],Ee=i?i(ye):ye;if(ye=o||ye!==0?ye:0,!(fe?Bn(fe,Ee):u(re,Ee,o))){for(I=b;--I;){var qe=P[I];if(!(qe?Bn(qe,Ee):u(t[I],Ee,o)))continue e}fe&&fe.push(Ee),re.push(ye)}}return re}function c0(t,i,o,u){return Jr(t,function(d,b,I){i(u,o(d),b,I)}),u}function Wn(t,i,o){i=Oi(i,t),t=Vh(t,i);var u=t==null?t:t[Zr(Lr(i))];return u==null?r:Kt(u,t,o)}function sh(t){return Ct(t)&&nr(t)==he}function u0(t){return Ct(t)&&nr(t)==Se}function h0(t){return Ct(t)&&nr(t)==L}function Yn(t,i,o,u,d){return t===i?!0:t==null||i==null||!Ct(t)&&!Ct(i)?t!==t&&i!==i:f0(t,i,o,u,Yn,d)}function f0(t,i,o,u,d,b){var I=Ne(t),P=Ne(i),B=I?be:Zt(t),re=P?be:Zt(i);B=B==he?Me:B,re=re==he?Me:re;var ie=B==Me,oe=re==Me,fe=B==re;if(fe&&Ai(t)){if(!Ai(i))return!1;I=!0,ie=!1}if(fe&&!ie)return b||(b=new Hr),I||xn(t)?$h(t,i,o,u,d,b):$0(t,i,B,o,u,d,b);if(!(o&T)){var ye=ie&&nt.call(t,"__wrapped__"),Ee=oe&&nt.call(i,"__wrapped__");if(ye||Ee){var qe=ye?t.value():t,De=Ee?i.value():i;return b||(b=new Hr),d(qe,De,o,u,b)}}return fe?(b||(b=new Hr),j0(t,i,o,u,d,b)):!1}function l0(t){return Ct(t)&&Zt(t)==Ie}function $a(t,i,o,u){var d=o.length,b=d,I=!u;if(t==null)return!b;for(t=ht(t);d--;){var P=o[d];if(I&&P[2]?P[1]!==t[P[0]]:!(P[0]in t))return!1}for(;++d<b;){P=o[d];var B=P[0],re=t[B],ie=P[1];if(I&&P[2]){if(re===r&&!(B in t))return!1}else{var oe=new Hr;if(u)var fe=u(re,ie,B,t,i,oe);if(!(fe===r?Yn(ie,re,T|k,u,oe):fe))return!1}}return!0}function oh(t){if(!wt(t)||W0(t))return!1;var i=li(t)?lg:ia;return i.test(Gi(t))}function d0(t){return Ct(t)&&nr(t)==je}function p0(t){return Ct(t)&&Zt(t)==xe}function g0(t){return Ct(t)&&So(t.length)&&!!at[nr(t)]}function ah(t){return typeof t=="function"?t:t==null?vr:typeof t=="object"?Ne(t)?hh(t[0],t[1]):uh(t):Pf(t)}function ja(t){if(!Zn(t))return _g(t);var i=[];for(var o in ht(t))nt.call(t,o)&&o!="constructor"&&i.push(o);return i}function v0(t){if(!wt(t))return Z0(t);var i=Zn(t),o=[];for(var u in t)u=="constructor"&&(i||!nt.call(t,u))||o.push(u);return o}function Ba(t,i){return t<i}function ch(t,i){var o=-1,u=pr(t)?J(t.length):[];return Ii(t,function(d,b,I){u[++o]=i(d,b,I)}),u}function uh(t){var i=tc(t);return i.length==1&&i[0][2]?Hh(i[0][0],i[0][1]):function(o){return o===t||$a(o,t,i)}}function hh(t,i){return ic(t)&&zh(i)?Hh(Zr(t),i):function(o){var u=dc(o,t);return u===r&&u===i?pc(o,t):Yn(i,u,T|k)}}function ao(t,i,o,u,d){t!==i&&La(i,function(b,I){if(d||(d=new Hr),wt(b))y0(t,i,I,o,ao,u,d);else{var P=u?u(sc(t,I),b,I+"",t,i,d):r;P===r&&(P=b),Na(t,I,P)}},gr)}function y0(t,i,o,u,d,b,I){var P=sc(t,o),B=sc(i,o),re=I.get(B);if(re){Na(t,o,re);return}var ie=b?b(P,B,o+"",t,i,I):r,oe=ie===r;if(oe){var fe=Ne(B),ye=!fe&&Ai(B),Ee=!fe&&!ye&&xn(B);ie=B,fe||ye||Ee?Ne(P)?ie=P:Tt(P)?ie=dr(P):ye?(oe=!1,ie=Eh(B,!0)):Ee?(oe=!1,ie=Dh(B,!0)):ie=[]:es(B)||Wi(B)?(ie=P,Wi(P)?ie=mf(P):(!wt(P)||li(P))&&(ie=qh(B))):oe=!1}oe&&(I.set(B,ie),d(ie,B,u,b,I),I.delete(B)),Na(t,o,ie)}function fh(t,i){var o=t.length;if(o)return i+=i<0?o:0,fi(i,o)?t[i]:r}function lh(t,i,o){i.length?i=bt(i,function(b){return Ne(b)?function(I){return Vi(I,b.length===1?b[0]:b)}:b}):i=[vr];var u=-1;i=bt(i,mr(we()));var d=ch(t,function(b,I,P){var B=bt(i,function(re){return re(b)});return{criteria:B,index:++u,value:b}});return Kp(d,function(b,I){return P0(b,I,o)})}function _0(t,i){return dh(t,i,function(o,u){return pc(t,u)})}function dh(t,i,o){for(var u=-1,d=i.length,b={};++u<d;){var I=i[u],P=Vi(t,I);o(P,I)&&Jn(b,Oi(I,t),P)}return b}function b0(t){return function(i){return Vi(i,t)}}function qa(t,i,o,u){var d=u?Hp:gn,b=-1,I=i.length,P=t;for(t===i&&(i=dr(i)),o&&(P=bt(t,mr(o)));++b<I;)for(var B=0,re=i[b],ie=o?o(re):re;(B=d(P,ie,B,u))>-1;)P!==t&&Xs.call(P,B,1),Xs.call(t,B,1);return t}function ph(t,i){for(var o=t?i.length:0,u=o-1;o--;){var d=i[o];if(o==u||d!==b){var b=d;fi(d)?Xs.call(t,d,1):Va(t,d)}}return t}function za(t,i){return t+eo(Wu()*(i-t+1))}function m0(t,i,o,u){for(var d=-1,b=Ht(Qs((i-t)/(o||1)),0),I=J(b);b--;)I[u?b:++d]=t,t+=o;return I}function Ha(t,i){var o="";if(!t||i<1||i>W)return o;do i%2&&(o+=t),i=eo(i/2),i&&(t+=t);while(i);return o}function Ke(t,i){return oc(Kh(t,i,vr),t+"")}function w0(t){return Xu(On(t))}function E0(t,i){var o=On(t);return _o(o,Ki(i,0,o.length))}function Jn(t,i,o,u){if(!wt(t))return t;i=Oi(i,t);for(var d=-1,b=i.length,I=b-1,P=t;P!=null&&++d<b;){var B=Zr(i[d]),re=o;if(B==="__proto__"||B==="constructor"||B==="prototype")return t;if(d!=I){var ie=P[B];re=u?u(ie,B,P):r,re===r&&(re=wt(ie)?ie:fi(i[d+1])?[]:{})}kn(P,B,re),P=P[B]}return t}var gh=to?function(t,i){return to.set(t,i),t}:vr,D0=Zs?function(t,i){return Zs(t,"toString",{configurable:!0,enumerable:!1,value:vc(i),writable:!0})}:vr;function S0(t){return _o(On(t))}function Rr(t,i,o){var u=-1,d=t.length;i<0&&(i=-i>d?0:d+i),o=o>d?d:o,o<0&&(o+=d),d=i>o?0:o-i>>>0,i>>>=0;for(var b=J(d);++u<d;)b[u]=t[u+i];return b}function I0(t,i){var o;return Ii(t,function(u,d,b){return o=i(u,d,b),!o}),!!o}function co(t,i,o){var u=0,d=t==null?u:t.length;if(typeof i=="number"&&i===i&&d<=ce){for(;u<d;){var b=u+d>>>1,I=t[b];I!==null&&!Er(I)&&(o?I<=i:I<i)?u=b+1:d=b}return d}return Ka(t,i,vr,o)}function Ka(t,i,o,u){var d=0,b=t==null?0:t.length;if(b===0)return 0;i=o(i);for(var I=i!==i,P=i===null,B=Er(i),re=i===r;d<b;){var ie=eo((d+b)/2),oe=o(t[ie]),fe=oe!==r,ye=oe===null,Ee=oe===oe,qe=Er(oe);if(I)var De=u||Ee;else re?De=Ee&&(u||fe):P?De=Ee&&fe&&(u||!ye):B?De=Ee&&fe&&!ye&&(u||!qe):ye||qe?De=!1:De=u?oe<=i:oe<i;De?d=ie+1:b=ie}return Xt(b,ge)}function vh(t,i){for(var o=-1,u=t.length,d=0,b=[];++o<u;){var I=t[o],P=i?i(I):I;if(!o||!Kr(P,B)){var B=P;b[d++]=I===0?0:I}}return b}function yh(t){return typeof t=="number"?t:Er(t)?Z:+t}function wr(t){if(typeof t=="string")return t;if(Ne(t))return bt(t,wr)+"";if(Er(t))return Yu?Yu.call(t):"";var i=t+"";return i=="0"&&1/t==-X?"-0":i}function xi(t,i,o){var u=-1,d=qs,b=t.length,I=!0,P=[],B=P;if(o)I=!1,d=ba;else if(b>=a){var re=i?null:U0(t);if(re)return Hs(re);I=!1,d=Bn,B=new Hi}else B=i?[]:P;e:for(;++u<b;){var ie=t[u],oe=i?i(ie):ie;if(ie=o||ie!==0?ie:0,I&&oe===oe){for(var fe=B.length;fe--;)if(B[fe]===oe)continue e;i&&B.push(oe),P.push(ie)}else d(B,oe,o)||(B!==P&&B.push(oe),P.push(ie))}return P}function Va(t,i){return i=Oi(i,t),t=Vh(t,i),t==null||delete t[Zr(Lr(i))]}function _h(t,i,o,u){return Jn(t,i,o(Vi(t,i)),u)}function uo(t,i,o,u){for(var d=t.length,b=u?d:-1;(u?b--:++b<d)&&i(t[b],b,t););return o?Rr(t,u?0:b,u?b+1:d):Rr(t,u?b+1:0,u?d:b)}function bh(t,i){var o=t;return o instanceof Ye&&(o=o.value()),ma(i,function(u,d){return d.func.apply(d.thisArg,Ei([u],d.args))},o)}function ka(t,i,o){var u=t.length;if(u<2)return u?xi(t[0]):[];for(var d=-1,b=J(u);++d<u;)for(var I=t[d],P=-1;++P<u;)P!=d&&(b[d]=Gn(b[d]||I,t[P],i,o));return xi(Wt(b,1),i,o)}function mh(t,i,o){for(var u=-1,d=t.length,b=i.length,I={};++u<d;){var P=u<b?i[u]:r;o(I,t[u],P)}return I}function Ga(t){return Tt(t)?t:[]}function Wa(t){return typeof t=="function"?t:vr}function Oi(t,i){return Ne(t)?t:ic(t,i)?[t]:Yh(it(t))}var x0=Ke;function Ci(t,i,o){var u=t.length;return o=o===r?u:o,!i&&o>=u?t:Rr(t,i,o)}var wh=dg||function(t){return Xe.clearTimeout(t)};function Eh(t,i){if(i)return t.slice();var o=t.length,u=Hu?Hu(o):new t.constructor(o);return t.copy(u),u}function Ya(t){var i=new t.constructor(t.byteLength);return new Ys(i).set(new Ys(t)),i}function O0(t,i){var o=i?Ya(t.buffer):t.buffer;return new t.constructor(o,t.byteOffset,t.byteLength)}function C0(t){var i=new t.constructor(t.source,Or.exec(t));return i.lastIndex=t.lastIndex,i}function A0(t){return Vn?ht(Vn.call(t)):{}}function Dh(t,i){var o=i?Ya(t.buffer):t.buffer;return new t.constructor(o,t.byteOffset,t.length)}function Sh(t,i){if(t!==i){var o=t!==r,u=t===null,d=t===t,b=Er(t),I=i!==r,P=i===null,B=i===i,re=Er(i);if(!P&&!re&&!b&&t>i||b&&I&&B&&!P&&!re||u&&I&&B||!o&&B||!d)return 1;if(!u&&!b&&!re&&t<i||re&&o&&d&&!u&&!b||P&&o&&d||!I&&d||!B)return-1}return 0}function P0(t,i,o){for(var u=-1,d=t.criteria,b=i.criteria,I=d.length,P=o.length;++u<I;){var B=Sh(d[u],b[u]);if(B){if(u>=P)return B;var re=o[u];return B*(re=="desc"?-1:1)}}return t.index-i.index}function Ih(t,i,o,u){for(var d=-1,b=t.length,I=o.length,P=-1,B=i.length,re=Ht(b-I,0),ie=J(B+re),oe=!u;++P<B;)ie[P]=i[P];for(;++d<I;)(oe||d<b)&&(ie[o[d]]=t[d]);for(;re--;)ie[P++]=t[d++];return ie}function xh(t,i,o,u){for(var d=-1,b=t.length,I=-1,P=o.length,B=-1,re=i.length,ie=Ht(b-P,0),oe=J(ie+re),fe=!u;++d<ie;)oe[d]=t[d];for(var ye=d;++B<re;)oe[ye+B]=i[B];for(;++I<P;)(fe||d<b)&&(oe[ye+o[I]]=t[d++]);return oe}function dr(t,i){var o=-1,u=t.length;for(i||(i=J(u));++o<u;)i[o]=t[o];return i}function Xr(t,i,o,u){var d=!o;o||(o={});for(var b=-1,I=i.length;++b<I;){var P=i[b],B=u?u(o[P],t[P],P,o,t):r;B===r&&(B=t[P]),d?ci(o,P,B):kn(o,P,B)}return o}function T0(t,i){return Xr(t,rc(t),i)}function N0(t,i){return Xr(t,jh(t),i)}function ho(t,i){return function(o,u){var d=Ne(o)?Mp:e0,b=i?i():{};return d(o,t,we(u,2),b)}}function Dn(t){return Ke(function(i,o){var u=-1,d=o.length,b=d>1?o[d-1]:r,I=d>2?o[2]:r;for(b=t.length>3&&typeof b=="function"?(d--,b):r,I&&sr(o[0],o[1],I)&&(b=d<3?r:b,d=1),i=ht(i);++u<d;){var P=o[u];P&&t(i,P,u,b)}return i})}function Oh(t,i){return function(o,u){if(o==null)return o;if(!pr(o))return t(o,u);for(var d=o.length,b=i?d:-1,I=ht(o);(i?b--:++b<d)&&u(I[b],b,I)!==!1;);return o}}function Ch(t){return function(i,o,u){for(var d=-1,b=ht(i),I=u(i),P=I.length;P--;){var B=I[t?P:++d];if(o(b[B],B,b)===!1)break}return i}}function R0(t,i,o){var u=i&Y,d=Xn(t);function b(){var I=this&&this!==Xe&&this instanceof b?d:t;return I.apply(u?o:this,arguments)}return b}function Ah(t){return function(i){i=it(i);var o=vn(i)?zr(i):r,u=o?o[0]:i.charAt(0),d=o?Ci(o,1).join(""):i.slice(1);return u[t]()+d}}function Sn(t){return function(i){return ma(Cf(Of(i).replace($n,"")),t,"")}}function Xn(t){return function(){var i=arguments;switch(i.length){case 0:return new t;case 1:return new t(i[0]);case 2:return new t(i[0],i[1]);case 3:return new t(i[0],i[1],i[2]);case 4:return new t(i[0],i[1],i[2],i[3]);case 5:return new t(i[0],i[1],i[2],i[3],i[4]);case 6:return new t(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new t(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var o=En(t.prototype),u=t.apply(o,i);return wt(u)?u:o}}function L0(t,i,o){var u=Xn(t);function d(){for(var b=arguments.length,I=J(b),P=b,B=In(d);P--;)I[P]=arguments[P];var re=b<3&&I[0]!==B&&I[b-1]!==B?[]:Di(I,B);if(b-=re.length,b<o)return Lh(t,i,fo,d.placeholder,r,I,re,r,r,o-b);var ie=this&&this!==Xe&&this instanceof d?u:t;return Kt(ie,this,I)}return d}function Ph(t){return function(i,o,u){var d=ht(i);if(!pr(i)){var b=we(o,3);i=Vt(i),o=function(P){return b(d[P],P,d)}}var I=t(i,o,u);return I>-1?d[b?i[I]:I]:r}}function Th(t){return hi(function(i){var o=i.length,u=o,d=Tr.prototype.thru;for(t&&i.reverse();u--;){var b=i[u];if(typeof b!="function")throw new Pr(p);if(d&&!I&&vo(b)=="wrapper")var I=new Tr([],!0)}for(u=I?u:o;++u<o;){b=i[u];var P=vo(b),B=P=="wrapper"?ec(b):r;B&&nc(B[0])&&B[1]==(c|U|O|y)&&!B[4].length&&B[9]==1?I=I[vo(B[0])].apply(I,B[3]):I=b.length==1&&nc(b)?I[P]():I.thru(b)}return function(){var re=arguments,ie=re[0];if(I&&re.length==1&&Ne(ie))return I.plant(ie).value();for(var oe=0,fe=o?i[oe].apply(this,re):ie;++oe<o;)fe=i[oe].call(this,fe);return fe}})}function fo(t,i,o,u,d,b,I,P,B,re){var ie=i&c,oe=i&Y,fe=i&ae,ye=i&(U|S),Ee=i&Q,qe=fe?r:Xn(t);function De(){for(var Ge=arguments.length,Ze=J(Ge),Dr=Ge;Dr--;)Ze[Dr]=arguments[Dr];if(ye)var or=In(De),Sr=kp(Ze,or);if(u&&(Ze=Ih(Ze,u,d,ye)),b&&(Ze=xh(Ze,b,I,ye)),Ge-=Sr,ye&&Ge<re){var Nt=Di(Ze,or);return Lh(t,i,fo,De.placeholder,o,Ze,Nt,P,B,re-Ge)}var Vr=oe?o:this,pi=fe?Vr[t]:t;return Ge=Ze.length,P?Ze=e1(Ze,P):Ee&&Ge>1&&Ze.reverse(),ie&&B<Ge&&(Ze.length=B),this&&this!==Xe&&this instanceof De&&(pi=qe||Xn(pi)),pi.apply(Vr,Ze)}return De}function Nh(t,i){return function(o,u){return c0(o,t,i(u),{})}}function lo(t,i){return function(o,u){var d;if(o===r&&u===r)return i;if(o!==r&&(d=o),u!==r){if(d===r)return u;typeof o=="string"||typeof u=="string"?(o=wr(o),u=wr(u)):(o=yh(o),u=yh(u)),d=t(o,u)}return d}}function Ja(t){return hi(function(i){return i=bt(i,mr(we())),Ke(function(o){var u=this;return t(i,function(d){return Kt(d,u,o)})})})}function po(t,i){i=i===r?" ":wr(i);var o=i.length;if(o<2)return o?Ha(i,t):i;var u=Ha(i,Qs(t/yn(i)));return vn(i)?Ci(zr(u),0,t).join(""):u.slice(0,t)}function F0(t,i,o,u){var d=i&Y,b=Xn(t);function I(){for(var P=-1,B=arguments.length,re=-1,ie=u.length,oe=J(ie+B),fe=this&&this!==Xe&&this instanceof I?b:t;++re<ie;)oe[re]=u[re];for(;B--;)oe[re++]=arguments[++P];return Kt(fe,d?o:this,oe)}return I}function Rh(t){return function(i,o,u){return u&&typeof u!="number"&&sr(i,o,u)&&(o=u=r),i=di(i),o===r?(o=i,i=0):o=di(o),u=u===r?i<o?1:-1:di(u),m0(i,o,u,t)}}function go(t){return function(i,o){return typeof i=="string"&&typeof o=="string"||(i=Fr(i),o=Fr(o)),t(i,o)}}function Lh(t,i,o,u,d,b,I,P,B,re){var ie=i&U,oe=ie?I:r,fe=ie?r:I,ye=ie?b:r,Ee=ie?r:b;i|=ie?O:m,i&=~(ie?m:O),i&N||(i&=~(Y|ae));var qe=[t,i,d,ye,oe,Ee,fe,P,B,re],De=o.apply(r,qe);return nc(t)&&kh(De,qe),De.placeholder=u,Gh(De,t,i)}function Xa(t){var i=zt[t];return function(o,u){if(o=Fr(o),u=u==null?0:Xt($e(u),292),u&&Gu(o)){var d=(it(o)+"e").split("e"),b=i(d[0]+"e"+(+d[1]+u));return d=(it(b)+"e").split("e"),+(d[0]+"e"+(+d[1]-u))}return i(o)}}var U0=mn&&1/Hs(new mn([,-0]))[1]==X?function(t){return new mn(t)}:bc;function Fh(t){return function(i){var o=Zt(i);return o==Ie?Oa(i):o==xe?Qp(i):Vp(i,t(i))}}function ui(t,i,o,u,d,b,I,P){var B=i&ae;if(!B&&typeof t!="function")throw new Pr(p);var re=u?u.length:0;if(re||(i&=~(O|m),u=d=r),I=I===r?I:Ht($e(I),0),P=P===r?P:$e(P),re-=d?d.length:0,i&m){var ie=u,oe=d;u=d=r}var fe=B?r:ec(t),ye=[t,i,o,u,d,ie,oe,b,I,P];if(fe&&X0(ye,fe),t=ye[0],i=ye[1],o=ye[2],u=ye[3],d=ye[4],P=ye[9]=ye[9]===r?B?0:t.length:Ht(ye[9]-re,0),!P&&i&(U|S)&&(i&=~(U|S)),!i||i==Y)var Ee=R0(t,i,o);else i==U||i==S?Ee=L0(t,i,P):(i==O||i==(Y|O))&&!d.length?Ee=F0(t,i,o,u):Ee=fo.apply(r,ye);var qe=fe?gh:kh;return Gh(qe(Ee,ye),t,i)}function Uh(t,i,o,u){return t===r||Kr(t,bn[o])&&!nt.call(u,o)?i:t}function Mh(t,i,o,u,d,b){return wt(t)&&wt(i)&&(b.set(i,t),ao(t,i,r,Mh,b),b.delete(i)),t}function M0(t){return es(t)?r:t}function $h(t,i,o,u,d,b){var I=o&T,P=t.length,B=i.length;if(P!=B&&!(I&&B>P))return!1;var re=b.get(t),ie=b.get(i);if(re&&ie)return re==i&&ie==t;var oe=-1,fe=!0,ye=o&k?new Hi:r;for(b.set(t,i),b.set(i,t);++oe<P;){var Ee=t[oe],qe=i[oe];if(u)var De=I?u(qe,Ee,oe,i,t,b):u(Ee,qe,oe,t,i,b);if(De!==r){if(De)continue;fe=!1;break}if(ye){if(!wa(i,function(Ge,Ze){if(!Bn(ye,Ze)&&(Ee===Ge||d(Ee,Ge,o,u,b)))return ye.push(Ze)})){fe=!1;break}}else if(!(Ee===qe||d(Ee,qe,o,u,b))){fe=!1;break}}return b.delete(t),b.delete(i),fe}function $0(t,i,o,u,d,b,I){switch(o){case Ae:if(t.byteLength!=i.byteLength||t.byteOffset!=i.byteOffset)return!1;t=t.buffer,i=i.buffer;case Se:return!(t.byteLength!=i.byteLength||!b(new Ys(t),new Ys(i)));case z:case L:case ze:return Kr(+t,+i);case A:return t.name==i.name&&t.message==i.message;case je:case Re:return t==i+"";case Ie:var P=Oa;case xe:var B=u&T;if(P||(P=Hs),t.size!=i.size&&!B)return!1;var re=I.get(t);if(re)return re==i;u|=k,I.set(t,i);var ie=$h(P(t),P(i),u,d,b,I);return I.delete(t),ie;case Le:if(Vn)return Vn.call(t)==Vn.call(i)}return!1}function j0(t,i,o,u,d,b){var I=o&T,P=Za(t),B=P.length,re=Za(i),ie=re.length;if(B!=ie&&!I)return!1;for(var oe=B;oe--;){var fe=P[oe];if(!(I?fe in i:nt.call(i,fe)))return!1}var ye=b.get(t),Ee=b.get(i);if(ye&&Ee)return ye==i&&Ee==t;var qe=!0;b.set(t,i),b.set(i,t);for(var De=I;++oe<B;){fe=P[oe];var Ge=t[fe],Ze=i[fe];if(u)var Dr=I?u(Ze,Ge,fe,i,t,b):u(Ge,Ze,fe,t,i,b);if(!(Dr===r?Ge===Ze||d(Ge,Ze,o,u,b):Dr)){qe=!1;break}De||(De=fe=="constructor")}if(qe&&!De){var or=t.constructor,Sr=i.constructor;or!=Sr&&"constructor"in t&&"constructor"in i&&!(typeof or=="function"&&or instanceof or&&typeof Sr=="function"&&Sr instanceof Sr)&&(qe=!1)}return b.delete(t),b.delete(i),qe}function hi(t){return oc(Kh(t,r,Qh),t+"")}function Za(t){return nh(t,Vt,rc)}function Qa(t){return nh(t,gr,jh)}var ec=to?function(t){return to.get(t)}:bc;function vo(t){for(var i=t.name+"",o=wn[i],u=nt.call(wn,i)?o.length:0;u--;){var d=o[u],b=d.func;if(b==null||b==t)return d.name}return i}function In(t){var i=nt.call(_,"placeholder")?_:t;return i.placeholder}function we(){var t=_.iteratee||yc;return t=t===yc?ah:t,arguments.length?t(arguments[0],arguments[1]):t}function yo(t,i){var o=t.__data__;return G0(i)?o[typeof i=="string"?"string":"hash"]:o.map}function tc(t){for(var i=Vt(t),o=i.length;o--;){var u=i[o],d=t[u];i[o]=[u,d,zh(d)]}return i}function ki(t,i){var o=Jp(t,i);return oh(o)?o:r}function B0(t){var i=nt.call(t,qi),o=t[qi];try{t[qi]=r;var u=!0}catch{}var d=Gs.call(t);return u&&(i?t[qi]=o:delete t[qi]),d}var rc=Aa?function(t){return t==null?[]:(t=ht(t),wi(Aa(t),function(i){return Vu.call(t,i)}))}:mc,jh=Aa?function(t){for(var i=[];t;)Ei(i,rc(t)),t=Js(t);return i}:mc,Zt=nr;(Pa&&Zt(new Pa(new ArrayBuffer(1)))!=Ae||zn&&Zt(new zn)!=Ie||Ta&&Zt(Ta.resolve())!=gt||mn&&Zt(new mn)!=xe||Hn&&Zt(new Hn)!=Ce)&&(Zt=function(t){var i=nr(t),o=i==Me?t.constructor:r,u=o?Gi(o):"";if(u)switch(u){case Eg:return Ae;case Dg:return Ie;case Sg:return gt;case Ig:return xe;case xg:return Ce}return i});function q0(t,i,o){for(var u=-1,d=o.length;++u<d;){var b=o[u],I=b.size;switch(b.type){case"drop":t+=I;break;case"dropRight":i-=I;break;case"take":i=Xt(i,t+I);break;case"takeRight":t=Ht(t,i-I);break}}return{start:t,end:i}}function z0(t){var i=t.match(ft);return i?i[1].split(Mt):[]}function Bh(t,i,o){i=Oi(i,t);for(var u=-1,d=i.length,b=!1;++u<d;){var I=Zr(i[u]);if(!(b=t!=null&&o(t,I)))break;t=t[I]}return b||++u!=d?b:(d=t==null?0:t.length,!!d&&So(d)&&fi(I,d)&&(Ne(t)||Wi(t)))}function H0(t){var i=t.length,o=new t.constructor(i);return i&&typeof t[0]=="string"&&nt.call(t,"index")&&(o.index=t.index,o.input=t.input),o}function qh(t){return typeof t.constructor=="function"&&!Zn(t)?En(Js(t)):{}}function K0(t,i,o){var u=t.constructor;switch(i){case Se:return Ya(t);case z:case L:return new u(+t);case Ae:return O0(t,o);case He:case Oe:case ke:case We:case et:case tt:case Je:case tr:case fr:return Dh(t,o);case Ie:return new u;case ze:case Re:return new u(t);case je:return C0(t);case xe:return new u;case Le:return A0(t)}}function V0(t,i){var o=i.length;if(!o)return t;var u=o-1;return i[u]=(o>1?"& ":"")+i[u],i=i.join(o>2?", ":" "),t.replace(Ot,`{
/* [wrapped with `+i+`] */
`)}function k0(t){return Ne(t)||Wi(t)||!!(ku&&t&&t[ku])}function fi(t,i){var o=typeof t;return i=i??W,!!i&&(o=="number"||o!="symbol"&&sa.test(t))&&t>-1&&t%1==0&&t<i}function sr(t,i,o){if(!wt(o))return!1;var u=typeof i;return(u=="number"?pr(o)&&fi(i,o.length):u=="string"&&i in o)?Kr(o[i],t):!1}function ic(t,i){if(Ne(t))return!1;var o=typeof t;return o=="number"||o=="symbol"||o=="boolean"||t==null||Er(t)?!0:Lt.test(t)||!_t.test(t)||i!=null&&t in ht(i)}function G0(t){var i=typeof t;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?t!=="__proto__":t===null}function nc(t){var i=vo(t),o=_[i];if(typeof o!="function"||!(i in Ye.prototype))return!1;if(t===o)return!0;var u=ec(o);return!!u&&t===u[0]}function W0(t){return!!zu&&zu in t}var Y0=Vs?li:wc;function Zn(t){var i=t&&t.constructor,o=typeof i=="function"&&i.prototype||bn;return t===o}function zh(t){return t===t&&!wt(t)}function Hh(t,i){return function(o){return o==null?!1:o[t]===i&&(i!==r||t in ht(o))}}function J0(t){var i=Eo(t,function(u){return o.size===D&&o.clear(),u}),o=i.cache;return i}function X0(t,i){var o=t[1],u=i[1],d=o|u,b=d<(Y|ae|c),I=u==c&&o==U||u==c&&o==y&&t[7].length<=i[8]||u==(c|y)&&i[7].length<=i[8]&&o==U;if(!(b||I))return t;u&Y&&(t[2]=i[2],d|=o&Y?0:N);var P=i[3];if(P){var B=t[3];t[3]=B?Ih(B,P,i[4]):P,t[4]=B?Di(t[3],x):i[4]}return P=i[5],P&&(B=t[5],t[5]=B?xh(B,P,i[6]):P,t[6]=B?Di(t[5],x):i[6]),P=i[7],P&&(t[7]=P),u&c&&(t[8]=t[8]==null?i[8]:Xt(t[8],i[8])),t[9]==null&&(t[9]=i[9]),t[0]=i[0],t[1]=d,t}function Z0(t){var i=[];if(t!=null)for(var o in ht(t))i.push(o);return i}function Q0(t){return Gs.call(t)}function Kh(t,i,o){return i=Ht(i===r?t.length-1:i,0),function(){for(var u=arguments,d=-1,b=Ht(u.length-i,0),I=J(b);++d<b;)I[d]=u[i+d];d=-1;for(var P=J(i+1);++d<i;)P[d]=u[d];return P[i]=o(I),Kt(t,this,P)}}function Vh(t,i){return i.length<2?t:Vi(t,Rr(i,0,-1))}function e1(t,i){for(var o=t.length,u=Xt(i.length,o),d=dr(t);u--;){var b=i[u];t[u]=fi(b,o)?d[b]:r}return t}function sc(t,i){if(!(i==="constructor"&&typeof t[i]=="function")&&i!="__proto__")return t[i]}var kh=Wh(gh),Qn=gg||function(t,i){return Xe.setTimeout(t,i)},oc=Wh(D0);function Gh(t,i,o){var u=i+"";return oc(t,V0(u,t1(z0(u),o)))}function Wh(t){var i=0,o=0;return function(){var u=bg(),d=ee-(u-o);if(o=u,d>0){if(++i>=H)return arguments[0]}else i=0;return t.apply(r,arguments)}}function _o(t,i){var o=-1,u=t.length,d=u-1;for(i=i===r?u:i;++o<i;){var b=za(o,d),I=t[b];t[b]=t[o],t[o]=I}return t.length=i,t}var Yh=J0(function(t){var i=[];return t.charCodeAt(0)===46&&i.push(""),t.replace(Ft,function(o,u,d,b){i.push(d?b.replace(Qo,"$1"):u||o)}),i});function Zr(t){if(typeof t=="string"||Er(t))return t;var i=t+"";return i=="0"&&1/t==-X?"-0":i}function Gi(t){if(t!=null){try{return ks.call(t)}catch{}try{return t+""}catch{}}return""}function t1(t,i){return Ar(_e,function(o){var u="_."+o[0];i&o[1]&&!qs(t,u)&&t.push(u)}),t.sort()}function Jh(t){if(t instanceof Ye)return t.clone();var i=new Tr(t.__wrapped__,t.__chain__);return i.__actions__=dr(t.__actions__),i.__index__=t.__index__,i.__values__=t.__values__,i}function r1(t,i,o){(o?sr(t,i,o):i===r)?i=1:i=Ht($e(i),0);var u=t==null?0:t.length;if(!u||i<1)return[];for(var d=0,b=0,I=J(Qs(u/i));d<u;)I[b++]=Rr(t,d,d+=i);return I}function i1(t){for(var i=-1,o=t==null?0:t.length,u=0,d=[];++i<o;){var b=t[i];b&&(d[u++]=b)}return d}function n1(){var t=arguments.length;if(!t)return[];for(var i=J(t-1),o=arguments[0],u=t;u--;)i[u-1]=arguments[u];return Ei(Ne(o)?dr(o):[o],Wt(i,1))}var s1=Ke(function(t,i){return Tt(t)?Gn(t,Wt(i,1,Tt,!0)):[]}),o1=Ke(function(t,i){var o=Lr(i);return Tt(o)&&(o=r),Tt(t)?Gn(t,Wt(i,1,Tt,!0),we(o,2)):[]}),a1=Ke(function(t,i){var o=Lr(i);return Tt(o)&&(o=r),Tt(t)?Gn(t,Wt(i,1,Tt,!0),r,o):[]});function c1(t,i,o){var u=t==null?0:t.length;return u?(i=o||i===r?1:$e(i),Rr(t,i<0?0:i,u)):[]}function u1(t,i,o){var u=t==null?0:t.length;return u?(i=o||i===r?1:$e(i),i=u-i,Rr(t,0,i<0?0:i)):[]}function h1(t,i){return t&&t.length?uo(t,we(i,3),!0,!0):[]}function f1(t,i){return t&&t.length?uo(t,we(i,3),!0):[]}function l1(t,i,o,u){var d=t==null?0:t.length;return d?(o&&typeof o!="number"&&sr(t,i,o)&&(o=0,u=d),n0(t,i,o,u)):[]}function Xh(t,i,o){var u=t==null?0:t.length;if(!u)return-1;var d=o==null?0:$e(o);return d<0&&(d=Ht(u+d,0)),zs(t,we(i,3),d)}function Zh(t,i,o){var u=t==null?0:t.length;if(!u)return-1;var d=u-1;return o!==r&&(d=$e(o),d=o<0?Ht(u+d,0):Xt(d,u-1)),zs(t,we(i,3),d,!0)}function Qh(t){var i=t==null?0:t.length;return i?Wt(t,1):[]}function d1(t){var i=t==null?0:t.length;return i?Wt(t,X):[]}function p1(t,i){var o=t==null?0:t.length;return o?(i=i===r?1:$e(i),Wt(t,i)):[]}function g1(t){for(var i=-1,o=t==null?0:t.length,u={};++i<o;){var d=t[i];u[d[0]]=d[1]}return u}function ef(t){return t&&t.length?t[0]:r}function v1(t,i,o){var u=t==null?0:t.length;if(!u)return-1;var d=o==null?0:$e(o);return d<0&&(d=Ht(u+d,0)),gn(t,i,d)}function y1(t){var i=t==null?0:t.length;return i?Rr(t,0,-1):[]}var _1=Ke(function(t){var i=bt(t,Ga);return i.length&&i[0]===t[0]?Ma(i):[]}),b1=Ke(function(t){var i=Lr(t),o=bt(t,Ga);return i===Lr(o)?i=r:o.pop(),o.length&&o[0]===t[0]?Ma(o,we(i,2)):[]}),m1=Ke(function(t){var i=Lr(t),o=bt(t,Ga);return i=typeof i=="function"?i:r,i&&o.pop(),o.length&&o[0]===t[0]?Ma(o,r,i):[]});function w1(t,i){return t==null?"":yg.call(t,i)}function Lr(t){var i=t==null?0:t.length;return i?t[i-1]:r}function E1(t,i,o){var u=t==null?0:t.length;if(!u)return-1;var d=u;return o!==r&&(d=$e(o),d=d<0?Ht(u+d,0):Xt(d,u-1)),i===i?tg(t,i,d):zs(t,Lu,d,!0)}function D1(t,i){return t&&t.length?fh(t,$e(i)):r}var S1=Ke(tf);function tf(t,i){return t&&t.length&&i&&i.length?qa(t,i):t}function I1(t,i,o){return t&&t.length&&i&&i.length?qa(t,i,we(o,2)):t}function x1(t,i,o){return t&&t.length&&i&&i.length?qa(t,i,r,o):t}var O1=hi(function(t,i){var o=t==null?0:t.length,u=Ra(t,i);return ph(t,bt(i,function(d){return fi(d,o)?+d:d}).sort(Sh)),u});function C1(t,i){var o=[];if(!(t&&t.length))return o;var u=-1,d=[],b=t.length;for(i=we(i,3);++u<b;){var I=t[u];i(I,u,t)&&(o.push(I),d.push(u))}return ph(t,d),o}function ac(t){return t==null?t:wg.call(t)}function A1(t,i,o){var u=t==null?0:t.length;return u?(o&&typeof o!="number"&&sr(t,i,o)?(i=0,o=u):(i=i==null?0:$e(i),o=o===r?u:$e(o)),Rr(t,i,o)):[]}function P1(t,i){return co(t,i)}function T1(t,i,o){return Ka(t,i,we(o,2))}function N1(t,i){var o=t==null?0:t.length;if(o){var u=co(t,i);if(u<o&&Kr(t[u],i))return u}return-1}function R1(t,i){return co(t,i,!0)}function L1(t,i,o){return Ka(t,i,we(o,2),!0)}function F1(t,i){var o=t==null?0:t.length;if(o){var u=co(t,i,!0)-1;if(Kr(t[u],i))return u}return-1}function U1(t){return t&&t.length?vh(t):[]}function M1(t,i){return t&&t.length?vh(t,we(i,2)):[]}function $1(t){var i=t==null?0:t.length;return i?Rr(t,1,i):[]}function j1(t,i,o){return t&&t.length?(i=o||i===r?1:$e(i),Rr(t,0,i<0?0:i)):[]}function B1(t,i,o){var u=t==null?0:t.length;return u?(i=o||i===r?1:$e(i),i=u-i,Rr(t,i<0?0:i,u)):[]}function q1(t,i){return t&&t.length?uo(t,we(i,3),!1,!0):[]}function z1(t,i){return t&&t.length?uo(t,we(i,3)):[]}var H1=Ke(function(t){return xi(Wt(t,1,Tt,!0))}),K1=Ke(function(t){var i=Lr(t);return Tt(i)&&(i=r),xi(Wt(t,1,Tt,!0),we(i,2))}),V1=Ke(function(t){var i=Lr(t);return i=typeof i=="function"?i:r,xi(Wt(t,1,Tt,!0),r,i)});function k1(t){return t&&t.length?xi(t):[]}function G1(t,i){return t&&t.length?xi(t,we(i,2)):[]}function W1(t,i){return i=typeof i=="function"?i:r,t&&t.length?xi(t,r,i):[]}function cc(t){if(!(t&&t.length))return[];var i=0;return t=wi(t,function(o){if(Tt(o))return i=Ht(o.length,i),!0}),Ia(i,function(o){return bt(t,Ea(o))})}function rf(t,i){if(!(t&&t.length))return[];var o=cc(t);return i==null?o:bt(o,function(u){return Kt(i,r,u)})}var Y1=Ke(function(t,i){return Tt(t)?Gn(t,i):[]}),J1=Ke(function(t){return ka(wi(t,Tt))}),X1=Ke(function(t){var i=Lr(t);return Tt(i)&&(i=r),ka(wi(t,Tt),we(i,2))}),Z1=Ke(function(t){var i=Lr(t);return i=typeof i=="function"?i:r,ka(wi(t,Tt),r,i)}),Q1=Ke(cc);function ev(t,i){return mh(t||[],i||[],kn)}function tv(t,i){return mh(t||[],i||[],Jn)}var rv=Ke(function(t){var i=t.length,o=i>1?t[i-1]:r;return o=typeof o=="function"?(t.pop(),o):r,rf(t,o)});function nf(t){var i=_(t);return i.__chain__=!0,i}function iv(t,i){return i(t),t}function bo(t,i){return i(t)}var nv=hi(function(t){var i=t.length,o=i?t[0]:0,u=this.__wrapped__,d=function(b){return Ra(b,t)};return i>1||this.__actions__.length||!(u instanceof Ye)||!fi(o)?this.thru(d):(u=u.slice(o,+o+(i?1:0)),u.__actions__.push({func:bo,args:[d],thisArg:r}),new Tr(u,this.__chain__).thru(function(b){return i&&!b.length&&b.push(r),b}))});function sv(){return nf(this)}function ov(){return new Tr(this.value(),this.__chain__)}function av(){this.__values__===r&&(this.__values__=_f(this.value()));var t=this.__index__>=this.__values__.length,i=t?r:this.__values__[this.__index__++];return{done:t,value:i}}function cv(){return this}function uv(t){for(var i,o=this;o instanceof io;){var u=Jh(o);u.__index__=0,u.__values__=r,i?d.__wrapped__=u:i=u;var d=u;o=o.__wrapped__}return d.__wrapped__=t,i}function hv(){var t=this.__wrapped__;if(t instanceof Ye){var i=t;return this.__actions__.length&&(i=new Ye(this)),i=i.reverse(),i.__actions__.push({func:bo,args:[ac],thisArg:r}),new Tr(i,this.__chain__)}return this.thru(ac)}function fv(){return bh(this.__wrapped__,this.__actions__)}var lv=ho(function(t,i,o){nt.call(t,o)?++t[o]:ci(t,o,1)});function dv(t,i,o){var u=Ne(t)?Nu:i0;return o&&sr(t,i,o)&&(i=r),u(t,we(i,3))}function pv(t,i){var o=Ne(t)?wi:rh;return o(t,we(i,3))}var gv=Ph(Xh),vv=Ph(Zh);function yv(t,i){return Wt(mo(t,i),1)}function _v(t,i){return Wt(mo(t,i),X)}function bv(t,i,o){return o=o===r?1:$e(o),Wt(mo(t,i),o)}function sf(t,i){var o=Ne(t)?Ar:Ii;return o(t,we(i,3))}function of(t,i){var o=Ne(t)?$p:th;return o(t,we(i,3))}var mv=ho(function(t,i,o){nt.call(t,o)?t[o].push(i):ci(t,o,[i])});function wv(t,i,o,u){t=pr(t)?t:On(t),o=o&&!u?$e(o):0;var d=t.length;return o<0&&(o=Ht(d+o,0)),Io(t)?o<=d&&t.indexOf(i,o)>-1:!!d&&gn(t,i,o)>-1}var Ev=Ke(function(t,i,o){var u=-1,d=typeof i=="function",b=pr(t)?J(t.length):[];return Ii(t,function(I){b[++u]=d?Kt(i,I,o):Wn(I,i,o)}),b}),Dv=ho(function(t,i,o){ci(t,o,i)});function mo(t,i){var o=Ne(t)?bt:ch;return o(t,we(i,3))}function Sv(t,i,o,u){return t==null?[]:(Ne(i)||(i=i==null?[]:[i]),o=u?r:o,Ne(o)||(o=o==null?[]:[o]),lh(t,i,o))}var Iv=ho(function(t,i,o){t[o?0:1].push(i)},function(){return[[],[]]});function xv(t,i,o){var u=Ne(t)?ma:Uu,d=arguments.length<3;return u(t,we(i,4),o,d,Ii)}function Ov(t,i,o){var u=Ne(t)?jp:Uu,d=arguments.length<3;return u(t,we(i,4),o,d,th)}function Cv(t,i){var o=Ne(t)?wi:rh;return o(t,Do(we(i,3)))}function Av(t){var i=Ne(t)?Xu:w0;return i(t)}function Pv(t,i,o){(o?sr(t,i,o):i===r)?i=1:i=$e(i);var u=Ne(t)?Zg:E0;return u(t,i)}function Tv(t){var i=Ne(t)?Qg:S0;return i(t)}function Nv(t){if(t==null)return 0;if(pr(t))return Io(t)?yn(t):t.length;var i=Zt(t);return i==Ie||i==xe?t.size:ja(t).length}function Rv(t,i,o){var u=Ne(t)?wa:I0;return o&&sr(t,i,o)&&(i=r),u(t,we(i,3))}var Lv=Ke(function(t,i){if(t==null)return[];var o=i.length;return o>1&&sr(t,i[0],i[1])?i=[]:o>2&&sr(i[0],i[1],i[2])&&(i=[i[0]]),lh(t,Wt(i,1),[])}),wo=pg||function(){return Xe.Date.now()};function Fv(t,i){if(typeof i!="function")throw new Pr(p);return t=$e(t),function(){if(--t<1)return i.apply(this,arguments)}}function af(t,i,o){return i=o?r:i,i=t&&i==null?t.length:i,ui(t,c,r,r,r,r,i)}function cf(t,i){var o;if(typeof i!="function")throw new Pr(p);return t=$e(t),function(){return--t>0&&(o=i.apply(this,arguments)),t<=1&&(i=r),o}}var uc=Ke(function(t,i,o){var u=Y;if(o.length){var d=Di(o,In(uc));u|=O}return ui(t,u,i,o,d)}),uf=Ke(function(t,i,o){var u=Y|ae;if(o.length){var d=Di(o,In(uf));u|=O}return ui(i,u,t,o,d)});function hf(t,i,o){i=o?r:i;var u=ui(t,U,r,r,r,r,r,i);return u.placeholder=hf.placeholder,u}function ff(t,i,o){i=o?r:i;var u=ui(t,S,r,r,r,r,r,i);return u.placeholder=ff.placeholder,u}function lf(t,i,o){var u,d,b,I,P,B,re=0,ie=!1,oe=!1,fe=!0;if(typeof t!="function")throw new Pr(p);i=Fr(i)||0,wt(o)&&(ie=!!o.leading,oe="maxWait"in o,b=oe?Ht(Fr(o.maxWait)||0,i):b,fe="trailing"in o?!!o.trailing:fe);function ye(Nt){var Vr=u,pi=d;return u=d=r,re=Nt,I=t.apply(pi,Vr),I}function Ee(Nt){return re=Nt,P=Qn(Ge,i),ie?ye(Nt):I}function qe(Nt){var Vr=Nt-B,pi=Nt-re,Tf=i-Vr;return oe?Xt(Tf,b-pi):Tf}function De(Nt){var Vr=Nt-B,pi=Nt-re;return B===r||Vr>=i||Vr<0||oe&&pi>=b}function Ge(){var Nt=wo();if(De(Nt))return Ze(Nt);P=Qn(Ge,qe(Nt))}function Ze(Nt){return P=r,fe&&u?ye(Nt):(u=d=r,I)}function Dr(){P!==r&&wh(P),re=0,u=B=d=P=r}function or(){return P===r?I:Ze(wo())}function Sr(){var Nt=wo(),Vr=De(Nt);if(u=arguments,d=this,B=Nt,Vr){if(P===r)return Ee(B);if(oe)return wh(P),P=Qn(Ge,i),ye(B)}return P===r&&(P=Qn(Ge,i)),I}return Sr.cancel=Dr,Sr.flush=or,Sr}var Uv=Ke(function(t,i){return eh(t,1,i)}),Mv=Ke(function(t,i,o){return eh(t,Fr(i)||0,o)});function $v(t){return ui(t,Q)}function Eo(t,i){if(typeof t!="function"||i!=null&&typeof i!="function")throw new Pr(p);var o=function(){var u=arguments,d=i?i.apply(this,u):u[0],b=o.cache;if(b.has(d))return b.get(d);var I=t.apply(this,u);return o.cache=b.set(d,I)||b,I};return o.cache=new(Eo.Cache||ai),o}Eo.Cache=ai;function Do(t){if(typeof t!="function")throw new Pr(p);return function(){var i=arguments;switch(i.length){case 0:return!t.call(this);case 1:return!t.call(this,i[0]);case 2:return!t.call(this,i[0],i[1]);case 3:return!t.call(this,i[0],i[1],i[2])}return!t.apply(this,i)}}function jv(t){return cf(2,t)}var Bv=x0(function(t,i){i=i.length==1&&Ne(i[0])?bt(i[0],mr(we())):bt(Wt(i,1),mr(we()));var o=i.length;return Ke(function(u){for(var d=-1,b=Xt(u.length,o);++d<b;)u[d]=i[d].call(this,u[d]);return Kt(t,this,u)})}),hc=Ke(function(t,i){var o=Di(i,In(hc));return ui(t,O,r,i,o)}),df=Ke(function(t,i){var o=Di(i,In(df));return ui(t,m,r,i,o)}),qv=hi(function(t,i){return ui(t,y,r,r,r,i)});function zv(t,i){if(typeof t!="function")throw new Pr(p);return i=i===r?i:$e(i),Ke(t,i)}function Hv(t,i){if(typeof t!="function")throw new Pr(p);return i=i==null?0:Ht($e(i),0),Ke(function(o){var u=o[i],d=Ci(o,0,i);return u&&Ei(d,u),Kt(t,this,d)})}function Kv(t,i,o){var u=!0,d=!0;if(typeof t!="function")throw new Pr(p);return wt(o)&&(u="leading"in o?!!o.leading:u,d="trailing"in o?!!o.trailing:d),lf(t,i,{leading:u,maxWait:i,trailing:d})}function Vv(t){return af(t,1)}function kv(t,i){return hc(Wa(i),t)}function Gv(){if(!arguments.length)return[];var t=arguments[0];return Ne(t)?t:[t]}function Wv(t){return Nr(t,F)}function Yv(t,i){return i=typeof i=="function"?i:r,Nr(t,F,i)}function Jv(t){return Nr(t,R|F)}function Xv(t,i){return i=typeof i=="function"?i:r,Nr(t,R|F,i)}function Zv(t,i){return i==null||Qu(t,i,Vt(i))}function Kr(t,i){return t===i||t!==t&&i!==i}var Qv=go(Ua),ey=go(function(t,i){return t>=i}),Wi=sh(function(){return arguments}())?sh:function(t){return Ct(t)&&nt.call(t,"callee")&&!Vu.call(t,"callee")},Ne=J.isArray,ty=ir?mr(ir):u0;function pr(t){return t!=null&&So(t.length)&&!li(t)}function Tt(t){return Ct(t)&&pr(t)}function ry(t){return t===!0||t===!1||Ct(t)&&nr(t)==z}var Ai=vg||wc,iy=qr?mr(qr):h0;function ny(t){return Ct(t)&&t.nodeType===1&&!es(t)}function sy(t){if(t==null)return!0;if(pr(t)&&(Ne(t)||typeof t=="string"||typeof t.splice=="function"||Ai(t)||xn(t)||Wi(t)))return!t.length;var i=Zt(t);if(i==Ie||i==xe)return!t.size;if(Zn(t))return!ja(t).length;for(var o in t)if(nt.call(t,o))return!1;return!0}function oy(t,i){return Yn(t,i)}function ay(t,i,o){o=typeof o=="function"?o:r;var u=o?o(t,i):r;return u===r?Yn(t,i,r,o):!!u}function fc(t){if(!Ct(t))return!1;var i=nr(t);return i==A||i==f||typeof t.message=="string"&&typeof t.name=="string"&&!es(t)}function cy(t){return typeof t=="number"&&Gu(t)}function li(t){if(!wt(t))return!1;var i=nr(t);return i==ue||i==de||i==K||i==vt}function pf(t){return typeof t=="number"&&t==$e(t)}function So(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=W}function wt(t){var i=typeof t;return t!=null&&(i=="object"||i=="function")}function Ct(t){return t!=null&&typeof t=="object"}var gf=Cr?mr(Cr):l0;function uy(t,i){return t===i||$a(t,i,tc(i))}function hy(t,i,o){return o=typeof o=="function"?o:r,$a(t,i,tc(i),o)}function fy(t){return vf(t)&&t!=+t}function ly(t){if(Y0(t))throw new Pe(h);return oh(t)}function dy(t){return t===null}function py(t){return t==null}function vf(t){return typeof t=="number"||Ct(t)&&nr(t)==ze}function es(t){if(!Ct(t)||nr(t)!=Me)return!1;var i=Js(t);if(i===null)return!0;var o=nt.call(i,"constructor")&&i.constructor;return typeof o=="function"&&o instanceof o&&ks.call(o)==hg}var lc=Yr?mr(Yr):d0;function gy(t){return pf(t)&&t>=-W&&t<=W}var yf=jn?mr(jn):p0;function Io(t){return typeof t=="string"||!Ne(t)&&Ct(t)&&nr(t)==Re}function Er(t){return typeof t=="symbol"||Ct(t)&&nr(t)==Le}var xn=Bi?mr(Bi):g0;function vy(t){return t===r}function yy(t){return Ct(t)&&Zt(t)==Ce}function _y(t){return Ct(t)&&nr(t)==Fe}var by=go(Ba),my=go(function(t,i){return t<=i});function _f(t){if(!t)return[];if(pr(t))return Io(t)?zr(t):dr(t);if(qn&&t[qn])return Zp(t[qn]());var i=Zt(t),o=i==Ie?Oa:i==xe?Hs:On;return o(t)}function di(t){if(!t)return t===0?t:0;if(t=Fr(t),t===X||t===-X){var i=t<0?-1:1;return i*q}return t===t?t:0}function $e(t){var i=di(t),o=i%1;return i===i?o?i-o:i:0}function bf(t){return t?Ki($e(t),0,ne):0}function Fr(t){if(typeof t=="number")return t;if(Er(t))return Z;if(wt(t)){var i=typeof t.valueOf=="function"?t.valueOf():t;t=wt(i)?i+"":i}if(typeof t!="string")return t===0?t:+t;t=Mu(t);var o=ra.test(t);return o||na.test(t)?Te(t.slice(2),o?2:8):ta.test(t)?Z:+t}function mf(t){return Xr(t,gr(t))}function wy(t){return t?Ki($e(t),-W,W):t===0?t:0}function it(t){return t==null?"":wr(t)}var Ey=Dn(function(t,i){if(Zn(i)||pr(i)){Xr(i,Vt(i),t);return}for(var o in i)nt.call(i,o)&&kn(t,o,i[o])}),wf=Dn(function(t,i){Xr(i,gr(i),t)}),xo=Dn(function(t,i,o,u){Xr(i,gr(i),t,u)}),Dy=Dn(function(t,i,o,u){Xr(i,Vt(i),t,u)}),Sy=hi(Ra);function Iy(t,i){var o=En(t);return i==null?o:Zu(o,i)}var xy=Ke(function(t,i){t=ht(t);var o=-1,u=i.length,d=u>2?i[2]:r;for(d&&sr(i[0],i[1],d)&&(u=1);++o<u;)for(var b=i[o],I=gr(b),P=-1,B=I.length;++P<B;){var re=I[P],ie=t[re];(ie===r||Kr(ie,bn[re])&&!nt.call(t,re))&&(t[re]=b[re])}return t}),Oy=Ke(function(t){return t.push(r,Mh),Kt(Ef,r,t)});function Cy(t,i){return Ru(t,we(i,3),Jr)}function Ay(t,i){return Ru(t,we(i,3),Fa)}function Py(t,i){return t==null?t:La(t,we(i,3),gr)}function Ty(t,i){return t==null?t:ih(t,we(i,3),gr)}function Ny(t,i){return t&&Jr(t,we(i,3))}function Ry(t,i){return t&&Fa(t,we(i,3))}function Ly(t){return t==null?[]:oo(t,Vt(t))}function Fy(t){return t==null?[]:oo(t,gr(t))}function dc(t,i,o){var u=t==null?r:Vi(t,i);return u===r?o:u}function Uy(t,i){return t!=null&&Bh(t,i,s0)}function pc(t,i){return t!=null&&Bh(t,i,o0)}var My=Nh(function(t,i,o){i!=null&&typeof i.toString!="function"&&(i=Gs.call(i)),t[i]=o},vc(vr)),$y=Nh(function(t,i,o){i!=null&&typeof i.toString!="function"&&(i=Gs.call(i)),nt.call(t,i)?t[i].push(o):t[i]=[o]},we),jy=Ke(Wn);function Vt(t){return pr(t)?Ju(t):ja(t)}function gr(t){return pr(t)?Ju(t,!0):v0(t)}function By(t,i){var o={};return i=we(i,3),Jr(t,function(u,d,b){ci(o,i(u,d,b),u)}),o}function qy(t,i){var o={};return i=we(i,3),Jr(t,function(u,d,b){ci(o,d,i(u,d,b))}),o}var zy=Dn(function(t,i,o){ao(t,i,o)}),Ef=Dn(function(t,i,o,u){ao(t,i,o,u)}),Hy=hi(function(t,i){var o={};if(t==null)return o;var u=!1;i=bt(i,function(b){return b=Oi(b,t),u||(u=b.length>1),b}),Xr(t,Qa(t),o),u&&(o=Nr(o,R|V|F,M0));for(var d=i.length;d--;)Va(o,i[d]);return o});function Ky(t,i){return Df(t,Do(we(i)))}var Vy=hi(function(t,i){return t==null?{}:_0(t,i)});function Df(t,i){if(t==null)return{};var o=bt(Qa(t),function(u){return[u]});return i=we(i),dh(t,o,function(u,d){return i(u,d[0])})}function ky(t,i,o){i=Oi(i,t);var u=-1,d=i.length;for(d||(d=1,t=r);++u<d;){var b=t==null?r:t[Zr(i[u])];b===r&&(u=d,b=o),t=li(b)?b.call(t):b}return t}function Gy(t,i,o){return t==null?t:Jn(t,i,o)}function Wy(t,i,o,u){return u=typeof u=="function"?u:r,t==null?t:Jn(t,i,o,u)}var Sf=Fh(Vt),If=Fh(gr);function Yy(t,i,o){var u=Ne(t),d=u||Ai(t)||xn(t);if(i=we(i,4),o==null){var b=t&&t.constructor;d?o=u?new b:[]:wt(t)?o=li(b)?En(Js(t)):{}:o={}}return(d?Ar:Jr)(t,function(I,P,B){return i(o,I,P,B)}),o}function Jy(t,i){return t==null?!0:Va(t,i)}function Xy(t,i,o){return t==null?t:_h(t,i,Wa(o))}function Zy(t,i,o,u){return u=typeof u=="function"?u:r,t==null?t:_h(t,i,Wa(o),u)}function On(t){return t==null?[]:xa(t,Vt(t))}function Qy(t){return t==null?[]:xa(t,gr(t))}function e_(t,i,o){return o===r&&(o=i,i=r),o!==r&&(o=Fr(o),o=o===o?o:0),i!==r&&(i=Fr(i),i=i===i?i:0),Ki(Fr(t),i,o)}function t_(t,i,o){return i=di(i),o===r?(o=i,i=0):o=di(o),t=Fr(t),a0(t,i,o)}function r_(t,i,o){if(o&&typeof o!="boolean"&&sr(t,i,o)&&(i=o=r),o===r&&(typeof i=="boolean"?(o=i,i=r):typeof t=="boolean"&&(o=t,t=r)),t===r&&i===r?(t=0,i=1):(t=di(t),i===r?(i=t,t=0):i=di(i)),t>i){var u=t;t=i,i=u}if(o||t%1||i%1){var d=Wu();return Xt(t+d*(i-t+ct("1e-"+((d+"").length-1))),i)}return za(t,i)}var i_=Sn(function(t,i,o){return i=i.toLowerCase(),t+(o?xf(i):i)});function xf(t){return gc(it(t).toLowerCase())}function Of(t){return t=it(t),t&&t.replace(ni,Gp).replace(ya,"")}function n_(t,i,o){t=it(t),i=wr(i);var u=t.length;o=o===r?u:Ki($e(o),0,u);var d=o;return o-=i.length,o>=0&&t.slice(o,d)==i}function s_(t){return t=it(t),t&&yt.test(t)?t.replace(Fi,Wp):t}function o_(t){return t=it(t),t&&Ut.test(t)?t.replace(It,"\\$&"):t}var a_=Sn(function(t,i,o){return t+(o?"-":"")+i.toLowerCase()}),c_=Sn(function(t,i,o){return t+(o?" ":"")+i.toLowerCase()}),u_=Ah("toLowerCase");function h_(t,i,o){t=it(t),i=$e(i);var u=i?yn(t):0;if(!i||u>=i)return t;var d=(i-u)/2;return po(eo(d),o)+t+po(Qs(d),o)}function f_(t,i,o){t=it(t),i=$e(i);var u=i?yn(t):0;return i&&u<i?t+po(i-u,o):t}function l_(t,i,o){t=it(t),i=$e(i);var u=i?yn(t):0;return i&&u<i?po(i-u,o)+t:t}function d_(t,i,o){return o||i==null?i=0:i&&(i=+i),mg(it(t).replace(xt,""),i||0)}function p_(t,i,o){return(o?sr(t,i,o):i===r)?i=1:i=$e(i),Ha(it(t),i)}function g_(){var t=arguments,i=it(t[0]);return t.length<3?i:i.replace(t[1],t[2])}var v_=Sn(function(t,i,o){return t+(o?"_":"")+i.toLowerCase()});function y_(t,i,o){return o&&typeof o!="number"&&sr(t,i,o)&&(i=o=r),o=o===r?ne:o>>>0,o?(t=it(t),t&&(typeof i=="string"||i!=null&&!lc(i))&&(i=wr(i),!i&&vn(t))?Ci(zr(t),0,o):t.split(i,o)):[]}var __=Sn(function(t,i,o){return t+(o?" ":"")+gc(i)});function b_(t,i,o){return t=it(t),o=o==null?0:Ki($e(o),0,t.length),i=wr(i),t.slice(o,o+i.length)==i}function m_(t,i,o){var u=_.templateSettings;o&&sr(t,i,o)&&(i=r),t=it(t),i=xo({},i,u,Uh);var d=xo({},i.imports,u.imports,Uh),b=Vt(d),I=xa(d,b),P,B,re=0,ie=i.interpolate||cn,oe="__p += '",fe=Ca((i.escape||cn).source+"|"+ie.source+"|"+(ie===mt?ea:cn).source+"|"+(i.evaluate||cn).source+"|$","g"),ye="//# sourceURL="+(nt.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++_a+"]")+`
`;t.replace(fe,function(De,Ge,Ze,Dr,or,Sr){return Ze||(Ze=Dr),oe+=t.slice(re,Sr).replace(oa,Yp),Ge&&(P=!0,oe+=`' +
__e(`+Ge+`) +
'`),or&&(B=!0,oe+=`';
`+or+`;
__p += '`),Ze&&(oe+=`' +
((__t = (`+Ze+`)) == null ? '' : __t) +
'`),re=Sr+De.length,De}),oe+=`';
`;var Ee=nt.call(i,"variable")&&i.variable;if(!Ee)oe=`with (obj) {
`+oe+`
}
`;else if(Zo.test(Ee))throw new Pe(l);oe=(B?oe.replace(Gr,""):oe).replace(rr,"$1").replace(ii,"$1;"),oe="function("+(Ee||"obj")+`) {
`+(Ee?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(P?", __e = _.escape":"")+(B?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+oe+`return __p
}`;var qe=Af(function(){return rt(b,ye+"return "+oe).apply(r,I)});if(qe.source=oe,fc(qe))throw qe;return qe}function w_(t){return it(t).toLowerCase()}function E_(t){return it(t).toUpperCase()}function D_(t,i,o){if(t=it(t),t&&(o||i===r))return Mu(t);if(!t||!(i=wr(i)))return t;var u=zr(t),d=zr(i),b=$u(u,d),I=ju(u,d)+1;return Ci(u,b,I).join("")}function S_(t,i,o){if(t=it(t),t&&(o||i===r))return t.slice(0,qu(t)+1);if(!t||!(i=wr(i)))return t;var u=zr(t),d=ju(u,zr(i))+1;return Ci(u,0,d).join("")}function I_(t,i,o){if(t=it(t),t&&(o||i===r))return t.replace(xt,"");if(!t||!(i=wr(i)))return t;var u=zr(t),d=$u(u,zr(i));return Ci(u,d).join("")}function x_(t,i){var o=C,u=$;if(wt(i)){var d="separator"in i?i.separator:d;o="length"in i?$e(i.length):o,u="omission"in i?wr(i.omission):u}t=it(t);var b=t.length;if(vn(t)){var I=zr(t);b=I.length}if(o>=b)return t;var P=o-yn(u);if(P<1)return u;var B=I?Ci(I,0,P).join(""):t.slice(0,P);if(d===r)return B+u;if(I&&(P+=B.length-P),lc(d)){if(t.slice(P).search(d)){var re,ie=B;for(d.global||(d=Ca(d.source,it(Or.exec(d))+"g")),d.lastIndex=0;re=d.exec(ie);)var oe=re.index;B=B.slice(0,oe===r?P:oe)}}else if(t.indexOf(wr(d),P)!=P){var fe=B.lastIndexOf(d);fe>-1&&(B=B.slice(0,fe))}return B+u}function O_(t){return t=it(t),t&&Et.test(t)?t.replace(bi,rg):t}var C_=Sn(function(t,i,o){return t+(o?" ":"")+i.toUpperCase()}),gc=Ah("toUpperCase");function Cf(t,i,o){return t=it(t),i=o?r:i,i===r?Xp(t)?sg(t):zp(t):t.match(i)||[]}var Af=Ke(function(t,i){try{return Kt(t,r,i)}catch(o){return fc(o)?o:new Pe(o)}}),A_=hi(function(t,i){return Ar(i,function(o){o=Zr(o),ci(t,o,uc(t[o],t))}),t});function P_(t){var i=t==null?0:t.length,o=we();return t=i?bt(t,function(u){if(typeof u[1]!="function")throw new Pr(p);return[o(u[0]),u[1]]}):[],Ke(function(u){for(var d=-1;++d<i;){var b=t[d];if(Kt(b[0],this,u))return Kt(b[1],this,u)}})}function T_(t){return r0(Nr(t,R))}function vc(t){return function(){return t}}function N_(t,i){return t==null||t!==t?i:t}var R_=Th(),L_=Th(!0);function vr(t){return t}function yc(t){return ah(typeof t=="function"?t:Nr(t,R))}function F_(t){return uh(Nr(t,R))}function U_(t,i){return hh(t,Nr(i,R))}var M_=Ke(function(t,i){return function(o){return Wn(o,t,i)}}),$_=Ke(function(t,i){return function(o){return Wn(t,o,i)}});function _c(t,i,o){var u=Vt(i),d=oo(i,u);o==null&&!(wt(i)&&(d.length||!u.length))&&(o=i,i=t,t=this,d=oo(i,Vt(i)));var b=!(wt(o)&&"chain"in o)||!!o.chain,I=li(t);return Ar(d,function(P){var B=i[P];t[P]=B,I&&(t.prototype[P]=function(){var re=this.__chain__;if(b||re){var ie=t(this.__wrapped__),oe=ie.__actions__=dr(this.__actions__);return oe.push({func:B,args:arguments,thisArg:t}),ie.__chain__=re,ie}return B.apply(t,Ei([this.value()],arguments))})}),t}function j_(){return Xe._===this&&(Xe._=fg),this}function bc(){}function B_(t){return t=$e(t),Ke(function(i){return fh(i,t)})}var q_=Ja(bt),z_=Ja(Nu),H_=Ja(wa);function Pf(t){return ic(t)?Ea(Zr(t)):b0(t)}function K_(t){return function(i){return t==null?r:Vi(t,i)}}var V_=Rh(),k_=Rh(!0);function mc(){return[]}function wc(){return!1}function G_(){return{}}function W_(){return""}function Y_(){return!0}function J_(t,i){if(t=$e(t),t<1||t>W)return[];var o=ne,u=Xt(t,ne);i=we(i),t-=ne;for(var d=Ia(u,i);++o<t;)i(o);return d}function X_(t){return Ne(t)?bt(t,Zr):Er(t)?[t]:dr(Yh(it(t)))}function Z_(t){var i=++ug;return it(t)+i}var Q_=lo(function(t,i){return t+i},0),eb=Xa("ceil"),tb=lo(function(t,i){return t/i},1),rb=Xa("floor");function ib(t){return t&&t.length?so(t,vr,Ua):r}function nb(t,i){return t&&t.length?so(t,we(i,2),Ua):r}function sb(t){return Fu(t,vr)}function ob(t,i){return Fu(t,we(i,2))}function ab(t){return t&&t.length?so(t,vr,Ba):r}function cb(t,i){return t&&t.length?so(t,we(i,2),Ba):r}var ub=lo(function(t,i){return t*i},1),hb=Xa("round"),fb=lo(function(t,i){return t-i},0);function lb(t){return t&&t.length?Sa(t,vr):0}function db(t,i){return t&&t.length?Sa(t,we(i,2)):0}return _.after=Fv,_.ary=af,_.assign=Ey,_.assignIn=wf,_.assignInWith=xo,_.assignWith=Dy,_.at=Sy,_.before=cf,_.bind=uc,_.bindAll=A_,_.bindKey=uf,_.castArray=Gv,_.chain=nf,_.chunk=r1,_.compact=i1,_.concat=n1,_.cond=P_,_.conforms=T_,_.constant=vc,_.countBy=lv,_.create=Iy,_.curry=hf,_.curryRight=ff,_.debounce=lf,_.defaults=xy,_.defaultsDeep=Oy,_.defer=Uv,_.delay=Mv,_.difference=s1,_.differenceBy=o1,_.differenceWith=a1,_.drop=c1,_.dropRight=u1,_.dropRightWhile=h1,_.dropWhile=f1,_.fill=l1,_.filter=pv,_.flatMap=yv,_.flatMapDeep=_v,_.flatMapDepth=bv,_.flatten=Qh,_.flattenDeep=d1,_.flattenDepth=p1,_.flip=$v,_.flow=R_,_.flowRight=L_,_.fromPairs=g1,_.functions=Ly,_.functionsIn=Fy,_.groupBy=mv,_.initial=y1,_.intersection=_1,_.intersectionBy=b1,_.intersectionWith=m1,_.invert=My,_.invertBy=$y,_.invokeMap=Ev,_.iteratee=yc,_.keyBy=Dv,_.keys=Vt,_.keysIn=gr,_.map=mo,_.mapKeys=By,_.mapValues=qy,_.matches=F_,_.matchesProperty=U_,_.memoize=Eo,_.merge=zy,_.mergeWith=Ef,_.method=M_,_.methodOf=$_,_.mixin=_c,_.negate=Do,_.nthArg=B_,_.omit=Hy,_.omitBy=Ky,_.once=jv,_.orderBy=Sv,_.over=q_,_.overArgs=Bv,_.overEvery=z_,_.overSome=H_,_.partial=hc,_.partialRight=df,_.partition=Iv,_.pick=Vy,_.pickBy=Df,_.property=Pf,_.propertyOf=K_,_.pull=S1,_.pullAll=tf,_.pullAllBy=I1,_.pullAllWith=x1,_.pullAt=O1,_.range=V_,_.rangeRight=k_,_.rearg=qv,_.reject=Cv,_.remove=C1,_.rest=zv,_.reverse=ac,_.sampleSize=Pv,_.set=Gy,_.setWith=Wy,_.shuffle=Tv,_.slice=A1,_.sortBy=Lv,_.sortedUniq=U1,_.sortedUniqBy=M1,_.split=y_,_.spread=Hv,_.tail=$1,_.take=j1,_.takeRight=B1,_.takeRightWhile=q1,_.takeWhile=z1,_.tap=iv,_.throttle=Kv,_.thru=bo,_.toArray=_f,_.toPairs=Sf,_.toPairsIn=If,_.toPath=X_,_.toPlainObject=mf,_.transform=Yy,_.unary=Vv,_.union=H1,_.unionBy=K1,_.unionWith=V1,_.uniq=k1,_.uniqBy=G1,_.uniqWith=W1,_.unset=Jy,_.unzip=cc,_.unzipWith=rf,_.update=Xy,_.updateWith=Zy,_.values=On,_.valuesIn=Qy,_.without=Y1,_.words=Cf,_.wrap=kv,_.xor=J1,_.xorBy=X1,_.xorWith=Z1,_.zip=Q1,_.zipObject=ev,_.zipObjectDeep=tv,_.zipWith=rv,_.entries=Sf,_.entriesIn=If,_.extend=wf,_.extendWith=xo,_c(_,_),_.add=Q_,_.attempt=Af,_.camelCase=i_,_.capitalize=xf,_.ceil=eb,_.clamp=e_,_.clone=Wv,_.cloneDeep=Jv,_.cloneDeepWith=Xv,_.cloneWith=Yv,_.conformsTo=Zv,_.deburr=Of,_.defaultTo=N_,_.divide=tb,_.endsWith=n_,_.eq=Kr,_.escape=s_,_.escapeRegExp=o_,_.every=dv,_.find=gv,_.findIndex=Xh,_.findKey=Cy,_.findLast=vv,_.findLastIndex=Zh,_.findLastKey=Ay,_.floor=rb,_.forEach=sf,_.forEachRight=of,_.forIn=Py,_.forInRight=Ty,_.forOwn=Ny,_.forOwnRight=Ry,_.get=dc,_.gt=Qv,_.gte=ey,_.has=Uy,_.hasIn=pc,_.head=ef,_.identity=vr,_.includes=wv,_.indexOf=v1,_.inRange=t_,_.invoke=jy,_.isArguments=Wi,_.isArray=Ne,_.isArrayBuffer=ty,_.isArrayLike=pr,_.isArrayLikeObject=Tt,_.isBoolean=ry,_.isBuffer=Ai,_.isDate=iy,_.isElement=ny,_.isEmpty=sy,_.isEqual=oy,_.isEqualWith=ay,_.isError=fc,_.isFinite=cy,_.isFunction=li,_.isInteger=pf,_.isLength=So,_.isMap=gf,_.isMatch=uy,_.isMatchWith=hy,_.isNaN=fy,_.isNative=ly,_.isNil=py,_.isNull=dy,_.isNumber=vf,_.isObject=wt,_.isObjectLike=Ct,_.isPlainObject=es,_.isRegExp=lc,_.isSafeInteger=gy,_.isSet=yf,_.isString=Io,_.isSymbol=Er,_.isTypedArray=xn,_.isUndefined=vy,_.isWeakMap=yy,_.isWeakSet=_y,_.join=w1,_.kebabCase=a_,_.last=Lr,_.lastIndexOf=E1,_.lowerCase=c_,_.lowerFirst=u_,_.lt=by,_.lte=my,_.max=ib,_.maxBy=nb,_.mean=sb,_.meanBy=ob,_.min=ab,_.minBy=cb,_.stubArray=mc,_.stubFalse=wc,_.stubObject=G_,_.stubString=W_,_.stubTrue=Y_,_.multiply=ub,_.nth=D1,_.noConflict=j_,_.noop=bc,_.now=wo,_.pad=h_,_.padEnd=f_,_.padStart=l_,_.parseInt=d_,_.random=r_,_.reduce=xv,_.reduceRight=Ov,_.repeat=p_,_.replace=g_,_.result=ky,_.round=hb,_.runInContext=j,_.sample=Av,_.size=Nv,_.snakeCase=v_,_.some=Rv,_.sortedIndex=P1,_.sortedIndexBy=T1,_.sortedIndexOf=N1,_.sortedLastIndex=R1,_.sortedLastIndexBy=L1,_.sortedLastIndexOf=F1,_.startCase=__,_.startsWith=b_,_.subtract=fb,_.sum=lb,_.sumBy=db,_.template=m_,_.times=J_,_.toFinite=di,_.toInteger=$e,_.toLength=bf,_.toLower=w_,_.toNumber=Fr,_.toSafeInteger=wy,_.toString=it,_.toUpper=E_,_.trim=D_,_.trimEnd=S_,_.trimStart=I_,_.truncate=x_,_.unescape=O_,_.uniqueId=Z_,_.upperCase=C_,_.upperFirst=gc,_.each=sf,_.eachRight=of,_.first=ef,_c(_,function(){var t={};return Jr(_,function(i,o){nt.call(_.prototype,o)||(t[o]=i)}),t}(),{chain:!1}),_.VERSION=s,Ar(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){_[t].placeholder=_}),Ar(["drop","take"],function(t,i){Ye.prototype[t]=function(o){o=o===r?1:Ht($e(o),0);var u=this.__filtered__&&!i?new Ye(this):this.clone();return u.__filtered__?u.__takeCount__=Xt(o,u.__takeCount__):u.__views__.push({size:Xt(o,ne),type:t+(u.__dir__<0?"Right":"")}),u},Ye.prototype[t+"Right"]=function(o){return this.reverse()[t](o).reverse()}}),Ar(["filter","map","takeWhile"],function(t,i){var o=i+1,u=o==g||o==G;Ye.prototype[t]=function(d){var b=this.clone();return b.__iteratees__.push({iteratee:we(d,3),type:o}),b.__filtered__=b.__filtered__||u,b}}),Ar(["head","last"],function(t,i){var o="take"+(i?"Right":"");Ye.prototype[t]=function(){return this[o](1).value()[0]}}),Ar(["initial","tail"],function(t,i){var o="drop"+(i?"":"Right");Ye.prototype[t]=function(){return this.__filtered__?new Ye(this):this[o](1)}}),Ye.prototype.compact=function(){return this.filter(vr)},Ye.prototype.find=function(t){return this.filter(t).head()},Ye.prototype.findLast=function(t){return this.reverse().find(t)},Ye.prototype.invokeMap=Ke(function(t,i){return typeof t=="function"?new Ye(this):this.map(function(o){return Wn(o,t,i)})}),Ye.prototype.reject=function(t){return this.filter(Do(we(t)))},Ye.prototype.slice=function(t,i){t=$e(t);var o=this;return o.__filtered__&&(t>0||i<0)?new Ye(o):(t<0?o=o.takeRight(-t):t&&(o=o.drop(t)),i!==r&&(i=$e(i),o=i<0?o.dropRight(-i):o.take(i-t)),o)},Ye.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Ye.prototype.toArray=function(){return this.take(ne)},Jr(Ye.prototype,function(t,i){var o=/^(?:filter|find|map|reject)|While$/.test(i),u=/^(?:head|last)$/.test(i),d=_[u?"take"+(i=="last"?"Right":""):i],b=u||/^find/.test(i);d&&(_.prototype[i]=function(){var I=this.__wrapped__,P=u?[1]:arguments,B=I instanceof Ye,re=P[0],ie=B||Ne(I),oe=function(Ge){var Ze=d.apply(_,Ei([Ge],P));return u&&fe?Ze[0]:Ze};ie&&o&&typeof re=="function"&&re.length!=1&&(B=ie=!1);var fe=this.__chain__,ye=!!this.__actions__.length,Ee=b&&!fe,qe=B&&!ye;if(!b&&ie){I=qe?I:new Ye(this);var De=t.apply(I,P);return De.__actions__.push({func:bo,args:[oe],thisArg:r}),new Tr(De,fe)}return Ee&&qe?t.apply(this,P):(De=this.thru(oe),Ee?u?De.value()[0]:De.value():De)})}),Ar(["pop","push","shift","sort","splice","unshift"],function(t){var i=Ks[t],o=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",u=/^(?:pop|shift)$/.test(t);_.prototype[t]=function(){var d=arguments;if(u&&!this.__chain__){var b=this.value();return i.apply(Ne(b)?b:[],d)}return this[o](function(I){return i.apply(Ne(I)?I:[],d)})}}),Jr(Ye.prototype,function(t,i){var o=_[i];if(o){var u=o.name+"";nt.call(wn,u)||(wn[u]=[]),wn[u].push({name:i,func:o})}}),wn[fo(r,ae).name]=[{name:"wrapper",func:r}],Ye.prototype.clone=Og,Ye.prototype.reverse=Cg,Ye.prototype.value=Ag,_.prototype.at=nv,_.prototype.chain=sv,_.prototype.commit=ov,_.prototype.next=av,_.prototype.plant=uv,_.prototype.reverse=hv,_.prototype.toJSON=_.prototype.valueOf=_.prototype.value=fv,_.prototype.first=_.prototype.head,qn&&(_.prototype[qn]=cv),_},_n=og();Pt?((Pt.exports=_n)._=_n,ut._=_n):Xe._=_n}).call(ls)})(ru,ru.exports);var n5=Object.defineProperty,s5=Object.defineProperties,o5=Object.getOwnPropertyDescriptors,sd=Object.getOwnPropertySymbols,a5=Object.prototype.hasOwnProperty,c5=Object.prototype.propertyIsEnumerable,od=(n,e,r)=>e in n?n5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Co=(n,e)=>{for(var r in e||(e={}))a5.call(e,r)&&od(n,r,e[r]);if(sd)for(var r of sd(e))c5.call(e,r)&&od(n,r,e[r]);return n},u5=(n,e)=>s5(n,o5(e));function $r(n,e,r){let s;const a=iu(n);return e.rpcMap&&(s=e.rpcMap[a]),s||(s=`${i5}?chainId=eip155:${a}&projectId=${r}`),s}function iu(n){return n.includes("eip155")?Number(n.split(":")[1]):Number(n)}function h5(n,e){if(!e.includes(n))throw new Error(`Chain '${n}' not approved. Please use one of the following: ${e.toString()}`)}function f5(n){return n.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function l5(n,e){const r=Object.keys(e.namespaces).filter(a=>a.includes(n));if(!r.length)return[];const s=[];return r.forEach(a=>{const h=e.namespaces[a].accounts;s.push(...h)}),s}function d5(n,e={}){const r=ad(n),s=ad(e);return ru.exports.merge(r,s)}function ad(n){var e,r,s,a;const h={};if(!Nn(n))return h;for(const[p,l]of Object.entries(n)){const v=Qd(p)?[p]:l.chains,D=l.methods||[],x=l.events||[],R=l.rpcMap||{},V=No(p);h[V]=u5(Co(Co({},h[V]),l),{chains:Oc(v,(e=h[V])==null?void 0:e.chains),methods:Oc(D,(r=h[V])==null?void 0:r.methods),events:Oc(x,(s=h[V])==null?void 0:s.events),rpcMap:Co(Co({},R),(a=h[V])==null?void 0:a.rpcMap)})}return h}const an=(n,e)=>{const r=s=>{s.request!==e.request||s.topic!==e.topic||(n.events.removeListener("session_request_sent",r),p5(e,n.core.storage))};n.on("session_request_sent",r)};async function p5(n,e){try{const r=await e.getItem("WALLETCONNECT_DEEPLINK_CHOICE");if(!r)return;const s=typeof r=="string"?JSON.parse(r):r,a=s==null?void 0:s.href;if(typeof a!="string")return;a.endsWith("/")&&a.slice(0,-1);const h=`${a}/wc?requestId=${n.id}&sessionTopic=${n.topic}`,p=Wd();p===Qi.browser?window.open(h,"_self","noreferrer noopener"):p===Qi.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(h)}catch(r){console.error(r)}}class g5{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?(an(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const s=r||$r(`${this.name}:${e}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;e[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||$r(e,this.namespace);return typeof s>"u"?void 0:new Ri(new on(s))}}class v5{constructor(e){this.name="eip155",this.namespace=e.namespace,this.client=e.client,this.events=e.events,this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){var r;switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return this.handleSwitchChain(e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0"),null;case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?(an(this.client,e),await this.client.request(e)):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){const s=iu(e);if(!this.httpProviders[s]){const a=r||$r(`${this.name}:${s}`,this.namespace,this.client.core.projectId);if(!a)throw new Error(`No RPC url provided for chainId: ${s}`);this.setHttpProvider(s,a)}this.chainId=s,this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const s=r||$r(`${this.name}:${e}`,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Ri(new on(s))}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;const a=iu(r);e[a]=this.createHttpProvider(a,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}handleSwitchChain(e){const r=parseInt(e,16),s=`${this.name}:${r}`;h5(s,this.namespace.chains),this.setDefaultChain(`${r}`)}}class y5{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?(an(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const s=r||$r(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;e[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||$r(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Ri(new on(s))}}class _5{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?(an(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const s=r||$r(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;e[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||$r(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Ri(new on(s))}}class b5{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?(an(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const s=r||this.getCardanoRPCUrl(e);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{const s=this.getCardanoRPCUrl(r);e[r]=this.createHttpProvider(r,s)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}getCardanoRPCUrl(e){const r=this.namespace.rpcMap;if(r)return r[e]}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||this.getCardanoRPCUrl(e);return typeof s>"u"?void 0:new Ri(new on(s))}}class m5{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?(an(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const s=r||$r(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;e[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||$r(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Ri(new on(s))}}class w5{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?(an(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const s=r||$r(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;e[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||$r(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Ri(new on(s))}}var E5=Object.defineProperty,D5=Object.defineProperties,S5=Object.getOwnPropertyDescriptors,cd=Object.getOwnPropertySymbols,I5=Object.prototype.hasOwnProperty,x5=Object.prototype.propertyIsEnumerable,ud=(n,e,r)=>e in n?E5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Ao=(n,e)=>{for(var r in e||(e={}))I5.call(e,r)&&ud(n,r,e[r]);if(cd)for(var r of cd(e))x5.call(e,r)&&ud(n,r,e[r]);return n},jc=(n,e)=>D5(n,S5(e));class Pu{constructor(e){this.events=new uu,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Qe.pino(Qe.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||id}))}static async init(e){const r=new Pu(e);return await r.initialize(),r}async request(e,r){const[s,a]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Ao({},e),chainId:`${s}:${a}`,topic:this.session.topic})}sendAsync(e,r,s){this.request(e,s).then(a=>r(null,a)).catch(a=>r(a,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Rt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let r=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(r>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:s,approval:a}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});s&&(this.uri=s,this.events.emit("display_uri",s)),await a().then(h=>{this.session=h}).catch(h=>{if(h.message!==Fp)throw h;r++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,r){try{const[s,a]=this.validateChain(e);this.getProvider(s).setDefaultChain(a,r)}catch(s){if(!/Please call connect/.test(s.message))throw s}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(_i(r)){for(const s of r)e.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await J2.init({logger:this.providerOpts.logger||id,relayUrl:this.providerOpts.relayUrl||e5,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");[...new Set(Object.keys(this.session.namespaces).map(e=>No(e)))].forEach(e=>{if(!this.session)return;const r=l5(e,this.session),s=f5(r),a=d5(this.namespaces,this.optionalNamespaces),h=jc(Ao({},a[e]),{accounts:r,chains:s});switch(e){case"eip155":this.rpcProviders[e]=new v5({client:this.client,namespace:h,events:this.events});break;case"solana":this.rpcProviders[e]=new y5({client:this.client,namespace:h,events:this.events});break;case"cosmos":this.rpcProviders[e]=new _5({client:this.client,namespace:h,events:this.events});break;case"polkadot":this.rpcProviders[e]=new g5({client:this.client,namespace:h,events:this.events});break;case"cip34":this.rpcProviders[e]=new b5({client:this.client,namespace:h,events:this.events});break;case"elrond":this.rpcProviders[e]=new m5({client:this.client,namespace:h,events:this.events});break;case"multiversx":this.rpcProviders[e]=new w5({client:this.client,namespace:h,events:this.events});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:r}=e,{event:s}=r;s.name==="accountsChanged"?this.events.emit("accountsChanged",s.data):s.name==="chainChanged"?this.onChainChanged(r.chainId):this.events.emit(s.name,s.data),this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var s;const{namespaces:a}=r,h=(s=this.client)==null?void 0:s.session.get(e);this.session=jc(Ao({},h),{namespaces:a}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",jc(Ao({},Rt("USER_DISCONNECTED")),{data:e.topic}))}),this.on(Li.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r,optionalNamespaces:s,sessionProperties:a}=e;if(!r||!Object.keys(r).length)throw new Error("Namespaces must be not empty");this.namespaces=r,this.optionalNamespaces=s,this.sessionProperties=a,this.persist("namespaces",r),this.persist("optionalNamespaces",s)}validateChain(e){const[r,s]=(e==null?void 0:e.split(":"))||["",""];if(r&&!Object.keys(this.namespaces).map(p=>No(p)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&s)return[r,s];const a=No(Object.keys(this.namespaces)[0]),h=this.rpcProviders[a].getDefaultChain();return[a,h]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,r=!1){var s;const[a,h]=this.validateChain(e);r||this.getProvider(a).setDefaultChain(h),((s=this.namespaces[a])!=null?s:this.namespaces[`${a}:${h}`]).defaultChain=h,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",h)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0})}persist(e,r){this.client.core.storage.setItem(`${nd}/${e}`,r)}async getFromStore(e){return await this.client.core.storage.getItem(`${nd}/${e}`)}}const O5=Pu,C5="wc",A5="ethereum_provider",P5=`${C5}@2:${A5}:`,T5="https://rpc.walletconnect.com/v1/",nu=["eth_sendTransaction","personal_sign"],W5=["eth_accounts","eth_requestAccounts","eth_call","eth_getBalance","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],su=["chainChanged","accountsChanged"],Y5=["message","disconnect","connect"];var N5=Object.defineProperty,R5=Object.defineProperties,L5=Object.getOwnPropertyDescriptors,hd=Object.getOwnPropertySymbols,F5=Object.prototype.hasOwnProperty,U5=Object.prototype.propertyIsEnumerable,fd=(n,e,r)=>e in n?N5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Bc=(n,e)=>{for(var r in e||(e={}))F5.call(e,r)&&fd(n,r,e[r]);if(hd)for(var r of hd(e))U5.call(e,r)&&fd(n,r,e[r]);return n},ld=(n,e)=>R5(n,L5(e));function ou(n){return Number(n[0].split(":")[1])}function qc(n){return`0x${n.toString(16)}`}function M5(n){const{chains:e,optionalChains:r,methods:s,optionalMethods:a,events:h,optionalEvents:p,rpcMap:l}=n;if(!_i(e))throw new Error("Invalid chains");const v=e,D=s||nu,x=h||su,R={[ou(v)]:l[ou(v)]},V={chains:v,methods:D,events:x,rpcMap:R},F=h==null?void 0:h.filter(ae=>!su.includes(ae)),T=s==null?void 0:s.filter(ae=>!nu.includes(ae));if(!r&&!p&&!a&&!(F!=null&&F.length)&&!(T!=null&&T.length))return{required:V};const k=(F==null?void 0:F.length)&&(T==null?void 0:T.length)||!r,Y={chains:[...new Set(k?v.concat(r||[]):r)],methods:[...new Set(D.concat(a||[]))],events:[...new Set(x.concat(p||[]))],rpcMap:l};return{required:V,optional:Y}}class Tu{constructor(){this.events=new Ir.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=P5,this.on=(e,r)=>(this.events.on(e,r),this),this.once=(e,r)=>(this.events.once(e,r),this),this.removeListener=(e,r)=>(this.events.removeListener(e,r),this),this.off=(e,r)=>(this.events.off(e,r),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const r=new Tu;return await r.initialize(e),r}async request(e){return await this.signer.request(e,this.formatChainId(this.chainId))}sendAsync(e,r){this.signer.sendAsync(e,r,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:r,optional:s}=M5(this.rpc);try{const a=await new Promise(async(p,l)=>{var v;this.rpc.showQrModal&&((v=this.modal)==null||v.subscribeModal(D=>{!D.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),l(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(ld(Bc({namespaces:{[this.namespace]:r}},s&&{optionalNamespaces:{[this.namespace]:s}}),{pairingTopic:e==null?void 0:e.pairingTopic})).then(D=>{p(D)}).catch(D=>{l(new Error(D.message))})});if(!a)return;this.setChainIds(this.rpc.chains);const h=Vw(a.namespaces,[this.namespace]);this.setAccounts(h),this.events.emit("connect",{chainId:qc(this.chainId)})}catch(a){throw this.signer.logger.error(a),a}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:r}=e,{event:s}=r;s.name==="accountsChanged"?(this.accounts=this.parseAccounts(s.data),this.events.emit("accountsChanged",this.accounts)):s.name==="chainChanged"?this.setChainId(this.formatChainId(s.data)):this.events.emit(s.name,s.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const r=parseInt(e);this.chainId=r,this.events.emit("chainChanged",qc(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",ld(Bc({},Rt("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var r,s;this.rpc.showQrModal&&((r=this.modal)==null||r.closeModal(),(s=this.modal)==null||s.openModal({uri:e})),this.events.emit("display_uri",e)})}setHttpProvider(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const r=e.filter(s=>this.isCompatibleChainId(s)).map(s=>this.parseChainId(s));r.length&&(this.chainId=r[0],this.events.emit("chainChanged",qc(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const r=this.parseChainId(e);this.chainId=r,this.setHttpProvider(r)}}parseAccountId(e){const[r,s,a]=e.split(":");return{chainId:`${r}:${s}`,address:a}}setAccounts(e){this.accounts=e.filter(r=>this.parseChainId(this.parseAccountId(r).chainId)===this.chainId).map(r=>this.parseAccountId(r).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var r,s;return{chains:((r=e.chains)==null?void 0:r.map(a=>this.formatChainId(a)))||[`${this.namespace}:1`],optionalChains:e.optionalChains?e.optionalChains.map(a=>this.formatChainId(a)):void 0,methods:(e==null?void 0:e.methods)||nu,events:(e==null?void 0:e.events)||su,optionalMethods:(e==null?void 0:e.optionalMethods)||[],optionalEvents:(e==null?void 0:e.optionalEvents)||[],rpcMap:(e==null?void 0:e.rpcMap)||this.buildRpcMap(e.chains.concat(e.optionalChains||[]),e.projectId),showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:(s=e==null?void 0:e.qrModalOptions)!=null?s:void 0,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,r){const s={};return e.forEach(a=>{s[a]=this.getRpcUrl(a,r)}),s}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=ou(this.rpc.chains),this.signer=await O5.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal)try{const{Web3Modal:r}=await vb(()=>import("./index-fb343fc6.js").then(s=>s.i),["assets/index-fb343fc6.js","assets/index-c4e0238d.js","assets/index-8c31665f.css"]);this.modal=new r(Bc({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch{throw new Error("To use QR modal, please install @web3modal/standalone package")}}loadConnectOpts(e){if(!e)return;const{chains:r,optionalChains:s,rpcMap:a}=e;r&&_i(r)&&(this.rpc.chains=r.map(h=>this.formatChainId(h)),r.forEach(h=>{this.rpc.rpcMap[h]=(a==null?void 0:a[h])||this.getRpcUrl(h)})),s&&_i(s)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=s==null?void 0:s.map(h=>this.formatChainId(h)),s.forEach(h=>{this.rpc.rpcMap[h]=(a==null?void 0:a[h])||this.getRpcUrl(h)}))}getRpcUrl(e,r){var s;return((s=this.rpc.rpcMap)==null?void 0:s[e])||`${T5}?chainId=eip155:${e}&projectId=${r||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`);this.setChainIds(e?[this.formatChainId(e)]:this.session.namespaces[this.namespace].accounts),this.setAccounts(this.session.namespaces[this.namespace].accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(r=>this.parseAccount(r))}}const J5=Tu;export{J5 as EthereumProvider,Y5 as OPTIONAL_EVENTS,W5 as OPTIONAL_METHODS,su as REQUIRED_EVENTS,nu as REQUIRED_METHODS,Tu as default};
